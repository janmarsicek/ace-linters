{"version":3,"file":"bundle.simple.js","mappings":"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E,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,IAAI,GAAG,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,KAAK,GAAG,MAAM,GAAG,KAAK,GAAG,GAAG,EAAE,IAAI,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,EAAE,GAAG,EAAE,EAAE,IAAI,EAAE,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAA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","sources":["webpack://ace-linters-root/./node_modules/ace-code/src/ace.js","webpack://ace-linters-root/./node_modules/ace-code/src/anchor.js","webpack://ace-linters-root/./node_modules/ace-code/src/apply_delta.js","webpack://ace-linters-root/./node_modules/ace-code/src/autocomplete.js","webpack://ace-linters-root/./node_modules/ace-code/src/autocomplete/popup.js","webpack://ace-linters-root/./node_modules/ace-code/src/autocomplete/text_completer.js","webpack://ace-linters-root/./node_modules/ace-code/src/autocomplete/util.js","webpack://ace-linters-root/./node_modules/ace-code/src/background_tokenizer.js","webpack://ace-linters-root/./node_modules/ace-code/src/bidihandler.js","webpack://ace-linters-root/./node_modules/ace-code/src/clipboard.js","webpack://ace-linters-root/./node_modules/ace-code/src/commands/command_manager.js","webpack://ace-linters-root/./node_modules/ace-code/src/commands/default_commands.js","webpack://ace-linters-root/./node_modules/ace-code/src/commands/multi_select_commands.js","webpack://ace-linters-root/./node_modules/ace-code/src/config.js","webpack://ace-linters-root/./node_modules/ace-code/src/css/editor.css.js","webpack://ace-linters-root/./node_modules/ace-code/src/document.js","webpack://ace-linters-root/./node_modules/ace-code/src/edit_session.js","webpack://ace-linters-root/./node_modules/ace-code/src/edit_session/bracket_match.js","webpack://ace-linters-root/./node_modules/ace-code/src/edit_session/fold.js","webpack://ace-linters-root/./node_modules/ace-code/src/edit_session/fold_line.js","webpack://ace-linters-root/./node_modules/ace-code/src/edit_session/folding.js","webpack://ace-linters-root/./node_modules/ace-code/src/editor.js","webpack://ace-linters-root/./node_modules/ace-code/src/ext/error_marker.js","webpack://ace-linters-root/./node_modules/ace-code/src/ext/language_tools.js","webpack://ace-linters-root/./node_modules/ace-code/src/keyboard/hash_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/keyboard/keybinding.js","webpack://ace-linters-root/./node_modules/ace-code/src/keyboard/textinput.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/cursor.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/decorators.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/font_metrics.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/gutter.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/lines.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/marker.js","webpack://ace-linters-root/./node_modules/ace-code/src/layer/text.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/app_config.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/bidiutil.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/dom.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/event.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/event_emitter.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/keys.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/lang.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/net.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/oop.js","webpack://ace-linters-root/./node_modules/ace-code/src/lib/useragent.js","webpack://ace-linters-root/./node_modules/ace-code/src/line_widgets.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/behaviour.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/behaviour/css.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/behaviour/cstyle.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/behaviour/xml.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/css.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/css_completions.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/css_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/doc_comment_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/cstyle.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/fold_mode.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/html.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/lua.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/mixed.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/folding/xml.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/html.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/html_completions.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/html_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/javascript.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/javascript_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/json.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/json5.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/json5_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/json_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/less.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/less_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/lua.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/lua_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/matching_brace_outdent.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/scss.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/scss_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/text.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/text_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/tsx.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/typescript.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/typescript_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mode/xml_highlight_rules.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/default_gutter_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/default_handlers.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/dragdrop_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/fold_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/mouse_event.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/mouse_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/multi_select_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/mouse/touch_handler.js","webpack://ace-linters-root/./node_modules/ace-code/src/multi_select.js","webpack://ace-linters-root/./node_modules/ace-code/src/placeholder.js","webpack://ace-linters-root/./node_modules/ace-code/src/range.js","webpack://ace-linters-root/./node_modules/ace-code/src/range_list.js","webpack://ace-linters-root/./node_modules/ace-code/src/renderloop.js","webpack://ace-linters-root/./node_modules/ace-code/src/scrollbar.js","webpack://ace-linters-root/./node_modules/ace-code/src/scrollbar_custom.js","webpack://ace-linters-root/./node_modules/ace-code/src/search.js","webpack://ace-linters-root/./node_modules/ace-code/src/search_highlight.js","webpack://ace-linters-root/./node_modules/ace-code/src/selection.js","webpack://ace-linters-root/./node_modules/ace-code/src/snippets.js","webpack://ace-linters-root/./node_modules/ace-code/src/theme/textmate.css.js","webpack://ace-linters-root/./node_modules/ace-code/src/theme/textmate.js","webpack://ace-linters-root/./node_modules/ace-code/src/token_iterator.js","webpack://ace-linters-root/./node_modules/ace-code/src/tokenizer.js","webpack://ace-linters-root/./node_modules/ace-code/src/tooltip.js","webpack://ace-linters-root/./node_modules/ace-code/src/undomanager.js","webpack://ace-linters-root/./node_modules/ace-code/src/unicode.js","webpack://ace-linters-root/./node_modules/ace-code/src/virtual_renderer.js","webpack://ace-linters-root/./node_modules/ace-code/src/worker/worker_client.js","webpack://ace-linters-root/./node_modules/ace-code/src/ sync","webpack://ace-linters-root/./packages/ace-linters/css/linters.css","webpack://ace-linters-root/./node_modules/css-loader/dist/runtime/api.js","webpack://ace-linters-root/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://ace-linters-root/./node_modules/showdown/dist/showdown.js","webpack://ace-linters-root/./packages/ace-linters/css/linters.css?e7fb","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://ace-linters-root/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://ace-linters-root/./packages/ace-linters/components/description-tooltip.ts","webpack://ace-linters-root/./packages/ace-linters/index.ts","webpack://ace-linters-root/./packages/ace-linters/language-provider.ts","webpack://ace-linters-root/./packages/ace-linters/message-controller.ts","webpack://ace-linters-root/./packages/ace-linters/message-types.ts","webpack://ace-linters-root/./packages/ace-linters/type-converters/common-converters.ts","webpack://ace-linters-root/./packages/ace-linters/type-converters/typescript-converters.ts","webpack://ace-linters-root/./packages/demo/demo.ts","webpack://ace-linters-root/./packages/demo/docs-example/css-example.js","webpack://ace-linters-root/./packages/demo/docs-example/html-example.js","webpack://ace-linters-root/./packages/demo/docs-example/javascript-example.js","webpack://ace-linters-root/./packages/demo/docs-example/json-example.js","webpack://ace-linters-root/./packages/demo/docs-example/json5-example.js","webpack://ace-linters-root/./packages/demo/docs-example/jsx-example.js","webpack://ace-linters-root/./packages/demo/docs-example/less-example.js","webpack://ace-linters-root/./packages/demo/docs-example/lua-example.js","webpack://ace-linters-root/./packages/demo/docs-example/scss-example.js","webpack://ace-linters-root/./packages/demo/docs-example/tsx-example.js","webpack://ace-linters-root/./packages/demo/docs-example/typescript-example.js","webpack://ace-linters-root/./packages/ace-linters/web.worker.ts","webpack://ace-linters-root/webpack/bootstrap","webpack://ace-linters-root/webpack/runtime/compat get default export","webpack://ace-linters-root/webpack/runtime/define property getters","webpack://ace-linters-root/webpack/runtime/global","webpack://ace-linters-root/webpack/runtime/hasOwnProperty shorthand","webpack://ace-linters-root/webpack/runtime/make namespace object","webpack://ace-linters-root/webpack/runtime/publicPath","webpack://ace-linters-root/webpack/runtime/nonce","webpack://ace-linters-root/webpack/startup"],"sourcesContent":["/**\n * The main class required to set up an Ace instance in the browser.\n *\n * @class Ace\n **/\n\n\"use strict\";\n\"include loader_build\";\n\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\n\nvar Range = require(\"./range\").Range;\nvar Editor = require(\"./editor\").Editor;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar UndoManager = require(\"./undomanager\").UndoManager;\nvar Renderer = require(\"./virtual_renderer\").VirtualRenderer;\n\n// The following require()s are for inclusion in the built ace file\nrequire(\"./worker/worker_client\");\nrequire(\"./keyboard/hash_handler\");\nrequire(\"./placeholder\");\nrequire(\"./multi_select\");\nrequire(\"./mode/folding/fold_mode\");\nrequire(\"./theme/textmate\");\nrequire(\"./ext/error_marker\");\n\nexports.config = require(\"./config\");\n\n\n/**\n * Embeds the Ace editor into the DOM, at the element provided by `el`.\n * @param {String | Element} el Either the id of an element, or the element itself\n * @param {Object } options Options for the editor\n *\n **/\nexports.edit = function(el, options) {\n    if (typeof el == \"string\") {\n        var _id = el;\n        el = document.getElementById(_id);\n        if (!el)\n            throw new Error(\"ace.edit can't find div #\" + _id);\n    }\n\n    if (el && el.env && el.env.editor instanceof Editor)\n        return el.env.editor;\n\n    var value = \"\";\n    if (el && /input|textarea/i.test(el.tagName)) {\n        var oldNode = el;\n        value = oldNode.value;\n        el = dom.createElement(\"pre\");\n        oldNode.parentNode.replaceChild(el, oldNode);\n    } else if (el) {\n        value = el.textContent;\n        el.innerHTML = \"\";\n    }\n\n    var doc = exports.createEditSession(value);\n\n    var editor = new Editor(new Renderer(el), doc, options);\n\n    var env = {\n        document: doc,\n        editor: editor,\n        onResize: editor.resize.bind(editor, null)\n    };\n    if (oldNode) env.textarea = oldNode;\n    event.addListener(window, \"resize\", env.onResize);\n    editor.on(\"destroy\", function() {\n        event.removeListener(window, \"resize\", env.onResize);\n        env.editor.container.env = null; // prevent memory leak on old ie\n    });\n    editor.container.env = editor.env = env;\n    return editor;\n};\n\n/**\n * Creates a new [[EditSession]], and returns the associated [[Document]].\n * @param {Document | String} text {:textParam}\n * @param {TextMode} mode {:modeParam}\n *\n **/\nexports.createEditSession = function(text, mode) {\n    var doc = new EditSession(text, mode);\n    doc.setUndoManager(new UndoManager());\n    return doc;\n};\nexports.Range = Range;\nexports.Editor = Editor;\nexports.EditSession = EditSession;\nexports.UndoManager = UndoManager;\nexports.VirtualRenderer = Renderer;\nexports.version = exports.config.version;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\n/**\n *\n * Defines a floating pointer in the document. Whenever text is inserted or deleted before the cursor, the position of the anchor is updated.\n *\n * @class Anchor\n **/\n\n/**\n * Creates a new `Anchor` and associates it with a document.\n *\n * @param {Document} doc The document to associate with the anchor\n * @param {Number} row The starting row position\n * @param {Number} column The starting column position\n *\n * @constructor\n **/\n\nvar Anchor = exports.Anchor = function(doc, row, column) {\n    this.$onChange = this.onChange.bind(this);\n    this.attach(doc);\n    \n    if (typeof column == \"undefined\")\n        this.setPosition(row.row, row.column);\n    else\n        this.setPosition(row, column);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Returns an object identifying the `row` and `column` position of the current anchor.\n     * @returns {Ace.Point}\n     **/\n    this.getPosition = function() {\n        return this.$clipPositionToDocument(this.row, this.column);\n    };\n\n    /**\n     *\n     * Returns the current document.\n     * @returns {Document}\n     **/\n    this.getDocument = function() {\n        return this.document;\n    };\n\n    /**\n     * experimental: allows anchor to stick to the next on the left\n     */\n    this.$insertRight = false;\n    /**\n     * Fires whenever the anchor position changes.\n     *\n     * Both of these objects have a `row` and `column` property corresponding to the position.\n     *\n     * Events that can trigger this function include [[Anchor.setPosition `setPosition()`]].\n     *\n     * @event change\n     * @param {Object} e  An object containing information about the anchor position. It has two properties:\n     *  - `old`: An object describing the old Anchor position\n     *  - `value`: An object describing the new Anchor position\n     *\n     **/\n    /**\n     * Internal function called when `\"change\"` event fired.\n     * @param {Ace.Delta} delta\n     */\n    this.onChange = function(delta) {\n        if (delta.start.row == delta.end.row && delta.start.row != this.row)\n            return;\n\n        if (delta.start.row > this.row)\n            return;\n            \n        var point = $getTransformedPoint(delta, {row: this.row, column: this.column}, this.$insertRight);\n        this.setPosition(point.row, point.column, true);\n    };\n    \n    function $pointsInOrder(point1, point2, equalPointsInOrder) {\n        var bColIsAfter = equalPointsInOrder ? point1.column <= point2.column : point1.column < point2.column;\n        return (point1.row < point2.row) || (point1.row == point2.row && bColIsAfter);\n    }\n            \n    function $getTransformedPoint(delta, point, moveIfEqual) {\n        // Get delta info.\n        var deltaIsInsert = delta.action == \"insert\";\n        var deltaRowShift = (deltaIsInsert ? 1 : -1) * (delta.end.row    - delta.start.row);\n        var deltaColShift = (deltaIsInsert ? 1 : -1) * (delta.end.column - delta.start.column);\n        var deltaStart = delta.start;\n        var deltaEnd = deltaIsInsert ? deltaStart : delta.end; // Collapse insert range.\n        \n        // DELTA AFTER POINT: No change needed.\n        if ($pointsInOrder(point, deltaStart, moveIfEqual)) {\n            return {\n                row: point.row,\n                column: point.column\n            };\n        }\n        \n        // DELTA BEFORE POINT: Move point by delta shift.\n        if ($pointsInOrder(deltaEnd, point, !moveIfEqual)) {\n            return {\n                row: point.row + deltaRowShift,\n                column: point.column + (point.row == deltaEnd.row ? deltaColShift : 0)\n            };\n        }\n        \n        // DELTA ENVELOPS POINT (delete only): Move point to delta start.\n        // TODO warn if delta.action != \"remove\" ?\n        \n        return {\n            row: deltaStart.row,\n            column: deltaStart.column\n        };\n    }\n\n    /**\n     * Sets the anchor position to the specified row and column. If `noClip` is `true`, the position is not clipped.\n     * @param {Number} row The row index to move the anchor to\n     * @param {Number} column The column index to move the anchor to\n     * @param {Boolean} noClip Identifies if you want the position to be clipped\n     *\n     **/\n    this.setPosition = function(row, column, noClip) {\n        var pos;\n        if (noClip) {\n            pos = {\n                row: row,\n                column: column\n            };\n        } else {\n            pos = this.$clipPositionToDocument(row, column);\n        }\n\n        if (this.row == pos.row && this.column == pos.column)\n            return;\n\n        var old = {\n            row: this.row,\n            column: this.column\n        };\n\n        this.row = pos.row;\n        this.column = pos.column;\n        this._signal(\"change\", {\n            old: old,\n            value: pos\n        });\n    };\n\n    /**\n     * When called, the `\"change\"` event listener is removed.\n     *\n     **/\n    this.detach = function() {\n        this.document.off(\"change\", this.$onChange);\n    };\n\n    /**\n     * When called, the `\"change\"` event listener is appended.\n     * @param {Document} doc The document to associate with\n     *\n     **/\n    this.attach = function(doc) {\n        this.document = doc || this.document;\n        this.document.on(\"change\", this.$onChange);\n    };\n\n    /**\n     * Clips the anchor position to the specified row and column.\n     * @param {Number} row The row index to clip the anchor to\n     * @param {Number} column The column index to clip the anchor to\n     * @returns {Ace.Point}\n     *\n     **/\n    this.$clipPositionToDocument = function(row, column) {\n        var pos = {};\n\n        if (row >= this.document.getLength()) {\n            pos.row = Math.max(0, this.document.getLength() - 1);\n            pos.column = this.document.getLine(pos.row).length;\n        }\n        else if (row < 0) {\n            pos.row = 0;\n            pos.column = 0;\n        }\n        else {\n            pos.row = row;\n            pos.column = Math.min(this.document.getLine(pos.row).length, Math.max(0, column));\n        }\n\n        if (column < 0)\n            pos.column = 0;\n\n        return pos;\n    };\n\n}).call(Anchor.prototype);\n","\"use strict\";\n\nfunction throwDeltaError(delta, errorText){\n    console.log(\"Invalid Delta:\", delta);\n    throw \"Invalid Delta: \" + errorText;\n}\n\nfunction positionInDocument(docLines, position) {\n    return position.row    >= 0 && position.row    <  docLines.length &&\n           position.column >= 0 && position.column <= docLines[position.row].length;\n}\n\nfunction validateDelta(docLines, delta) {\n    // Validate action string.\n    if (delta.action != \"insert\" && delta.action != \"remove\")\n        throwDeltaError(delta, \"delta.action must be 'insert' or 'remove'\");\n    \n    // Validate lines type.\n    if (!(delta.lines instanceof Array))\n        throwDeltaError(delta, \"delta.lines must be an Array\");\n\n    // Validate range type.\n    if (!delta.start || !delta.end)\n       throwDeltaError(delta, \"delta.start/end must be an present\");\n\n    // Validate that the start point is contained in the document.\n    var start = delta.start;\n    if (!positionInDocument(docLines, delta.start))\n        throwDeltaError(delta, \"delta.start must be contained in document\");\n    \n    // Validate that the end point is contained in the document (remove deltas only).\n    var end = delta.end;\n    if (delta.action == \"remove\" && !positionInDocument(docLines, end))\n        throwDeltaError(delta, \"delta.end must contained in document for 'remove' actions\");\n    \n    // Validate that the .range size matches the .lines size.\n    var numRangeRows = end.row - start.row;\n    var numRangeLastLineChars = (end.column - (numRangeRows == 0 ? start.column : 0));\n    if (numRangeRows != delta.lines.length - 1 || delta.lines[numRangeRows].length != numRangeLastLineChars)\n        throwDeltaError(delta, \"delta.range must match delta lines\");\n}\n\nexports.applyDelta = function(docLines, delta, doNotValidate) {\n    // disabled validation since it breaks autocompletion popup\n    // if (!doNotValidate)\n    //    validateDelta(docLines, delta);\n    \n    var row = delta.start.row;\n    var startColumn = delta.start.column;\n    var line = docLines[row] || \"\";\n    switch (delta.action) {\n        case \"insert\":\n            var lines = delta.lines;\n            if (lines.length === 1) {\n                docLines[row] = line.substring(0, startColumn) + delta.lines[0] + line.substring(startColumn);\n            } else {\n                var args = [row, 1].concat(delta.lines);\n                docLines.splice.apply(docLines, args);\n                docLines[row] = line.substring(0, startColumn) + docLines[row];\n                docLines[row + delta.lines.length - 1] += line.substring(startColumn);\n            }\n            break;\n        case \"remove\":\n            var endColumn = delta.end.column;\n            var endRow = delta.end.row;\n            if (row === endRow) {\n                docLines[row] = line.substring(0, startColumn) + line.substring(endColumn);\n            } else {\n                docLines.splice(\n                    row, endRow - row + 1,\n                    line.substring(0, startColumn) + docLines[endRow].substring(endColumn)\n                );\n            }\n            break;\n    }\n};\n","\"use strict\";\n\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar AcePopup = require(\"./autocomplete/popup\").AcePopup;\nvar util = require(\"./autocomplete/util\");\nvar lang = require(\"./lib/lang\");\nvar dom = require(\"./lib/dom\");\nvar snippetManager = require(\"./snippets\").snippetManager;\nvar config = require(\"./config\");\n\n/**\n * Completion represents a text snippet that is proposed to complete text\n * @typedef Completion\n * @property {string} [value] - text that would be inserted when selecting this completion (if `type` is \"value\")\n * @property {string} [snippet] - snippet that would be inserted, if completion's type is \"snippet\"\n * @property {number} [score] - determine order in which completions would be displayed, less score - further from start\n * @property {string} [meta] - small description of completion\n * @property {string} [caption] - text that would be displayed in completion list, if omitted `value` or `snippet`\n * would be shown instead\n * @property {string} [docHTML] - html string that would be displayed as additional popup\n * @property {string} [docText] - plain text that would be displayed as additional popup. If `docHtml` exists, it would\n * be used instead of `docText`\n * @property {string} [completerId] - completer's identifier\n */\n\nvar Autocomplete = function() {\n    this.autoInsert = false;\n    this.autoSelect = true;\n    this.exactMatch = false;\n    this.gatherCompletionsId = 0;\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys(this.commands);\n\n    this.blurListener = this.blurListener.bind(this);\n    this.changeListener = this.changeListener.bind(this);\n    this.mousedownListener = this.mousedownListener.bind(this);\n    this.mousewheelListener = this.mousewheelListener.bind(this);\n\n    this.changeTimer = lang.delayedCall(function() {\n        this.updateCompletions(true);\n    }.bind(this));\n\n    this.tooltipTimer = lang.delayedCall(this.updateDocTooltip.bind(this), 50);\n};\n\n(function() {\n\n    this.$init = function() {\n        this.popup = new AcePopup(document.body || document.documentElement);\n        this.popup.on(\"click\", function(e) {\n            this.insertMatch();\n            e.stop();\n        }.bind(this));\n        this.popup.focus = this.editor.focus.bind(this.editor);\n        this.popup.on(\"show\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"select\", this.tooltipTimer.bind(null, null));\n        this.popup.on(\"changeHoverMarker\", this.tooltipTimer.bind(null, null));\n        return this.popup;\n    };\n\n    this.getPopup = function() {\n        return this.popup || this.$init();\n    };\n\n    this.openPopup = function(editor, prefix, keepPopupPosition) {\n        if (!this.popup)\n            this.$init();\n\n        this.popup.autoSelect = this.autoSelect;\n\n        this.popup.setData(this.completions.filtered, this.completions.filterText);\n\n        editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        \n        var renderer = editor.renderer;\n        this.popup.setRow(this.autoSelect ? 0 : -1);\n        if (!keepPopupPosition) {\n            this.popup.setTheme(editor.getTheme());\n            this.popup.setFontSize(editor.getFontSize());\n\n            var lineHeight = renderer.layerConfig.lineHeight;\n\n            var pos = renderer.$cursorLayer.getPixelPosition(this.base, true);\n            pos.left -= this.popup.getTextLeftOffset();\n\n            var rect = editor.container.getBoundingClientRect();\n            pos.top += rect.top - renderer.layerConfig.offset;\n            pos.left += rect.left - editor.renderer.scrollLeft;\n            pos.left += renderer.gutterWidth;\n\n            this.popup.show(pos, lineHeight);\n        } else if (keepPopupPosition && !prefix) {\n            this.detach();\n        }\n        this.changeTimer.cancel();\n    };\n\n    this.detach = function() {\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.off(\"changeSelection\", this.changeListener);\n        this.editor.off(\"blur\", this.blurListener);\n        this.editor.off(\"mousedown\", this.mousedownListener);\n        this.editor.off(\"mousewheel\", this.mousewheelListener);\n        this.changeTimer.cancel();\n        this.hideDocTooltip();\n\n        this.gatherCompletionsId += 1;\n        if (this.popup && this.popup.isOpen)\n            this.popup.hide();\n\n        if (this.base)\n            this.base.detach();\n        this.activated = false;\n        this.completions = this.base = null;\n    };\n\n    this.changeListener = function(e) {\n        var cursor = this.editor.selection.lead;\n        if (cursor.row != this.base.row || cursor.column < this.base.column) {\n            this.detach();\n        }\n        if (this.activated)\n            this.changeTimer.schedule();\n        else\n            this.detach();\n    };\n\n    this.blurListener = function(e) {\n        // we have to check if activeElement is a child of popup because\n        // on IE preventDefault doesn't stop scrollbar from being focussed\n        var el = document.activeElement;\n        var text = this.editor.textInput.getElement();\n        var fromTooltip = e.relatedTarget && this.tooltipNode && this.tooltipNode.contains(e.relatedTarget);\n        var container = this.popup && this.popup.container;\n        if (el != text && el.parentNode != container && !fromTooltip\n            && el != this.tooltipNode && e.relatedTarget != text\n        ) {\n            this.detach();\n        }\n    };\n\n    this.mousedownListener = function(e) {\n        this.detach();\n    };\n\n    this.mousewheelListener = function(e) {\n        this.detach();\n    };\n\n    this.goTo = function(where) {\n        this.popup.goTo(where);\n    };\n\n    this.insertMatch = function(data, options) {\n        if (!data)\n            data = this.popup.getData(this.popup.getRow());\n        if (!data)\n            return false;\n\n        var completions = this.completions;\n        this.editor.startOperation({command: {name: \"insertMatch\"}});\n        if (data.completer && data.completer.insertMatch) {\n            data.completer.insertMatch(this.editor, data);\n        } else {\n            // TODO add support for options.deleteSuffix\n            if (!completions)\n                return false;\n            if (completions.filterText) {\n                var ranges = this.editor.selection.getAllRanges();\n                for (var i = 0, range; range = ranges[i]; i++) {\n                    range.start.column -= completions.filterText.length;\n                    this.editor.session.remove(range);\n                }\n            }\n            if (data.snippet)\n                snippetManager.insertSnippet(this.editor, data.snippet, data.range);\n            else {\n                this.$insertString(data);\n            }\n\n            if (data.command && data.command === \"startAutocomplete\") {\n                this.editor.execCommand(data.command);\n            }\n        }\n        // detach only if new popup was not opened while inserting match\n        if (this.completions == completions)\n            this.detach();\n        this.editor.endOperation();\n    };\n\n    this.$insertString = function (data) {\n        var text = data.value || data;\n        if (data.range) {\n            if (this.editor.inVirtualSelectionMode) {\n                return this.editor.session.replace(data.range, text);\n            }\n            this.editor.forEachSelection(() => {\n                var range = this.editor.getSelectionRange();\n                if (data.range.compareRange(range) === 0) {\n                    this.editor.session.replace(data.range, text);\n                }\n                else {\n                    this.editor.insert(text);\n                }\n            }, null, {keepOrder: true});\n        }\n        else {\n            this.editor.execCommand(\"insertstring\", text);\n        }\n    };\n\n    this.commands = {\n        \"Up\": function(editor) { editor.completer.goTo(\"up\"); },\n        \"Down\": function(editor) { editor.completer.goTo(\"down\"); },\n        \"Ctrl-Up|Ctrl-Home\": function(editor) { editor.completer.goTo(\"start\"); },\n        \"Ctrl-Down|Ctrl-End\": function(editor) { editor.completer.goTo(\"end\"); },\n\n        \"Esc\": function(editor) { editor.completer.detach(); },\n        \"Return\": function(editor) { return editor.completer.insertMatch(); },\n        \"Shift-Return\": function(editor) { editor.completer.insertMatch(null, {deleteSuffix: true}); },\n        \"Tab\": function(editor) {\n            var result = editor.completer.insertMatch();\n            if (!result && !editor.tabstopManager)\n                editor.completer.goTo(\"down\");\n            else\n                return result;\n        },\n\n        \"PageUp\": function(editor) { editor.completer.popup.gotoPageUp(); },\n        \"PageDown\": function(editor) { editor.completer.popup.gotoPageDown(); }\n    };\n\n    this.gatherCompletions = function(editor, callback) {\n        var session = editor.getSession();\n        var pos = editor.getCursorPosition();\n\n        var prefix = util.getCompletionPrefix(editor);\n\n        this.base = session.doc.createAnchor(pos.row, pos.column - prefix.length);\n        this.base.$insertRight = true;\n\n        var matches = [];\n        var total = editor.completers.length;\n        editor.completers.forEach(function(completer, i) {\n            completer.getCompletions(editor, session, pos, prefix, function(err, results) {\n                if (!err && results)\n                    matches = matches.concat(results);\n                // Fetch prefix again, because they may have changed by now\n                callback(null, {\n                    prefix: util.getCompletionPrefix(editor),\n                    matches: matches,\n                    finished: (--total === 0)\n                });\n            });\n        });\n        return true;\n    };\n\n    this.showPopup = function(editor, options) {\n        if (this.editor)\n            this.detach();\n\n        this.activated = true;\n\n        this.editor = editor;\n        if (editor.completer != this) {\n            if (editor.completer)\n                editor.completer.detach();\n            editor.completer = this;\n        }\n\n        editor.on(\"changeSelection\", this.changeListener);\n        editor.on(\"blur\", this.blurListener);\n        editor.on(\"mousedown\", this.mousedownListener);\n        editor.on(\"mousewheel\", this.mousewheelListener);\n\n        this.updateCompletions(false, options);\n    };\n\n    this.updateCompletions = function(keepPopupPosition, options) {\n        if (keepPopupPosition && this.base && this.completions) {\n            var pos = this.editor.getCursorPosition();\n            var prefix = this.editor.session.getTextRange({start: this.base, end: pos});\n            if (prefix == this.completions.filterText)\n                return;\n            this.completions.setFilter(prefix);\n            if (!this.completions.filtered.length)\n                return this.detach();\n            if (this.completions.filtered.length == 1\n            && this.completions.filtered[0].value == prefix\n            && !this.completions.filtered[0].snippet)\n                return this.detach();\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n            return;\n        }\n        \n        if (options && options.matches) {\n            var pos = this.editor.getSelectionRange().start;\n            this.base = this.editor.session.doc.createAnchor(pos.row, pos.column);\n            this.base.$insertRight = true;\n            this.completions = new FilteredList(options.matches);\n            return this.openPopup(this.editor, \"\", keepPopupPosition);\n        }\n\n        // Save current gatherCompletions session, session is close when a match is insert\n        var _id = this.gatherCompletionsId;\n\n        // Only detach if result gathering is finished\n        var detachIfFinished = function(results) {\n            if (!results.finished) return;\n            return this.detach();\n        }.bind(this);\n\n        var processResults = function(results) {\n            var prefix = results.prefix;\n            var matches = results.matches;\n\n            this.completions = new FilteredList(matches);\n\n            if (this.exactMatch)\n                this.completions.exactMatch = true;\n\n            this.completions.setFilter(prefix);\n            var filtered = this.completions.filtered;\n\n            // No results\n            if (!filtered.length)\n                return detachIfFinished(results);\n\n            // One result equals to the prefix\n            if (filtered.length == 1 && filtered[0].value == prefix && !filtered[0].snippet)\n                return detachIfFinished(results);\n\n            // Autoinsert if one result\n            if (this.autoInsert && filtered.length == 1 && results.finished)\n                return this.insertMatch(filtered[0]);\n\n            this.openPopup(this.editor, prefix, keepPopupPosition);\n        }.bind(this);\n\n        var isImmediate = true;\n        var immediateResults = null;\n        this.gatherCompletions(this.editor, function(err, results) {\n            var prefix = results.prefix;\n            var matches = results && results.matches;\n\n            if (!matches || !matches.length)\n                return detachIfFinished(results);\n\n            // Wrong prefix or wrong session -> ignore\n            if (prefix.indexOf(results.prefix) !== 0 || _id != this.gatherCompletionsId)\n                return;\n\n            // If multiple completers return their results immediately, we want to process them together\n            if (isImmediate) {\n                immediateResults = results;\n                return;\n            }\n\n            processResults(results);\n        }.bind(this));\n        \n        isImmediate = false;\n        if (immediateResults) {\n            var results = immediateResults;\n            immediateResults = null;\n            processResults(results);\n        }\n    };\n\n    this.cancelContextMenu = function() {\n        this.editor.$mouseHandler.cancelContextMenu();\n    };\n\n    this.updateDocTooltip = function() {\n        var popup = this.popup;\n        var all = popup.data;\n        var selected = all && (all[popup.getHoveredRow()] || all[popup.getRow()]);\n        var doc = null;\n        if (!selected || !this.editor || !this.popup.isOpen)\n            return this.hideDocTooltip();\n        this.editor.completers.some(function(completer) {\n            if (completer.getDocTooltip && selected.completerId === completer.id)\n                doc = completer.getDocTooltip(selected);\n            return doc;\n        });\n        if (!doc && typeof selected != \"string\")\n            doc = selected;\n\n        if (typeof doc == \"string\")\n            doc = {docText: doc};\n        if (!doc || !(doc.docHTML || doc.docText))\n            return this.hideDocTooltip();\n        this.showDocTooltip(doc);\n    };\n\n    this.showDocTooltip = function(item) {\n        if (!this.tooltipNode) {\n            this.tooltipNode = dom.createElement(\"div\");\n            this.tooltipNode.className = \"ace_tooltip ace_doc-tooltip\";\n            this.tooltipNode.style.margin = 0;\n            this.tooltipNode.style.pointerEvents = \"auto\";\n            this.tooltipNode.tabIndex = -1;\n            this.tooltipNode.onblur = this.blurListener.bind(this);\n            this.tooltipNode.onclick = this.onTooltipClick.bind(this);\n        }\n\n        var tooltipNode = this.tooltipNode;\n        if (item.docHTML) {\n            tooltipNode.innerHTML = item.docHTML;\n        } else if (item.docText) {\n            tooltipNode.textContent = item.docText;\n        }\n\n        if (!tooltipNode.parentNode)\n            document.body.appendChild(tooltipNode);\n        var popup = this.popup;\n        var rect = popup.container.getBoundingClientRect();\n        tooltipNode.style.top = popup.container.style.top;\n        tooltipNode.style.bottom = popup.container.style.bottom;\n\n        tooltipNode.style.display = \"block\";\n        if (window.innerWidth - rect.right < 320) {\n            if (rect.left < 320) {\n                if(popup.isTopdown) {\n                    tooltipNode.style.top = rect.bottom + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                } else {\n                    tooltipNode.style.top = popup.container.offsetTop - tooltipNode.offsetHeight + \"px\";\n                    tooltipNode.style.left = rect.left + \"px\";\n                    tooltipNode.style.right = \"\";\n                    tooltipNode.style.bottom = \"\";\n                }\n            } else {\n                tooltipNode.style.right = window.innerWidth - rect.left + \"px\";\n                tooltipNode.style.left = \"\";\n            }\n        } else {\n            tooltipNode.style.left = (rect.right + 1) + \"px\";\n            tooltipNode.style.right = \"\";\n        }\n    };\n\n    this.hideDocTooltip = function() {\n        this.tooltipTimer.cancel();\n        if (!this.tooltipNode) return;\n        var el = this.tooltipNode;\n        if (!this.editor.isFocused() && document.activeElement == el)\n            this.editor.focus();\n        this.tooltipNode = null;\n        if (el.parentNode)\n            el.parentNode.removeChild(el);\n    };\n    \n    this.onTooltipClick = function(e) {\n        var a = e.target;\n        while (a && a != this.tooltipNode) {\n            if (a.nodeName == \"A\" && a.href) {\n                a.rel = \"noreferrer\";\n                a.target = \"_blank\";\n                break;\n            }\n            a = a.parentNode;\n        }\n    };\n\n    this.destroy = function() {\n        this.detach();\n        if (this.popup) {\n            this.popup.destroy();\n            var el = this.popup.container;\n            if (el && el.parentNode)\n                el.parentNode.removeChild(el);\n        }\n        if (this.editor && this.editor.completer == this)\n            this.editor.completer == null;\n        this.popup = null;\n    };\n\n}).call(Autocomplete.prototype);\n\n\nAutocomplete.for = function(editor) {\n    if (editor.completer) {\n        return editor.completer;\n    }\n    if (config.get(\"sharedPopups\")) {\n        if (!Autocomplete.$shared)\n            Autocomplete.$sharedInstance = new Autocomplete();\n        editor.completer = Autocomplete.$sharedInstance;\n    } else {\n        editor.completer = new Autocomplete();\n        editor.once(\"destroy\", function(e, editor) {\n            editor.completer.destroy();\n        });\n    }\n    return editor.completer;\n};\n\nAutocomplete.startCommand = {\n    name: \"startAutocomplete\",\n    exec: function(editor, options) {\n        var completer = Autocomplete.for(editor);\n        completer.autoInsert = false;\n        completer.autoSelect = true;\n        completer.showPopup(editor, options);\n        // prevent ctrl-space opening context menu on firefox on mac\n        completer.cancelContextMenu();\n    },\n    bindKey: \"Ctrl-Space|Ctrl-Shift-Space|Alt-Space\"\n};\n\nvar FilteredList = function(array, filterText) {\n    this.all = array;\n    this.filtered = array;\n    this.filterText = filterText || \"\";\n    this.exactMatch = false;\n};\n(function(){\n    this.setFilter = function(str) {\n        if (str.length > this.filterText && str.lastIndexOf(this.filterText, 0) === 0)\n            var matches = this.filtered;\n        else\n            var matches = this.all;\n\n        this.filterText = str;\n        matches = this.filterCompletions(matches, this.filterText);\n        matches = matches.sort(function(a, b) {\n            return b.exactMatch - a.exactMatch || b.$score - a.$score \n                || (a.caption || a.value).localeCompare(b.caption || b.value);\n        });\n\n        // make unique\n        var prev = null;\n        matches = matches.filter(function(item){\n            var caption = item.snippet || item.caption || item.value;\n            if (caption === prev) return false;\n            prev = caption;\n            return true;\n        });\n\n        this.filtered = matches;\n    };\n    this.filterCompletions = function(items, needle) {\n        var results = [];\n        var upper = needle.toUpperCase();\n        var lower = needle.toLowerCase();\n        loop: for (var i = 0, item; item = items[i]; i++) {\n            var caption = item.caption || item.value || item.snippet;\n            if (!caption) continue;\n            var lastIndex = -1;\n            var matchMask = 0;\n            var penalty = 0;\n            var index, distance;\n\n            if (this.exactMatch) {\n                if (needle !== caption.substr(0, needle.length))\n                    continue loop;\n            } else {\n                /**\n                 * It is for situation then, for example, we find some like 'tab' in item.value=\"Check the table\"\n                 * and want to see \"Check the TABle\" but see \"Check The tABle\".\n                 */\n                var fullMatchIndex = caption.toLowerCase().indexOf(lower);\n                if (fullMatchIndex > -1) {\n                    penalty = fullMatchIndex;\n                } else {\n                    // caption char iteration is faster in Chrome but slower in Firefox, so lets use indexOf\n                    for (var j = 0; j < needle.length; j++) {\n                        // TODO add penalty on case mismatch\n                        var i1 = caption.indexOf(lower[j], lastIndex + 1);\n                        var i2 = caption.indexOf(upper[j], lastIndex + 1);\n                        index = (i1 >= 0) ? ((i2 < 0 || i1 < i2) ? i1 : i2) : i2;\n                        if (index < 0)\n                            continue loop;\n                        distance = index - lastIndex - 1;\n                        if (distance > 0) {\n                            // first char mismatch should be more sensitive\n                            if (lastIndex === -1)\n                                penalty += 10;\n                            penalty += distance;\n                            matchMask = matchMask | (1 << j);\n                        }\n                        lastIndex = index;\n                    }\n                }\n            }\n            item.matchMask = matchMask;\n            item.exactMatch = penalty ? 0 : 1;\n            item.$score = (item.score || 0) - penalty;\n            results.push(item);\n        }\n        return results;\n    };\n}).call(FilteredList.prototype);\n\nexports.Autocomplete = Autocomplete;\nexports.FilteredList = FilteredList;\n","\"use strict\";\n\nvar Renderer = require(\"../virtual_renderer\").VirtualRenderer;\nvar Editor = require(\"../editor\").Editor;\nvar Range = require(\"../range\").Range;\nvar event = require(\"../lib/event\");\nvar lang = require(\"../lib/lang\");\nvar dom = require(\"../lib/dom\");\n\nvar $singleLineEditor = function(el) {\n    var renderer = new Renderer(el);\n\n    renderer.$maxLines = 4;\n\n    var editor = new Editor(renderer);\n\n    editor.setHighlightActiveLine(false);\n    editor.setShowPrintMargin(false);\n    editor.renderer.setShowGutter(false);\n    editor.renderer.setHighlightGutterLine(false);\n\n    editor.$mouseHandler.$focusTimeout = 0;\n    editor.$highlightTagPending = true;\n\n    return editor;\n};\n\n/**\n * This object is used in some places where needed to show popups - like prompt; autocomplete etc.\n * @class\n */\n\n/**\n * Creates and renders single line editor in popup window. If `parentNode` param is isset, then attaching it to this element.\n * @param {Element} parentNode\n * @constructor\n */\nvar AcePopup = function(parentNode) {\n    var el = dom.createElement(\"div\");\n    var popup = new $singleLineEditor(el);\n\n    if (parentNode)\n        parentNode.appendChild(el);\n    el.style.display = \"none\";\n    popup.renderer.content.style.cursor = \"default\";\n    popup.renderer.setStyle(\"ace_autocomplete\");\n\n    popup.setOption(\"displayIndentGuides\", false);\n    popup.setOption(\"dragDelay\", 150);\n\n    var noop = function(){};\n\n    popup.focus = noop;\n    popup.$isFocused = true;\n\n    popup.renderer.$cursorLayer.restartTimer = noop;\n    popup.renderer.$cursorLayer.element.style.opacity = 0;\n\n    popup.renderer.$maxLines = 8;\n    popup.renderer.$keepTextAreaAtCursor = false;\n\n    popup.setHighlightActiveLine(false);\n    // set default highlight color\n    popup.session.highlight(\"\");\n    popup.session.$searchHighlight.clazz = \"ace_highlight-marker\";\n\n    popup.on(\"mousedown\", function(e) {\n        var pos = e.getDocumentPosition();\n        popup.selection.moveToPosition(pos);\n        selectionMarker.start.row = selectionMarker.end.row = pos.row;\n        e.stop();\n    });\n\n    var lastMouseEvent;\n    var hoverMarker = new Range(-1,0,-1,Infinity);\n    var selectionMarker = new Range(-1,0,-1,Infinity);\n    selectionMarker.id = popup.session.addMarker(selectionMarker, \"ace_active-line\", \"fullLine\");\n    popup.setSelectOnHover = function(val) {\n        if (!val) {\n            hoverMarker.id = popup.session.addMarker(hoverMarker, \"ace_line-hover\", \"fullLine\");\n        } else if (hoverMarker.id) {\n            popup.session.removeMarker(hoverMarker.id);\n            hoverMarker.id = null;\n        }\n    };\n    popup.setSelectOnHover(false);\n    popup.on(\"mousemove\", function(e) {\n        if (!lastMouseEvent) {\n            lastMouseEvent = e;\n            return;\n        }\n        if (lastMouseEvent.x == e.x && lastMouseEvent.y == e.y) {\n            return;\n        }\n        lastMouseEvent = e;\n        lastMouseEvent.scrollTop = popup.renderer.scrollTop;\n        var row = lastMouseEvent.getDocumentPosition().row;\n        if (hoverMarker.start.row != row) {\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row);\n        }\n    });\n    popup.renderer.on(\"beforeRender\", function() {\n        if (lastMouseEvent && hoverMarker.start.row != -1) {\n            lastMouseEvent.$pos = null;\n            var row = lastMouseEvent.getDocumentPosition().row;\n            if (!hoverMarker.id)\n                popup.setRow(row);\n            setHoverMarker(row, true);\n        }\n    });\n    popup.renderer.on(\"afterRender\", function() {\n        var row = popup.getRow();\n        var t = popup.renderer.$textLayer;\n        var selected = t.element.childNodes[row - t.config.firstRow];\n        if (selected !== t.selectedNode && t.selectedNode)\n            dom.removeCssClass(t.selectedNode, \"ace_selected\");\n        t.selectedNode = selected;\n        if (selected)\n            dom.addCssClass(selected, \"ace_selected\");\n    });\n    var hideHoverMarker = function() { setHoverMarker(-1); };\n    var setHoverMarker = function(row, suppressRedraw) {\n        if (row !== hoverMarker.start.row) {\n            hoverMarker.start.row = hoverMarker.end.row = row;\n            if (!suppressRedraw)\n                popup.session._emit(\"changeBackMarker\");\n            popup._emit(\"changeHoverMarker\");\n        }\n    };\n    popup.getHoveredRow = function() {\n        return hoverMarker.start.row;\n    };\n\n    event.addListener(popup.container, \"mouseout\", hideHoverMarker);\n    popup.on(\"hide\", hideHoverMarker);\n    popup.on(\"changeSelection\", hideHoverMarker);\n\n    popup.session.doc.getLength = function() {\n        return popup.data.length;\n    };\n    popup.session.doc.getLine = function(i) {\n        var data = popup.data[i];\n        if (typeof data == \"string\")\n            return data;\n        return (data && data.value) || \"\";\n    };\n\n    var bgTokenizer = popup.session.bgTokenizer;\n    bgTokenizer.$tokenizeRow = function(row) {\n        var data = popup.data[row];\n        var tokens = [];\n        if (!data)\n            return tokens;\n        if (typeof data == \"string\")\n            data = {value: data};\n        var caption = data.caption || data.value || data.name;\n\n        function addToken(value, className) {\n            value && tokens.push({\n                type: (data.className || \"\") + (className || \"\"), \n                value: value\n            });\n        }\n        \n        var lower = caption.toLowerCase();\n        var filterText = (popup.filterText || \"\").toLowerCase();\n        var lastIndex = 0;\n        var lastI = 0;\n        for (var i = 0; i <= filterText.length; i++) {\n            if (i != lastI && (data.matchMask & (1 << i) || i == filterText.length)) {\n                var sub = filterText.slice(lastI, i);\n                lastI = i;\n                var index = lower.indexOf(sub, lastIndex);\n                if (index == -1) continue;\n                addToken(caption.slice(lastIndex, index), \"\");\n                lastIndex = index + sub.length;\n                addToken(caption.slice(index, lastIndex), \"completion-highlight\");\n            }\n        }\n        addToken(caption.slice(lastIndex, caption.length), \"\");\n        \n        if (data.meta)\n            tokens.push({type: \"completion-meta\", value: data.meta});\n        if (data.message)\n            tokens.push({type: \"completion-message\", value: data.message});\n\n        return tokens;\n    };\n    bgTokenizer.$updateOnChange = noop;\n    bgTokenizer.start = noop;\n\n    popup.session.$computeWidth = function() {\n        return this.screenWidth = 0;\n    };\n\n    // public\n    popup.isOpen = false;\n    popup.isTopdown = false;\n    popup.autoSelect = true;\n    popup.filterText = \"\";\n\n    popup.data = [];\n    popup.setData = function(list, filterText) {\n        popup.filterText = filterText || \"\";\n        popup.setValue(lang.stringRepeat(\"\\n\", list.length), -1);\n        popup.data = list || [];\n        popup.setRow(0);\n    };\n    popup.getData = function(row) {\n        return popup.data[row];\n    };\n\n    popup.getRow = function() {\n        return selectionMarker.start.row;\n    };\n    popup.setRow = function(line) {\n        line = Math.max(this.autoSelect ? 0 : -1, Math.min(this.data.length, line));\n        if (selectionMarker.start.row != line) {\n            popup.selection.clearSelection();\n            selectionMarker.start.row = selectionMarker.end.row = line || 0;\n            popup.session._emit(\"changeBackMarker\");\n            popup.moveCursorTo(line || 0, 0);\n            if (popup.isOpen)\n                popup._signal(\"select\");\n        }\n    };\n\n    popup.on(\"changeSelection\", function() {\n        if (popup.isOpen)\n            popup.setRow(popup.selection.lead.row);\n        popup.renderer.scrollCursorIntoView();\n    });\n\n    popup.hide = function() {\n        this.container.style.display = \"none\";\n        this._signal(\"hide\");\n        popup.isOpen = false;\n    };\n    popup.show = function(pos, lineHeight, topdownOnly) {\n        var el = this.container;\n        var screenHeight = window.innerHeight;\n        var screenWidth = window.innerWidth;\n        var renderer = this.renderer;\n        // var maxLines = Math.min(renderer.$maxLines, this.session.getLength());\n        var maxH = renderer.$maxLines * lineHeight * 1.4;\n        var top = pos.top + this.$borderSize;\n        var allowTopdown = top > screenHeight / 2 && !topdownOnly;\n        if (allowTopdown && top + lineHeight + maxH > screenHeight) {\n            renderer.$maxPixelHeight = top - 2 * this.$borderSize;\n            el.style.top = \"\";\n            el.style.bottom = screenHeight - top + \"px\";\n            popup.isTopdown = false;\n        } else {\n            top += lineHeight;\n            renderer.$maxPixelHeight = screenHeight - top - 0.2 * lineHeight;\n            el.style.top = top + \"px\";\n            el.style.bottom = \"\";\n            popup.isTopdown = true;\n        }\n\n        el.style.display = \"\";\n\n        var left = pos.left;\n        if (left + el.offsetWidth > screenWidth)\n            left = screenWidth - el.offsetWidth;\n\n        el.style.left = left + \"px\";\n\n        this._signal(\"show\");\n        lastMouseEvent = null;\n        popup.isOpen = true;\n    };\n\n    popup.goTo = function(where) {\n        var row = this.getRow();\n        var max = this.session.getLength() - 1;\n\n        switch(where) {\n            case \"up\": row = row <= 0 ? max : row - 1; break;\n            case \"down\": row = row >= max ? -1 : row + 1; break;\n            case \"start\": row = 0; break;\n            case \"end\": row = max; break;\n        }\n\n        this.setRow(row);\n    };\n\n\n    popup.getTextLeftOffset = function() {\n        return this.$borderSize + this.renderer.$padding + this.$imageSize;\n    };\n\n    popup.$imageSize = 0;\n    popup.$borderSize = 1;\n\n    return popup;\n};\n\ndom.importCssString(`\n.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #CAD6FA;\n    z-index: 1;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {\n    background-color: #3a674e;\n}\n.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid #abbffe;\n    margin-top: -1px;\n    background: rgba(233,233,253,0.4);\n    position: absolute;\n    z-index: 2;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {\n    border: 1px solid rgba(109, 150, 13, 0.8);\n    background: rgba(58, 103, 78, 0.62);\n}\n.ace_completion-meta {\n    opacity: 0.5;\n    margin: 0.9em;\n}\n.ace_completion-message {\n    color: blue;\n}\n.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #2d69c7;\n}\n.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{\n    color: #93ca12;\n}\n.ace_editor.ace_autocomplete {\n    width: 300px;\n    z-index: 200000;\n    border: 1px lightgray solid;\n    position: fixed;\n    box-shadow: 2px 3px 5px rgba(0,0,0,.2);\n    line-height: 1.4;\n    background: #fefefe;\n    color: #111;\n}\n.ace_dark.ace_editor.ace_autocomplete {\n    border: 1px #484747 solid;\n    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);\n    line-height: 1.4;\n    background: #25282c;\n    color: #c1c1c1;\n}`, \"autocompletion.css\", false);\n\nexports.AcePopup = AcePopup;\nexports.$singleLineEditor = $singleLineEditor;\n","var Range = require(\"../range\").Range;\n    \n    var splitRegex = /[^a-zA-Z_0-9\\$\\-\\u00C0-\\u1FFF\\u2C00-\\uD7FF\\w]+/;\n\n    function getWordIndex(doc, pos) {\n        var textBefore = doc.getTextRange(Range.fromPoints({row: 0, column:0}, pos));\n        return textBefore.split(splitRegex).length - 1;\n    }\n\n    /**\n     * Does a distance analysis of the word `prefix` at position `pos` in `doc`.\n     * @return Map\n     */\n    function wordDistance(doc, pos) {\n        var prefixPos = getWordIndex(doc, pos);\n        var words = doc.getValue().split(splitRegex);\n        var wordScores = Object.create(null);\n        \n        var currentWord = words[prefixPos];\n\n        words.forEach(function(word, idx) {\n            if (!word || word === currentWord) return;\n\n            var distance = Math.abs(prefixPos - idx);\n            var score = words.length - distance;\n            if (wordScores[word]) {\n                wordScores[word] = Math.max(score, wordScores[word]);\n            } else {\n                wordScores[word] = score;\n            }\n        });\n        return wordScores;\n    }\n\n    exports.getCompletions = function(editor, session, pos, prefix, callback) {\n        var wordScore = wordDistance(session, pos);\n        var wordList = Object.keys(wordScore);\n        callback(null, wordList.map(function(word) {\n            return {\n                caption: word,\n                value: word,\n                score: wordScore[word],\n                meta: \"local\"\n            };\n        }));\n    };\n","\"use strict\";\n\nexports.parForEach = function(array, fn, callback) {\n    var completed = 0;\n    var arLength = array.length;\n    if (arLength === 0)\n        callback();\n    for (var i = 0; i < arLength; i++) {\n        fn(array[i], function(result, err) {\n            completed++;\n            if (completed === arLength)\n                callback(result, err);\n        });\n    }\n};\n\nvar ID_REGEX = /[a-zA-Z_0-9\\$\\-\\u00A2-\\u2000\\u2070-\\uFFFF]/;\n\nexports.retrievePrecedingIdentifier = function(text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos-1; i >= 0; i--) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf.reverse().join(\"\");\n};\n\nexports.retrieveFollowingIdentifier = function(text, pos, regex) {\n    regex = regex || ID_REGEX;\n    var buf = [];\n    for (var i = pos; i < text.length; i++) {\n        if (regex.test(text[i]))\n            buf.push(text[i]);\n        else\n            break;\n    }\n    return buf;\n};\n\nexports.getCompletionPrefix = function (editor) {\n    var pos = editor.getCursorPosition();\n    var line = editor.session.getLine(pos.row);\n    var prefix;\n    editor.completers.forEach(function(completer) {\n        if (completer.identifierRegexps) {\n            completer.identifierRegexps.forEach(function(identifierRegex) {\n                if (!prefix && identifierRegex)\n                    prefix = this.retrievePrecedingIdentifier(line, pos.column, identifierRegex);\n            }.bind(this));\n        }\n    }.bind(this));\n    return prefix || this.retrievePrecedingIdentifier(line, pos.column);\n};\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\n\n/**\n * Tokenizes the current [[Document `Document`]] in the background, and caches the tokenized rows for future use. \n * \n * If a certain row is changed, everything below that row is re-tokenized.\n *\n * @class BackgroundTokenizer\n **/\n\n/**\n * Creates a new `BackgroundTokenizer` object.\n * @param {Tokenizer} tokenizer The tokenizer to use\n * @param {Editor} editor The editor to associate with\n *\n * @constructor\n **/\n\nvar BackgroundTokenizer = function(tokenizer, editor) {\n    this.running = false;\n    this.lines = [];\n    this.states = [];\n    this.currentLine = 0;\n    this.tokenizer = tokenizer;\n\n    var self = this;\n\n    this.$worker = function() {\n        if (!self.running) { return; }\n\n        var workerStart = new Date();\n        var currentLine = self.currentLine;\n        var endLine = -1;\n        var doc = self.doc;\n\n        var startLine = currentLine;\n        while (self.lines[currentLine])\n            currentLine++;\n        \n        var len = doc.getLength();\n        var processedLines = 0;\n        self.running = false;\n        while (currentLine < len) {\n            self.$tokenizeRow(currentLine);\n            endLine = currentLine;\n            do {\n                currentLine++;\n            } while (self.lines[currentLine]);\n\n            // only check every 5 lines\n            processedLines ++;\n            if ((processedLines % 5 === 0) && (new Date() - workerStart) > 20) {\n                self.running = setTimeout(self.$worker, 20);\n                break;\n            }\n        }\n        self.currentLine = currentLine;\n        \n        if (endLine == -1)\n            endLine = currentLine;\n        \n        if (startLine <= endLine)\n            self.fireUpdateEvent(startLine, endLine);\n    };\n};\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Sets a new tokenizer for this object.\n     * @param {Tokenizer} tokenizer The new tokenizer to use\n     **/\n    this.setTokenizer = function(tokenizer) {\n        this.tokenizer = tokenizer;\n        this.lines = [];\n        this.states = [];\n\n        this.start(0);\n    };\n\n    /**\n     * Sets a new document to associate with this object.\n     * @param {Document} doc The new document to associate with\n     **/\n    this.setDocument = function(doc) {\n        this.doc = doc;\n        this.lines = [];\n        this.states = [];\n\n        this.stop();\n    };\n\n     /**\n     * Fires whenever the background tokeniziers between a range of rows are going to be updated.\n     * \n     * @event update\n     * @param {Object} e An object containing two properties, `first` and `last`, which indicate the rows of the region being updated.\n     *\n     **/\n    /**\n     * Emits the `'update'` event. `firstRow` and `lastRow` are used to define the boundaries of the region to be updated.\n     * @param {Number} firstRow The starting row region\n     * @param {Number} lastRow The final row region\n     **/\n    this.fireUpdateEvent = function(firstRow, lastRow) {\n        var data = {\n            first: firstRow,\n            last: lastRow\n        };\n        this._signal(\"update\", {data: data});\n    };\n\n    /**\n     * Starts tokenizing at the row indicated.\n     * @param {Number} startRow The row to start at\n     **/\n    this.start = function(startRow) {\n        this.currentLine = Math.min(startRow || 0, this.currentLine, this.doc.getLength());\n\n        // remove all cached items below this line\n        this.lines.splice(this.currentLine, this.lines.length);\n        this.states.splice(this.currentLine, this.states.length);\n\n        this.stop();\n        // pretty long delay to prevent the tokenizer from interfering with the user\n        this.running = setTimeout(this.$worker, 700);\n    };\n\n    /**\n     * Sets pretty long delay to prevent the tokenizer from interfering with the user\n     */\n    this.scheduleStart = function() {\n        if (!this.running)\n            this.running = setTimeout(this.$worker, 700);\n    };\n\n    this.$updateOnChange = function(delta) {\n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            this.lines[startRow] = null;\n        } else if (delta.action == \"remove\") {\n            this.lines.splice(startRow, len + 1, null);\n            this.states.splice(startRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(startRow, 1);\n            this.lines.splice.apply(this.lines, args);\n            this.states.splice.apply(this.states, args);\n        }\n\n        this.currentLine = Math.min(startRow, this.currentLine, this.doc.getLength());\n\n        this.stop();\n    };\n\n    /**\n     * Stops tokenizing.\n     **/\n    this.stop = function() {\n        if (this.running)\n            clearTimeout(this.running);\n        this.running = false;\n    };\n\n    /**\n     * Gives list of [[Token]]'s of the row. (tokens are cached)\n     * @param {Number} row The row to get tokens at\n     * @returns {Token[]}\n     **/\n    this.getTokens = function(row) {\n        return this.lines[row] || this.$tokenizeRow(row);\n    };\n\n    /**\n     * Returns the state of tokenization at the end of a row.\n     * @param {Number} row The row to get state at\n     * @returns {string}\n     **/\n    this.getState = function(row) {\n        if (this.currentLine == row)\n            this.$tokenizeRow(row);\n        return this.states[row] || \"start\";\n    };\n\n    this.$tokenizeRow = function(row) {\n        var line = this.doc.getLine(row);\n        var state = this.states[row - 1];\n\n        var data = this.tokenizer.getLineTokens(line, state, row);\n\n        if (this.states[row] + \"\" !== data.state + \"\") {\n            this.states[row] = data.state;\n            this.lines[row + 1] = null;\n            if (this.currentLine > row + 1)\n                this.currentLine = row + 1;\n        } else if (this.currentLine == row) {\n            this.currentLine = row + 1;\n        }\n\n        return this.lines[row] = data.tokens;\n    };\n\n    this.cleanup = function() {\n        this.running = false;\n        this.lines = [];\n        this.states = [];\n        this.currentLine = 0;\n        this.removeAllListeners();\n    };\n\n}).call(BackgroundTokenizer.prototype);\n\nexports.BackgroundTokenizer = BackgroundTokenizer;\n","\"use strict\";\n\nvar bidiUtil = require(\"./lib/bidiutil\");\nvar lang = require(\"./lib/lang\");\nvar bidiRE = /[\\u0590-\\u05f4\\u0600-\\u06ff\\u0700-\\u08ac\\u202B]/;\n\n/**\n * This object is used to ensure Bi-Directional support (for languages with text flowing from right to left, like Arabic or Hebrew)\n * including correct caret positioning, text selection mouse and keyboard arrows functioning\n * @class BidiHandler\n **/\n\n/**\n * Creates a new `BidiHandler` object\n * @param {EditSession} session The session to use\n *\n * @constructor\n **/\nvar BidiHandler = function(session) {\n    this.session = session;\n    this.bidiMap = {};\n    /* current screen row */\n    this.currentRow = null;\n    this.bidiUtil = bidiUtil;\n    /* Arabic/Hebrew character width differs from regular character width */\n    this.charWidths = [];\n    this.EOL = \"\\xAC\";\n    this.showInvisibles = true;\n    this.isRtlDir = false;\n    this.$isRtl = false;\n    this.line = \"\";\n    this.wrapIndent = 0;\n    this.EOF = \"\\xB6\";\n    this.RLE = \"\\u202B\";\n    this.contentWidth = 0;\n    this.fontMetrics = null;\n    this.rtlLineOffset = 0;\n    this.wrapOffset = 0;\n    this.isMoveLeftOperation = false;\n    this.seenBidi = bidiRE.test(session.getValue());\n};\n\n(function() {\n    /**\n     * Returns 'true' if row contains Bidi characters, in such case\n     * creates Bidi map to be used in operations related to selection\n     * (keyboard arrays, mouse click, select)\n     * @param {Number} the screen row to be checked\n     * @param {Number} the document row to be checked [optional]\n     * @param {Number} the wrapped screen line index [ optional]\n    **/\n    this.isBidiRow = function(screenRow, docRow, splitIndex) {\n        if (!this.seenBidi)\n            return false;\n        if (screenRow !== this.currentRow) {\n            this.currentRow = screenRow;\n            this.updateRowLine(docRow, splitIndex);\n            this.updateBidiMap();\n        }\n        return this.bidiMap.bidiLevels;\n    };\n\n    this.onChange = function(delta) {\n        if (!this.seenBidi) {\n            if (delta.action == \"insert\" && bidiRE.test(delta.lines.join(\"\\n\"))) {\n                this.seenBidi = true;\n                this.currentRow = null;\n            }\n        } \n        else {\n            this.currentRow = null;\n        }\n    };\n\n    this.getDocumentRow = function() {\n        var docRow = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var index = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            if (index >= 0)\n                docRow = this.session.$docRowCache[index];\n        }\n\n        return docRow;\n    };\n\n    this.getSplitIndex = function() {\n        var splitIndex = 0;\n        var rowCache = this.session.$screenRowCache;\n        if (rowCache.length) {\n            var currentIndex, prevIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow);\n            while (this.currentRow - splitIndex > 0) {\n                currentIndex = this.session.$getRowCacheIndex(rowCache, this.currentRow - splitIndex - 1);\n                if (currentIndex !== prevIndex)\n                    break;\n\n                prevIndex = currentIndex;\n                splitIndex++;\n            }\n        } else {\n            splitIndex = this.currentRow;\n        }\n\n        return splitIndex;\n    };\n\n    this.updateRowLine = function(docRow, splitIndex) {\n        if (docRow === undefined)\n            docRow = this.getDocumentRow();\n            \n        var isLastRow = (docRow === this.session.getLength() - 1),\n            endOfLine = isLastRow ? this.EOF : this.EOL;\n\n        this.wrapIndent = 0;\n        this.line = this.session.getLine(docRow);\n        this.isRtlDir = this.$isRtl || this.line.charAt(0) === this.RLE;\n        if (this.session.$useWrapMode) {\n            var splits = this.session.$wrapData[docRow];\n            if (splits) {\n                if (splitIndex === undefined)\n                    splitIndex = this.getSplitIndex();\n\n                if(splitIndex > 0 && splits.length) {\n                    this.wrapIndent = splits.indent;\n                    this.wrapOffset = this.wrapIndent * this.charWidths[bidiUtil.L];\n                    this.line = (splitIndex < splits.length) ?\n                        this.line.substring(splits[splitIndex - 1], splits[splitIndex]) :\n                            this.line.substring(splits[splits.length - 1]);\n                } else {\n                    this.line = this.line.substring(0, splits[splitIndex]);\n                }\n\n                if (splitIndex == splits.length) {\n                    this.line += (this.showInvisibles) ? endOfLine : bidiUtil.DOT;\n                }\n            }\n        } else {\n            this.line += this.showInvisibles ? endOfLine : bidiUtil.DOT;\n        }\n            \n        /* replace tab and wide characters by commensurate spaces */\n        var session = this.session, shift = 0, size;\n        this.line = this.line.replace(/\\t|[\\u1100-\\u2029, \\u202F-\\uFFE6]/g, function(ch, i){\n            if (ch === '\\t' || session.isFullWidth(ch.charCodeAt(0))) {\n                size = (ch === '\\t') ? session.getScreenTabSize(i + shift) : 2;\n                shift += size - 1;\n                return lang.stringRepeat(bidiUtil.DOT, size);\n            }\n            return ch;\n        });\n\n        if (this.isRtlDir) {\n            this.fontMetrics.$main.textContent = (this.line.charAt(this.line.length - 1) == bidiUtil.DOT) ? this.line.substr(0, this.line.length - 1) : this.line;\n            this.rtlLineOffset = this.contentWidth - this.fontMetrics.$main.getBoundingClientRect().width;\n        }\n    };\n    \n    this.updateBidiMap = function() {\n        var textCharTypes = [];\n        if (bidiUtil.hasBidiCharacters(this.line, textCharTypes) || this.isRtlDir) {\n             this.bidiMap = bidiUtil.doBidiReorder(this.line, textCharTypes, this.isRtlDir);\n        } else {\n            this.bidiMap = {};\n        }\n    };\n\n    /**\n     * Resets stored info related to current screen row\n    **/\n    this.markAsDirty = function() {\n        this.currentRow = null;\n    };\n\n    /**\n     * Updates array of character widths\n     * @param {Object} font metrics\n     *\n    **/\n    this.updateCharacterWidths = function(fontMetrics) {\n        if (this.characterWidth === fontMetrics.$characterSize.width)\n            return;\n\n        this.fontMetrics = fontMetrics;\n        var characterWidth = this.characterWidth = fontMetrics.$characterSize.width;\n        var bidiCharWidth = fontMetrics.$measureCharWidth(\"\\u05d4\");\n\n        this.charWidths[bidiUtil.L] = this.charWidths[bidiUtil.EN] = this.charWidths[bidiUtil.ON_R] = characterWidth;\n        this.charWidths[bidiUtil.R] = this.charWidths[bidiUtil.AN] = bidiCharWidth;\n        this.charWidths[bidiUtil.R_H] = bidiCharWidth * 0.45;\n        this.charWidths[bidiUtil.B] = this.charWidths[bidiUtil.RLE] = 0;\n\n        this.currentRow = null;\n    };\n\n    this.setShowInvisibles = function(showInvisibles) {\n        this.showInvisibles = showInvisibles;\n        this.currentRow = null;\n    };\n\n    this.setEolChar = function(eolChar) {\n        this.EOL = eolChar; \n    };\n\n    this.setContentWidth = function(width) {\n        this.contentWidth = width;\n    };\n\n    this.isRtlLine = function(row) {\n        if (this.$isRtl) return true;\n        if (row != undefined)\n            return (this.session.getLine(row).charAt(0) == this.RLE);\n        else\n            return this.isRtlDir; \n    };\n\n    this.setRtlDirection = function(editor, isRtlDir) {\n        var cursor = editor.getCursorPosition(); \n        for (var row = editor.selection.getSelectionAnchor().row; row <= cursor.row; row++) {\n            if (!isRtlDir && editor.session.getLine(row).charAt(0) === editor.session.$bidiHandler.RLE)\n                editor.session.doc.removeInLine(row, 0, 1);\n            else if (isRtlDir && editor.session.getLine(row).charAt(0) !== editor.session.$bidiHandler.RLE)\n                editor.session.doc.insert({column: 0, row: row}, editor.session.$bidiHandler.RLE);\n        }\n    };\n\n\n    /**\n     * Returns offset of character at position defined by column.\n     * @param {Number} col the screen column position\n     *\n     * @return {Number} horizontal pixel offset of given screen column\n     **/\n    this.getPosLeft = function(col) {\n        col -= this.wrapIndent;\n        var leftBoundary = (this.line.charAt(0) === this.RLE) ? 1 : 0;\n        var logicalIdx = (col > leftBoundary) ? (this.session.getOverwrite() ? col : col - 1) : leftBoundary;\n        var visualIdx = bidiUtil.getVisualFromLogicalIdx(logicalIdx, this.bidiMap),\n            levels = this.bidiMap.bidiLevels, left = 0;\n\n        if (!this.session.getOverwrite() && col <= leftBoundary && levels[visualIdx] % 2 !== 0)\n            visualIdx++;\n            \n        for (var i = 0; i < visualIdx; i++) {\n            left += this.charWidths[levels[i]];\n        }\n\n        if (!this.session.getOverwrite() && (col > leftBoundary) && (levels[visualIdx] % 2 === 0))\n            left += this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n            left += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        if (this.isRtlDir)\n            left += this.rtlLineOffset;\n\n        return left;\n    };\n\n    /**\n     * Returns 'selections' - array of objects defining set of selection rectangles\n     * @param {Number} startCol the start column position\n     * @param {Number} endCol the end column position\n     *\n     * @return {Object[]} Each object contains 'left' and 'width' values defining selection rectangle.\n    **/\n    this.getSelections = function(startCol, endCol) {\n        var map = this.bidiMap, levels = map.bidiLevels, level, selections = [], offset = 0,\n            selColMin = Math.min(startCol, endCol) - this.wrapIndent, selColMax = Math.max(startCol, endCol) - this.wrapIndent,\n                isSelected = false, isSelectedPrev = false, selectionStart = 0;\n            \n        if (this.wrapIndent)\n            offset += this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n\n        for (var logIdx, visIdx = 0; visIdx < levels.length; visIdx++) {\n            logIdx = map.logicalFromVisual[visIdx];\n            level = levels[visIdx];\n            isSelected = (logIdx >= selColMin) && (logIdx < selColMax);\n            if (isSelected && !isSelectedPrev) {\n                selectionStart = offset;\n            } else if (!isSelected && isSelectedPrev) {\n                selections.push({left: selectionStart, width: offset - selectionStart});\n            }\n            offset += this.charWidths[level];\n            isSelectedPrev = isSelected;\n        }\n\n        if (isSelected && (visIdx === levels.length)) {\n            selections.push({left: selectionStart, width: offset - selectionStart});\n        }\n\n        if(this.isRtlDir) {\n            for (var i = 0; i < selections.length; i++) {\n                selections[i].left += this.rtlLineOffset;\n            }\n        }\n        return selections;\n    };\n\n    /**\n     * Converts character coordinates on the screen to respective document column number\n     * @param {Number} posX character horizontal offset\n     *\n     * @return {Number} screen column number corresponding to given pixel offset\n    **/\n    this.offsetToCol = function(posX) {\n        if(this.isRtlDir)\n            posX -= this.rtlLineOffset;\n\n        var logicalIdx = 0, posX = Math.max(posX, 0),\n            offset = 0, visualIdx = 0, levels = this.bidiMap.bidiLevels,\n                charWidth = this.charWidths[levels[visualIdx]];\n\n        if (this.wrapIndent)\n           posX -= this.isRtlDir ? (-1 * this.wrapOffset) : this.wrapOffset;\n    \n        while(posX > offset + charWidth/2) {\n            offset += charWidth;\n            if(visualIdx === levels.length - 1) {\n                /* quit when we on the right of the last character, flag this by charWidth = 0 */\n                charWidth = 0;\n                break;\n            }\n            charWidth = this.charWidths[levels[++visualIdx]];\n        }\n    \n        if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && (levels[visualIdx] % 2 === 0)){\n        /* Bidi character on the left and None Bidi character on the right */\n            if(posX < offset)\n                visualIdx--;\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n\n        } else if (visualIdx > 0 && (levels[visualIdx - 1] % 2 === 0) && (levels[visualIdx] % 2 !== 0)){\n        /* None Bidi character on the left and Bidi character on the right */\n            logicalIdx = 1 + ((posX > offset) ? this.bidiMap.logicalFromVisual[visualIdx]\n                    : this.bidiMap.logicalFromVisual[visualIdx - 1]);\n\n        } else if ((this.isRtlDir && visualIdx === levels.length - 1 && charWidth === 0 && (levels[visualIdx - 1] % 2 === 0))\n                || (!this.isRtlDir && visualIdx === 0 && (levels[visualIdx] % 2 !== 0))){\n        /* To the right of last character, which is None Bidi, in RTL direction or */\n        /* to the left of first Bidi character, in LTR direction */\n            logicalIdx = 1 + this.bidiMap.logicalFromVisual[visualIdx];\n        } else {\n            /* Tweak visual position when Bidi character on the left in order to map it to corresponding logical position */\n            if (visualIdx > 0 && (levels[visualIdx - 1] % 2 !== 0) && charWidth !== 0)\n                visualIdx--;\n\n            /* Regular case */\n            logicalIdx = this.bidiMap.logicalFromVisual[visualIdx];\n        }\n\n        if (logicalIdx === 0 && this.isRtlDir)\n            logicalIdx++;\n\n        return (logicalIdx + this.wrapIndent);\n    };\n\n}).call(BidiHandler.prototype);\n\nexports.BidiHandler = BidiHandler;\n","\"use strict\";\n\nvar $cancelT;\nmodule.exports = { \n    lineMode: false,\n    pasteCancelled: function() {\n        if ($cancelT && $cancelT > Date.now() - 50)\n            return true;\n        return $cancelT = false;\n    },\n    cancel: function() {\n        $cancelT = Date.now();\n    }\n};\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar MultiHashHandler = require(\"../keyboard/hash_handler\").MultiHashHandler;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\n/**\n * @class CommandManager\n *\n **/\n\n/**\n * new CommandManager(platform, commands)\n * @param {String} platform Identifier for the platform; must be either `\"mac\"` or `\"win\"`\n * @param {Array} commands A list of commands\n *\n **/\n\nvar CommandManager = function(platform, commands) {\n    MultiHashHandler.call(this, commands, platform);\n    this.byName = this.commands;\n    this.setDefaultHandler(\"exec\", function(e) {\n        if (!e.args) {\n            return e.command.exec(e.editor, {}, e.event, true);\n        }\n        return e.command.exec(e.editor, e.args, e.event, false);\n    });\n};\n\noop.inherits(CommandManager, MultiHashHandler);\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.exec = function(command, editor, args) {\n        if (Array.isArray(command)) {\n            for (var i = command.length; i--; ) {\n                if (this.exec(command[i], editor, args)) return true;\n            }\n            return false;\n        }\n\n        if (typeof command === \"string\")\n            command = this.commands[command];\n\n        if (!command)\n            return false;\n\n        if (editor && editor.$readOnly && !command.readOnly)\n            return false;\n\n        if (this.$checkCommandState != false && command.isAvailable && !command.isAvailable(editor))\n            return false;\n\n        var e = {editor: editor, command: command, args: args};\n        e.returnValue = this._emit(\"exec\", e);\n        this._signal(\"afterExec\", e);\n\n        return e.returnValue === false ? false : true;\n    };\n\n    this.toggleRecording = function(editor) {\n        if (this.$inReplay)\n            return;\n\n        editor && editor._emit(\"changeStatus\");\n        if (this.recording) {\n            this.macro.pop();\n            this.off(\"exec\", this.$addCommandToMacro);\n\n            if (!this.macro.length)\n                this.macro = this.oldMacro;\n\n            return this.recording = false;\n        }\n        if (!this.$addCommandToMacro) {\n            this.$addCommandToMacro = function(e) {\n                this.macro.push([e.command, e.args]);\n            }.bind(this);\n        }\n\n        this.oldMacro = this.macro;\n        this.macro = [];\n        this.on(\"exec\", this.$addCommandToMacro);\n        return this.recording = true;\n    };\n\n    this.replay = function(editor) {\n        if (this.$inReplay || !this.macro)\n            return;\n\n        if (this.recording)\n            return this.toggleRecording(editor);\n\n        try {\n            this.$inReplay = true;\n            this.macro.forEach(function(x) {\n                if (typeof x == \"string\")\n                    this.exec(x, editor);\n                else\n                    this.exec(x[0], editor, x[1]);\n            }, this);\n        } finally {\n            this.$inReplay = false;\n        }\n    };\n\n    this.trimMacro = function(m) {\n        return m.map(function(x){\n            if (typeof x[0] != \"string\")\n                x[0] = x[0].name;\n            if (!x[1])\n                x = x[0];\n            return x;\n        });\n    };\n\n}).call(CommandManager.prototype);\n\nexports.CommandManager = CommandManager;\n","\"use strict\";\n\nvar lang = require(\"../lib/lang\");\nvar config = require(\"../config\");\nvar Range = require(\"../range\").Range;\n\nfunction bindKey(win, mac) {\n    return {win: win, mac: mac};\n}\n\n/*\n    multiSelectAction: \"forEach\"|\"forEachLine\"|function|undefined,\n    scrollIntoView: true|\"cursor\"|\"center\"|\"selectionPart\"\n*/\nexports.commands = [{\n    name: \"showSettingsMenu\",\n    description: \"Show settings menu\",\n    bindKey: bindKey(\"Ctrl-,\", \"Command-,\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/settings_menu\", function(module) {\n            module.init(editor);\n            editor.showSettingsMenu();\n        });\n    },\n    readOnly: true\n}, {\n    name: \"goToNextError\",\n    description: \"Go to next error\",\n    bindKey: bindKey(\"Alt-E\", \"F4\"),\n    exec: function(editor) {\n        config.loadModule(\"./ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, 1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"goToPreviousError\",\n    description: \"Go to previous error\",\n    bindKey: bindKey(\"Alt-Shift-E\", \"Shift-F4\"),\n    exec: function(editor) {\n        config.loadModule(\"./ext/error_marker\", function(module) {\n            module.showErrorMarker(editor, -1);\n        });\n    },\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selectall\",\n    description: \"Select all\",\n    bindKey: bindKey(\"Ctrl-A\", \"Command-A\"),\n    exec: function(editor) { editor.selectAll(); },\n    readOnly: true\n}, {\n    name: \"centerselection\",\n    description: \"Center selection\",\n    bindKey: bindKey(null, \"Ctrl-L\"),\n    exec: function(editor) { editor.centerSelection(); },\n    readOnly: true\n}, {\n    name: \"gotoline\",\n    description: \"Go to line...\",\n    bindKey: bindKey(\"Ctrl-L\", \"Command-L\"),\n    exec: function(editor, line) {\n        // backwards compatibility\n        if (typeof line === \"number\" && !isNaN(line))\n            editor.gotoLine(line);\n        editor.prompt({ $type: \"gotoLine\" });\n    },\n    readOnly: true\n}, {\n    name: \"fold\",\n    bindKey: bindKey(\"Alt-L|Ctrl-F1\", \"Command-Alt-L|Command-F1\"),\n    exec: function(editor) { editor.session.toggleFold(false); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfold\",\n    bindKey: bindKey(\"Alt-Shift-L|Ctrl-Shift-F1\", \"Command-Alt-Shift-L|Command-Shift-F1\"),\n    exec: function(editor) { editor.session.toggleFold(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleFoldWidget\",\n    description: \"Toggle fold widget\",\n    bindKey: bindKey(\"F2\", \"F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"toggleParentFoldWidget\",\n    description: \"Toggle parent fold widget\",\n    bindKey: bindKey(\"Alt-F2\", \"Alt-F2\"),\n    exec: function(editor) { editor.session.toggleFoldWidget(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldall\",\n    description: \"Fold all\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAll(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldAllComments\",\n    description: \"Fold all comments\",\n    bindKey: bindKey(null, \"Ctrl-Command-Option-0\"),\n    exec: function(editor) { editor.session.foldAllComments(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"foldOther\",\n    description: \"Fold other\",\n    bindKey: bindKey(\"Alt-0\", \"Command-Option-0\"),\n    exec: function(editor) { \n        editor.session.foldAll();\n        editor.session.unfold(editor.selection.getAllRanges());\n    },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"unfoldall\",\n    description: \"Unfold all\",\n    bindKey: bindKey(\"Alt-Shift-0\", \"Command-Option-Shift-0\"),\n    exec: function(editor) { editor.session.unfold(); },\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findnext\",\n    description: \"Find next\",\n    bindKey: bindKey(\"Ctrl-K\", \"Command-G\"),\n    exec: function(editor) { editor.findNext(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"findprevious\",\n    description: \"Find previous\",\n    bindKey: bindKey(\"Ctrl-Shift-K\", \"Command-Shift-G\"),\n    exec: function(editor) { editor.findPrevious(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"center\",\n    readOnly: true\n}, {\n    name: \"selectOrFindNext\",\n    description: \"Select or find next\",\n    bindKey: bindKey(\"Alt-K\", \"Ctrl-G\"),\n    exec: function(editor) {\n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findNext(); \n    },\n    readOnly: true\n}, {\n    name: \"selectOrFindPrevious\",\n    description: \"Select or find previous\",\n    bindKey: bindKey(\"Alt-Shift-K\", \"Ctrl-Shift-G\"),\n    exec: function(editor) { \n        if (editor.selection.isEmpty())\n            editor.selection.selectWord();\n        else\n            editor.findPrevious();\n    },\n    readOnly: true\n}, {\n    name: \"find\",\n    description: \"Find\",\n    bindKey: bindKey(\"Ctrl-F\", \"Command-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor);});\n    },\n    readOnly: true\n}, {\n    name: \"overwrite\",\n    description: \"Overwrite\",\n    bindKey: \"Insert\",\n    exec: function(editor) { editor.toggleOverwrite(); },\n    readOnly: true\n}, {\n    name: \"selecttostart\",\n    description: \"Select to start\",\n    bindKey: bindKey(\"Ctrl-Shift-Home\", \"Command-Shift-Home|Command-Shift-Up\"),\n    exec: function(editor) { editor.getSelection().selectFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotostart\",\n    description: \"Go to start\",\n    bindKey: bindKey(\"Ctrl-Home\", \"Command-Home|Command-Up\"),\n    exec: function(editor) { editor.navigateFileStart(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectup\",\n    description: \"Select up\",\n    bindKey: bindKey(\"Shift-Up\", \"Shift-Up|Ctrl-Shift-P\"),\n    exec: function(editor) { editor.getSelection().selectUp(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golineup\",\n    description: \"Go line up\",\n    bindKey: bindKey(\"Up\", \"Up|Ctrl-P\"),\n    exec: function(editor, args) { editor.navigateUp(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttoend\",\n    description: \"Select to end\",\n    bindKey: bindKey(\"Ctrl-Shift-End\", \"Command-Shift-End|Command-Shift-Down\"),\n    exec: function(editor) { editor.getSelection().selectFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"gotoend\",\n    description: \"Go to end\",\n    bindKey: bindKey(\"Ctrl-End\", \"Command-End|Command-Down\"),\n    exec: function(editor) { editor.navigateFileEnd(); },\n    multiSelectAction: \"forEach\",\n    readOnly: true,\n    scrollIntoView: \"animate\",\n    aceCommandGroup: \"fileJump\"\n}, {\n    name: \"selectdown\",\n    description: \"Select down\",\n    bindKey: bindKey(\"Shift-Down\", \"Shift-Down|Ctrl-Shift-N\"),\n    exec: function(editor) { editor.getSelection().selectDown(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"golinedown\",\n    description: \"Go line down\",\n    bindKey: bindKey(\"Down\", \"Down|Ctrl-N\"),\n    exec: function(editor, args) { editor.navigateDown(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordleft\",\n    description: \"Select word left\",\n    bindKey: bindKey(\"Ctrl-Shift-Left\", \"Option-Shift-Left\"),\n    exec: function(editor) { editor.getSelection().selectWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordleft\",\n    description: \"Go to word left\",\n    bindKey: bindKey(\"Ctrl-Left\", \"Option-Left\"),\n    exec: function(editor) { editor.navigateWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolinestart\",\n    description: \"Select to line start\",\n    bindKey: bindKey(\"Alt-Shift-Left\", \"Command-Shift-Left|Ctrl-Shift-A\"),\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolinestart\",\n    description: \"Go to line start\",\n    bindKey: bindKey(\"Alt-Left|Home\", \"Command-Left|Home|Ctrl-A\"),\n    exec: function(editor) { editor.navigateLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectleft\",\n    description: \"Select left\",\n    bindKey: bindKey(\"Shift-Left\", \"Shift-Left|Ctrl-Shift-B\"),\n    exec: function(editor) { editor.getSelection().selectLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoleft\",\n    description: \"Go to left\",\n    bindKey: bindKey(\"Left\", \"Left|Ctrl-B\"),\n    exec: function(editor, args) { editor.navigateLeft(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectwordright\",\n    description: \"Select word right\",\n    bindKey: bindKey(\"Ctrl-Shift-Right\", \"Option-Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotowordright\",\n    description: \"Go to word right\",\n    bindKey: bindKey(\"Ctrl-Right\", \"Option-Right\"),\n    exec: function(editor) { editor.navigateWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selecttolineend\",\n    description: \"Select to line end\",\n    bindKey: bindKey(\"Alt-Shift-Right\", \"Command-Shift-Right|Shift-End|Ctrl-Shift-E\"),\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotolineend\",\n    description: \"Go to line end\",\n    bindKey: bindKey(\"Alt-Right|End\", \"Command-Right|End|Ctrl-E\"),\n    exec: function(editor) { editor.navigateLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectright\",\n    description: \"Select right\",\n    bindKey: bindKey(\"Shift-Right\", \"Shift-Right\"),\n    exec: function(editor) { editor.getSelection().selectRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"gotoright\",\n    description: \"Go to right\",\n    bindKey: bindKey(\"Right\", \"Right|Ctrl-F\"),\n    exec: function(editor, args) { editor.navigateRight(args.times); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectpagedown\",\n    description: \"Select page down\",\n    bindKey: \"Shift-PageDown\",\n    exec: function(editor) { editor.selectPageDown(); },\n    readOnly: true\n}, {\n    name: \"pagedown\",\n    description: \"Page down\",\n    bindKey: bindKey(null, \"Option-PageDown\"),\n    exec: function(editor) { editor.scrollPageDown(); },\n    readOnly: true\n}, {\n    name: \"gotopagedown\",\n    description: \"Go to page down\",\n    bindKey: bindKey(\"PageDown\", \"PageDown|Ctrl-V\"),\n    exec: function(editor) { editor.gotoPageDown(); },\n    readOnly: true\n}, {\n    name: \"selectpageup\",\n    description: \"Select page up\",\n    bindKey: \"Shift-PageUp\",\n    exec: function(editor) { editor.selectPageUp(); },\n    readOnly: true\n}, {\n    name: \"pageup\",\n    description: \"Page up\",\n    bindKey: bindKey(null, \"Option-PageUp\"),\n    exec: function(editor) { editor.scrollPageUp(); },\n    readOnly: true\n}, {\n    name: \"gotopageup\",\n    description: \"Go to page up\",\n    bindKey: \"PageUp\",\n    exec: function(editor) { editor.gotoPageUp(); },\n    readOnly: true\n}, {\n    name: \"scrollup\",\n    description: \"Scroll up\",\n    bindKey: bindKey(\"Ctrl-Up\", null),\n    exec: function(e) { e.renderer.scrollBy(0, -2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"scrolldown\",\n    description: \"Scroll down\",\n    bindKey: bindKey(\"Ctrl-Down\", null),\n    exec: function(e) { e.renderer.scrollBy(0, 2 * e.renderer.layerConfig.lineHeight); },\n    readOnly: true\n}, {\n    name: \"selectlinestart\",\n    description: \"Select line start\",\n    bindKey: \"Shift-Home\",\n    exec: function(editor) { editor.getSelection().selectLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectlineend\",\n    description: \"Select line end\",\n    bindKey: \"Shift-End\",\n    exec: function(editor) { editor.getSelection().selectLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"togglerecording\",\n    description: \"Toggle recording\",\n    bindKey: bindKey(\"Ctrl-Alt-E\", \"Command-Option-E\"),\n    exec: function(editor) { editor.commands.toggleRecording(editor); },\n    readOnly: true\n}, {\n    name: \"replaymacro\",\n    description: \"Replay macro\",\n    bindKey: bindKey(\"Ctrl-Shift-E\", \"Command-Shift-E\"),\n    exec: function(editor) { editor.commands.replay(editor); },\n    readOnly: true\n}, {\n    name: \"jumptomatching\",\n    description: \"Jump to matching\",\n    bindKey: bindKey(\"Ctrl-\\\\|Ctrl-P\", \"Command-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"selecttomatching\",\n    description: \"Select to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-\\\\|Ctrl-Shift-P\", \"Command-Shift-\\\\\"),\n    exec: function(editor) { editor.jumpToMatching(true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"expandToMatching\",\n    description: \"Expand to matching\",\n    bindKey: bindKey(\"Ctrl-Shift-M\", \"Ctrl-Shift-M\"),\n    exec: function(editor) { editor.jumpToMatching(true, true); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"animate\",\n    readOnly: true\n}, {\n    name: \"passKeysToBrowser\",\n    description: \"Pass keys to browser\",\n    bindKey: bindKey(null, null),\n    exec: function() {},\n    passEvent: true,\n    readOnly: true\n}, {\n    name: \"copy\",\n    description: \"Copy\",\n    exec: function(editor) {\n        // placeholder for replay macro\n    },\n    readOnly: true\n},\n\n// commands disabled in readOnly mode\n{\n    name: \"cut\",\n    description: \"Cut\",\n    exec: function(editor) {\n        var cutLine = editor.$copyWithEmptySelection && editor.selection.isEmpty();\n        var range = cutLine ? editor.selection.getLineRange() : editor.selection.getRange();\n        editor._emit(\"cut\", range);\n\n        if (!range.isEmpty())\n            editor.session.remove(range);\n        editor.clearSelection();\n    },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"paste\",\n    description: \"Paste\",\n    exec: function(editor, args) {\n        editor.$handlePaste(args);\n    },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removeline\",\n    description: \"Remove line\",\n    bindKey: bindKey(\"Ctrl-D\", \"Command-D\"),\n    exec: function(editor) { editor.removeLines(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"duplicateSelection\",\n    description: \"Duplicate selection\",\n    bindKey: bindKey(\"Ctrl-Shift-D\", \"Command-Shift-D\"),\n    exec: function(editor) { editor.duplicateSelection(); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"sortlines\",\n    description: \"Sort lines\",\n    bindKey: bindKey(\"Ctrl-Alt-S\", \"Command-Alt-S\"),\n    exec: function(editor) { editor.sortLines(); },\n    scrollIntoView: \"selection\",\n    multiSelectAction: \"forEachLine\"\n}, {\n    name: \"togglecomment\",\n    description: \"Toggle comment\",\n    bindKey: bindKey(\"Ctrl-/\", \"Command-/\"),\n    exec: function(editor) { editor.toggleCommentLines(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"toggleBlockComment\",\n    description: \"Toggle block comment\",\n    bindKey: bindKey(\"Ctrl-Shift-/\", \"Command-Shift-/\"),\n    exec: function(editor) { editor.toggleBlockComment(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"modifyNumberUp\",\n    description: \"Modify number up\",\n    bindKey: bindKey(\"Ctrl-Shift-Up\", \"Alt-Shift-Up\"),\n    exec: function(editor) { editor.modifyNumber(1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"modifyNumberDown\",\n    description: \"Modify number down\",\n    bindKey: bindKey(\"Ctrl-Shift-Down\", \"Alt-Shift-Down\"),\n    exec: function(editor) { editor.modifyNumber(-1); },\n    scrollIntoView: \"cursor\",\n    multiSelectAction: \"forEach\"\n}, {\n    name: \"replace\",\n    description: \"Replace\",\n    bindKey: bindKey(\"Ctrl-H\", \"Command-Option-F\"),\n    exec: function(editor) {\n        config.loadModule(\"ace/ext/searchbox\", function(e) {e.Search(editor, true);});\n    }\n}, {\n    name: \"undo\",\n    description: \"Undo\",\n    bindKey: bindKey(\"Ctrl-Z\", \"Command-Z\"),\n    exec: function(editor) { editor.undo(); }\n}, {\n    name: \"redo\",\n    description: \"Redo\",\n    bindKey: bindKey(\"Ctrl-Shift-Z|Ctrl-Y\", \"Command-Shift-Z|Command-Y\"),\n    exec: function(editor) { editor.redo(); }\n}, {\n    name: \"copylinesup\",\n    description: \"Copy lines up\",\n    bindKey: bindKey(\"Alt-Shift-Up\", \"Command-Option-Up\"),\n    exec: function(editor) { editor.copyLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesup\",\n    description: \"Move lines up\",\n    bindKey: bindKey(\"Alt-Up\", \"Option-Up\"),\n    exec: function(editor) { editor.moveLinesUp(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"copylinesdown\",\n    description: \"Copy lines down\",\n    bindKey: bindKey(\"Alt-Shift-Down\", \"Command-Option-Down\"),\n    exec: function(editor) { editor.copyLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"movelinesdown\",\n    description: \"Move lines down\",\n    bindKey: bindKey(\"Alt-Down\", \"Option-Down\"),\n    exec: function(editor) { editor.moveLinesDown(); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"del\",\n    description: \"Delete\",\n    bindKey: bindKey(\"Delete\", \"Delete|Ctrl-D|Shift-Delete\"),\n    exec: function(editor) { editor.remove(\"right\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"backspace\",\n    description: \"Backspace\",\n    bindKey: bindKey(\n        \"Shift-Backspace|Backspace\",\n        \"Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H\"\n    ),\n    exec: function(editor) { editor.remove(\"left\"); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"cut_or_delete\",\n    description: \"Cut or delete\",\n    bindKey: bindKey(\"Shift-Delete\", null),\n    exec: function(editor) { \n        if (editor.selection.isEmpty()) {\n            editor.remove(\"left\");\n        } else {\n            return false;\n        }\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestart\",\n    description: \"Remove to line start\",\n    bindKey: bindKey(\"Alt-Backspace\", \"Command-Backspace\"),\n    exec: function(editor) { editor.removeToLineStart(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineend\",\n    description: \"Remove to line end\",\n    bindKey: bindKey(\"Alt-Delete\", \"Ctrl-K|Command-Delete\"),\n    exec: function(editor) { editor.removeToLineEnd(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolinestarthard\",\n    description: \"Remove to line start hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Backspace\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.start.column = 0;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removetolineendhard\",\n    description: \"Remove to line end hard\",\n    bindKey: bindKey(\"Ctrl-Shift-Delete\", null),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n        range.end.column = Number.MAX_VALUE;\n        editor.session.remove(range);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordleft\",\n    description: \"Remove word left\",\n    bindKey: bindKey(\"Ctrl-Backspace\", \"Alt-Backspace|Ctrl-Alt-Backspace\"),\n    exec: function(editor) { editor.removeWordLeft(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"removewordright\",\n    description: \"Remove word right\",\n    bindKey: bindKey(\"Ctrl-Delete\", \"Alt-Delete\"),\n    exec: function(editor) { editor.removeWordRight(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"outdent\",\n    description: \"Outdent\",\n    bindKey: bindKey(\"Shift-Tab\", \"Shift-Tab\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"indent\",\n    description: \"Indent\",\n    bindKey: bindKey(\"Tab\", \"Tab\"),\n    exec: function(editor) { editor.indent(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockoutdent\",\n    description: \"Block outdent\",\n    bindKey: bindKey(\"Ctrl-[\", \"Ctrl-[\"),\n    exec: function(editor) { editor.blockOutdent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"blockindent\",\n    description: \"Block indent\",\n    bindKey: bindKey(\"Ctrl-]\", \"Ctrl-]\"),\n    exec: function(editor) { editor.blockIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"selectionPart\"\n}, {\n    name: \"insertstring\",\n    description: \"Insert string\",\n    exec: function(editor, str) { editor.insert(str); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"inserttext\",\n    description: \"Insert text\",\n    exec: function(editor, args) {\n        editor.insert(lang.stringRepeat(args.text  || \"\", args.times || 1));\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"splitline\",\n    description: \"Split line\",\n    bindKey: bindKey(null, \"Ctrl-O\"),\n    exec: function(editor) { editor.splitLine(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"transposeletters\",\n    description: \"Transpose letters\",\n    bindKey: bindKey(\"Alt-Shift-X\", \"Ctrl-T\"),\n    exec: function(editor) { editor.transposeLetters(); },\n    multiSelectAction: function(editor) {editor.transposeSelections(1); },\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"touppercase\",\n    description: \"To uppercase\",\n    bindKey: bindKey(\"Ctrl-U\", \"Ctrl-U\"),\n    exec: function(editor) { editor.toUpperCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"tolowercase\",\n    description: \"To lowercase\",\n    bindKey: bindKey(\"Ctrl-Shift-U\", \"Ctrl-Shift-U\"),\n    exec: function(editor) { editor.toLowerCase(); },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"autoindent\",\n    description: \"Auto Indent\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) { editor.autoIndent(); },\n    multiSelectAction: \"forEachLine\",\n    scrollIntoView: \"animate\"\n}, {\n    name: \"expandtoline\",\n    description: \"Expand to line\",\n    bindKey: bindKey(\"Ctrl-Shift-L\", \"Command-Shift-L\"),\n    exec: function(editor) {\n        var range = editor.selection.getRange();\n\n        range.start.column = range.end.column = 0;\n        range.end.row++;\n        editor.selection.setRange(range, false);\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"openlink\",\n    bindKey: bindKey(\"Ctrl+F3\", \"F3\"),\n    exec: function(editor) { editor.openLink(); }\n}, {\n    name: \"joinlines\",\n    description: \"Join lines\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var isBackwards = editor.selection.isBackwards();\n        var selectionStart = isBackwards ? editor.selection.getSelectionLead() : editor.selection.getSelectionAnchor();\n        var selectionEnd = isBackwards ? editor.selection.getSelectionAnchor() : editor.selection.getSelectionLead();\n        var firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length;\n        var selectedText = editor.session.doc.getTextRange(editor.selection.getRange());\n        var selectedCount = selectedText.replace(/\\n\\s*/, \" \").length;\n        var insertLine = editor.session.doc.getLine(selectionStart.row);\n\n        for (var i = selectionStart.row + 1; i <= selectionEnd.row + 1; i++) {\n            var curLine = lang.stringTrimLeft(lang.stringTrimRight(editor.session.doc.getLine(i)));\n            if (curLine.length !== 0) {\n                curLine = \" \" + curLine;\n            }\n            insertLine += curLine;\n        }\n\n        if (selectionEnd.row + 1 < (editor.session.doc.getLength() - 1)) {\n            // Don't insert a newline at the end of the document\n            insertLine += editor.session.doc.getNewLineCharacter();\n        }\n\n        editor.clearSelection();\n        editor.session.doc.replace(new Range(selectionStart.row, 0, selectionEnd.row + 2, 0), insertLine);\n\n        if (selectedCount > 0) {\n            // Select the text that was previously selected\n            editor.selection.moveCursorTo(selectionStart.row, selectionStart.column);\n            editor.selection.selectTo(selectionStart.row, selectionStart.column + selectedCount);\n        } else {\n            // If the joined line had something in it, start the cursor at that something\n            firstLineEndCol = editor.session.doc.getLine(selectionStart.row).length > firstLineEndCol ? (firstLineEndCol + 1) : firstLineEndCol;\n            editor.selection.moveCursorTo(selectionStart.row, firstLineEndCol);\n        }\n    },\n    multiSelectAction: \"forEach\",\n    readOnly: true\n}, {\n    name: \"invertSelection\",\n    description: \"Invert selection\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        var endRow = editor.session.doc.getLength() - 1;\n        var endCol = editor.session.doc.getLine(endRow).length;\n        var ranges = editor.selection.rangeList.ranges;\n        var newRanges = [];\n\n        // If multiple selections don't exist, rangeList will return 0 so replace with single range\n        if (ranges.length < 1) {\n            ranges = [editor.selection.getRange()];\n        }\n\n        for (var i = 0; i < ranges.length; i++) {\n            if (i == (ranges.length - 1)) {\n                // The last selection must connect to the end of the document, unless it already does\n                if (!(ranges[i].end.row === endRow && ranges[i].end.column === endCol)) {\n                    newRanges.push(new Range(ranges[i].end.row, ranges[i].end.column, endRow, endCol));\n                }\n            }\n\n            if (i === 0) {\n                // The first selection must connect to the start of the document, unless it already does\n                if (!(ranges[i].start.row === 0 && ranges[i].start.column === 0)) {\n                    newRanges.push(new Range(0, 0, ranges[i].start.row, ranges[i].start.column));\n                }\n            } else {\n                newRanges.push(new Range(ranges[i-1].end.row, ranges[i-1].end.column, ranges[i].start.row, ranges[i].start.column));\n            }\n        }\n\n        editor.exitMultiSelectMode();\n        editor.clearSelection();\n\n        for(var i = 0; i < newRanges.length; i++) {\n            editor.selection.addRange(newRanges[i], false);\n        }\n    },\n    readOnly: true,\n    scrollIntoView: \"none\"\n}, {\n    name: \"addLineAfter\",\n    description: \"Add new line after the current line\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        editor.navigateLineEnd();\n        editor.insert(\"\\n\");\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"addLineBefore\",\n    description: \"Add new line before the current line\",\n    exec: function(editor) {\n        editor.selection.clearSelection();\n        var cursor = editor.getCursorPosition();\n        editor.selection.moveTo(cursor.row - 1, Number.MAX_VALUE);\n        editor.insert(\"\\n\");\n        if (cursor.row === 0) editor.navigateUp();\n    },\n    multiSelectAction: \"forEach\",\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"openCommandPallete\",\n    description: \"Open command palette\",\n    bindKey: bindKey(\"F1\", \"F1\"),\n    exec: function(editor) {\n        editor.prompt({ $type: \"commands\" });\n    },\n    readOnly: true\n}, {\n    name: \"modeSelect\",\n    description: \"Change language mode...\",\n    bindKey: bindKey(null, null),\n    exec: function(editor) {\n        editor.prompt({ $type: \"modes\" });\n    },\n    readOnly: true\n}];\n\nfor (var i = 1; i < 9; i++) {\n    exports.commands.push({\n        name: \"foldToLevel\" + i,\n        description: \"Fold To Level \" + i,\n        level: i,\n        exec: function(editor) { editor.session.foldToLevel(this.level); },\n        scrollIntoView: \"center\",\n        readOnly: true\n    });\n}\n","// commands to enter multiselect mode\nexports.defaultCommands = [{\n    name: \"addCursorAbove\",\n    description: \"Add cursor above\",\n    exec: function(editor) { editor.selectMoreLines(-1); },\n    bindKey: {win: \"Ctrl-Alt-Up\", mac: \"Ctrl-Alt-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelow\",\n    description: \"Add cursor below\",\n    exec: function(editor) { editor.selectMoreLines(1); },\n    bindKey: {win: \"Ctrl-Alt-Down\", mac: \"Ctrl-Alt-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorAboveSkipCurrent\",\n    description: \"Add cursor above (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Up\", mac: \"Ctrl-Alt-Shift-Up\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"addCursorBelowSkipCurrent\",\n    description: \"Add cursor below (skip current)\",\n    exec: function(editor) { editor.selectMoreLines(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Down\", mac: \"Ctrl-Alt-Shift-Down\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreBefore\",\n    description: \"Select more before\",\n    exec: function(editor) { editor.selectMore(-1); },\n    bindKey: {win: \"Ctrl-Alt-Left\", mac: \"Ctrl-Alt-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectMoreAfter\",\n    description: \"Select more after\",\n    exec: function(editor) { editor.selectMore(1); },\n    bindKey: {win: \"Ctrl-Alt-Right\", mac: \"Ctrl-Alt-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextBefore\",\n    description: \"Select next before\",\n    exec: function(editor) { editor.selectMore(-1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Left\", mac: \"Ctrl-Alt-Shift-Left\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"selectNextAfter\",\n    description: \"Select next after\",\n    exec: function(editor) { editor.selectMore(1, true); },\n    bindKey: {win: \"Ctrl-Alt-Shift-Right\", mac: \"Ctrl-Alt-Shift-Right\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}, {\n    name: \"toggleSplitSelectionIntoLines\",\n    description: \"Split into lines\",\n    exec: function(editor) {\n        if (editor.multiSelect.rangeCount > 1)\n            editor.multiSelect.joinSelections();\n        else\n            editor.multiSelect.splitIntoLines();\n    },\n    bindKey: {win: \"Ctrl-Alt-L\", mac: \"Ctrl-Alt-L\"},\n    readOnly: true\n}, {\n    name: \"splitSelectionIntoLines\",\n    description: \"Split into lines\",\n    exec: function(editor) { editor.multiSelect.splitIntoLines(); },\n    readOnly: true\n}, {\n    name: \"alignCursors\",\n    description: \"Align cursors\",\n    exec: function(editor) { editor.alignCursors(); },\n    bindKey: {win: \"Ctrl-Alt-A\", mac: \"Ctrl-Alt-A\"},\n    scrollIntoView: \"cursor\"\n}, {\n    name: \"findAll\",\n    description: \"Find all\",\n    exec: function(editor) { editor.findAll(); },\n    bindKey: {win: \"Ctrl-Alt-K\", mac: \"Ctrl-Alt-G\"},\n    scrollIntoView: \"cursor\",\n    readOnly: true\n}];\n\n// commands active only in multiselect mode\nexports.multiSelectCommands = [{\n    name: \"singleSelection\",\n    description: \"Single selection\",\n    bindKey: \"esc\",\n    exec: function(editor) { editor.exitMultiSelectMode(); },\n    scrollIntoView: \"cursor\",\n    readOnly: true,\n    isAvailable: function(editor) {return editor && editor.inMultiSelectMode;}\n}];\n\nvar HashHandler = require(\"../keyboard/hash_handler\").HashHandler;\nexports.keyboardHandler = new HashHandler(exports.multiSelectCommands);\n","\"no use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar net = require(\"./lib/net\");\nvar dom = require(\"./lib/dom\");\nvar AppConfig = require(\"./lib/app_config\").AppConfig;\n\nmodule.exports = exports = new AppConfig();\n\nvar options = {\n    packaged: false,\n    workerPath: null,\n    modePath: null,\n    themePath: null,\n    basePath: \"\",\n    suffix: \".js\",\n    $moduleUrls: {},\n    loadWorkerFromBlob: true,\n    sharedPopups: false,\n    useStrictCSP: null\n};\n\nexports.get = function(key) {\n    if (!options.hasOwnProperty(key))\n        throw new Error(\"Unknown config key: \" + key);\n    return options[key];\n};\n\nexports.set = function(key, value) {\n    if (options.hasOwnProperty(key))\n        options[key] = value;\n    else if (this.setDefaultValue(\"\", key, value) == false)\n        throw new Error(\"Unknown config key: \" + key);\n    if (key == \"useStrictCSP\")\n        dom.useStrictCSP(value);\n};\n\nexports.all = function() {\n    return lang.copyObject(options);\n};\n\nexports.$modes = {};\n\n// module loading\nexports.moduleUrl = function(name, component) {\n    if (options.$moduleUrls[name])\n        return options.$moduleUrls[name];\n\n    var parts = name.split(\"/\");\n    component = component || parts[parts.length - 2] || \"\";\n    \n    // todo make this configurable or get rid of '-'\n    var sep = component == \"snippets\" ? \"/\" : \"-\";\n    var base = parts[parts.length - 1];\n    if (component == \"worker\" && sep == \"-\") {\n        var re = new RegExp(\"^\" + component + \"[\\\\-_]|[\\\\-_]\" + component + \"$\", \"g\");\n        base = base.replace(re, \"\");\n    }\n\n    if ((!base || base == component) && parts.length > 1)\n        base = parts[parts.length - 2];\n    var path = options[component + \"Path\"];\n    if (path == null) {\n        path = options.basePath;\n    } else if (sep == \"/\") {\n        component = sep = \"\";\n    }\n    if (path && path.slice(-1) != \"/\")\n        path += \"/\";\n    return path + component + sep + base + this.get(\"suffix\");\n};\n\nexports.setModuleUrl = function(name, subst) {\n    return options.$moduleUrls[name] = subst;\n};\n\nvar loader = function(moduleName, cb) {\n    if (moduleName == \"ace/theme/textmate\")\n        return cb(null, require(\"./theme/textmate\"));\n    return console.error(\"loader is not configured\");\n};\n\nexports.setLoader = function(cb) {\n    loader = cb;\n};\n\nexports.$loading = {};\nexports.loadModule = function(moduleName, onLoad) {\n    var module, moduleType;\n    if (Array.isArray(moduleName)) {\n        moduleType = moduleName[0];\n        moduleName = moduleName[1];\n    }\n\n    try {\n        module = require(moduleName);\n    } catch (e) {}\n    // require(moduleName) can return empty object if called after require([moduleName], callback)\n    if (module && !exports.$loading[moduleName])\n        return onLoad && onLoad(module);\n\n    if (!exports.$loading[moduleName])\n        exports.$loading[moduleName] = [];\n\n    exports.$loading[moduleName].push(onLoad);\n\n    if (exports.$loading[moduleName].length > 1)\n        return;\n\n    var afterLoad = function() {\n        loader(moduleName, function(err, module) {\n            exports._emit(\"load.module\", {name: moduleName, module: module});\n            var listeners = exports.$loading[moduleName];\n            exports.$loading[moduleName] = null;\n            listeners.forEach(function(onLoad) {\n                onLoad && onLoad(module);\n            });\n        });\n    };\n\n    if (!exports.get(\"packaged\"))\n        return afterLoad();\n    \n    net.loadScript(exports.moduleUrl(moduleName, moduleType), afterLoad);\n    reportErrorIfPathIsNotConfigured();\n};\n\nvar reportErrorIfPathIsNotConfigured = function() {\n    if (\n        !options.basePath && !options.workerPath \n        && !options.modePath && !options.themePath\n        && !Object.keys(options.$moduleUrls).length\n    ) {\n        console.error(\n            \"Unable to infer path to ace from script src,\",\n            \"use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes\",\n            \"or with webpack use ace/webpack-resolver\"\n        );\n        reportErrorIfPathIsNotConfigured = function() {};\n    }\n};\n\nexports.version = \"1.13.1\";\n\n\n","module.exports = `/*\nstyles = []\nfor (var i = 1; i < 16; i++) {\n    styles.push(\".ace_br\" + i + \"{\" + (\n        [\"top-left\", \"top-right\", \"bottom-right\", \"bottom-left\"]\n    ).map(function(x, j) {\n        return i & (1<<j) ? \"border-\" + x + \"-radius: 3px;\" : \"\" \n    }).filter(Boolean).join(\" \") + \"}\")\n}\nstyles.join(\"\\\\n\")\n*/\n.ace_br1 {border-top-left-radius    : 3px;}\n.ace_br2 {border-top-right-radius   : 3px;}\n.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}\n.ace_br4 {border-bottom-right-radius: 3px;}\n.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}\n.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}\n.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}\n.ace_br8 {border-bottom-left-radius : 3px;}\n.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}\n.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}\n.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}\n.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}\n.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}\n\n\n.ace_editor {\n    position: relative;\n    overflow: hidden;\n    padding: 0;\n    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;\n    direction: ltr;\n    text-align: left;\n    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);\n}\n\n.ace_scroller {\n    position: absolute;\n    overflow: hidden;\n    top: 0;\n    bottom: 0;\n    background-color: inherit;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    cursor: text;\n}\n\n.ace_content {\n    position: absolute;\n    box-sizing: border-box;\n    min-width: 100%;\n    contain: style size layout;\n    font-variant-ligatures: no-common-ligatures;\n}\n\n.ace_dragging .ace_scroller:before{\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    content: '';\n    background: rgba(250, 250, 250, 0.01);\n    z-index: 1000;\n}\n.ace_dragging.ace_dark .ace_scroller:before{\n    background: rgba(0, 0, 0, 0.01);\n}\n\n.ace_gutter {\n    position: absolute;\n    overflow : hidden;\n    width: auto;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    cursor: default;\n    z-index: 4;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    contain: style size layout;\n}\n\n.ace_gutter-active-line {\n    position: absolute;\n    left: 0;\n    right: 0;\n}\n\n.ace_scroller.ace_scroll-left {\n    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;\n}\n\n.ace_gutter-cell {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    padding-left: 19px;\n    padding-right: 6px;\n    background-repeat: no-repeat;\n}\n\n.ace_gutter-cell.ace_error {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==\");\n    background-repeat: no-repeat;\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_warning {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==\");\n    background-position: 2px center;\n}\n\n.ace_gutter-cell.ace_info {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=\");\n    background-position: 2px center;\n}\n.ace_dark .ace_gutter-cell.ace_info {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC\");\n}\n\n.ace_scrollbar {\n    contain: strict;\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    z-index: 6;\n}\n\n.ace_scrollbar-inner {\n    position: absolute;\n    cursor: text;\n    left: 0;\n    top: 0;\n}\n\n.ace_scrollbar-v{\n    overflow-x: hidden;\n    overflow-y: scroll;\n    top: 0;\n}\n\n.ace_scrollbar-h {\n    overflow-x: scroll;\n    overflow-y: hidden;\n    left: 0;\n}\n\n.ace_print-margin {\n    position: absolute;\n    height: 100%;\n}\n\n.ace_text-input {\n    position: absolute;\n    z-index: 0;\n    width: 0.5em;\n    height: 1em;\n    opacity: 0;\n    background: transparent;\n    -moz-appearance: none;\n    appearance: none;\n    border: none;\n    resize: none;\n    outline: none;\n    overflow: hidden;\n    font: inherit;\n    padding: 0 1px;\n    margin: 0 -1px;\n    contain: strict;\n    -ms-user-select: text;\n    -moz-user-select: text;\n    -webkit-user-select: text;\n    user-select: text;\n    /*with \\`pre-line\\` chrome inserts &nbsp; instead of space*/\n    white-space: pre!important;\n}\n.ace_text-input.ace_composition {\n    background: transparent;\n    color: inherit;\n    z-index: 1000;\n    opacity: 1;\n}\n.ace_composition_placeholder { color: transparent }\n.ace_composition_marker { \n    border-bottom: 1px solid;\n    position: absolute;\n    border-radius: 0;\n    margin-top: 1px;\n}\n\n[ace_nocontext=true] {\n    transform: none!important;\n    filter: none!important;\n    clip-path: none!important;\n    mask : none!important;\n    contain: none!important;\n    perspective: none!important;\n    mix-blend-mode: initial!important;\n    z-index: auto;\n}\n\n.ace_layer {\n    z-index: 1;\n    position: absolute;\n    overflow: hidden;\n    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/\n    word-wrap: normal;\n    white-space: pre;\n    height: 100%;\n    width: 100%;\n    box-sizing: border-box;\n    /* setting pointer-events: auto; on node under the mouse, which changes\n        during scroll, will break mouse wheel scrolling in Safari */\n    pointer-events: none;\n}\n\n.ace_gutter-layer {\n    position: relative;\n    width: auto;\n    text-align: right;\n    pointer-events: auto;\n    height: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer {\n    font: inherit !important;\n    position: absolute;\n    height: 1000000px;\n    width: 1000000px;\n    contain: style size layout;\n}\n\n.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {\n    contain: style size layout;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n}\n\n.ace_hidpi .ace_text-layer,\n.ace_hidpi .ace_gutter-layer,\n.ace_hidpi .ace_content,\n.ace_hidpi .ace_gutter {\n    contain: strict;\n    will-change: transform;\n}\n.ace_hidpi .ace_text-layer > .ace_line, \n.ace_hidpi .ace_text-layer > .ace_line_group {\n    contain: strict;\n}\n\n.ace_cjk {\n    display: inline-block;\n    text-align: center;\n}\n\n.ace_cursor-layer {\n    z-index: 4;\n}\n\n.ace_cursor {\n    z-index: 4;\n    position: absolute;\n    box-sizing: border-box;\n    border-left: 2px solid;\n    /* workaround for smooth cursor repaintng whole screen in chrome */\n    transform: translatez(0);\n}\n\n.ace_multiselect .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_slim-cursors .ace_cursor {\n    border-left-width: 1px;\n}\n\n.ace_overwrite-cursors .ace_cursor {\n    border-left-width: 0;\n    border-bottom: 1px solid;\n}\n\n.ace_hidden-cursors .ace_cursor {\n    opacity: 0.2;\n}\n\n.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {\n    opacity: 0;\n}\n\n.ace_smooth-blinking .ace_cursor {\n    transition: opacity 0.18s;\n}\n\n.ace_animate-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: step-end;\n    animation-name: blink-ace-animate;\n    animation-iteration-count: infinite;\n}\n\n.ace_animate-blinking.ace_smooth-blinking .ace_cursor {\n    animation-duration: 1000ms;\n    animation-timing-function: ease-in-out;\n    animation-name: blink-ace-animate-smooth;\n}\n    \n@keyframes blink-ace-animate {\n    from, to { opacity: 1; }\n    60% { opacity: 0; }\n}\n\n@keyframes blink-ace-animate-smooth {\n    from, to { opacity: 1; }\n    45% { opacity: 1; }\n    60% { opacity: 0; }\n    85% { opacity: 0; }\n}\n\n.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {\n    position: absolute;\n    z-index: 3;\n}\n\n.ace_marker-layer .ace_selection {\n    position: absolute;\n    z-index: 5;\n}\n\n.ace_marker-layer .ace_bracket {\n    position: absolute;\n    z-index: 6;\n}\n\n.ace_marker-layer .ace_error_bracket {\n    position: absolute;\n    border-bottom: 1px solid #DE5555;\n    border-radius: 0;\n}\n\n.ace_marker-layer .ace_active-line {\n    position: absolute;\n    z-index: 2;\n}\n\n.ace_marker-layer .ace_selected-word {\n    position: absolute;\n    z-index: 4;\n    box-sizing: border-box;\n}\n\n.ace_line .ace_fold {\n    box-sizing: border-box;\n\n    display: inline-block;\n    height: 11px;\n    margin-top: -2px;\n    vertical-align: middle;\n\n    background-image:\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=\");\n    background-repeat: no-repeat, repeat-x;\n    background-position: center center, top left;\n    color: transparent;\n\n    border: 1px solid black;\n    border-radius: 2px;\n\n    cursor: pointer;\n    pointer-events: auto;\n}\n\n.ace_dark .ace_fold {\n}\n\n.ace_fold:hover{\n    background-image:\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII=\"),\n        url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC\");\n}\n\n.ace_tooltip {\n    background-color: #FFF;\n    background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));\n    border: 1px solid gray;\n    border-radius: 1px;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n    color: black;\n    max-width: 100%;\n    padding: 3px 4px;\n    position: fixed;\n    z-index: 999999;\n    box-sizing: border-box;\n    cursor: default;\n    white-space: pre;\n    word-wrap: break-word;\n    line-height: normal;\n    font-style: normal;\n    font-weight: normal;\n    letter-spacing: normal;\n    pointer-events: none;\n}\n\n.ace_folding-enabled > .ace_gutter-cell {\n    padding-right: 13px;\n}\n\n.ace_fold-widget {\n    box-sizing: border-box;\n\n    margin: 0 -12px 0 1px;\n    display: none;\n    width: 11px;\n    vertical-align: top;\n\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==\");\n    background-repeat: no-repeat;\n    background-position: center;\n\n    border-radius: 3px;\n    \n    border: 1px solid transparent;\n    cursor: pointer;\n}\n\n.ace_folding-enabled .ace_fold-widget {\n    display: inline-block;   \n}\n\n.ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==\");\n}\n\n.ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==\");\n}\n\n.ace_fold-widget:hover {\n    border: 1px solid rgba(0, 0, 0, 0.3);\n    background-color: rgba(255, 255, 255, 0.2);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);\n}\n\n.ace_fold-widget:active {\n    border: 1px solid rgba(0, 0, 0, 0.4);\n    background-color: rgba(0, 0, 0, 0.05);\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);\n}\n/**\n * Dark version for fold widgets\n */\n.ace_dark .ace_fold-widget {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC\");\n}\n.ace_dark .ace_fold-widget.ace_end {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget.ace_closed {\n    background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==\");\n}\n.ace_dark .ace_fold-widget:hover {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n    background-color: rgba(255, 255, 255, 0.1);\n}\n.ace_dark .ace_fold-widget:active {\n    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);\n}\n\n.ace_inline_button {\n    border: 1px solid lightgray;\n    display: inline-block;\n    margin: -1px 8px;\n    padding: 0 5px;\n    pointer-events: auto;\n    cursor: pointer;\n}\n.ace_inline_button:hover {\n    border-color: gray;\n    background: rgba(200,200,200,0.2);\n    display: inline-block;\n    pointer-events: auto;\n}\n\n.ace_fold-widget.ace_invalid {\n    background-color: #FFB4B4;\n    border-color: #DE5555;\n}\n\n.ace_fade-fold-widgets .ace_fold-widget {\n    transition: opacity 0.4s ease 0.05s;\n    opacity: 0;\n}\n\n.ace_fade-fold-widgets:hover .ace_fold-widget {\n    transition: opacity 0.05s ease 0.05s;\n    opacity:1;\n}\n\n.ace_underline {\n    text-decoration: underline;\n}\n\n.ace_bold {\n    font-weight: bold;\n}\n\n.ace_nobold .ace_bold {\n    font-weight: normal;\n}\n\n.ace_italic {\n    font-style: italic;\n}\n\n\n.ace_error-marker {\n    background-color: rgba(255, 0, 0,0.2);\n    position: absolute;\n    z-index: 9;\n}\n\n.ace_highlight-marker {\n    background-color: rgba(255, 255, 0,0.2);\n    position: absolute;\n    z-index: 8;\n}\n\n.ace_mobile-menu {\n    position: absolute;\n    line-height: 1.5;\n    border-radius: 4px;\n    -ms-user-select: none;\n    -moz-user-select: none;\n    -webkit-user-select: none;\n    user-select: none;\n    background: white;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #dcdcdc;\n    color: black;\n}\n.ace_dark > .ace_mobile-menu {\n    background: #333;\n    color: #ccc;\n    box-shadow: 1px 3px 2px grey;\n    border: 1px solid #444;\n\n}\n.ace_mobile-button {\n    padding: 2px;\n    cursor: pointer;\n    overflow: hidden;\n}\n.ace_mobile-button:hover {\n    background-color: #eee;\n    opacity:1;\n}\n.ace_mobile-button:active {\n    background-color: #ddd;\n}\n\n.ace_placeholder {\n    font-family: arial;\n    transform: scale(0.9);\n    transform-origin: left;\n    white-space: pre;\n    opacity: 0.7;\n    margin: 0 10px;\n}`;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar applyDelta = require(\"./apply_delta\").applyDelta;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\nvar Anchor = require(\"./anchor\").Anchor;\n\n/**\n * Contains the text of the document. Document can be attached to several [[EditSession `EditSession`]]s. \n * At its core, `Document`s are just an array of strings, with each row in the document matching up to the array index.\n *\n * @class Document\n **/\n\n/**\n *\n * Creates a new `Document`. If `text` is included, the `Document` contains those strings; otherwise, it's empty.\n * @param {String | String[]} textOrLines text The starting text\n * @constructor\n **/\n\nvar Document = function(textOrLines) {\n    this.$lines = [\"\"];\n\n    // There has to be one line at least in the document. If you pass an empty\n    // string to the insert function, nothing will happen. Workaround.\n    if (textOrLines.length === 0) {\n        this.$lines = [\"\"];\n    } else if (Array.isArray(textOrLines)) {\n        this.insertMergedLines({row: 0, column: 0}, textOrLines);\n    } else {\n        this.insert({row: 0, column:0}, textOrLines);\n    }\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Replaces all the lines in the current `Document` with the value of `text`.\n     *\n     * @param {String} text The text to use\n     **/\n    this.setValue = function(text) {\n        var len = this.getLength() - 1;\n        this.remove(new Range(0, 0, len, this.getLine(len).length));\n        this.insert({row: 0, column: 0}, text || \"\");\n    };\n\n    /**\n     * Returns all the lines in the document as a single string, joined by the new line character.\n     **/\n    this.getValue = function() {\n        return this.getAllLines().join(this.getNewLineCharacter());\n    };\n\n    /** \n     * Creates a new `Anchor` to define a floating point in the document.\n     * @param {Number} row The row number to use\n     * @param {Number} column The column number to use\n     *\n     **/\n    this.createAnchor = function(row, column) {\n        return new Anchor(this, row, column);\n    };\n\n    /** \n     * Splits a string of text on any newline (`\\n`) or carriage-return (`\\r`) characters.\n     *\n     * @method $split\n     * @param {String} text The text to work with\n     * @returns {String} A String array, with each index containing a piece of the original `text` string.\n     *\n     **/\n\n    // check for IE split bug\n    if (\"aaa\".split(/a/).length === 0) {\n        this.$split = function(text) {\n            return text.replace(/\\r\\n|\\r/g, \"\\n\").split(\"\\n\");\n        };\n    } else {\n        this.$split = function(text) {\n            return text.split(/\\r\\n|\\r|\\n/);\n        };\n    }\n\n\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r\\n|\\r|\\n)/m);\n        this.$autoNewLine = match ? match[1] : \"\\n\";\n        this._signal(\"changeNewLineMode\");\n    };\n\n    /**\n     * Returns the newline character that's being used, depending on the value of `newLineMode`. \n     * @returns {String} If `newLineMode == windows`, `\\r\\n` is returned.  \n     *  If `newLineMode == unix`, `\\n` is returned.  \n     *  If `newLineMode == auto`, the value of `autoNewLine` is returned.\n     *\n     **/\n    this.getNewLineCharacter = function() {\n        switch (this.$newLineMode) {\n          case \"windows\":\n            return \"\\r\\n\";\n          case \"unix\":\n            return \"\\n\";\n          default:\n            return this.$autoNewLine || \"\\n\";\n        }\n    };\n\n    this.$autoNewLine = \"\";\n    this.$newLineMode = \"auto\";\n    /**\n     * [Sets the new line mode.]{: #Document.setNewLineMode.desc}\n     * @param {String} newLineMode [The newline mode to use; can be either `windows`, `unix`, or `auto`]{: #Document.setNewLineMode.param}\n     *\n     **/\n    this.setNewLineMode = function(newLineMode) {\n        if (this.$newLineMode === newLineMode)\n            return;\n\n        this.$newLineMode = newLineMode;\n        this._signal(\"changeNewLineMode\");\n    };\n\n    /**\n     * [Returns the type of newlines being used; either `windows`, `unix`, or `auto`]{: #Document.getNewLineMode}\n     * @returns {String}\n     **/\n    this.getNewLineMode = function() {\n        return this.$newLineMode;\n    };\n\n    /**\n     * Returns `true` if `text` is a newline character (either `\\r\\n`, `\\r`, or `\\n`).\n     * @param {String} text The text to check\n     *\n     **/\n    this.isNewLine = function(text) {\n        return (text == \"\\r\\n\" || text == \"\\r\" || text == \"\\n\");\n    };\n\n    /**\n     * Returns a verbatim copy of the given line as it is in the document\n     * @param {Number} row The row index to retrieve\n     *\n     **/\n    this.getLine = function(row) {\n        return this.$lines[row] || \"\";\n    };\n\n    /**\n     * Returns an array of strings of the rows between `firstRow` and `lastRow`. This function is inclusive of `lastRow`.\n     * @param {Number} firstRow The first row index to retrieve\n     * @param {Number} lastRow The final row index to retrieve\n     *\n     **/\n    this.getLines = function(firstRow, lastRow) {\n        return this.$lines.slice(firstRow, lastRow + 1);\n    };\n\n    /**\n     * Returns all lines in the document as string array.\n     **/\n    this.getAllLines = function() {\n        return this.getLines(0, this.getLength());\n    };\n\n    /**\n     * Returns the number of rows in the document.\n     **/\n    this.getLength = function() {\n        return this.$lines.length;\n    };\n\n    /**\n     * Returns all the text within `range` as a single string.\n     * @param {Range} range The range to work with.\n     * \n     * @returns {String}\n     **/\n    this.getTextRange = function(range) {\n        return this.getLinesForRange(range).join(this.getNewLineCharacter());\n    };\n    \n    /**\n     * Returns all the text within `range` as an array of lines.\n     * @param {Range} range The range to work with.\n     * \n     * @returns {string[]}\n     **/\n    this.getLinesForRange = function(range) {\n        var lines;\n        if (range.start.row === range.end.row) {\n            // Handle a single-line range.\n            lines = [this.getLine(range.start.row).substring(range.start.column, range.end.column)];\n        } else {\n            // Handle a multi-line range.\n            lines = this.getLines(range.start.row, range.end.row);\n            lines[0] = (lines[0] || \"\").substring(range.start.column);\n            var l = lines.length - 1;\n            if (range.end.row - range.start.row == l)\n                lines[l] = lines[l].substring(0, range.end.column);\n        }\n        return lines;\n    };\n\n    // Deprecated methods retained for backwards compatibility.\n    this.insertLines = function(row, lines) {\n        console.warn(\"Use of document.insertLines is deprecated. Use the insertFullLines method instead.\");\n        return this.insertFullLines(row, lines);\n    };\n    this.removeLines = function(firstRow, lastRow) {\n        console.warn(\"Use of document.removeLines is deprecated. Use the removeFullLines method instead.\");\n        return this.removeFullLines(firstRow, lastRow);\n    };\n    this.insertNewLine = function(position) {\n        console.warn(\"Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead.\");\n        return this.insertMergedLines(position, [\"\", \"\"]);\n    };\n\n    /**\n     * Inserts a block of `text` at the indicated `position`.\n     * @param {Object} position The position to start inserting at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text to insert\n     * @returns {Object} The position ({row, column}) of the last line of `text`. If the length of `text` is 0, this function simply returns `position`. \n     *\n     **/\n    this.insert = function(position, text) {\n        // Only detect new lines if the document has no line break yet.\n        if (this.getLength() <= 1)\n            this.$detectNewLine(text);\n        \n        return this.insertMergedLines(position, this.$split(text));\n    };\n    \n    /**\n     * Inserts `text` into the `position` at the current row. This method also triggers the `\"change\"` event.\n     * \n     * This differs from the `insert` method in two ways:\n     *   1. This does NOT handle newline characters (single-line text only).\n     *   2. This is faster than the `insert` method for single-line text insertions.\n     * \n     * @param {Object} position The position to insert at; it's an object that looks like `{ row: row, column: column}`\n     * @param {String} text A chunk of text\n     * @returns {Object} Returns an object containing the final row and column, like this:  \n     *     ```\n     *     {row: endRow, column: 0}\n     *     ```\n     **/\n    this.insertInLine = function(position, text) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = this.pos(position.row, position.column + text.length);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: [text]\n        }, true);\n        \n        return this.clonePos(end);\n    };\n    \n    this.clippedPos = function(row, column) {\n        var length = this.getLength();\n        if (row === undefined) {\n            row = length;\n        } else if (row < 0) {\n            row = 0;\n        } else if (row >= length) {\n            row = length - 1;\n            column = undefined;\n        }\n        var line = this.getLine(row);\n        if (column == undefined)\n            column = line.length;\n        column = Math.min(Math.max(column, 0), line.length);\n        return {row: row, column: column};\n    };\n    \n    this.clonePos = function(pos) {\n        return {row: pos.row, column: pos.column};\n    };\n    \n    this.pos = function(row, column) {\n        return {row: row, column: column};\n    };\n    \n    this.$clipPosition = function(position) {\n        var length = this.getLength();\n        if (position.row >= length) {\n            position.row = Math.max(0, length - 1);\n            position.column = this.getLine(length - 1).length;\n        } else {\n            position.row = Math.max(0, position.row);\n            position.column = Math.min(Math.max(position.column, 0), this.getLine(position.row).length);\n        }\n        return position;\n    };\n\n    /**\n     * Fires whenever the document changes.\n     *\n     * Several methods trigger different `\"change\"` events. Below is a list of each action type, followed by each property that's also available:\n     *\n     *  * `\"insert\"`\n     *    * `range`: the [[Range]] of the change within the document\n     *    * `lines`: the lines being added\n     *  * `\"remove\"`\n     *    * `range`: the [[Range]] of the change within the document\n     *    * `lines`: the lines being removed\n     *\n     * @event change\n     * @param {Object} e Contains at least one property called `\"action\"`. `\"action\"` indicates the action that triggered the change. Each action also has a set of additional properties.\n     *\n     **/\n    \n    /**\n     * Inserts the elements in `lines` into the document as full lines (does not merge with existing line), starting at the row index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Number} row The index of the row to insert at\n     * @param {string[]} lines An array of strings\n     * @returns {Object} Contains the final row and column, like this:  \n     *   ```\n     *   {row: endRow, column: 0}\n     *   ```  \n     *   If `lines` is empty, this function returns an object containing the current row, and column, like this:  \n     *   ``` \n     *   {row: row, column: 0}\n     *   ```\n     *\n     **/\n    this.insertFullLines = function(row, lines) {\n        // Clip to document.\n        // Allow one past the document end.\n        row = Math.min(Math.max(row, 0), this.getLength());\n        \n        // Calculate insertion point.\n        var column = 0;\n        if (row < this.getLength()) {\n            // Insert before the specified row.\n            lines = lines.concat([\"\"]);\n            column = 0;\n        } else {\n            // Insert after the last row in the document.\n            lines = [\"\"].concat(lines);\n            row--;\n            column = this.$lines[row].length;\n        }\n        \n        // Insert.\n        this.insertMergedLines({row: row, column: column}, lines);\n    };\n\n    /**\n     * Inserts the elements in `lines` into the document, starting at the position index given by `row`. This method also triggers the `\"change\"` event.\n     * @param {Number} row The index of the row to insert at\n     * @param {string[]} lines An array of strings\n     * @returns {Object} Contains the final row and column, like this:  \n     *   ```\n     *   {row: endRow, column: 0}\n     *   ```  \n     *   If `lines` is empty, this function returns an object containing the current row, and column, like this:  \n     *   ``` \n     *   {row: row, column: 0}\n     *   ```\n     *\n     **/    \n    this.insertMergedLines = function(position, lines) {\n        var start = this.clippedPos(position.row, position.column);\n        var end = {\n            row: start.row + lines.length - 1,\n            column: (lines.length == 1 ? start.column : 0) + lines[lines.length - 1].length\n        };\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"insert\",\n            lines: lines\n        });\n        \n        return this.clonePos(end);\n    };\n\n    /**\n     * Removes the `range` from the document.\n     * @param {Range} range A specified Range to remove\n     * @returns {Object} Returns the new `start` property of the range, which contains `startRow` and `startColumn`. If `range` is empty, this function returns the unmodified value of `range.start`.\n     *\n     **/\n    this.remove = function(range) {\n        var start = this.clippedPos(range.start.row, range.start.column);\n        var end = this.clippedPos(range.end.row, range.end.column);\n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        });\n        return this.clonePos(start);\n    };\n\n    /**\n     * Removes the specified columns from the `row`. This method also triggers a `\"change\"` event.\n     * @param {Number} row The row to remove from\n     * @param {Number} startColumn The column to start removing at \n     * @param {Number} endColumn The column to stop removing at\n     * @returns {Object} Returns an object containing `startRow` and `startColumn`, indicating the new row and column values.<br/>If `startColumn` is equal to `endColumn`, this function returns nothing.\n     *\n     **/\n    this.removeInLine = function(row, startColumn, endColumn) {\n        var start = this.clippedPos(row, startColumn);\n        var end = this.clippedPos(row, endColumn);\n        \n        this.applyDelta({\n            start: start,\n            end: end,\n            action: \"remove\",\n            lines: this.getLinesForRange({start: start, end: end})\n        }, true);\n        \n        return this.clonePos(start);\n    };\n\n    /**\n     * Removes a range of full lines. This method also triggers the `\"change\"` event.\n     * @param {Number} firstRow The first row to be removed\n     * @param {Number} lastRow The last row to be removed\n     * @returns {[String]} Returns all the removed lines.\n     *\n     **/\n    this.removeFullLines = function(firstRow, lastRow) {\n        // Clip to document.\n        firstRow = Math.min(Math.max(0, firstRow), this.getLength() - 1);\n        lastRow  = Math.min(Math.max(0, lastRow ), this.getLength() - 1);\n        \n        // Calculate deletion range.\n        // Delete the ending new line unless we're at the end of the document.\n        // If we're at the end of the document, delete the starting new line.\n        var deleteFirstNewLine = lastRow == this.getLength() - 1 && firstRow > 0;\n        var deleteLastNewLine  = lastRow  < this.getLength() - 1;\n        var startRow = ( deleteFirstNewLine ? firstRow - 1                  : firstRow                    );\n        var startCol = ( deleteFirstNewLine ? this.getLine(startRow).length : 0                           );\n        var endRow   = ( deleteLastNewLine  ? lastRow + 1                   : lastRow                     );\n        var endCol   = ( deleteLastNewLine  ? 0                             : this.getLine(endRow).length ); \n        var range = new Range(startRow, startCol, endRow, endCol);\n        \n        // Store delelted lines with bounding newlines ommitted (maintains previous behavior).\n        var deletedLines = this.$lines.slice(firstRow, lastRow + 1);\n        \n        this.applyDelta({\n            start: range.start,\n            end: range.end,\n            action: \"remove\",\n            lines: this.getLinesForRange(range)\n        });\n        \n        // Return the deleted lines.\n        return deletedLines;\n    };\n\n    /**\n     * Removes the new line between `row` and the row immediately following it. This method also triggers the `\"change\"` event.\n     * @param {Number} row The row to check\n     *\n     **/\n    this.removeNewLine = function(row) {\n        if (row < this.getLength() - 1 && row >= 0) {\n            this.applyDelta({\n                start: this.pos(row, this.getLine(row).length),\n                end: this.pos(row + 1, 0),\n                action: \"remove\",\n                lines: [\"\", \"\"]\n            });\n        }\n    };\n\n    /**\n     * Replaces a range in the document with the new `text`.\n     * @param {Range} range A specified Range to replace\n     * @param {String} text The new text to use as a replacement\n     * @returns {Object} Returns an object containing the final row and column, like this:\n     *     {row: endRow, column: 0}\n     * If the text and range are empty, this function returns an object containing the current `range.start` value.\n     * If the text is the exact same as what currently exists, this function returns an object containing the current `range.end` value.\n     *\n     **/\n    this.replace = function(range, text) {\n        if (!(range instanceof Range))\n            range = Range.fromPoints(range.start, range.end);\n        if (text.length === 0 && range.isEmpty())\n            return range.start;\n\n        // Shortcut: If the text we want to insert is the same as it is already\n        // in the document, we don't have to replace anything.\n        if (text == this.getTextRange(range))\n            return range.end;\n\n        this.remove(range);\n        var end;\n        if (text) {\n            end = this.insert(range.start, text);\n        }\n        else {\n            end = range.start;\n        }\n        \n        return end;\n    };\n\n    /**\n     * Applies all changes in `deltas` to the document.\n     * @param {Delta[]} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    this.applyDeltas = function(deltas) {\n        for (var i=0; i<deltas.length; i++) {\n            this.applyDelta(deltas[i]);\n        }\n    };\n    \n    /**\n     * Reverts all changes in `deltas` from the document.\n     * @param {Delta[]} deltas An array of delta objects (can include \"insert\" and \"remove\" actions)\n     **/\n    this.revertDeltas = function(deltas) {\n        for (var i=deltas.length-1; i>=0; i--) {\n            this.revertDelta(deltas[i]);\n        }\n    };\n    \n    /**\n     * Applies `delta` to the document.\n     * @param {Object} delta A delta object (can include \"insert\" and \"remove\" actions)\n     **/\n    this.applyDelta = function(delta, doNotValidate) {\n        var isInsert = delta.action == \"insert\";\n        // An empty range is a NOOP.\n        if (isInsert ? delta.lines.length <= 1 && !delta.lines[0]\n            : !Range.comparePoints(delta.start, delta.end)) {\n            return;\n        }\n        \n        if (isInsert && delta.lines.length > 20000) {\n            this.$splitAndapplyLargeDelta(delta, 20000);\n        }\n        else {\n            applyDelta(this.$lines, delta, doNotValidate);\n            this._signal(\"change\", delta);\n        }\n    };\n    \n    this.$safeApplyDelta = function(delta) {\n        var docLength = this.$lines.length;\n        // verify that delta is in the document to prevent applyDelta from corrupting lines array \n        if (\n            delta.action == \"remove\" && delta.start.row < docLength && delta.end.row < docLength\n            || delta.action == \"insert\" && delta.start.row <= docLength\n        ) {\n            this.applyDelta(delta);\n        }\n    };\n    \n    this.$splitAndapplyLargeDelta = function(delta, MAX) {\n        // Split large insert deltas. This is necessary because:\n        //    1. We need to support splicing delta lines into the document via $lines.splice.apply(...)\n        //    2. fn.apply() doesn't work for a large number of params. The smallest threshold is on chrome 40 ~42000.\n        // we use 20000 to leave some space for actual stack\n        // \n        // To Do: Ideally we'd be consistent and also split 'delete' deltas. We don't do this now, because delete\n        //        delta handling is too slow. If we make delete delta handling faster we can split all large deltas\n        //        as shown in https://gist.github.com/aldendaniels/8367109#file-document-snippet-js\n        //        If we do this, update validateDelta() to limit the number of lines in a delete delta.\n        var lines = delta.lines;\n        var l = lines.length - MAX + 1;\n        var row = delta.start.row; \n        var column = delta.start.column;\n        for (var from = 0, to = 0; from < l; from = to) {\n            to += MAX - 1;\n            var chunk = lines.slice(from, to);\n            chunk.push(\"\");\n            this.applyDelta({\n                start: this.pos(row + from, column),\n                end: this.pos(row + to, column = 0),\n                action: delta.action,\n                lines: chunk\n            }, true);\n        }\n        // Update remaining delta.\n        delta.lines = lines.slice(from);\n        delta.start.row = row + from;\n        delta.start.column = column;\n        this.applyDelta(delta, true);\n    };\n    \n    /**\n     * Reverts `delta` from the document.\n     * @param {Object} delta A delta object (can include \"insert\" and \"remove\" actions)\n     **/\n    this.revertDelta = function(delta) {\n        this.$safeApplyDelta({\n            start: this.clonePos(delta.start),\n            end: this.clonePos(delta.end),\n            action: (delta.action == \"insert\" ? \"remove\" : \"insert\"),\n            lines: delta.lines.slice()\n        });\n    };\n    \n    /**\n     * Converts an index position in a document to a `{row, column}` object.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     * \n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Number} index An index to convert\n     * @param {Number} startRow=0 The row from which to start the conversion\n     * @returns {Object} A `{row, column}` object of the `index` position\n     */\n    this.indexToPosition = function(index, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        for (var i = startRow || 0, l = lines.length; i < l; i++) {\n            index -= lines[i].length + newlineLength;\n            if (index < 0)\n                return {row: i, column: index + lines[i].length + newlineLength};\n        }\n        return {row: l-1, column: index + lines[l-1].length + newlineLength};\n    };\n\n    /**\n     * Converts the `{row, column}` position in a document to the character's index.\n     *\n     * Index refers to the \"absolute position\" of a character in the document. For example:\n     *\n     * ```javascript\n     * var x = 0; // 10 characters, plus one for newline\n     * var y = -1;\n     * ```\n     * \n     * Here, `y` is an index 15: 11 characters for the first row, and 5 characters until `y` in the second.\n     *\n     * @param {Object} pos The `{row, column}` to convert\n     * @param {Number} startRow=0 The row from which to start the conversion\n     * @returns {Number} The index position in the document\n     */\n    this.positionToIndex = function(pos, startRow) {\n        var lines = this.$lines || this.getAllLines();\n        var newlineLength = this.getNewLineCharacter().length;\n        var index = 0;\n        var row = Math.min(pos.row, lines.length);\n        for (var i = startRow || 0; i < row; ++i)\n            index += lines[i].length + newlineLength;\n\n        return index + pos.column;\n    };\n\n}).call(Document.prototype);\n\nexports.Document = Document;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar BidiHandler = require(\"./bidihandler\").BidiHandler;\nvar config = require(\"./config\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Selection = require(\"./selection\").Selection;\nvar TextMode = require(\"./mode/text\").Mode;\nvar Range = require(\"./range\").Range;\nvar Document = require(\"./document\").Document;\nvar BackgroundTokenizer = require(\"./background_tokenizer\").BackgroundTokenizer;\nvar SearchHighlight = require(\"./search_highlight\").SearchHighlight;\n\n/**\n * Stores all the data about [[Editor `Editor`]] state providing easy way to change editors state.\n *\n * `EditSession` can be attached to only one [[Document `Document`]]. Same `Document` can be attached to several `EditSession`s.\n * @class EditSession\n **/\n\n//{ events\n/**\n *\n * Emitted when the document changes.\n * @event change\n * @param {Object} e An object containing a `delta` of information about the change.\n **/\n/**\n * Emitted when the tab size changes, via [[EditSession.setTabSize]].\n *\n * @event changeTabSize\n **/\n/**\n * Emitted when the ability to overwrite text changes, via [[EditSession.setOverwrite]].\n *\n * @event changeOverwrite\n **/\n/**\n * Emitted when the gutter changes, either by setting or removing breakpoints, or when the gutter decorations change.\n *\n * @event changeBreakpoint\n **/\n/**\n * Emitted when a front marker changes.\n *\n * @event changeFrontMarker\n **/\n/**\n * Emitted when a back marker changes.\n *\n * @event changeBackMarker\n **/\n/**\n * Emitted when an annotation changes, like through [[EditSession.setAnnotations]].\n *\n * @event changeAnnotation\n **/\n/**\n * Emitted when a background tokenizer asynchronously processes new rows.\n * @event tokenizerUpdate\n *\n * @param {Object} e An object containing one property, `\"data\"`, that contains information about the changing rows\n *\n **/\n/**\n * Emitted when the current mode changes.\n *\n * @event changeMode\n *\n **/\n/**\n * Emitted when the wrap mode changes.\n *\n * @event changeWrapMode\n *\n **/\n/**\n * Emitted when the wrapping limit changes.\n *\n * @event changeWrapLimit\n *\n **/\n/**\n * Emitted when a code fold is added or removed.\n *\n * @event changeFold\n *\n **/\n /**\n * Emitted when the scroll top changes.\n * @event changeScrollTop\n *\n * @param {Number} scrollTop The new scroll top value\n **/\n/**\n * Emitted when the scroll left changes.\n * @event changeScrollLeft\n *\n * @param {Number} scrollLeft The new scroll left value\n **/\n//}\n\n/**\n * Sets up a new `EditSession` and associates it with the given `Document` and `Mode`.\n * @param {Document | String} text [If `text` is a `Document`, it associates the `EditSession` with it. Otherwise, a new `Document` is created, with the initial text]{: #textParam}\n * @param {Mode} mode [The initial language mode to use for the document]{: #modeParam}\n *\n * @constructor\n **/\n\nvar EditSession = function(text, mode) {\n    this.$breakpoints = [];\n    this.$decorations = [];\n    this.$frontMarkers = {};\n    this.$backMarkers = {};\n    this.$markerId = 1;\n    this.$undoSelect = true;\n\n    this.$foldData = [];\n    this.id = \"session\" + (++EditSession.$uid);\n    this.$foldData.toString = function() {\n        return this.join(\"\\n\");\n    };\n\n    // Set default background tokenizer with Text mode until editor session mode is set \n    this.bgTokenizer = new BackgroundTokenizer((new TextMode()).getTokenizer(), this);\n\n    var _self = this;\n    this.bgTokenizer.on(\"update\", function(e) {\n        _self._signal(\"tokenizerUpdate\", e);\n    });\n\n    this.on(\"changeFold\", this.onChangeFold.bind(this));\n    this.$onChange = this.onChange.bind(this);\n\n    if (typeof text != \"object\" || !text.getLine)\n        text = new Document(text);\n\n    this.setDocument(text);\n    this.selection = new Selection(this);\n    this.$bidiHandler = new BidiHandler(this);\n\n    config.resetOptions(this);\n    this.setMode(mode);\n    config._signal(\"session\", this);\n\n    this.destroyed = false;\n};\n\n\nEditSession.$uid = 0;\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Sets the `EditSession` to point to a new `Document`. If a `BackgroundTokenizer` exists, it also points to `doc`.\n     *\n     * @param {Document} doc The new `Document` to use\n     *\n     **/\n    this.setDocument = function(doc) {\n        if (this.doc)\n            this.doc.off(\"change\", this.$onChange);\n\n        this.doc = doc;\n        doc.on(\"change\", this.$onChange, true);\n\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        this.resetCaches();\n    };\n\n    /**\n     * Returns the `Document` associated with this session.\n     * @return {Document}\n     **/\n    this.getDocument = function() {\n        return this.doc;\n    };\n\n    /**\n     * @param {Number} row The row to work with\n     *\n     **/\n    this.$resetRowCache = function(docRow) {\n        if (!docRow) {\n            this.$docRowCache = [];\n            this.$screenRowCache = [];\n            return;\n        }\n        var l = this.$docRowCache.length;\n        var i = this.$getRowCacheIndex(this.$docRowCache, docRow) + 1;\n        if (l > i) {\n            this.$docRowCache.splice(i, l);\n            this.$screenRowCache.splice(i, l);\n        }\n    };\n\n    this.$getRowCacheIndex = function(cacheArray, val) {\n        var low = 0;\n        var hi = cacheArray.length - 1;\n\n        while (low <= hi) {\n            var mid = (low + hi) >> 1;\n            var c = cacheArray[mid];\n\n            if (val > c)\n                low = mid + 1;\n            else if (val < c)\n                hi = mid - 1;\n            else\n                return mid;\n        }\n\n        return low -1;\n    };\n\n    this.resetCaches = function() {\n        this.$modified = true;\n        this.$wrapData = [];\n        this.$rowLengthCache = [];\n        this.$resetRowCache(0);\n        if (!this.destroyed)\n            this.bgTokenizer.start(0);\n    };\n\n    this.onChangeFold = function(e) {\n        var fold = e.data;\n        this.$resetRowCache(fold.start.row);\n    };\n\n    this.onChange = function(delta) {\n        this.$modified = true;\n        this.$bidiHandler.onChange(delta);\n        this.$resetRowCache(delta.start.row);\n\n        var removedFolds = this.$updateInternalDataOnChange(delta);\n        if (!this.$fromUndo && this.$undoManager) {\n            if (removedFolds && removedFolds.length) {\n                this.$undoManager.add({\n                    action: \"removeFolds\",\n                    folds:  removedFolds\n                }, this.mergeUndoDeltas);\n                this.mergeUndoDeltas = true;\n            }\n            this.$undoManager.add(delta, this.mergeUndoDeltas);\n            this.mergeUndoDeltas = true;\n            \n            this.$informUndoManager.schedule();\n        }\n\n        this.bgTokenizer.$updateOnChange(delta);\n        this._signal(\"change\", delta);\n    };\n\n    /**\n     * Sets the session text.\n     * @param {String} text The new text to place\n     *\n     **/\n    this.setValue = function(text) {\n        this.doc.setValue(text);\n        this.selection.moveTo(0, 0);\n\n        this.$resetRowCache(0);\n        this.setUndoManager(this.$undoManager);\n        this.getUndoManager().reset();\n    };\n\n    /**\n     * Returns the current [[Document `Document`]] as a string.\n     * @method toString\n     * @returns {String}\n     * @alias EditSession.getValue\n     *\n     **/\n\n    /**\n     * Returns the current [[Document `Document`]] as a string.\n     * @method getValue\n     * @returns {String}\n     * @alias EditSession.toString\n     **/\n    this.getValue =\n    this.toString = function() {\n        return this.doc.getValue();\n    };\n\n    /**\n     * Returns selection object.\n     **/\n    this.getSelection = function() {\n        return this.selection;\n    };\n\n    /**\n     * {:BackgroundTokenizer.getState}\n     * @param {Number} row The row to start at\n     *\n     * @related BackgroundTokenizer.getState\n     **/\n    this.getState = function(row) {\n        return this.bgTokenizer.getState(row);\n    };\n\n    /**\n     * Starts tokenizing at the row indicated. Returns a list of objects of the tokenized rows.\n     * @param {Number} row The row to start at\n     * @returns {Token[]}\n     **/\n    this.getTokens = function(row) {\n        return this.bgTokenizer.getTokens(row);\n    };\n\n    /**\n     * Returns an object indicating the token at the current row. The object has two properties: `index` and `start`.\n     * @param {Number} row The row number to retrieve from\n     * @param {Number} column The column number to retrieve from\n     * @returns {Token}\n     *\n     **/\n    this.getTokenAt = function(row, column) {\n        var tokens = this.bgTokenizer.getTokens(row);\n        var token, c = 0;\n        if (column == null) {\n            var i = tokens.length - 1;\n            c = this.getLine(row).length;\n        } else {\n            for (var i = 0; i < tokens.length; i++) {\n                c += tokens[i].value.length;\n                if (c >= column)\n                    break;\n            }\n        }\n        token = tokens[i];\n        if (!token)\n            return null;\n        token.index = i;\n        token.start = c - token.value.length;\n        return token;\n    };\n\n    /**\n     * Sets the undo manager.\n     * @param {UndoManager} undoManager The new undo manager\n     *\n     *\n     **/\n    this.setUndoManager = function(undoManager) {\n        this.$undoManager = undoManager;\n        \n        if (this.$informUndoManager)\n            this.$informUndoManager.cancel();\n        \n        if (undoManager) {\n            var self = this;\n            undoManager.addSession(this);\n            this.$syncInformUndoManager = function() {\n                self.$informUndoManager.cancel();\n                self.mergeUndoDeltas = false;\n            };\n            this.$informUndoManager = lang.delayedCall(this.$syncInformUndoManager);\n        } else {\n            this.$syncInformUndoManager = function() {};\n        }\n    };\n\n    /**\n     * starts a new group in undo history\n     **/\n    this.markUndoGroup = function() {\n        if (this.$syncInformUndoManager)\n            this.$syncInformUndoManager();\n    };\n    \n    this.$defaultUndoManager = {\n        undo: function() {},\n        redo: function() {},\n        hasUndo: function() {},\n        hasRedo: function() {},\n        reset: function() {},\n        add: function() {},\n        addSelection: function() {},\n        startNewGroup: function() {},\n        addSession: function() {}\n    };\n\n    /**\n     * Returns the current undo manager.\n     **/\n    this.getUndoManager = function() {\n        return this.$undoManager || this.$defaultUndoManager;\n    };\n\n    /**\n     * Returns the current value for tabs. If the user is using soft tabs, this will be a series of spaces (defined by [[EditSession.getTabSize `getTabSize()`]]); otherwise it's simply `'\\t'`.\n     **/\n    this.getTabString = function() {\n        if (this.getUseSoftTabs()) {\n            return lang.stringRepeat(\" \", this.getTabSize());\n        } else {\n            return \"\\t\";\n        }\n    };\n\n    /**\n     * Pass `true` to enable the use of soft tabs. Soft tabs means you're using spaces instead of the tab character (`'\\t'`).\n     * @param {Boolean} useSoftTabs Value indicating whether or not to use soft tabs\n     **/\n    this.setUseSoftTabs = function(val) {\n        this.setOption(\"useSoftTabs\", val);\n    };\n    /**\n     * Returns `true` if soft tabs are being used, `false` otherwise.\n     * @returns {Boolean}\n     **/\n    this.getUseSoftTabs = function() {\n        // todo might need more general way for changing settings from mode, but this is ok for now\n        return this.$useSoftTabs && !this.$mode.$indentWithTabs;\n    };\n    /**\n     * Set the number of spaces that define a soft tab; for example, passing in `4` transforms the soft tabs to be equivalent to four spaces. This function also emits the `changeTabSize` event.\n     * @param {Number} tabSize The new tab size\n     **/\n    this.setTabSize = function(tabSize) {\n        this.setOption(\"tabSize\", tabSize);\n    };\n    /**\n     * Returns the current tab size.\n     **/\n    this.getTabSize = function() {\n        return this.$tabSize;\n    };\n\n    /**\n     * Returns `true` if the character at the position is a soft tab.\n     * @param {Object} position The position to check\n     *\n     **/\n    this.isTabStop = function(position) {\n        return this.$useSoftTabs && (position.column % this.$tabSize === 0);\n    };\n\n    /**\n     * Set whether keyboard navigation of soft tabs moves the cursor within the soft tab, rather than over\n     * @param {Boolean} navigateWithinSoftTabs Value indicating whether or not to navigate within soft tabs\n     **/\n    this.setNavigateWithinSoftTabs = function (navigateWithinSoftTabs) {\n        this.setOption(\"navigateWithinSoftTabs\", navigateWithinSoftTabs);\n    };\n    /**\n     * Returns `true` if keyboard navigation moves the cursor within soft tabs, `false` if it moves the cursor over soft tabs.\n     * @returns {Boolean}\n     **/\n    this.getNavigateWithinSoftTabs = function() {\n        return this.$navigateWithinSoftTabs;\n    };\n\n    this.$overwrite = false;\n    /**\n     * Pass in `true` to enable overwrites in your session, or `false` to disable.\n     *\n     * If overwrites is enabled, any text you enter will type over any text after it. If the value of `overwrite` changes, this function also emits the `changeOverwrite` event.\n     *\n     * @param {Boolean} overwrite Defines whether or not to set overwrites\n     *\n     *\n     **/\n    this.setOverwrite = function(overwrite) {\n        this.setOption(\"overwrite\", overwrite);\n    };\n\n    /**\n     * Returns `true` if overwrites are enabled; `false` otherwise.\n     **/\n    this.getOverwrite = function() {\n        return this.$overwrite;\n    };\n\n    /**\n     * Sets the value of overwrite to the opposite of whatever it currently is.\n     **/\n    this.toggleOverwrite = function() {\n        this.setOverwrite(!this.$overwrite);\n    };\n\n    /**\n     * Adds `className` to the `row`, to be used for CSS stylings and whatnot.\n     * @param {Number} row The row number\n     * @param {String} className The class to add\n     *\n     **/\n    this.addGutterDecoration = function(row, className) {\n        if (!this.$decorations[row])\n            this.$decorations[row] = \"\";\n        this.$decorations[row] += \" \" + className;\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Removes `className` from the `row`.\n     * @param {Number} row The row number\n     * @param {String} className The class to add\n     *\n     **/\n    this.removeGutterDecoration = function(row, className) {\n        this.$decorations[row] = (this.$decorations[row] || \"\").replace(\" \" + className, \"\");\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Returns an array of strings, indicating the breakpoint class (if any) applied to each row.\n     * @returns {[String]}\n     **/\n    this.getBreakpoints = function() {\n        return this.$breakpoints;\n    };\n\n    /**\n     * Sets a breakpoint on every row number given by `rows`. This function also emites the `'changeBreakpoint'` event.\n     * @param {Array} rows An array of row indices\n     *\n     **/\n    this.setBreakpoints = function(rows) {\n        this.$breakpoints = [];\n        for (var i=0; i<rows.length; i++) {\n            this.$breakpoints[rows[i]] = \"ace_breakpoint\";\n        }\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Removes all breakpoints on the rows. This function also emits the `'changeBreakpoint'` event.\n     **/\n    this.clearBreakpoints = function() {\n        this.$breakpoints = [];\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Sets a breakpoint on the row number given by `row`. This function also emits the `'changeBreakpoint'` event.\n     * @param {Number} row A row index\n     * @param {String} className Class of the breakpoint\n     *\n     **/\n    this.setBreakpoint = function(row, className) {\n        if (className === undefined)\n            className = \"ace_breakpoint\";\n        if (className)\n            this.$breakpoints[row] = className;\n        else\n            delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Removes a breakpoint on the row number given by `row`. This function also emits the `'changeBreakpoint'` event.\n     * @param {Number} row A row index\n     *\n     **/\n    this.clearBreakpoint = function(row) {\n        delete this.$breakpoints[row];\n        this._signal(\"changeBreakpoint\", {});\n    };\n\n    /**\n     * Adds a new marker to the given `Range`. If `inFront` is `true`, a front marker is defined, and the `'changeFrontMarker'` event fires; otherwise, the `'changeBackMarker'` event fires.\n     * @param {Range} range Define the range of the marker\n     * @param {String} clazz Set the CSS class for the marker\n     * @param {Function | String} type Identify the type of the marker\n     * @param {Boolean} inFront Set to `true` to establish a front marker\n     *\n     * @return {Number} The new marker id\n     **/\n    this.addMarker = function(range, clazz, type, inFront) {\n        var id = this.$markerId++;\n\n        var marker = {\n            range : range,\n            type : type || \"line\",\n            renderer: typeof type == \"function\" ? type : null,\n            clazz : clazz,\n            inFront: !!inFront,\n            id: id\n        };\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return id;\n    };\n\n    /**\n     * Adds a dynamic marker to the session.\n     * @param {Object} marker object with update method\n     * @param {Boolean} inFront Set to `true` to establish a front marker\n     *\n     * @return {Object} The added marker\n     **/\n    this.addDynamicMarker = function(marker, inFront) {\n        if (!marker.update)\n            return;\n        var id = this.$markerId++;\n        marker.id = id;\n        marker.inFront = !!inFront;\n\n        if (inFront) {\n            this.$frontMarkers[id] = marker;\n            this._signal(\"changeFrontMarker\");\n        } else {\n            this.$backMarkers[id] = marker;\n            this._signal(\"changeBackMarker\");\n        }\n\n        return marker;\n    };\n\n    /**\n     * Removes the marker with the specified ID. If this marker was in front, the `'changeFrontMarker'` event is emitted. If the marker was in the back, the `'changeBackMarker'` event is emitted.\n     * @param {Number} markerId A number representing a marker\n     *\n     **/\n    this.removeMarker = function(markerId) {\n        var marker = this.$frontMarkers[markerId] || this.$backMarkers[markerId];\n        if (!marker)\n            return;\n\n        var markers = marker.inFront ? this.$frontMarkers : this.$backMarkers;\n        delete (markers[markerId]);\n        this._signal(marker.inFront ? \"changeFrontMarker\" : \"changeBackMarker\");\n    };\n\n    /**\n     * Returns an object containing all of the markers, either front or back.\n     * @param {Boolean} inFront If `true`, indicates you only want front markers; `false` indicates only back markers\n     *\n     * @returns {Object}\n     **/\n    this.getMarkers = function(inFront) {\n        return inFront ? this.$frontMarkers : this.$backMarkers;\n    };\n\n    this.highlight = function(re) {\n        if (!this.$searchHighlight) {\n            var highlight = new SearchHighlight(null, \"ace_selected-word\", \"text\");\n            this.$searchHighlight = this.addDynamicMarker(highlight);\n        }\n        this.$searchHighlight.setRegexp(re);\n    };\n\n    // experimental\n    this.highlightLines = function(startRow, endRow, clazz, inFront) {\n        if (typeof endRow != \"number\") {\n            clazz = endRow;\n            endRow = startRow;\n        }\n        if (!clazz)\n            clazz = \"ace_step\";\n\n        var range = new Range(startRow, 0, endRow, Infinity);\n        range.id = this.addMarker(range, clazz, \"fullLine\", inFront);\n        return range;\n    };\n\n    /*\n     * Error:\n     *  {\n     *    row: 12,\n     *    column: 2, //can be undefined\n     *    text: \"Missing argument\",\n     *    type: \"error\" // or \"warning\" or \"info\"\n     *  }\n     */\n    /**\n     * Sets annotations for the `EditSession`. This functions emits the `'changeAnnotation'` event.\n     * @param {Annotation[]} annotations A list of annotations\n     *\n     **/\n    this.setAnnotations = function(annotations) {\n        this.$annotations = annotations;\n        this._signal(\"changeAnnotation\", {});\n    };\n\n    /**\n     * Returns the annotations for the `EditSession`.\n     * @returns {Annotation[]}\n     **/\n    this.getAnnotations = function() {\n        return this.$annotations || [];\n    };\n\n    /**\n     * Clears all the annotations for this session. This function also triggers the `'changeAnnotation'` event.\n     **/\n    this.clearAnnotations = function() {\n        this.setAnnotations([]);\n    };\n\n    /**\n     * If `text` contains either the newline (`\\n`) or carriage-return ('\\r') characters, `$autoNewLine` stores that value.\n     * @param {String} text A block of text\n     *\n     **/\n    this.$detectNewLine = function(text) {\n        var match = text.match(/^.*?(\\r?\\n)/m);\n        if (match) {\n            this.$autoNewLine = match[1];\n        } else {\n            this.$autoNewLine = \"\\n\";\n        }\n    };\n\n    /**\n     * Given a starting row and column, this method returns the `Range` of the first word boundary it finds.\n     * @param {Number} row The row to start at\n     * @param {Number} column The column to start at\n     *\n     * @returns {Range}\n     **/\n    this.getWordRange = function(row, column) {\n        var line = this.getLine(row);\n\n        var inToken = false;\n        if (column > 0)\n            inToken = !!line.charAt(column - 1).match(this.tokenRe);\n\n        if (!inToken)\n            inToken = !!line.charAt(column).match(this.tokenRe);\n\n        if (inToken)\n            var re = this.tokenRe;\n        else if (/^\\s+$/.test(line.slice(column-1, column+1)))\n            var re = /\\s/;\n        else\n            var re = this.nonTokenRe;\n\n        var start = column;\n        if (start > 0) {\n            do {\n                start--;\n            }\n            while (start >= 0 && line.charAt(start).match(re));\n            start++;\n        }\n\n        var end = column;\n        while (end < line.length && line.charAt(end).match(re)) {\n            end++;\n        }\n\n        return new Range(row, start, row, end);\n    };\n\n    /**\n     * Gets the range of a word, including its right whitespace.\n     * @param {Number} row The row number to start from\n     * @param {Number} column The column number to start from\n     *\n     * @return {Range}\n     **/\n    this.getAWordRange = function(row, column) {\n        var wordRange = this.getWordRange(row, column);\n        var line = this.getLine(wordRange.end.row);\n\n        while (line.charAt(wordRange.end.column).match(/[ \\t]/)) {\n            wordRange.end.column += 1;\n        }\n        return wordRange;\n    };\n\n    /**\n     * {:Document.setNewLineMode.desc}\n     * @param {String} newLineMode {:Document.setNewLineMode.param}\n     *\n     *\n     * @related Document.setNewLineMode\n     **/\n    this.setNewLineMode = function(newLineMode) {\n        this.doc.setNewLineMode(newLineMode);\n    };\n\n    /**\n     *\n     * Returns the current new line mode.\n     * @returns {String}\n     * @related Document.getNewLineMode\n     **/\n    this.getNewLineMode = function() {\n        return this.doc.getNewLineMode();\n    };\n\n    /**\n     * Identifies if you want to use a worker for the `EditSession`.\n     * @param {Boolean} useWorker Set to `true` to use a worker\n     *\n     **/\n    this.setUseWorker = function(useWorker) { this.setOption(\"useWorker\", useWorker); };\n\n    /**\n     * Returns `true` if workers are being used.\n     **/\n    this.getUseWorker = function() { return this.$useWorker; };\n\n    /**\n     * Reloads all the tokens on the current session. This function calls [[BackgroundTokenizer.start `BackgroundTokenizer.start ()`]] to all the rows; it also emits the `'tokenizerUpdate'` event.\n     **/\n    this.onReloadTokenizer = function(e) {\n        var rows = e.data;\n        this.bgTokenizer.start(rows.first);\n        this._signal(\"tokenizerUpdate\", e);\n    };\n\n    this.$modes = config.$modes;\n\n    /**\n     * Sets a new text mode for the `EditSession`. This method also emits the `'changeMode'` event. If a [[BackgroundTokenizer `BackgroundTokenizer`]] is set, the `'tokenizerUpdate'` event is also emitted.\n     * @param {TextMode} mode Set a new text mode\n     * @param {cb} optional callback\n     *\n     **/\n    this.$mode = null;\n    this.$modeId = null;\n    this.setMode = function(mode, cb) {\n        if (mode && typeof mode === \"object\") {\n            if (mode.getTokenizer)\n                return this.$onChangeMode(mode);\n            var options = mode;\n            var path = options.path;\n        } else {\n            path = mode || \"ace/mode/text\";\n        }\n\n        // this is needed if ace isn't on require path (e.g tests in node)\n        if (!this.$modes[\"ace/mode/text\"])\n            this.$modes[\"ace/mode/text\"] = new TextMode();\n\n        if (this.$modes[path] && !options) {\n            this.$onChangeMode(this.$modes[path]);\n            cb && cb();\n            return;\n        }\n        // load on demand\n        this.$modeId = path;\n        config.loadModule([\"mode\", path], function(m) {\n            if (this.$modeId !== path)\n                return cb && cb();\n            if (this.$modes[path] && !options) {\n                this.$onChangeMode(this.$modes[path]);\n            } else if (m && m.Mode) {\n                m = new m.Mode(options);\n                if (!options) {\n                    this.$modes[path] = m;\n                    m.$id = path;\n                }\n                this.$onChangeMode(m);\n            }\n            cb && cb();\n        }.bind(this));\n\n        // set mode to text until loading is finished\n        if (!this.$mode)\n            this.$onChangeMode(this.$modes[\"ace/mode/text\"], true);\n    };\n\n    this.$onChangeMode = function(mode, $isPlaceholder) {\n        if (!$isPlaceholder)\n            this.$modeId = mode.$id;\n        if (this.$mode === mode) \n            return;\n            \n        var oldMode = this.$mode;\n        this.$mode = mode;\n\n        this.$stopWorker();\n\n        if (this.$useWorker)\n            this.$startWorker();\n\n        var tokenizer = mode.getTokenizer();\n\n        if(tokenizer.on !== undefined) {\n            var onReloadTokenizer = this.onReloadTokenizer.bind(this);\n            tokenizer.on(\"update\", onReloadTokenizer);\n        }\n\n        this.bgTokenizer.setTokenizer(tokenizer);\n        this.bgTokenizer.setDocument(this.getDocument());\n\n        this.tokenRe = mode.tokenRe;\n        this.nonTokenRe = mode.nonTokenRe;\n\n        \n        if (!$isPlaceholder) {\n            // experimental method, used by c9 findiniles\n            if (mode.attachToSession)\n                mode.attachToSession(this);\n            this.$options.wrapMethod.set.call(this, this.$wrapMethod);\n            this.$setFolding(mode.foldingRules);\n            this.bgTokenizer.start(0);\n            this._emit(\"changeMode\", {oldMode: oldMode, mode: mode});\n        }\n    };\n\n    this.$stopWorker = function() {\n        if (this.$worker) {\n            this.$worker.terminate();\n            this.$worker = null;\n        }\n    };\n\n    this.$startWorker = function() {\n        try {\n            this.$worker = this.$mode.createWorker(this);\n        } catch (e) {\n            config.warn(\"Could not load worker\", e);\n            this.$worker = null;\n        }\n    };\n\n    /**\n     * Returns the current text mode.\n     * @returns {TextMode} The current text mode\n     **/\n    this.getMode = function() {\n        return this.$mode;\n    };\n\n    this.$scrollTop = 0;\n    /**\n     * This function sets the scroll top value. It also emits the `'changeScrollTop'` event.\n     * @param {Number} scrollTop The new scroll top value\n     *\n     **/\n    this.setScrollTop = function(scrollTop) {\n        // TODO: should we force integer lineheight instead? scrollTop = Math.round(scrollTop); \n        if (this.$scrollTop === scrollTop || isNaN(scrollTop))\n            return;\n\n        this.$scrollTop = scrollTop;\n        this._signal(\"changeScrollTop\", scrollTop);\n    };\n\n    /**\n     * [Returns the value of the distance between the top of the editor and the topmost part of the visible content.]{: #EditSession.getScrollTop}\n     * @returns {Number}\n     **/\n    this.getScrollTop = function() {\n        return this.$scrollTop;\n    };\n\n    this.$scrollLeft = 0;\n    /**\n     * [Sets the value of the distance between the left of the editor and the leftmost part of the visible content.]{: #EditSession.setScrollLeft}\n     **/\n    this.setScrollLeft = function(scrollLeft) {\n        // scrollLeft = Math.round(scrollLeft);\n        if (this.$scrollLeft === scrollLeft || isNaN(scrollLeft))\n            return;\n\n        this.$scrollLeft = scrollLeft;\n        this._signal(\"changeScrollLeft\", scrollLeft);\n    };\n\n    /**\n     * [Returns the value of the distance between the left of the editor and the leftmost part of the visible content.]{: #EditSession.getScrollLeft}\n     * @returns {Number}\n     **/\n    this.getScrollLeft = function() {\n        return this.$scrollLeft;\n    };\n\n    /**\n     * Returns the width of the screen.\n     * @returns {Number}\n     **/\n    this.getScreenWidth = function() {\n        this.$computeWidth();\n        if (this.lineWidgets) \n            return Math.max(this.getLineWidgetMaxWidth(), this.screenWidth);\n        return this.screenWidth;\n    };\n    \n    this.getLineWidgetMaxWidth = function() {\n        if (this.lineWidgetsWidth != null) return this.lineWidgetsWidth;\n        var width = 0;\n        this.lineWidgets.forEach(function(w) {\n            if (w && w.screenWidth > width)\n                width = w.screenWidth;\n        });\n        return this.lineWidgetWidth = width;\n    };\n\n    this.$computeWidth = function(force) {\n        if (this.$modified || force) {\n            this.$modified = false;\n\n            if (this.$useWrapMode)\n                return this.screenWidth = this.$wrapLimit;\n\n            var lines = this.doc.getAllLines();\n            var cache = this.$rowLengthCache;\n            var longestScreenLine = 0;\n            var foldIndex = 0;\n            var foldLine = this.$foldData[foldIndex];\n            var foldStart = foldLine ? foldLine.start.row : Infinity;\n            var len = lines.length;\n\n            for (var i = 0; i < len; i++) {\n                if (i > foldStart) {\n                    i = foldLine.end.row + 1;\n                    if (i >= len)\n                        break;\n                    foldLine = this.$foldData[foldIndex++];\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n\n                if (cache[i] == null)\n                    cache[i] = this.$getStringScreenWidth(lines[i])[0];\n\n                if (cache[i] > longestScreenLine)\n                    longestScreenLine = cache[i];\n            }\n            this.screenWidth = longestScreenLine;\n        }\n    };\n\n    /**\n     * Returns a verbatim copy of the given line as it is in the document\n     * @param {Number} row The row to retrieve from\n     *\n     * @returns {String}\n     **/\n    this.getLine = function(row) {\n        return this.doc.getLine(row);\n    };\n\n    /**\n     * Returns an array of strings of the rows between `firstRow` and `lastRow`. This function is inclusive of `lastRow`.\n     * @param {Number} firstRow The first row index to retrieve\n     * @param {Number} lastRow The final row index to retrieve\n     *\n     * @returns {[String]}\n     *\n     **/\n    this.getLines = function(firstRow, lastRow) {\n        return this.doc.getLines(firstRow, lastRow);\n    };\n\n    /**\n     * Returns the number of rows in the document.\n     * @returns {Number}\n     **/\n    this.getLength = function() {\n        return this.doc.getLength();\n    };\n\n    /**\n     * {:Document.getTextRange.desc}\n     * @param {Range} range The range to work with\n     *\n     * @returns {String}\n     **/\n    this.getTextRange = function(range) {\n        return this.doc.getTextRange(range || this.selection.getRange());\n    };\n\n    /**\n     * Inserts a block of `text` and the indicated `position`.\n     * @param {Object} position The position {row, column} to start inserting at\n     * @param {String} text A chunk of text to insert\n     * @returns {Object} The position of the last line of `text`. If the length of `text` is 0, this function simply returns `position`.\n     *\n     *\n     **/\n    this.insert = function(position, text) {\n        return this.doc.insert(position, text);\n    };\n\n    /**\n     * Removes the `range` from the document.\n     * @param {Range} range A specified Range to remove\n     * @returns {Object} The new `start` property of the range, which contains `startRow` and `startColumn`. If `range` is empty, this function returns the unmodified value of `range.start`.\n     *\n     * @related Document.remove\n     *\n     **/\n    this.remove = function(range) {\n        return this.doc.remove(range);\n    };\n    \n    /**\n     * Removes a range of full lines. This method also triggers the `'change'` event.\n     * @param {Number} firstRow The first row to be removed\n     * @param {Number} lastRow The last row to be removed\n     * @returns {[String]} Returns all the removed lines.\n     *\n     * @related Document.removeFullLines\n     *\n     **/\n    this.removeFullLines = function(firstRow, lastRow){\n        return this.doc.removeFullLines(firstRow, lastRow);\n    };\n\n    /**\n     * Reverts previous changes to your document.\n     * @param {Delta[]} deltas An array of previous changes\n     * @param {Boolean} dontSelect [If `true`, doesn't select the range of where the change occured]{: #dontSelect}\n     *\n     * @returns {Range}\n     **/\n    this.undoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = deltas.length - 1; i != -1; i--) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.revertDelta(delta);\n            } else if (delta.folds) {\n                this.addFolds(delta.folds);\n            }\n        }\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionBefore)\n                this.selection.fromJSON(deltas.selectionBefore);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, true));\n        }\n        this.$fromUndo = false;\n    };\n\n    /**\n     * Re-implements a previously undone change to your document.\n     * @param {Delta[]} deltas An array of previous changes\n     * @param {Boolean} dontSelect {:dontSelect}\n     *\n     * @returns {Range}\n     **/\n    this.redoChanges = function(deltas, dontSelect) {\n        if (!deltas.length)\n            return;\n\n        this.$fromUndo = true;\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (delta.action == \"insert\" || delta.action == \"remove\") {\n                this.doc.$safeApplyDelta(delta);\n            }\n        }\n\n        if (!dontSelect && this.$undoSelect) {\n            if (deltas.selectionAfter)\n                this.selection.fromJSON(deltas.selectionAfter);\n            else\n                this.selection.setRange(this.$getUndoSelection(deltas, false));\n        }\n        this.$fromUndo = false;\n    };\n\n    /**\n     * Enables or disables highlighting of the range where an undo occurred.\n     * @param {Boolean} enable If `true`, selects the range of the reinserted change\n     *      \n     **/\n    this.setUndoSelect = function(enable) {\n        this.$undoSelect = enable;\n    };\n\n    this.$getUndoSelection = function(deltas, isUndo) {\n        function isInsert(delta) {\n            return isUndo ? delta.action !== \"insert\" : delta.action === \"insert\";\n        }\n\n        var range, point;\n\n        for (var i = 0; i < deltas.length; i++) {\n            var delta = deltas[i];\n            if (!delta.start) continue; // skip folds\n            if (!range) {\n                if (isInsert(delta)) {\n                    range = Range.fromPoints(delta.start, delta.end);\n                } else {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n                continue;\n            }\n            \n            if (isInsert(delta)) {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range.setStart(point);\n                }\n                point = delta.end;\n                if (range.compare(point.row, point.column) == 1) {\n                    range.setEnd(point);\n                }\n            } else {\n                point = delta.start;\n                if (range.compare(point.row, point.column) == -1) {\n                    range = Range.fromPoints(delta.start, delta.start);\n                }\n            }\n        }\n        return range;\n    };\n\n    /**\n     * Replaces a range in the document with the new `text`.\n     *\n     * @param {Range} range A specified Range to replace\n     * @param {String} text The new text to use as a replacement\n     * @returns {Object} An object containing the final row and column, like this:\n     * ```\n     * {row: endRow, column: 0}\n     * ```\n     * If the text and range are empty, this function returns an object containing the current `range.start` value.\n     * If the text is the exact same as what currently exists, this function returns an object containing the current `range.end` value.\n     *\n     * @related Document.replace\n     **/\n    this.replace = function(range, text) {\n        return this.doc.replace(range, text);\n    };\n\n    /**\n     * Moves a range of text from the given range to the given position. `toPosition` is an object that looks like this:\n     *  ```json\n     *    { row: newRowLocation, column: newColumnLocation }\n     *  ```\n     * @param {Range} fromRange The range of text you want moved within the document\n     * @param {Object} toPosition The location (row and column) where you want to move the text to\n     * @returns {Range} The new range where the text was moved to.\n     **/\n    this.moveText = function(fromRange, toPosition, copy) {\n        var text = this.getTextRange(fromRange);\n        var folds = this.getFoldsInRange(fromRange);\n\n        var toRange = Range.fromPoints(toPosition, toPosition);\n        if (!copy) {\n            this.remove(fromRange);\n            var rowDiff = fromRange.start.row - fromRange.end.row;\n            var collDiff = rowDiff ? -fromRange.end.column : fromRange.start.column - fromRange.end.column;\n            if (collDiff) {\n                if (toRange.start.row == fromRange.end.row && toRange.start.column > fromRange.end.column)\n                    toRange.start.column += collDiff;\n                if (toRange.end.row == fromRange.end.row && toRange.end.column > fromRange.end.column)\n                    toRange.end.column += collDiff;\n            }\n            if (rowDiff && toRange.start.row >= fromRange.end.row) {\n                toRange.start.row += rowDiff;\n                toRange.end.row += rowDiff;\n            }\n        }\n\n        toRange.end = this.insert(toRange.start, text);\n        if (folds.length) {\n            var oldStart = fromRange.start;\n            var newStart = toRange.start;\n            var rowDiff = newStart.row - oldStart.row;\n            var collDiff = newStart.column - oldStart.column;\n            this.addFolds(folds.map(function(x) {\n                x = x.clone();\n                if (x.start.row == oldStart.row)\n                    x.start.column += collDiff;\n                if (x.end.row == oldStart.row)\n                    x.end.column += collDiff;\n                x.start.row += rowDiff;\n                x.end.row += rowDiff;\n                return x;\n            }));\n        }\n\n        return toRange;\n    };\n\n    /**\n     * Indents all the rows, from `startRow` to `endRow` (inclusive), by prefixing each row with the token in `indentString`.\n     *\n     * If `indentString` contains the `'\\t'` character, it's replaced by whatever is defined by [[EditSession.getTabString `getTabString()`]].\n     * @param {Number} startRow Starting row\n     * @param {Number} endRow Ending row\n     * @param {String} indentString The indent token\n     *\n     *\n     **/\n    this.indentRows = function(startRow, endRow, indentString) {\n        indentString = indentString.replace(/\\t/g, this.getTabString());\n        for (var row=startRow; row<=endRow; row++)\n            this.doc.insertInLine({row: row, column: 0}, indentString);\n    };\n\n    /**\n     * Outdents all the rows defined by the `start` and `end` properties of `range`.\n     * @param {Range} range A range of rows\n     *\n     **/\n    this.outdentRows = function (range) {\n        var rowRange = range.collapseRows();\n        var deleteRange = new Range(0, 0, 0, 0);\n        var size = this.getTabSize();\n\n        for (var i = rowRange.start.row; i <= rowRange.end.row; ++i) {\n            var line = this.getLine(i);\n\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            for (var j = 0; j < size; ++j)\n                if (line.charAt(j) != ' ')\n                    break;\n            if (j < size && line.charAt(j) == '\\t') {\n                deleteRange.start.column = j;\n                deleteRange.end.column = j + 1;\n            } else {\n                deleteRange.start.column = 0;\n                deleteRange.end.column = j;\n            }\n            this.remove(deleteRange);\n        }\n    };\n\n    this.$moveLines = function(firstRow, lastRow, dir) {\n        firstRow = this.getRowFoldStart(firstRow);\n        lastRow = this.getRowFoldEnd(lastRow);\n        if (dir < 0) {\n            var row = this.getRowFoldStart(firstRow + dir);\n            if (row < 0) return 0;\n            var diff = row-firstRow;\n        } else if (dir > 0) {\n            var row = this.getRowFoldEnd(lastRow + dir);\n            if (row > this.doc.getLength()-1) return 0;\n            var diff = row-lastRow;\n        } else {\n            firstRow = this.$clipRowToDocument(firstRow);\n            lastRow = this.$clipRowToDocument(lastRow);\n            var diff = lastRow - firstRow + 1;\n        }\n\n        var range = new Range(firstRow, 0, lastRow, Number.MAX_VALUE);\n        var folds = this.getFoldsInRange(range).map(function(x){\n            x = x.clone();\n            x.start.row += diff;\n            x.end.row += diff;\n            return x;\n        });\n        \n        var lines = dir == 0\n            ? this.doc.getLines(firstRow, lastRow)\n            : this.doc.removeFullLines(firstRow, lastRow);\n        this.doc.insertFullLines(firstRow+diff, lines);\n        folds.length && this.addFolds(folds);\n        return diff;\n    };\n    /**\n     * Shifts all the lines in the document up one, starting from `firstRow` and ending at `lastRow`.\n     * @param {Number} firstRow The starting row to move up\n     * @param {Number} lastRow The final row to move up\n     * @returns {Number} If `firstRow` is less-than or equal to 0, this function returns 0. Otherwise, on success, it returns -1.\n     *\n     **/\n    this.moveLinesUp = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, -1);\n    };\n\n    /**\n     * Shifts all the lines in the document down one, starting from `firstRow` and ending at `lastRow`.\n     * @param {Number} firstRow The starting row to move down\n     * @param {Number} lastRow The final row to move down\n     * @returns {Number} If `firstRow` is less-than or equal to 0, this function returns 0. Otherwise, on success, it returns -1.\n     **/\n    this.moveLinesDown = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 1);\n    };\n\n    /**\n     * Duplicates all the text between `firstRow` and `lastRow`.\n     * @param {Number} firstRow The starting row to duplicate\n     * @param {Number} lastRow The final row to duplicate\n     * @returns {Number} Returns the number of new rows added; in other words, `lastRow - firstRow + 1`.\n     *\n     *\n     **/\n    this.duplicateLines = function(firstRow, lastRow) {\n        return this.$moveLines(firstRow, lastRow, 0);\n    };\n\n\n    this.$clipRowToDocument = function(row) {\n        return Math.max(0, Math.min(row, this.doc.getLength()-1));\n    };\n\n    this.$clipColumnToRow = function(row, column) {\n        if (column < 0)\n            return 0;\n        return Math.min(this.doc.getLine(row).length, column);\n    };\n\n\n    this.$clipPositionToDocument = function(row, column) {\n        column = Math.max(0, column);\n\n        if (row < 0) {\n            row = 0;\n            column = 0;\n        } else {\n            var len = this.doc.getLength();\n            if (row >= len) {\n                row = len - 1;\n                column = this.doc.getLine(len-1).length;\n            } else {\n                column = Math.min(this.doc.getLine(row).length, column);\n            }\n        }\n\n        return {\n            row: row,\n            column: column\n        };\n    };\n\n    this.$clipRangeToDocument = function(range) {\n        if (range.start.row < 0) {\n            range.start.row = 0;\n            range.start.column = 0;\n        } else {\n            range.start.column = this.$clipColumnToRow(\n                range.start.row,\n                range.start.column\n            );\n        }\n\n        var len = this.doc.getLength() - 1;\n        if (range.end.row > len) {\n            range.end.row = len;\n            range.end.column = this.doc.getLine(len).length;\n        } else {\n            range.end.column = this.$clipColumnToRow(\n                range.end.row,\n                range.end.column\n            );\n        }\n        return range;\n    };\n\n    // WRAPMODE\n    this.$wrapLimit = 80;\n    this.$useWrapMode = false;\n    this.$wrapLimitRange = {\n        min : null,\n        max : null\n    };\n\n    /**\n     * Sets whether or not line wrapping is enabled. If `useWrapMode` is different than the current value, the `'changeWrapMode'` event is emitted.\n     * @param {Boolean} useWrapMode Enable (or disable) wrap mode\n     *\n     **/\n    this.setUseWrapMode = function(useWrapMode) {\n        if (useWrapMode != this.$useWrapMode) {\n            this.$useWrapMode = useWrapMode;\n            this.$modified = true;\n            this.$resetRowCache(0);\n\n            // If wrapMode is activaed, the wrapData array has to be initialized.\n            if (useWrapMode) {\n                var len = this.getLength();\n                this.$wrapData = Array(len);\n                this.$updateWrapData(0, len - 1);\n            }\n\n            this._signal(\"changeWrapMode\");\n        }\n    };\n\n    /**\n     * Returns `true` if wrap mode is being used; `false` otherwise.\n     * @returns {Boolean}\n     **/\n    this.getUseWrapMode = function() {\n        return this.$useWrapMode;\n    };\n\n    // Allow the wrap limit to move freely between min and max. Either\n    // parameter can be null to allow the wrap limit to be unconstrained\n    // in that direction. Or set both parameters to the same number to pin\n    // the limit to that value.\n    /**\n     * Sets the boundaries of wrap. Either value can be `null` to have an unconstrained wrap, or, they can be the same number to pin the limit. If the wrap limits for `min` or `max` are different, this method also emits the `'changeWrapMode'` event.\n     * @param {Number} min The minimum wrap value (the left side wrap)\n     * @param {Number} max The maximum wrap value (the right side wrap)\n     *\n     **/\n    this.setWrapLimitRange = function(min, max) {\n        if (this.$wrapLimitRange.min !== min || this.$wrapLimitRange.max !== max) {\n            this.$wrapLimitRange = { min: min, max: max };\n            this.$modified = true;\n            this.$bidiHandler.markAsDirty();\n\n            // This will force a recalculation of the wrap limit\n            if (this.$useWrapMode)\n                this._signal(\"changeWrapMode\");\n        }\n    };\n\n    /**\n     * This should generally only be called by the renderer when a resize is detected.\n     * @param {Number} desiredLimit The new wrap limit\n     * @returns {Boolean}\n     *\n     * @private\n     **/\n    this.adjustWrapLimit = function(desiredLimit, $printMargin) {\n        var limits = this.$wrapLimitRange;\n        if (limits.max < 0)\n            limits = {min: $printMargin, max: $printMargin};\n        var wrapLimit = this.$constrainWrapLimit(desiredLimit, limits.min, limits.max);\n        if (wrapLimit != this.$wrapLimit && wrapLimit > 1) {\n            this.$wrapLimit = wrapLimit;\n            this.$modified = true;\n            if (this.$useWrapMode) {\n                this.$updateWrapData(0, this.getLength() - 1);\n                this.$resetRowCache(0);\n                this._signal(\"changeWrapLimit\");\n            }\n            return true;\n        }\n        return false;\n    };\n\n    this.$constrainWrapLimit = function(wrapLimit, min, max) {\n        if (min)\n            wrapLimit = Math.max(min, wrapLimit);\n\n        if (max)\n            wrapLimit = Math.min(max, wrapLimit);\n\n        return wrapLimit;\n    };\n\n    /**\n     * Returns the value of wrap limit.\n     * @returns {Number} The wrap limit.\n     **/\n    this.getWrapLimit = function() {\n        return this.$wrapLimit;\n    };\n    \n    /**\n     * Sets the line length for soft wrap in the editor. Lines will break\n     *  at a minimum of the given length minus 20 chars and at a maximum\n     *  of the given number of chars.\n     * @param {number} limit The maximum line length in chars, for soft wrapping lines.\n     */\n    this.setWrapLimit = function (limit) {\n        this.setWrapLimitRange(limit, limit);\n    };\n    \n    /**\n     * Returns an object that defines the minimum and maximum of the wrap limit; it looks something like this:\n     *\n     *     { min: wrapLimitRange_min, max: wrapLimitRange_max }\n     *\n     * @returns {Object}\n     **/\n    this.getWrapLimitRange = function() {\n        // Avoid unexpected mutation by returning a copy\n        return {\n            min : this.$wrapLimitRange.min,\n            max : this.$wrapLimitRange.max\n        };\n    };\n\n    this.$updateInternalDataOnChange = function(delta) {\n        var useWrapMode = this.$useWrapMode;\n        var action = delta.action;\n        var start = delta.start;\n        var end = delta.end;\n        var firstRow = start.row;\n        var lastRow = end.row;\n        var len = lastRow - firstRow;\n        var removedFolds = null;\n        \n        this.$updating = true;\n        if (len != 0) {\n            if (action === \"remove\") {\n                this[useWrapMode ? \"$wrapData\" : \"$rowLengthCache\"].splice(firstRow, len);\n\n                var foldLines = this.$foldData;\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                var foldLine = this.getFoldLine(end.row);\n                var idx = 0;\n                if (foldLine) {\n                    foldLine.addRemoveChars(end.row, end.column, start.column - end.column);\n                    foldLine.shiftRow(-len);\n\n                    var foldLineBefore = this.getFoldLine(firstRow);\n                    if (foldLineBefore && foldLineBefore !== foldLine) {\n                        foldLineBefore.merge(foldLine);\n                        foldLine = foldLineBefore;\n                    }\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= end.row) {\n                        foldLine.shiftRow(-len);\n                    }\n                }\n\n                lastRow = firstRow;\n            } else {\n                var args = Array(len);\n                args.unshift(firstRow, 0);\n                var arr = useWrapMode ? this.$wrapData : this.$rowLengthCache;\n                arr.splice.apply(arr, args);\n\n                // If some new line is added inside of a foldLine, then split\n                // the fold line up.\n                var foldLines = this.$foldData;\n                var foldLine = this.getFoldLine(firstRow);\n                var idx = 0;\n                if (foldLine) {\n                    var cmp = foldLine.range.compareInside(start.row, start.column);\n                    // Inside of the foldLine range. Need to split stuff up.\n                    if (cmp == 0) {\n                        foldLine = foldLine.split(start.row, start.column);\n                        if (foldLine) {\n                            foldLine.shiftRow(len);\n                            foldLine.addRemoveChars(lastRow, 0, end.column - start.column);\n                        }\n                    } else\n                    // Infront of the foldLine but same row. Need to shift column.\n                    if (cmp == -1) {\n                        foldLine.addRemoveChars(firstRow, 0, end.column - start.column);\n                        foldLine.shiftRow(len);\n                    }\n                    // Nothing to do if the insert is after the foldLine.\n                    idx = foldLines.indexOf(foldLine) + 1;\n                }\n\n                for (idx; idx < foldLines.length; idx++) {\n                    var foldLine = foldLines[idx];\n                    if (foldLine.start.row >= firstRow) {\n                        foldLine.shiftRow(len);\n                    }\n                }\n            }\n        } else {\n            // Realign folds. E.g. if you add some new chars before a fold, the\n            // fold should \"move\" to the right.\n            len = Math.abs(delta.start.column - delta.end.column);\n            if (action === \"remove\") {\n                // Get all the folds in the change range and remove them.\n                removedFolds = this.getFoldsInRange(delta);\n                this.removeFolds(removedFolds);\n\n                len = -len;\n            }\n            var foldLine = this.getFoldLine(firstRow);\n            if (foldLine) {\n                foldLine.addRemoveChars(firstRow, start.column, len);\n            }\n        }\n\n        if (useWrapMode && this.$wrapData.length != this.doc.getLength()) {\n            console.error(\"doc.getLength() and $wrapData.length have to be the same!\");\n        }\n        this.$updating = false;\n\n        if (useWrapMode)\n            this.$updateWrapData(firstRow, lastRow);\n        else\n            this.$updateRowLengthCache(firstRow, lastRow);\n\n        return removedFolds;\n    };\n\n    this.$updateRowLengthCache = function(firstRow, lastRow, b) {\n        this.$rowLengthCache[firstRow] = null;\n        this.$rowLengthCache[lastRow] = null;\n    };\n\n    this.$updateWrapData = function(firstRow, lastRow) {\n        var lines = this.doc.getAllLines();\n        var tabSize = this.getTabSize();\n        var wrapData = this.$wrapData;\n        var wrapLimit = this.$wrapLimit;\n        var tokens;\n        var foldLine;\n\n        var row = firstRow;\n        lastRow = Math.min(lastRow, lines.length - 1);\n        while (row <= lastRow) {\n            foldLine = this.getFoldLine(row, foldLine);\n            if (!foldLine) {\n                tokens = this.$getDisplayTokens(lines[row]);\n                wrapData[row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row ++;\n            } else {\n                tokens = [];\n                foldLine.walk(function(placeholder, row, column, lastColumn) {\n                        var walkTokens;\n                        if (placeholder != null) {\n                            walkTokens = this.$getDisplayTokens(\n                                            placeholder, tokens.length);\n                            walkTokens[0] = PLACEHOLDER_START;\n                            for (var i = 1; i < walkTokens.length; i++) {\n                                walkTokens[i] = PLACEHOLDER_BODY;\n                            }\n                        } else {\n                            walkTokens = this.$getDisplayTokens(\n                                lines[row].substring(lastColumn, column),\n                                tokens.length);\n                        }\n                        tokens = tokens.concat(walkTokens);\n                    }.bind(this),\n                    foldLine.end.row,\n                    lines[foldLine.end.row].length + 1\n                );\n\n                wrapData[foldLine.start.row] = this.$computeWrapSplits(tokens, wrapLimit, tabSize);\n                row = foldLine.end.row + 1;\n            }\n        }\n    };\n\n    // \"Tokens\"\n    var CHAR = 1,\n        CHAR_EXT = 2,\n        PLACEHOLDER_START = 3,\n        PLACEHOLDER_BODY =  4,\n        PUNCTUATION = 9,\n        SPACE = 10,\n        TAB = 11,\n        TAB_SPACE = 12;\n\n\n    this.$computeWrapSplits = function(tokens, wrapLimit, tabSize) {\n        if (tokens.length == 0) {\n            return [];\n        }\n\n        var splits = [];\n        var displayLength = tokens.length;\n        var lastSplit = 0, lastDocSplit = 0;\n\n        var isCode = this.$wrapAsCode;\n\n        var indentedSoftWrap = this.$indentedSoftWrap;\n        var maxIndent = wrapLimit <= Math.max(2 * tabSize, 8)\n            || indentedSoftWrap === false ? 0 : Math.floor(wrapLimit / 2);\n\n        function getWrapIndent() {\n            var indentation = 0;\n            if (maxIndent === 0)\n                return indentation;\n            if (indentedSoftWrap) {\n                for (var i = 0; i < tokens.length; i++) {\n                    var token = tokens[i];\n                    if (token == SPACE)\n                        indentation += 1;\n                    else if (token == TAB)\n                        indentation += tabSize;\n                    else if (token == TAB_SPACE)\n                        continue;\n                    else\n                        break;\n                }\n            }\n            if (isCode && indentedSoftWrap !== false)\n                indentation += tabSize;\n            return Math.min(indentation, maxIndent);\n        }\n        function addSplit(screenPos) {\n            // The document size is the current size - the extra width for tabs\n            // and multipleWidth characters.\n            var len = screenPos - lastSplit;\n            for (var i = lastSplit; i < screenPos; i++) {\n                var ch = tokens[i];\n                if (ch === 12 || ch === 2) len -= 1;\n            }\n\n            if (!splits.length) {\n                indent = getWrapIndent();\n                splits.indent = indent;\n            }\n            lastDocSplit += len;\n            splits.push(lastDocSplit);\n            lastSplit = screenPos;\n        }\n        var indent = 0;\n        while (displayLength - lastSplit > wrapLimit - indent) {\n            // This is, where the split should be.\n            var split = lastSplit + wrapLimit - indent;\n\n            // If there is a space or tab at this split position, then making\n            // a split is simple.\n            if (tokens[split - 1] >= SPACE && tokens[split] >= SPACE) {\n                /* disabled see https://github.com/ajaxorg/ace/issues/1186\n                // Include all following spaces + tabs in this split as well.\n                while (tokens[split] >= SPACE) {\n                    split ++;\n                } */\n                addSplit(split);\n                continue;\n            }\n\n            // === ELSE ===\n            // Check if split is inside of a placeholder. Placeholder are\n            // not splitable. Therefore, seek the beginning of the placeholder\n            // and try to place the split before the placeholder's start.\n            if (tokens[split] == PLACEHOLDER_START || tokens[split] == PLACEHOLDER_BODY) {\n                // Seek the start of the placeholder and do the split\n                // before the placeholder. By definition there always\n                // a PLACEHOLDER_START between split and lastSplit.\n                for (split; split != lastSplit - 1; split--) {\n                    if (tokens[split] == PLACEHOLDER_START) {\n                        // split++; << No incremental here as we want to\n                        //  have the position before the Placeholder.\n                        break;\n                    }\n                }\n\n                // If the PLACEHOLDER_START is not the index of the\n                // last split, then we can do the split\n                if (split > lastSplit) {\n                    addSplit(split);\n                    continue;\n                }\n\n                // If the PLACEHOLDER_START IS the index of the last\n                // split, then we have to place the split after the\n                // placeholder. So, let's seek for the end of the placeholder.\n                split = lastSplit + wrapLimit;\n                for (split; split < tokens.length; split++) {\n                    if (tokens[split] != PLACEHOLDER_BODY) {\n                        break;\n                    }\n                }\n\n                // If spilt == tokens.length, then the placeholder is the last\n                // thing in the line and adding a new split doesn't make sense.\n                if (split == tokens.length) {\n                    break;  // Breaks the while-loop.\n                }\n\n                // Finally, add the split...\n                addSplit(split);\n                continue;\n            }\n\n            // === ELSE ===\n            // Search for the first non space/tab/placeholder/punctuation token backwards.\n            var minSplit = Math.max(split - (wrapLimit -(wrapLimit>>2)), lastSplit - 1);\n            while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                split --;\n            }\n            if (isCode) {\n                while (split > minSplit && tokens[split] < PLACEHOLDER_START) {\n                    split --;\n                }\n                while (split > minSplit && tokens[split] == PUNCTUATION) {\n                    split --;\n                }\n            } else {\n                while (split > minSplit && tokens[split] < SPACE) {\n                    split --;\n                }\n            }\n            // If we found one, then add the split.\n            if (split > minSplit) {\n                addSplit(++split);\n                continue;\n            }\n\n            // === ELSE ===\n            split = lastSplit + wrapLimit;\n            // The split is inside of a CHAR or CHAR_EXT token and no space\n            // around -> force a split.\n            if (tokens[split] == CHAR_EXT)\n                split--;\n            addSplit(split - indent);\n        }\n        return splits;\n    };\n\n    /**\n     * Given a string, returns an array of the display characters, including tabs and spaces.\n     * @param {String} str The string to check\n     * @param {Number} offset The value to start at\n     *\n     **/\n    this.$getDisplayTokens = function(str, offset) {\n        var arr = [];\n        var tabSize;\n        offset = offset || 0;\n\n        for (var i = 0; i < str.length; i++) {\n            var c = str.charCodeAt(i);\n            // Tab\n            if (c == 9) {\n                tabSize = this.getScreenTabSize(arr.length + offset);\n                arr.push(TAB);\n                for (var n = 1; n < tabSize; n++) {\n                    arr.push(TAB_SPACE);\n                }\n            }\n            // Space\n            else if (c == 32) {\n                arr.push(SPACE);\n            } else if((c > 39 && c < 48) || (c > 57 && c < 64)) {\n                arr.push(PUNCTUATION);\n            }\n            // full width characters\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                arr.push(CHAR, CHAR_EXT);\n            } else {\n                arr.push(CHAR);\n            }\n        }\n        return arr;\n    };\n\n    /**\n     * Calculates the width of the string `str` on the screen while assuming that the string starts at the first column on the screen.\n     * @param {String} str The string to calculate the screen width of\n     * @param {Number} maxScreenColumn\n     * @param {Number} screenColumn\n     * @returns {[Number]} Returns an `int[]` array with two elements:<br/>\n     * The first position indicates the number of columns for `str` on screen.<br/>\n     * The second value contains the position of the document column that this function read until.\n     *\n     **/\n    this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n        if (maxScreenColumn == 0)\n            return [0, 0];\n        if (maxScreenColumn == null)\n            maxScreenColumn = Infinity;\n        screenColumn = screenColumn || 0;\n\n        var c, column;\n        for (column = 0; column < str.length; column++) {\n            c = str.charCodeAt(column);\n            // tab\n            if (c == 9) {\n                screenColumn += this.getScreenTabSize(screenColumn);\n            }\n            // full width characters\n            else if (c >= 0x1100 && isFullWidth(c)) {\n                screenColumn += 2;\n            } else {\n                screenColumn += 1;\n            }\n            if (screenColumn > maxScreenColumn) {\n                break;\n            }\n        }\n\n        return [screenColumn, column];\n    };\n\n    this.lineWidgets = null;\n    /**\n     * Returns number of screenrows in a wrapped line.\n     * @param {Number} row The row number to check\n     *\n     * @returns {Number}\n     **/\n    this.getRowLength = function(row) {\n        var h = 1;\n        if (this.lineWidgets)\n            h += this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        \n        if (!this.$useWrapMode || !this.$wrapData[row])\n            return h;\n        else\n            return this.$wrapData[row].length + h;\n    };\n    this.getRowLineCount = function(row) {\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1;\n        } else {\n            return this.$wrapData[row].length + 1;\n        }\n    };\n\n    this.getRowWrapIndent = function(screenRow) {\n        if (this.$useWrapMode) {\n            var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n            var splits = this.$wrapData[pos.row];\n            return splits.length && splits[0] < pos.column ? splits.indent : 0;\n        } else {\n            return 0;\n        }\n    };\n\n    /**\n     * Returns the position (on screen) for the last character in the provided screen row.\n     * @param {Number} screenRow The screen row to check\n     * @returns {Number}\n     *\n     * @related EditSession.documentToScreenColumn\n     **/\n    this.getScreenLastRowColumn = function(screenRow) {\n        var pos = this.screenToDocumentPosition(screenRow, Number.MAX_VALUE);\n        return this.documentToScreenColumn(pos.row, pos.column);\n    };\n\n    /**\n     * For the given document row and column, this returns the column position of the last screen row.\n     * @param {Number} docRow\n     *\n     * @param {Number} docColumn\n     **/\n    this.getDocumentLastRowColumn = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.getScreenLastRowColumn(screenRow);\n    };\n\n    /**\n     * For the given document row and column, this returns the document position of the last row.\n     * @param {Number} docRow\n     * @param {Number} docColumn\n     *\n     **/\n    this.getDocumentLastRowColumnPosition = function(docRow, docColumn) {\n        var screenRow = this.documentToScreenRow(docRow, docColumn);\n        return this.screenToDocumentPosition(screenRow, Number.MAX_VALUE / 10);\n    };\n\n    /**\n     * For the given row, this returns the split data.\n     * @returns {String}\n     **/\n    this.getRowSplitData = function(row) {\n        if (!this.$useWrapMode) {\n            return undefined;\n        } else {\n            return this.$wrapData[row];\n        }\n    };\n\n    /**\n     * The distance to the next tab stop at the specified screen column.\n     * @param {Number} screenColumn The screen column to check\n     *\n     * @returns {Number}\n     **/\n    this.getScreenTabSize = function(screenColumn) {\n        return this.$tabSize - (screenColumn % this.$tabSize | 0);\n    };\n\n\n    this.screenToDocumentRow = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).row;\n    };\n\n\n    this.screenToDocumentColumn = function(screenRow, screenColumn) {\n        return this.screenToDocumentPosition(screenRow, screenColumn).column;\n    };\n\n    /**\n     * Converts characters coordinates on the screen to characters coordinates within the document. [This takes into account code folding, word wrap, tab size, and any other visual modifications.]{: #conversionConsiderations}\n     * @param {Number} screenRow The screen row to check\n     * @param {Number} screenColumn The screen column to check\n     * @param {Number} offsetX screen character x-offset [optional]\n     *\n     * @returns {Object} The object returned has two properties: `row` and `column`.\n     *\n     * @related EditSession.documentToScreenPosition\n     **/\n    this.screenToDocumentPosition = function(screenRow, screenColumn, offsetX) {\n        if (screenRow < 0)\n            return {row: 0, column: 0};\n\n        var line;\n        var docRow = 0;\n        var docColumn = 0;\n        var column;\n        var row = 0;\n        var rowLength = 0;\n\n        var rowCache = this.$screenRowCache;\n        var i = this.$getRowCacheIndex(rowCache, screenRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var docRow = this.$docRowCache[i];\n            var doCache = screenRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var maxRow = this.getLength() - 1;\n        var foldLine = this.getNextFoldLine(docRow);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (row <= screenRow) {\n            rowLength = this.getRowLength(docRow);\n            if (row + rowLength > screenRow || docRow >= maxRow) {\n                break;\n            } else {\n                row += rowLength;\n                docRow++;\n                if (docRow > foldStart) {\n                    docRow = foldLine.end.row+1;\n                    foldLine = this.getNextFoldLine(docRow, foldLine);\n                    foldStart = foldLine ? foldLine.start.row : Infinity;\n                }\n            }\n\n            if (doCache) {\n                this.$docRowCache.push(docRow);\n                this.$screenRowCache.push(row);\n            }\n        }\n\n        if (foldLine && foldLine.start.row <= docRow) {\n            line = this.getFoldDisplayLine(foldLine);\n            docRow = foldLine.start.row;\n        } else if (row + rowLength <= screenRow || docRow > maxRow) {\n            // clip at the end of the document\n            return {\n                row: maxRow,\n                column: this.getLine(maxRow).length\n            };\n        } else {\n            line = this.getLine(docRow);\n            foldLine = null;\n        }\n        var wrapIndent = 0, splitIndex = Math.floor(screenRow - row);\n        if (this.$useWrapMode) {\n            var splits = this.$wrapData[docRow];\n            if (splits) {\n                column = splits[splitIndex];\n                if(splitIndex > 0 && splits.length) {\n                    wrapIndent = splits.indent;\n                    docColumn = splits[splitIndex - 1] || splits[splits.length - 1];\n                    line = line.substring(docColumn);\n                }\n            }\n        }\n\n        if (offsetX !== undefined && this.$bidiHandler.isBidiRow(row + splitIndex, docRow, splitIndex))\n            screenColumn = this.$bidiHandler.offsetToCol(offsetX);\n\n        docColumn += this.$getStringScreenWidth(line, screenColumn - wrapIndent)[1];\n\n        // We remove one character at the end so that the docColumn\n        // position returned is not associated to the next row on the screen.\n        if (this.$useWrapMode && docColumn >= column)\n            docColumn = column - 1;\n\n        if (foldLine)\n            return foldLine.idxToPosition(docColumn);\n\n        return {row: docRow, column: docColumn};\n    };\n\n    /**\n     * Converts document coordinates to screen coordinates. {:conversionConsiderations}\n     * @param {Number} docRow The document row to check\n     * @param {Number} docColumn The document column to check\n     * @returns {Object} The object returned by this method has two properties: `row` and `column`.\n     *\n     * @related EditSession.screenToDocumentPosition\n     **/\n    this.documentToScreenPosition = function(docRow, docColumn) {\n        // Normalize the passed in arguments.\n        if (typeof docColumn === \"undefined\")\n            var pos = this.$clipPositionToDocument(docRow.row, docRow.column);\n        else\n            pos = this.$clipPositionToDocument(docRow, docColumn);\n\n        docRow = pos.row;\n        docColumn = pos.column;\n\n        var screenRow = 0;\n        var foldStartRow = null;\n        var fold = null;\n\n        // Clamp the docRow position in case it's inside of a folded block.\n        fold = this.getFoldAt(docRow, docColumn, 1);\n        if (fold) {\n            docRow = fold.start.row;\n            docColumn = fold.start.column;\n        }\n\n        var rowEnd, row = 0;\n\n\n        var rowCache = this.$docRowCache;\n        var i = this.$getRowCacheIndex(rowCache, docRow);\n        var l = rowCache.length;\n        if (l && i >= 0) {\n            var row = rowCache[i];\n            var screenRow = this.$screenRowCache[i];\n            var doCache = docRow > rowCache[l - 1];\n        } else {\n            var doCache = !l;\n        }\n\n        var foldLine = this.getNextFoldLine(row);\n        var foldStart = foldLine ?foldLine.start.row :Infinity;\n\n        while (row < docRow) {\n            if (row >= foldStart) {\n                rowEnd = foldLine.end.row + 1;\n                if (rowEnd > docRow)\n                    break;\n                foldLine = this.getNextFoldLine(rowEnd, foldLine);\n                foldStart = foldLine ?foldLine.start.row :Infinity;\n            }\n            else {\n                rowEnd = row + 1;\n            }\n\n            screenRow += this.getRowLength(row);\n            row = rowEnd;\n\n            if (doCache) {\n                this.$docRowCache.push(row);\n                this.$screenRowCache.push(screenRow);\n            }\n        }\n\n        // Calculate the text line that is displayed in docRow on the screen.\n        var textLine = \"\";\n        // Check if the final row we want to reach is inside of a fold.\n        if (foldLine && row >= foldStart) {\n            textLine = this.getFoldDisplayLine(foldLine, docRow, docColumn);\n            foldStartRow = foldLine.start.row;\n        } else {\n            textLine = this.getLine(docRow).substring(0, docColumn);\n            foldStartRow = docRow;\n        }\n        var wrapIndent = 0;\n        // Clamp textLine if in wrapMode.\n        if (this.$useWrapMode) {\n            var wrapRow = this.$wrapData[foldStartRow];\n            if (wrapRow) {\n                var screenRowOffset = 0;\n                while (textLine.length >= wrapRow[screenRowOffset]) {\n                    screenRow ++;\n                    screenRowOffset++;\n                }\n                textLine = textLine.substring(\n                    wrapRow[screenRowOffset - 1] || 0, textLine.length\n                );\n                wrapIndent = screenRowOffset > 0 ? wrapRow.indent : 0;\n            }\n        }\n        \n        if (this.lineWidgets && this.lineWidgets[row] && this.lineWidgets[row].rowsAbove)\n            screenRow += this.lineWidgets[row].rowsAbove;\n\n        return {\n            row: screenRow,\n            column: wrapIndent + this.$getStringScreenWidth(textLine)[0]\n        };\n    };\n\n    /**\n     * For the given document row and column, returns the screen column.\n     * @param {Number} row\n     * @param {Number} docColumn\n     * @returns {Number}\n     *\n     **/\n    this.documentToScreenColumn = function(row, docColumn) {\n        return this.documentToScreenPosition(row, docColumn).column;\n    };\n\n    /**\n     * For the given document row and column, returns the screen row.\n     * @param {Number} docRow\n     * @param {Number} docColumn\n     *\n     **/\n    this.documentToScreenRow = function(docRow, docColumn) {\n        return this.documentToScreenPosition(docRow, docColumn).row;\n    };\n\n    /**\n     * Returns the length of the screen.\n     * @returns {Number}\n     **/\n    this.getScreenLength = function() {\n        var screenRows = 0;\n        var fold = null;\n        if (!this.$useWrapMode) {\n            screenRows = this.getLength();\n\n            // Remove the folded lines again.\n            var foldData = this.$foldData;\n            for (var i = 0; i < foldData.length; i++) {\n                fold = foldData[i];\n                screenRows -= fold.end.row - fold.start.row;\n            }\n        } else {\n            var lastRow = this.$wrapData.length;\n            var row = 0, i = 0;\n            var fold = this.$foldData[i++];\n            var foldStart = fold ? fold.start.row :Infinity;\n\n            while (row < lastRow) {\n                var splits = this.$wrapData[row];\n                screenRows += splits ? splits.length + 1 : 1;\n                row ++;\n                if (row > foldStart) {\n                    row = fold.end.row+1;\n                    fold = this.$foldData[i++];\n                    foldStart = fold ?fold.start.row :Infinity;\n                }\n            }\n        }\n\n        // todo\n        if (this.lineWidgets)\n            screenRows += this.$getWidgetScreenLength();\n\n        return screenRows;\n    };\n    \n    /**\n     * @private\n     *\n     */\n    this.$setFontMetrics = function(fm) {\n        if (!this.$enableVarChar) return;\n        this.$getStringScreenWidth = function(str, maxScreenColumn, screenColumn) {\n            if (maxScreenColumn === 0)\n                return [0, 0];\n            if (!maxScreenColumn)\n                maxScreenColumn = Infinity;\n            screenColumn = screenColumn || 0;\n            \n            var c, column;\n            for (column = 0; column < str.length; column++) {\n                c = str.charAt(column);\n                // tab\n                if (c === \"\\t\") {\n                    screenColumn += this.getScreenTabSize(screenColumn);\n                } else {\n                    screenColumn += fm.getCharacterWidth(c);\n                }\n                if (screenColumn > maxScreenColumn) {\n                    break;\n                }\n            }\n            \n            return [screenColumn, column];\n        };\n    };\n    \n    this.destroy = function() {\n        if (!this.destroyed) {\n            this.bgTokenizer.setDocument(null);\n            this.bgTokenizer.cleanup();\n            this.destroyed = true;\n        }\n        this.$stopWorker();\n        this.removeAllListeners();\n        if (this.doc) {\n            this.doc.off(\"change\", this.$onChange);\n        }\n        this.selection.detach();\n    };\n\n    this.isFullWidth = isFullWidth;\n\n    // For every keystroke this gets called once per char in the whole doc!!\n    // Wouldn't hurt to make it a bit faster for c >= 0x1100\n    function isFullWidth(c) {\n        if (c < 0x1100)\n            return false;\n        return c >= 0x1100 && c <= 0x115F ||\n               c >= 0x11A3 && c <= 0x11A7 ||\n               c >= 0x11FA && c <= 0x11FF ||\n               c >= 0x2329 && c <= 0x232A ||\n               c >= 0x2E80 && c <= 0x2E99 ||\n               c >= 0x2E9B && c <= 0x2EF3 ||\n               c >= 0x2F00 && c <= 0x2FD5 ||\n               c >= 0x2FF0 && c <= 0x2FFB ||\n               c >= 0x3000 && c <= 0x303E ||\n               c >= 0x3041 && c <= 0x3096 ||\n               c >= 0x3099 && c <= 0x30FF ||\n               c >= 0x3105 && c <= 0x312D ||\n               c >= 0x3131 && c <= 0x318E ||\n               c >= 0x3190 && c <= 0x31BA ||\n               c >= 0x31C0 && c <= 0x31E3 ||\n               c >= 0x31F0 && c <= 0x321E ||\n               c >= 0x3220 && c <= 0x3247 ||\n               c >= 0x3250 && c <= 0x32FE ||\n               c >= 0x3300 && c <= 0x4DBF ||\n               c >= 0x4E00 && c <= 0xA48C ||\n               c >= 0xA490 && c <= 0xA4C6 ||\n               c >= 0xA960 && c <= 0xA97C ||\n               c >= 0xAC00 && c <= 0xD7A3 ||\n               c >= 0xD7B0 && c <= 0xD7C6 ||\n               c >= 0xD7CB && c <= 0xD7FB ||\n               c >= 0xF900 && c <= 0xFAFF ||\n               c >= 0xFE10 && c <= 0xFE19 ||\n               c >= 0xFE30 && c <= 0xFE52 ||\n               c >= 0xFE54 && c <= 0xFE66 ||\n               c >= 0xFE68 && c <= 0xFE6B ||\n               c >= 0xFF01 && c <= 0xFF60 ||\n               c >= 0xFFE0 && c <= 0xFFE6;\n    }\n\n}).call(EditSession.prototype);\n\nrequire(\"./edit_session/folding\").Folding.call(EditSession.prototype);\nrequire(\"./edit_session/bracket_match\").BracketMatch.call(EditSession.prototype);\n\n\nconfig.defineOptions(EditSession.prototype, \"session\", {\n    wrap: {\n        set: function(value) {\n            if (!value || value == \"off\")\n                value = false;\n            else if (value == \"free\")\n                value = true;\n            else if (value == \"printMargin\")\n                value = -1;\n            else if (typeof value == \"string\")\n                value = parseInt(value, 10) || false;\n\n            if (this.$wrap == value)\n                return;\n            this.$wrap = value;\n            if (!value) {\n                this.setUseWrapMode(false);\n            } else {\n                var col = typeof value == \"number\" ? value : null;\n                this.setWrapLimitRange(col, col);\n                this.setUseWrapMode(true);\n            }\n        },\n        get: function() {\n            if (this.getUseWrapMode()) {\n                if (this.$wrap == -1)\n                    return \"printMargin\";\n                if (!this.getWrapLimitRange().min)\n                    return \"free\";\n                return this.$wrap;\n            }\n            return \"off\";\n        },\n        handlesSet: true\n    },    \n    wrapMethod: {\n        // code|text|auto\n        set: function(val) {\n            val = val == \"auto\"\n                ? this.$mode.type != \"text\"\n                : val != \"text\";\n            if (val != this.$wrapAsCode) {\n                this.$wrapAsCode = val;\n                if (this.$useWrapMode) {\n                    this.$useWrapMode = false;\n                    this.setUseWrapMode(true);\n                }\n            }\n        },\n        initialValue: \"auto\"\n    },\n    indentedSoftWrap: {\n        set: function() {\n            if (this.$useWrapMode) {\n                this.$useWrapMode = false;\n                this.setUseWrapMode(true);\n            }\n        },\n        initialValue: true \n    },\n    firstLineNumber: {\n        set: function() {this._signal(\"changeBreakpoint\");},\n        initialValue: 1\n    },\n    useWorker: {\n        set: function(useWorker) {\n            this.$useWorker = useWorker;\n\n            this.$stopWorker();\n            if (useWorker)\n                this.$startWorker();\n        },\n        initialValue: true\n    },\n    useSoftTabs: {initialValue: true},\n    tabSize: {\n        set: function(tabSize) {\n            tabSize = parseInt(tabSize);\n            if (tabSize > 0 && this.$tabSize !== tabSize) {\n                this.$modified = true;\n                this.$rowLengthCache = [];\n                this.$tabSize = tabSize;\n                this._signal(\"changeTabSize\");\n            }\n        },\n        initialValue: 4,\n        handlesSet: true\n    },\n    navigateWithinSoftTabs: {initialValue: false},\n    foldStyle: {\n        set: function(val) {this.setFoldStyle(val);},\n        handlesSet: true\n    },\n    overwrite: {\n        set: function(val) {this._signal(\"changeOverwrite\");},\n        initialValue: false\n    },\n    newLineMode: {\n        set: function(val) {this.doc.setNewLineMode(val);},\n        get: function() {return this.doc.getNewLineMode();},\n        handlesSet: true\n    },\n    mode: {\n        set: function(val) { this.setMode(val); },\n        get: function() { return this.$modeId; },\n        handlesSet: true\n    }\n});\n\nexports.EditSession = EditSession;\n","\"use strict\";\n\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\n\n\nfunction BracketMatch() {\n\n    this.findMatchingBracket = function(position, chr) {\n        if (position.column == 0) return null;\n\n        var charBeforeCursor = chr || this.getLine(position.row).charAt(position.column-1);\n        if (charBeforeCursor == \"\") return null;\n\n        var match = charBeforeCursor.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match)\n            return null;\n\n        if (match[1])\n            return this.$findClosingBracket(match[1], position);\n        else\n            return this.$findOpeningBracket(match[2], position);\n    };\n    \n    this.getBracketRange = function(pos) {\n        var line = this.getLine(pos.row);\n        var before = true, range;\n\n        var chr = line.charAt(pos.column - 1);\n        var match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n        if (!match) {\n            chr = line.charAt(pos.column);\n            pos = {row: pos.row, column: pos.column + 1};\n            match = chr && chr.match(/([\\(\\[\\{])|([\\)\\]\\}])/);\n            before = false;\n        }\n        if (!match)\n            return null;\n\n        if (match[1]) {\n            var bracketPos = this.$findClosingBracket(match[1], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(pos, bracketPos);\n            if (!before) {\n                range.end.column++;\n                range.start.column--;\n            }\n            range.cursor = range.end;\n        } else {\n            var bracketPos = this.$findOpeningBracket(match[2], pos);\n            if (!bracketPos)\n                return null;\n            range = Range.fromPoints(bracketPos, pos);\n            if (!before) {\n                range.start.column++;\n                range.end.column--;\n            }\n            range.cursor = range.start;\n        }\n        \n        return range;\n    };\n\n    /**\n     * Returns:\n     * * null if there is no any bracket at `pos`;\n     * * two Ranges if there is opening and closing brackets;\n     * * one Range if there is only one bracket\n     *\n     * @param {Point} pos\n     * @param {boolean} [isBackwards]\n     * @returns {null|Range[]}\n     */\n    this.getMatchingBracketRanges = function(pos, isBackwards) {\n        var line = this.getLine(pos.row);\n        var bracketsRegExp = /([\\(\\[\\{])|([\\)\\]\\}])/;\n        var chr = !isBackwards && line.charAt(pos.column - 1);\n        var match = chr && chr.match(bracketsRegExp);\n        if (!match) {\n            chr = (isBackwards === undefined || isBackwards) && line.charAt(pos.column);\n            pos = {\n                row: pos.row,\n                column: pos.column + 1\n            };\n            match = chr && chr.match(bracketsRegExp);\n        }\n\n        if (!match)\n            return null;\n\n        var startRange = new Range(pos.row, pos.column - 1, pos.row, pos.column);\n        var bracketPos = match[1] ? this.$findClosingBracket(match[1], pos)\n            : this.$findOpeningBracket(match[2], pos);\n        if (!bracketPos)\n            return [startRange];\n        var endRange = new Range(bracketPos.row, bracketPos.column, bracketPos.row, bracketPos.column + 1);\n\n        return [startRange, endRange];\n    };\n\n    this.$brackets = {\n        \")\": \"(\",\n        \"(\": \")\",\n        \"]\": \"[\",\n        \"[\": \"]\",\n        \"{\": \"}\",\n        \"}\": \"{\",\n        \"<\": \">\",\n        \">\": \"<\"\n    };\n\n    this.$findOpeningBracket = function(bracket, position, typeRe) {\n        var openBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n        \n         if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"rparen\", \".paren\")\n                    .replace(/\\b(?:end)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n        \n        // Start searching in token, just before the character at position.column\n        var valueIndex = position.column - iterator.getCurrentTokenColumn() - 2;\n        var value = token.value;\n        \n        while (true) {\n        \n            while (valueIndex >= 0) {\n                var chr = value.charAt(valueIndex);\n                if (chr == openBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex -= 1;\n            }\n\n            // Scan backward through the document, looking for the next token\n            // whose type matches typeRe\n            do {\n                token = iterator.stepBackward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n                \n            value = token.value;\n            valueIndex = value.length - 1;\n        }\n        \n        return null;\n    };\n\n    this.$findClosingBracket = function(bracket, position, typeRe) {\n        var closingBracket = this.$brackets[bracket];\n        var depth = 1;\n\n        var iterator = new TokenIterator(this, position.row, position.column);\n        var token = iterator.getCurrentToken();\n        if (!token)\n            token = iterator.stepForward();\n        if (!token)\n            return;\n\n        if (!typeRe){\n            typeRe = new RegExp(\n                \"(\\\\.?\" +\n                token.type.replace(\".\", \"\\\\.\").replace(\"lparen\", \".paren\")\n                    .replace(/\\b(?:start|begin)\\b/, \"(?:start|begin|end)\")\n                + \")+\"\n            );\n        }\n\n        // Start searching in token, after the character at position.column\n        var valueIndex = position.column - iterator.getCurrentTokenColumn();\n\n        while (true) {\n\n            var value = token.value;\n            var valueLength = value.length;\n            while (valueIndex < valueLength) {\n                var chr = value.charAt(valueIndex);\n                if (chr == closingBracket) {\n                    depth -= 1;\n                    if (depth == 0) {\n                        return {row: iterator.getCurrentTokenRow(),\n                            column: valueIndex + iterator.getCurrentTokenColumn()};\n                    }\n                }\n                else if (chr == bracket) {\n                    depth += 1;\n                }\n                valueIndex += 1;\n            }\n\n            // Scan forward through the document, looking for the next token\n            // whose type matches typeRe\n            do {\n                token = iterator.stepForward();\n            } while (token && !typeRe.test(token.type));\n\n            if (token == null)\n                break;\n\n            valueIndex = 0;\n        }\n        \n        return null;\n    };\n\n    /**\n     * Returns [[Range]]'s for matching tags and tag names, if there are any\n     * @param {Position} pos\n     * @returns {{closeTag: Range, closeTagName: Range, openTag: Range, openTagName: Range} | undefined}\n     */\n    this.getMatchingTags = function (pos) {\n        var iterator = new TokenIterator(this, pos.row, pos.column);\n        var token = this.$findTagName(iterator);\n        if (!token) return;\n\n        var prevToken = iterator.stepBackward();\n\n        if (prevToken.value === '<') {\n            return this.$findClosingTag(iterator, token);\n        }\n        else {\n            return this.$findOpeningTag(iterator, token);\n        }\n    };\n\n    this.$findTagName = function (iterator) {\n        var token = iterator.getCurrentToken();\n        var found = false;\n        var backward = false;\n        if (token && token.type.indexOf('tag-name') === -1) {\n            do {\n                if (backward) token = iterator.stepBackward(); else token = iterator.stepForward();\n                if (token) {\n                    if (token.value === \"/>\") {\n                        //changing iterator direction for self-closing tags, when cursor is in between tag\n                        //name and tag closing\n                        backward = true;\n                    }\n                    else if (token.type.indexOf('tag-name') !== -1) {\n                        found = true;\n                    }\n                }\n            } while (token && !found);\n        }\n        return token;\n    };\n\n    this.$findClosingTag = function (iterator, token) {\n        var prevToken;\n        var currentTag = token.value;\n        var tag = token.value;\n        var depth = 0;\n\n        var openTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n        );\n        token = iterator.stepForward();\n        var openTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length\n        );\n        var foundOpenTagEnd = false;\n        do {\n            prevToken = token;\n            token = iterator.stepForward();\n            if (token) {\n                if (token.value === '>' && !foundOpenTagEnd) {\n                    var openTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n                        iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n                    ); //Range for `>`\n                    foundOpenTagEnd = true;\n                }\n                if (token.type.indexOf('tag-name') !== -1) {\n                    currentTag = token.value;\n                    if (tag === currentTag) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                            if (depth < 0) {//found closing tag\n                                iterator.stepBackward();\n                                var closeTagStart = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 2\n                                ); //Range for </\n                                token = iterator.stepForward();\n                                var closeTagName = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + token.value.length\n                                );\n                                token = iterator.stepForward();\n                                if (token && token.value === '>') {\n                                    var closeTagEnd = new Range(iterator.getCurrentTokenRow(),\n                                        iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                        iterator.getCurrentTokenColumn() + 1\n                                    ); //Range for >\n                                }\n                                else {\n                                    return;\n                                }\n                            }\n                        }\n                    }\n                }\n                else if (tag === currentTag && token.value === '/>') { // self-closing tag\n                    depth--;\n                    if (depth < 0) {//found self-closing tag end\n                        //Example: <tagName attr/>\n                        //`<tagName ` - opening part of tag consist of `openTagStart`, `openTagName` and `openTagEnd`\n                        //`/>` - closing part of tag consist of `closeTagStart`, `closeTagName` and `closeTagEnd`\n                        var closeTagStart = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n                            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 2\n                        );\n                        var closeTagName = closeTagStart;\n                        var closeTagEnd = closeTagName;\n\n                        var openTagEnd = new Range(openTagName.end.row, openTagName.end.column, openTagName.end.row,\n                            openTagName.end.column + 1\n                        );\n\n                    }\n                }\n            }\n        } while (token && depth >= 0);\n\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row,\n                    openTagEnd.end.column\n                ),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row,\n                    closeTagEnd.end.column\n                ),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n\n    this.$findOpeningTag = function (iterator, token) {\n        var prevToken = iterator.getCurrentToken();\n        var tag = token.value;\n        var depth = 0;\n\n        var startRow = iterator.getCurrentTokenRow();\n        var startColumn = iterator.getCurrentTokenColumn();\n        var endColumn = startColumn + 2;\n\n        //closing tag\n        var closeTagStart = new Range(startRow, startColumn, startRow, endColumn); //Range for </\n        iterator.stepForward();\n        var closeTagName = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + token.value.length\n        );\n        token = iterator.stepForward();\n        if (!token || token.value !== \">\") return;\n        var closeTagEnd = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn(),\n            iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + 1\n        ); //Range for >\n\n        iterator.stepBackward();\n        iterator.stepBackward();\n        do {\n            token = prevToken;\n            startRow = iterator.getCurrentTokenRow();\n            startColumn = iterator.getCurrentTokenColumn();\n            endColumn = startColumn + token.value.length;\n\n            prevToken = iterator.stepBackward();\n\n            if (token) {\n                if (token.type.indexOf('tag-name') !== -1) {\n                    if (tag === token.value) {\n                        if (prevToken.value === '<') {\n                            depth++;\n                            if (depth > 0) {//found opening tag\n                                var openTagName = new Range(startRow, startColumn, startRow, endColumn);\n                                var openTagStart = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 1\n                                ); //Range for <\n                                do {\n                                    token = iterator.stepForward();\n                                } while (token && token.value !== '>');\n                                var openTagEnd = new Range(iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn(), iterator.getCurrentTokenRow(),\n                                    iterator.getCurrentTokenColumn() + 1\n                                ); //Range for >\n                            }\n                        }\n                        else if (prevToken.value === '</') {\n                            depth--;\n                        }\n                    }\n                }\n                else if (token.value === '/>') { // self-closing tag\n                    var stepCount = 0;\n                    var tmpToken = prevToken;\n                    while (tmpToken) {\n                        if (tmpToken.type.indexOf('tag-name') !== -1 && tmpToken.value === tag) {\n                            depth--;\n                            break;\n                        }\n                        else if (tmpToken.value === '<') {\n                            break;\n                        }\n                        tmpToken = iterator.stepBackward();\n                        stepCount++;\n                    }\n                    for (var i = 0; i < stepCount; i++) {\n                        iterator.stepForward();\n                    }\n                }\n            }\n        } while (prevToken && depth <= 0);\n\n        if (openTagStart && openTagEnd && closeTagStart && closeTagEnd && openTagName && closeTagName) {\n            return {\n                openTag: new Range(openTagStart.start.row, openTagStart.start.column, openTagEnd.end.row,\n                    openTagEnd.end.column\n                ),\n                closeTag: new Range(closeTagStart.start.row, closeTagStart.start.column, closeTagEnd.end.row,\n                    closeTagEnd.end.column\n                ),\n                openTagName: openTagName,\n                closeTagName: closeTagName\n            };\n        }\n    };\n}\nexports.BracketMatch = BracketMatch;\n","\"use strict\";\n\nvar RangeList = require(\"../range_list\").RangeList;\nvar oop = require(\"../lib/oop\");\n/*\n * Simple fold-data struct.\n **/\nvar Fold = exports.Fold = function(range, placeholder) {\n    this.foldLine = null;\n    this.placeholder = placeholder;\n    this.range = range;\n    this.start = range.start;\n    this.end = range.end;\n\n    this.sameRow = range.start.row == range.end.row;\n    this.subFolds = this.ranges = [];\n};\n\noop.inherits(Fold, RangeList);\n\n(function() {\n\n    this.toString = function() {\n        return '\"' + this.placeholder + '\" ' + this.range.toString();\n    };\n\n    this.setFoldLine = function(foldLine) {\n        this.foldLine = foldLine;\n        this.subFolds.forEach(function(fold) {\n            fold.setFoldLine(foldLine);\n        });\n    };\n\n    this.clone = function() {\n        var range = this.range.clone();\n        var fold = new Fold(range, this.placeholder);\n        this.subFolds.forEach(function(subFold) {\n            fold.subFolds.push(subFold.clone());\n        });\n        fold.collapseChildren = this.collapseChildren;\n        return fold;\n    };\n\n    this.addSubFold = function(fold) {\n        if (this.range.isEqual(fold))\n            return;\n\n        // transform fold to local coordinates\n        consumeRange(fold, this.start);\n\n        var row = fold.start.row, column = fold.start.column;\n        for (var i = 0, cmp = -1; i < this.subFolds.length; i++) {\n            cmp = this.subFolds[i].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        var afterStart = this.subFolds[i];\n        var firstConsumed = 0;\n\n        if (cmp == 0) {\n            if (afterStart.range.containsRange(fold))\n                return afterStart.addSubFold(fold);\n            else\n                firstConsumed = 1;\n        }\n\n        // cmp == -1\n        var row = fold.range.end.row, column = fold.range.end.column;\n        for (var j = i, cmp = -1; j < this.subFolds.length; j++) {\n            cmp = this.subFolds[j].range.compare(row, column);\n            if (cmp != 1)\n                break;\n        }\n        if (cmp == 0)  j++;\n        var consumedFolds = this.subFolds.splice(i, j - i, fold);\n        var last = cmp == 0 ? consumedFolds.length - 1 : consumedFolds.length;\n        for (var k = firstConsumed; k < last; k++) {\n            fold.addSubFold(consumedFolds[k]);\n        }\n        fold.setFoldLine(this.foldLine);\n\n        return fold;\n    };\n    \n    this.restoreRange = function(range) {\n        return restoreRange(range, this.start);\n    };\n\n}).call(Fold.prototype);\n\nfunction consumePoint(point, anchor) {\n    point.row -= anchor.row;\n    if (point.row == 0)\n        point.column -= anchor.column;\n}\nfunction consumeRange(range, anchor) {\n    consumePoint(range.start, anchor);\n    consumePoint(range.end, anchor);\n}\nfunction restorePoint(point, anchor) {\n    if (point.row == 0)\n        point.column += anchor.column;\n    point.row += anchor.row;\n}\nfunction restoreRange(range, anchor) {\n    restorePoint(range.start, anchor);\n    restorePoint(range.end, anchor);\n}\n","\"use strict\";\n\nvar Range = require(\"../range\").Range;\n\n/*\n * If an array is passed in, the folds are expected to be sorted already.\n */\nfunction FoldLine(foldData, folds) {\n    this.foldData = foldData;\n    if (Array.isArray(folds)) {\n        this.folds = folds;\n    } else {\n        folds = this.folds = [ folds ];\n    }\n\n    var last = folds[folds.length - 1];\n    this.range = new Range(folds[0].start.row, folds[0].start.column,\n                           last.end.row, last.end.column);\n    this.start = this.range.start;\n    this.end   = this.range.end;\n\n    this.folds.forEach(function(fold) {\n        fold.setFoldLine(this);\n    }, this);\n}\n\n(function() {\n    /*\n     * Note: This doesn't update wrapData!\n     */\n    this.shiftRow = function(shift) {\n        this.start.row += shift;\n        this.end.row += shift;\n        this.folds.forEach(function(fold) {\n            fold.start.row += shift;\n            fold.end.row += shift;\n        });\n    };\n\n    this.addFold = function(fold) {\n        if (fold.sameRow) {\n            if (fold.start.row < this.startRow || fold.endRow > this.endRow) {\n                throw new Error(\"Can't add a fold to this FoldLine as it has no connection\");\n            }\n            this.folds.push(fold);\n            this.folds.sort(function(a, b) {\n                return -a.range.compareEnd(b.start.row, b.start.column);\n            });\n            if (this.range.compareEnd(fold.start.row, fold.start.column) > 0) {\n                this.end.row = fold.end.row;\n                this.end.column =  fold.end.column;\n            } else if (this.range.compareStart(fold.end.row, fold.end.column) < 0) {\n                this.start.row = fold.start.row;\n                this.start.column = fold.start.column;\n            }\n        } else if (fold.start.row == this.end.row) {\n            this.folds.push(fold);\n            this.end.row = fold.end.row;\n            this.end.column = fold.end.column;\n        } else if (fold.end.row == this.start.row) {\n            this.folds.unshift(fold);\n            this.start.row = fold.start.row;\n            this.start.column = fold.start.column;\n        } else {\n            throw new Error(\"Trying to add fold to FoldRow that doesn't have a matching row\");\n        }\n        fold.foldLine = this;\n    };\n\n    this.containsRow = function(row) {\n        return row >= this.start.row && row <= this.end.row;\n    };\n\n    this.walk = function(callback, endRow, endColumn) {\n        var lastEnd = 0,\n            folds = this.folds,\n            fold,\n            cmp, stop, isNewRow = true;\n\n        if (endRow == null) {\n            endRow = this.end.row;\n            endColumn = this.end.column;\n        }\n\n        for (var i = 0; i < folds.length; i++) {\n            fold = folds[i];\n\n            cmp = fold.range.compareStart(endRow, endColumn);\n            // This fold is after the endRow/Column.\n            if (cmp == -1) {\n                callback(null, endRow, endColumn, lastEnd, isNewRow);\n                return;\n            }\n\n            stop = callback(null, fold.start.row, fold.start.column, lastEnd, isNewRow);\n            stop = !stop && callback(fold.placeholder, fold.start.row, fold.start.column, lastEnd);\n\n            // If the user requested to stop the walk or endRow/endColumn is\n            // inside of this fold (cmp == 0), then end here.\n            if (stop || cmp === 0) {\n                return;\n            }\n\n            // Note the new lastEnd might not be on the same line. However,\n            // it's the callback's job to recognize this.\n            isNewRow = !fold.sameRow;\n            lastEnd = fold.end.column;\n        }\n        callback(null, endRow, endColumn, lastEnd, isNewRow);\n    };\n\n    this.getNextFoldTo = function(row, column) {\n        var fold, cmp;\n        for (var i = 0; i < this.folds.length; i++) {\n            fold = this.folds[i];\n            cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                return {\n                    fold: fold,\n                    kind: \"after\"\n                };\n            } else if (cmp === 0) {\n                return {\n                    fold: fold,\n                    kind: \"inside\"\n                };\n            }\n        }\n        return null;\n    };\n\n    this.addRemoveChars = function(row, column, len) {\n        var ret = this.getNextFoldTo(row, column),\n            fold, folds;\n        if (ret) {\n            fold = ret.fold;\n            if (ret.kind == \"inside\"\n                && fold.start.column != column\n                && fold.start.row != row)\n            {\n                //throwing here breaks whole editor\n                //TODO: properly handle this\n                window.console && window.console.log(row, column, fold);\n            } else if (fold.start.row == row) {\n                folds = this.folds;\n                var i = folds.indexOf(fold);\n                if (i === 0) {\n                    this.start.column += len;\n                }\n                for (i; i < folds.length; i++) {\n                    fold = folds[i];\n                    fold.start.column += len;\n                    if (!fold.sameRow) {\n                        return;\n                    }\n                    fold.end.column += len;\n                }\n                this.end.column += len;\n            }\n        }\n    };\n\n    this.split = function(row, column) {\n        var pos = this.getNextFoldTo(row, column);\n        \n        if (!pos || pos.kind == \"inside\")\n            return null;\n            \n        var fold = pos.fold;\n        var folds = this.folds;\n        var foldData = this.foldData;\n        \n        var i = folds.indexOf(fold);\n        var foldBefore = folds[i - 1];\n        this.end.row = foldBefore.end.row;\n        this.end.column = foldBefore.end.column;\n\n        // Remove the folds after row/column and create a new FoldLine\n        // containing these removed folds.\n        folds = folds.splice(i, folds.length - i);\n\n        var newFoldLine = new FoldLine(foldData, folds);\n        foldData.splice(foldData.indexOf(this) + 1, 0, newFoldLine);\n        return newFoldLine;\n    };\n\n    this.merge = function(foldLineNext) {\n        var folds = foldLineNext.folds;\n        for (var i = 0; i < folds.length; i++) {\n            this.addFold(folds[i]);\n        }\n        // Remove the foldLineNext - no longer needed, as\n        // it's merged now with foldLineNext.\n        var foldData = this.foldData;\n        foldData.splice(foldData.indexOf(foldLineNext), 1);\n    };\n\n    this.toString = function() {\n        var ret = [this.range.toString() + \": [\" ];\n\n        this.folds.forEach(function(fold) {\n            ret.push(\"  \" + fold.toString());\n        });\n        ret.push(\"]\");\n        return ret.join(\"\\n\");\n    };\n\n    this.idxToPosition = function(idx) {\n        var lastFoldEndColumn = 0;\n\n        for (var i = 0; i < this.folds.length; i++) {\n            var fold = this.folds[i];\n\n            idx -= fold.start.column - lastFoldEndColumn;\n            if (idx < 0) {\n                return {\n                    row: fold.start.row,\n                    column: fold.start.column + idx\n                };\n            }\n\n            idx -= fold.placeholder.length;\n            if (idx < 0) {\n                return fold.start;\n            }\n\n            lastFoldEndColumn = fold.end.column;\n        }\n\n        return {\n            row: this.end.row,\n            column: this.end.column + idx\n        };\n    };\n}).call(FoldLine.prototype);\n\nexports.FoldLine = FoldLine;\n","\"use strict\";\n\nvar Range = require(\"../range\").Range;\nvar FoldLine = require(\"./fold_line\").FoldLine;\nvar Fold = require(\"./fold\").Fold;\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\n\nfunction Folding() {\n    /*\n     * Looks up a fold at a given row/column. Possible values for side:\n     *   -1: ignore a fold if fold.start = row/column\n     *   +1: ignore a fold if fold.end = row/column\n     */\n    this.getFoldAt = function(row, column, side) {\n        var foldLine = this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var folds = foldLine.folds;\n        for (var i = 0; i < folds.length; i++) {\n            var range = folds[i].range;\n            if (range.contains(row, column)) {\n                if (side == 1 && range.isEnd(row, column) && !range.isEmpty()) {\n                    continue;\n                } else if (side == -1 && range.isStart(row, column) && !range.isEmpty()) {\n                    continue;\n                }\n                return folds[i];\n            }\n        }\n    };\n\n    /*\n     * Returns all folds in the given range. Note, that this will return folds\n     *\n     */\n    this.getFoldsInRange = function(range) {\n        var start = range.start;\n        var end = range.end;\n        var foldLines = this.$foldData;\n        var foundFolds = [];\n\n        start.column += 1;\n        end.column -= 1;\n\n        for (var i = 0; i < foldLines.length; i++) {\n            var cmp = foldLines[i].range.compareRange(range);\n            if (cmp == 2) {\n                // Range is before foldLine. No intersection. This means,\n                // there might be other foldLines that intersect.\n                continue;\n            }\n            else if (cmp == -2) {\n                // Range is after foldLine. There can't be any other foldLines then,\n                // so let's give up.\n                break;\n            }\n\n            var folds = foldLines[i].folds;\n            for (var j = 0; j < folds.length; j++) {\n                var fold = folds[j];\n                cmp = fold.range.compareRange(range);\n                if (cmp == -2) {\n                    break;\n                } else if (cmp == 2) {\n                    continue;\n                } else\n                // WTF-state: Can happen due to -1/+1 to start/end column.\n                if (cmp == 42) {\n                    break;\n                }\n                foundFolds.push(fold);\n            }\n        }\n        start.column -= 1;\n        end.column += 1;\n\n        return foundFolds;\n    };\n\n    this.getFoldsInRangeList = function(ranges) {\n        if (Array.isArray(ranges)) {\n            var folds = [];\n            ranges.forEach(function(range) {\n                folds = folds.concat(this.getFoldsInRange(range));\n            }, this);\n        } else {\n            var folds = this.getFoldsInRange(ranges);\n        }\n        return folds;\n    };\n    \n    /*\n     * Returns all folds in the document\n     */\n    this.getAllFolds = function() {\n        var folds = [];\n        var foldLines = this.$foldData;\n        \n        for (var i = 0; i < foldLines.length; i++)\n            for (var j = 0; j < foldLines[i].folds.length; j++)\n                folds.push(foldLines[i].folds[j]);\n\n        return folds;\n    };\n\n    /*\n     * Returns the string between folds at the given position.\n     * E.g.\n     *  foo<fold>b|ar<fold>wolrd -> \"bar\"\n     *  foo<fold>bar<fold>wol|rd -> \"world\"\n     *  foo<fold>bar<fo|ld>wolrd -> <null>\n     *\n     * where | means the position of row/column\n     *\n     * The trim option determs if the return string should be trimed according\n     * to the \"side\" passed with the trim value:\n     *\n     * E.g.\n     *  foo<fold>b|ar<fold>wolrd -trim=-1> \"b\"\n     *  foo<fold>bar<fold>wol|rd -trim=+1> \"rld\"\n     *  fo|o<fold>bar<fold>wolrd -trim=00> \"foo\"\n     */\n    this.getFoldStringAt = function(row, column, trim, foldLine) {\n        foldLine = foldLine || this.getFoldLine(row);\n        if (!foldLine)\n            return null;\n\n        var lastFold = {\n            end: { column: 0 }\n        };\n        // TODO: Refactor to use getNextFoldTo function.\n        var str, fold;\n        for (var i = 0; i < foldLine.folds.length; i++) {\n            fold = foldLine.folds[i];\n            var cmp = fold.range.compareEnd(row, column);\n            if (cmp == -1) {\n                str = this\n                    .getLine(fold.start.row)\n                    .substring(lastFold.end.column, fold.start.column);\n                break;\n            }\n            else if (cmp === 0) {\n                return null;\n            }\n            lastFold = fold;\n        }\n        if (!str)\n            str = this.getLine(fold.start.row).substring(lastFold.end.column);\n\n        if (trim == -1)\n            return str.substring(0, column - lastFold.end.column);\n        else if (trim == 1)\n            return str.substring(column - lastFold.end.column);\n        else\n            return str;\n    };\n\n    this.getFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.start.row <= docRow && foldLine.end.row >= docRow) {\n                return foldLine;\n            } else if (foldLine.end.row > docRow) {\n                return null;\n            }\n        }\n        return null;\n    };\n\n    // returns the fold which starts after or contains docRow\n    this.getNextFoldLine = function(docRow, startFoldLine) {\n        var foldData = this.$foldData;\n        var i = 0;\n        if (startFoldLine)\n            i = foldData.indexOf(startFoldLine);\n        if (i == -1)\n            i = 0;\n        for (i; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (foldLine.end.row >= docRow) {\n                return foldLine;\n            }\n        }\n        return null;\n    };\n\n    this.getFoldedRowCount = function(first, last) {\n        var foldData = this.$foldData, rowCount = last-first+1;\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i],\n                end = foldLine.end.row,\n                start = foldLine.start.row;\n            if (end >= last) {\n                if (start < last) {\n                    if (start >= first)\n                        rowCount -= last-start;\n                    else\n                        rowCount = 0; // in one fold\n                }\n                break;\n            } else if (end >= first){\n                if (start >= first) // fold inside range\n                    rowCount -=  end-start;\n                else\n                    rowCount -=  end-first+1;\n            }\n        }\n        return rowCount;\n    };\n\n    this.$addFoldLine = function(foldLine) {\n        this.$foldData.push(foldLine);\n        this.$foldData.sort(function(a, b) {\n            return a.start.row - b.start.row;\n        });\n        return foldLine;\n    };\n\n    /**\n     * Adds a new fold.\n     *\n     * @returns\n     *      The new created Fold object or an existing fold object in case the\n     *      passed in range fits an existing fold exactly.\n     */\n    this.addFold = function(placeholder, range) {\n        var foldData = this.$foldData;\n        var added = false;\n        var fold;\n        \n        if (placeholder instanceof Fold)\n            fold = placeholder;\n        else {\n            fold = new Fold(range, placeholder);\n            fold.collapseChildren = range.collapseChildren;\n        }\n        this.$clipRangeToDocument(fold.range);\n\n        var startRow = fold.start.row;\n        var startColumn = fold.start.column;\n        var endRow = fold.end.row;\n        var endColumn = fold.end.column;\n\n        var startFold = this.getFoldAt(startRow, startColumn, 1);\n        var endFold = this.getFoldAt(endRow, endColumn, -1);\n        if (startFold && endFold == startFold)\n            return startFold.addSubFold(fold);\n\n        if (startFold && !startFold.range.isStart(startRow, startColumn))\n            this.removeFold(startFold);\n        \n        if (endFold && !endFold.range.isEnd(endRow, endColumn))\n            this.removeFold(endFold);\n        \n        // Check if there are folds in the range we create the new fold for.\n        var folds = this.getFoldsInRange(fold.range);\n        if (folds.length > 0) {\n            // Remove the folds from fold data.\n            this.removeFolds(folds);\n            // Add the removed folds as subfolds on the new fold.\n            if (!fold.collapseChildren) {\n                folds.forEach(function(subFold) {\n                    fold.addSubFold(subFold);\n                });\n            }\n        }\n\n        for (var i = 0; i < foldData.length; i++) {\n            var foldLine = foldData[i];\n            if (endRow == foldLine.start.row) {\n                foldLine.addFold(fold);\n                added = true;\n                break;\n            } else if (startRow == foldLine.end.row) {\n                foldLine.addFold(fold);\n                added = true;\n                if (!fold.sameRow) {\n                    // Check if we might have to merge two FoldLines.\n                    var foldLineNext = foldData[i + 1];\n                    if (foldLineNext && foldLineNext.start.row == endRow) {\n                        // We need to merge!\n                        foldLine.merge(foldLineNext);\n                        break;\n                    }\n                }\n                break;\n            } else if (endRow <= foldLine.start.row) {\n                break;\n            }\n        }\n\n        if (!added)\n            foldLine = this.$addFoldLine(new FoldLine(this.$foldData, fold));\n\n        if (this.$useWrapMode)\n            this.$updateWrapData(foldLine.start.row, foldLine.start.row);\n        else\n            this.$updateRowLengthCache(foldLine.start.row, foldLine.start.row);\n\n        // Notify that fold data has changed.\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"add\" });\n\n        return fold;\n    };\n\n    this.addFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.addFold(fold);\n        }, this);\n    };\n\n    this.removeFold = function(fold) {\n        var foldLine = fold.foldLine;\n        var startRow = foldLine.start.row;\n        var endRow = foldLine.end.row;\n\n        var foldLines = this.$foldData;\n        var folds = foldLine.folds;\n        // Simple case where there is only one fold in the FoldLine such that\n        // the entire fold line can get removed directly.\n        if (folds.length == 1) {\n            foldLines.splice(foldLines.indexOf(foldLine), 1);\n        } else\n        // If the fold is the last fold of the foldLine, just remove it.\n        if (foldLine.range.isEnd(fold.end.row, fold.end.column)) {\n            folds.pop();\n            foldLine.end.row = folds[folds.length - 1].end.row;\n            foldLine.end.column = folds[folds.length - 1].end.column;\n        } else\n        // If the fold is the first fold of the foldLine, just remove it.\n        if (foldLine.range.isStart(fold.start.row, fold.start.column)) {\n            folds.shift();\n            foldLine.start.row = folds[0].start.row;\n            foldLine.start.column = folds[0].start.column;\n        } else\n        // We know there are more then 2 folds and the fold is not at the edge.\n        // This means, the fold is somewhere in between.\n        //\n        // If the fold is in one row, we just can remove it.\n        if (fold.sameRow) {\n            folds.splice(folds.indexOf(fold), 1);\n        } else\n        // The fold goes over more then one row. This means remvoing this fold\n        // will cause the fold line to get splitted up. newFoldLine is the second part\n        {\n            var newFoldLine = foldLine.split(fold.start.row, fold.start.column);\n            folds = newFoldLine.folds;\n            folds.shift();\n            newFoldLine.start.row = folds[0].start.row;\n            newFoldLine.start.column = folds[0].start.column;\n        }\n\n        if (!this.$updating) {\n            if (this.$useWrapMode)\n                this.$updateWrapData(startRow, endRow);\n            else\n                this.$updateRowLengthCache(startRow, endRow);\n        }\n        \n        // Notify that fold data has changed.\n        this.$modified = true;\n        this._signal(\"changeFold\", { data: fold, action: \"remove\" });\n    };\n\n    this.removeFolds = function(folds) {\n        // We need to clone the folds array passed in as it might be the folds\n        // array of a fold line and as we call this.removeFold(fold), folds\n        // are removed from folds and changes the current index.\n        var cloneFolds = [];\n        for (var i = 0; i < folds.length; i++) {\n            cloneFolds.push(folds[i]);\n        }\n\n        cloneFolds.forEach(function(fold) {\n            this.removeFold(fold);\n        }, this);\n        this.$modified = true;\n    };\n\n    this.expandFold = function(fold) {\n        this.removeFold(fold);\n        fold.subFolds.forEach(function(subFold) {\n            fold.restoreRange(subFold);\n            this.addFold(subFold);\n        }, this);\n        if (fold.collapseChildren > 0) {\n            this.foldAll(fold.start.row+1, fold.end.row, fold.collapseChildren-1);\n        }\n        fold.subFolds = [];\n    };\n\n    this.expandFolds = function(folds) {\n        folds.forEach(function(fold) {\n            this.expandFold(fold);\n        }, this);\n    };\n\n    this.unfold = function(location, expandInner) {\n        var range, folds;\n        if (location == null) {\n            range = new Range(0, 0, this.getLength(), 0);\n            if (expandInner == null) expandInner = true;\n        } else if (typeof location == \"number\") {\n            range = new Range(location, 0, location, this.getLine(location).length);\n        } else if (\"row\" in location) {\n            range = Range.fromPoints(location, location);\n        } else if (Array.isArray(location)) {\n            folds = [];\n            location.forEach(function(range) {\n                folds = folds.concat(this.unfold(range));\n            }, this);\n            return folds;\n        } else {\n            range = location;\n        }\n        \n        folds = this.getFoldsInRangeList(range);\n        var outermostFolds = folds;\n        // if range itself is in a fold, expand that fold instead of removing, \n        // to not accidentally remove sibling folds\n        while (\n            folds.length == 1\n            && Range.comparePoints(folds[0].start, range.start) < 0 \n            && Range.comparePoints(folds[0].end, range.end) > 0\n        ) {\n            this.expandFolds(folds);\n            folds = this.getFoldsInRangeList(range);\n        }\n        \n        if (expandInner != false) {\n            this.removeFolds(folds);\n        } else {\n            this.expandFolds(folds);\n        }\n        if (outermostFolds.length)\n            return outermostFolds;\n    };\n\n    /*\n     * Checks if a given documentRow is folded. This is true if there are some\n     * folded parts such that some parts of the line is still visible.\n     **/\n    this.isRowFolded = function(docRow, startFoldRow) {\n        return !!this.getFoldLine(docRow, startFoldRow);\n    };\n\n    this.getRowFoldEnd = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.end.row : docRow;\n    };\n\n    this.getRowFoldStart = function(docRow, startFoldRow) {\n        var foldLine = this.getFoldLine(docRow, startFoldRow);\n        return foldLine ? foldLine.start.row : docRow;\n    };\n\n    this.getFoldDisplayLine = function(foldLine, endRow, endColumn, startRow, startColumn) {\n        if (startRow == null)\n            startRow = foldLine.start.row;\n        if (startColumn == null)\n            startColumn = 0;\n        if (endRow == null)\n            endRow = foldLine.end.row;\n        if (endColumn == null)\n            endColumn = this.getLine(endRow).length;\n        \n\n        // Build the textline using the FoldLine walker.\n        var doc = this.doc;\n        var textLine = \"\";\n\n        foldLine.walk(function(placeholder, row, column, lastColumn) {\n            if (row < startRow)\n                return;\n            if (row == startRow) {\n                if (column < startColumn)\n                    return;\n                lastColumn = Math.max(startColumn, lastColumn);\n            }\n\n            if (placeholder != null) {\n                textLine += placeholder;\n            } else {\n                textLine += doc.getLine(row).substring(lastColumn, column);\n            }\n        }, endRow, endColumn);\n        return textLine;\n    };\n\n    this.getDisplayLine = function(row, endColumn, startRow, startColumn) {\n        var foldLine = this.getFoldLine(row);\n\n        if (!foldLine) {\n            var line;\n            line = this.doc.getLine(row);\n            return line.substring(startColumn || 0, endColumn || line.length);\n        } else {\n            return this.getFoldDisplayLine(\n                foldLine, row, endColumn, startRow, startColumn);\n        }\n    };\n\n    this.$cloneFoldData = function() {\n        var fd = [];\n        fd = this.$foldData.map(function(foldLine) {\n            var folds = foldLine.folds.map(function(fold) {\n                return fold.clone();\n            });\n            return new FoldLine(fd, folds);\n        });\n\n        return fd;\n    };\n\n    this.toggleFold = function(tryToUnfold) {\n        var selection = this.selection;\n        var range = selection.getRange();\n        var fold;\n        var bracketPos;\n\n        if (range.isEmpty()) {\n            var cursor = range.start;\n            fold = this.getFoldAt(cursor.row, cursor.column);\n\n            if (fold) {\n                this.expandFold(fold);\n                return;\n            } else if (bracketPos = this.findMatchingBracket(cursor)) {\n                if (range.comparePoint(bracketPos) == 1) {\n                    range.end = bracketPos;\n                } else {\n                    range.start = bracketPos;\n                    range.start.column++;\n                    range.end.column--;\n                }\n            } else if (bracketPos = this.findMatchingBracket({row: cursor.row, column: cursor.column + 1})) {\n                if (range.comparePoint(bracketPos) == 1)\n                    range.end = bracketPos;\n                else\n                    range.start = bracketPos;\n\n                range.start.column++;\n            } else {\n                range = this.getCommentFoldRange(cursor.row, cursor.column) || range;\n            }\n        } else {\n            var folds = this.getFoldsInRange(range);\n            if (tryToUnfold && folds.length) {\n                this.expandFolds(folds);\n                return;\n            } else if (folds.length == 1 ) {\n                fold = folds[0];\n            }\n        }\n\n        if (!fold)\n            fold = this.getFoldAt(range.start.row, range.start.column);\n\n        if (fold && fold.range.toString() == range.toString()) {\n            this.expandFold(fold);\n            return;\n        }\n\n        var placeholder = \"...\";\n        if (!range.isMultiLine()) {\n            placeholder = this.getTextRange(range);\n            if (placeholder.length < 4)\n                return;\n            placeholder = placeholder.trim().substring(0, 2) + \"..\";\n        }\n\n        this.addFold(placeholder, range);\n    };\n\n    this.getCommentFoldRange = function(row, column, dir) {\n        var iterator = new TokenIterator(this, row, column);\n        var token = iterator.getCurrentToken();\n        var type = token && token.type;\n        if (token && /^comment|string/.test(type)) {\n            type = type.match(/comment|string/)[0];\n            if (type == \"comment\")\n                type += \"|doc-start\";\n            var re = new RegExp(type);\n            var range = new Range();\n            if (dir != 1) {\n                do {\n                    token = iterator.stepBackward();\n                } while (token && re.test(token.type) && !/^comment.end/.test(token.type));\n                token = iterator.stepForward();\n            }\n            \n            range.start.row = iterator.getCurrentTokenRow();\n            range.start.column = iterator.getCurrentTokenColumn() + (/^comment.start/.test(token.type) ? token.value.length : 2);\n\n            iterator = new TokenIterator(this, row, column);\n            \n            if (dir != -1) {\n                var lastRow = -1;\n                do {\n                    token = iterator.stepForward();\n                    if (lastRow == -1) {\n                        var state = this.getState(iterator.$row);\n                        if (!re.test(state))\n                            lastRow = iterator.$row;\n                    } else if (iterator.$row > lastRow) {\n                        break;\n                    }\n                } while (token && re.test(token.type) && !/^comment.start/.test(token.type));\n                token = iterator.stepBackward();\n            } else\n                token = iterator.getCurrentToken();\n\n            range.end.row = iterator.getCurrentTokenRow();\n            range.end.column = iterator.getCurrentTokenColumn();\n            if (!/^comment.end/.test(token.type)) {\n                range.end.column += token.value.length - 2;\n            }\n            return range;\n        }\n    };\n\n    this.foldAll = function(startRow, endRow, depth, test) {\n        if (depth == undefined)\n            depth = 100000; // JSON.stringify doesn't hanle Infinity\n        var foldWidgets = this.foldWidgets;\n        if (!foldWidgets)\n            return; // mode doesn't support folding\n        endRow = endRow || this.getLength();\n        startRow = startRow || 0;\n        for (var row = startRow; row < endRow; row++) {\n            if (foldWidgets[row] == null)\n                foldWidgets[row] = this.getFoldWidget(row);\n            if (foldWidgets[row] != \"start\")\n                continue;\n            \n            if (test && !test(row)) continue;\n\n            var range = this.getFoldWidgetRange(row);\n            if (range && range.isMultiLine()\n                && range.end.row <= endRow\n                && range.start.row >= startRow\n            ) {\n                row = range.end.row;\n                range.collapseChildren = depth;\n                // addFold can change the range\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n    \n    this.foldToLevel = function(level) {\n        this.foldAll();\n        while (level-- > 0)\n            this.unfold(null, false);\n    };\n    \n    this.foldAllComments = function() {\n        var session = this;\n        this.foldAll(null, null, null, function(row) {\n            var tokens = session.getTokens(row);\n            for (var i = 0; i < tokens.length; i++) {\n                var token = tokens[i];\n                if (token.type == \"text\" && /^\\s+$/.test(token.value))\n                    continue;\n                if (/comment/.test(token.type))\n                    return true;\n                return false;\n            }\n        });\n    };\n    \n    // structured folding\n    this.$foldStyles = {\n        \"manual\": 1,\n        \"markbegin\": 1,\n        \"markbeginend\": 1\n    };\n    this.$foldStyle = \"markbegin\";\n    this.setFoldStyle = function(style) {\n        if (!this.$foldStyles[style])\n            throw new Error(\"invalid fold style: \" + style + \"[\" + Object.keys(this.$foldStyles).join(\", \") + \"]\");\n        \n        if (this.$foldStyle == style)\n            return;\n\n        this.$foldStyle = style;\n        \n        if (style == \"manual\")\n            this.unfold();\n        \n        // reset folding\n        var mode = this.$foldMode;\n        this.$setFolding(null);\n        this.$setFolding(mode);\n    };\n\n    this.$setFolding = function(foldMode) {\n        if (this.$foldMode == foldMode)\n            return;\n            \n        this.$foldMode = foldMode;\n        \n        this.off('change', this.$updateFoldWidgets);\n        this.off('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n        this._signal(\"changeAnnotation\");\n        \n        if (!foldMode || this.$foldStyle == \"manual\") {\n            this.foldWidgets = null;\n            return;\n        }\n        \n        this.foldWidgets = [];\n        this.getFoldWidget = foldMode.getFoldWidget.bind(foldMode, this, this.$foldStyle);\n        this.getFoldWidgetRange = foldMode.getFoldWidgetRange.bind(foldMode, this, this.$foldStyle);\n        \n        this.$updateFoldWidgets = this.updateFoldWidgets.bind(this);\n        this.$tokenizerUpdateFoldWidgets = this.tokenizerUpdateFoldWidgets.bind(this);\n        this.on('change', this.$updateFoldWidgets);\n        this.on('tokenizerUpdate', this.$tokenizerUpdateFoldWidgets);\n    };\n\n    this.getParentFoldRangeData = function (row, ignoreCurrent) {\n        var fw = this.foldWidgets;\n        if (!fw || (ignoreCurrent && fw[row]))\n            return {};\n\n        var i = row - 1, firstRange;\n        while (i >= 0) {\n            var c = fw[i];\n            if (c == null)\n                c = fw[i] = this.getFoldWidget(i);\n\n            if (c == \"start\") {\n                var range = this.getFoldWidgetRange(i);\n                if (!firstRange)\n                    firstRange = range;\n                if (range && range.end.row >= row)\n                    break;\n            }\n            i--;\n        }\n\n        return {\n            range: i !== -1 && range,\n            firstRange: firstRange\n        };\n    };\n\n    this.onFoldWidgetClick = function(row, e) {\n        e = e.domEvent;\n        var options = {\n            children: e.shiftKey,\n            all: e.ctrlKey || e.metaKey,\n            siblings: e.altKey\n        };\n        \n        var range = this.$toggleFoldWidget(row, options);\n        if (!range) {\n            var el = (e.target || e.srcElement);\n            if (el && /ace_fold-widget/.test(el.className))\n                el.className += \" ace_invalid\";\n        }\n    };\n    \n    this.$toggleFoldWidget = function(row, options) {\n        if (!this.getFoldWidget)\n            return;\n        var type = this.getFoldWidget(row);\n        var line = this.getLine(row);\n\n        var dir = type === \"end\" ? -1 : 1;\n        var fold = this.getFoldAt(row, dir === -1 ? 0 : line.length, dir);\n\n        if (fold) {\n            if (options.children || options.all)\n                this.removeFold(fold);\n            else\n                this.expandFold(fold);\n            return fold;\n        }\n\n        var range = this.getFoldWidgetRange(row, true);\n        // sometimes singleline folds can be missed by the code above\n        if (range && !range.isMultiLine()) {\n            fold = this.getFoldAt(range.start.row, range.start.column, 1);\n            if (fold && range.isEqual(fold.range)) {\n                this.removeFold(fold);\n                return fold;\n            }\n        }\n        \n        if (options.siblings) {\n            var data = this.getParentFoldRangeData(row);\n            if (data.range) {\n                var startRow = data.range.start.row + 1;\n                var endRow = data.range.end.row;\n            }\n            this.foldAll(startRow, endRow, options.all ? 10000 : 0);\n        } else if (options.children) {\n            endRow = range ? range.end.row : this.getLength();\n            this.foldAll(row + 1, endRow, options.all ? 10000 : 0);\n        } else if (range) {\n            if (options.all) \n                range.collapseChildren = 10000;\n            this.addFold(\"...\", range);\n        }\n        \n        return range;\n    };\n    \n    \n    \n    this.toggleFoldWidget = function(toggleParent) {\n        var row = this.selection.getCursor().row;\n        row = this.getRowFoldStart(row);\n        var range = this.$toggleFoldWidget(row, {});\n        \n        if (range)\n            return;\n        // handle toggleParent\n        var data = this.getParentFoldRangeData(row, true);\n        range = data.range || data.firstRange;\n        \n        if (range) {\n            row = range.start.row;\n            var fold = this.getFoldAt(row, this.getLine(row).length, 1);\n\n            if (fold) {\n                this.removeFold(fold);\n            } else {\n                this.addFold(\"...\", range);\n            }\n        }\n    };\n\n    this.updateFoldWidgets = function(delta) {\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n\n        if (len === 0) {\n            this.foldWidgets[firstRow] = null;\n        } else if (delta.action == 'remove') {\n            this.foldWidgets.splice(firstRow, len + 1, null);\n        } else {\n            var args = Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.foldWidgets.splice.apply(this.foldWidgets, args);\n        }\n    };\n    this.tokenizerUpdateFoldWidgets = function(e) {\n        var rows = e.data;\n        if (rows.first != rows.last) {\n            if (this.foldWidgets.length > rows.first)\n                this.foldWidgets.splice(rows.first, this.foldWidgets.length);\n        }\n    };\n}\n\nexports.Folding = Folding;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar lang = require(\"./lib/lang\");\nvar useragent = require(\"./lib/useragent\");\nvar TextInput = require(\"./keyboard/textinput\").TextInput;\nvar MouseHandler = require(\"./mouse/mouse_handler\").MouseHandler;\nvar FoldHandler = require(\"./mouse/fold_handler\").FoldHandler;\nvar KeyBinding = require(\"./keyboard/keybinding\").KeyBinding;\nvar EditSession = require(\"./edit_session\").EditSession;\nvar Search = require(\"./search\").Search;\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar CommandManager = require(\"./commands/command_manager\").CommandManager;\nvar defaultCommands = require(\"./commands/default_commands\").commands;\nvar config = require(\"./config\");\nvar TokenIterator = require(\"./token_iterator\").TokenIterator;\n\nvar clipboard = require(\"./clipboard\");\n\n/**\n * The main entry point into the Ace functionality.\n *\n * The `Editor` manages the [[EditSession]] (which manages [[Document]]s), as well as the [[VirtualRenderer]], which draws everything to the screen.\n *\n * Event sessions dealing with the mouse and keyboard are bubbled up from `Document` to the `Editor`, which decides what to do with them.\n * @class Editor\n **/\n\n/**\n * Creates a new `Editor` object.\n *\n * @param {VirtualRenderer} renderer Associated `VirtualRenderer` that draws everything\n * @param {EditSession} session The `EditSession` to refer to\n *\n *\n * @constructor\n **/\nvar Editor = function(renderer, session, options) {\n    this.$toDestroy = [];\n    var container = renderer.getContainerElement();\n    this.container = container;\n    this.renderer = renderer;\n    this.id = \"editor\" + (++Editor.$uid);\n\n    this.commands = new CommandManager(useragent.isMac ? \"mac\" : \"win\", defaultCommands);\n    if (typeof document == \"object\") {\n        this.textInput = new TextInput(renderer.getTextAreaContainer(), this);\n        this.renderer.textarea = this.textInput.getElement();\n        // TODO detect touch event support\n        this.$mouseHandler = new MouseHandler(this);\n        new FoldHandler(this);\n    }\n\n    this.keyBinding = new KeyBinding(this);\n\n    this.$search = new Search().set({\n        wrap: true\n    });\n\n    this.$historyTracker = this.$historyTracker.bind(this);\n    this.commands.on(\"exec\", this.$historyTracker);\n\n    this.$initOperationListeners();\n    \n    this._$emitInputEvent = lang.delayedCall(function() {\n        this._signal(\"input\", {});\n        if (this.session && !this.session.destroyed)\n            this.session.bgTokenizer.scheduleStart();\n    }.bind(this));\n    \n    this.on(\"change\", function(_, _self) {\n        _self._$emitInputEvent.schedule(31);\n    });\n\n    this.setSession(session || options && options.session || new EditSession(\"\"));\n    config.resetOptions(this);\n    if (options)\n        this.setOptions(options);\n    config._signal(\"editor\", this);\n};\n\nEditor.$uid = 0;\n\n(function(){\n\n    oop.implement(this, EventEmitter);\n\n    this.$initOperationListeners = function() {\n        this.commands.on(\"exec\", this.startOperation.bind(this), true);\n        this.commands.on(\"afterExec\", this.endOperation.bind(this), true);\n\n        this.$opResetTimer = lang.delayedCall(this.endOperation.bind(this, true));\n        \n        // todo: add before change events?\n        this.on(\"change\", function() {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.docChanged = true;\n        }.bind(this), true);\n        \n        this.on(\"changeSelection\", function() {\n            if (!this.curOp) {\n                this.startOperation();\n                this.curOp.selectionBefore = this.$lastSel;\n            }\n            this.curOp.selectionChanged = true;\n        }.bind(this), true);\n    };\n\n    this.curOp = null;\n    this.prevOp = {};\n    this.startOperation = function(commandEvent) {\n        if (this.curOp) {\n            if (!commandEvent || this.curOp.command)\n                return;\n            this.prevOp = this.curOp;\n        }\n        if (!commandEvent) {\n            this.previousCommand = null;\n            commandEvent = {};\n        }\n\n        this.$opResetTimer.schedule();\n        this.curOp = this.session.curOp = {\n            command: commandEvent.command || {},\n            args: commandEvent.args,\n            scrollTop: this.renderer.scrollTop\n        };\n        this.curOp.selectionBefore = this.selection.toJSON();\n    };\n\n    this.endOperation = function(e) {\n        if (this.curOp && this.session) {\n            if (e && e.returnValue === false || !this.session)\n                return (this.curOp = null);\n            if (e == true && this.curOp.command && this.curOp.command.name == \"mouse\")\n                return;\n            this._signal(\"beforeEndOperation\");\n            if (!this.curOp) return;\n            var command = this.curOp.command;\n            var scrollIntoView = command && command.scrollIntoView;\n            if (scrollIntoView) {\n                switch (scrollIntoView) {\n                    case \"center-animate\":\n                        scrollIntoView = \"animate\";\n                        /* fall through */\n                    case \"center\":\n                        this.renderer.scrollCursorIntoView(null, 0.5);\n                        break;\n                    case \"animate\":\n                    case \"cursor\":\n                        this.renderer.scrollCursorIntoView();\n                        break;\n                    case \"selectionPart\":\n                        var range = this.selection.getRange();\n                        var config = this.renderer.layerConfig;\n                        if (range.start.row >= config.lastRow || range.end.row <= config.firstRow) {\n                            this.renderer.scrollSelectionIntoView(this.selection.anchor, this.selection.lead);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                if (scrollIntoView == \"animate\")\n                    this.renderer.animateScrolling(this.curOp.scrollTop);\n            }\n            var sel = this.selection.toJSON();\n            this.curOp.selectionAfter = sel;\n            this.$lastSel = this.selection.toJSON();\n            \n            // console.log(this.$lastSel+\"  endOP\")\n            this.session.getUndoManager().addSelection(sel);\n            this.prevOp = this.curOp;\n            this.curOp = null;\n        }\n    };\n\n    // TODO use property on commands instead of this\n    this.$mergeableCommands = [\"backspace\", \"del\", \"insertstring\"];\n    this.$historyTracker = function(e) {\n        if (!this.$mergeUndoDeltas)\n            return;\n\n        var prev = this.prevOp;\n        var mergeableCommands = this.$mergeableCommands;\n        // previous command was the same\n        var shouldMerge = prev.command && (e.command.name == prev.command.name);\n        if (e.command.name == \"insertstring\") {\n            var text = e.args;\n            if (this.mergeNextCommand === undefined)\n                this.mergeNextCommand = true;\n\n            shouldMerge = shouldMerge\n                && this.mergeNextCommand // previous command allows to coalesce with\n                && (!/\\s/.test(text) || /\\s/.test(prev.args)); // previous insertion was of same type\n\n            this.mergeNextCommand = true;\n        } else {\n            shouldMerge = shouldMerge\n                && mergeableCommands.indexOf(e.command.name) !== -1; // the command is mergeable\n        }\n\n        if (\n            this.$mergeUndoDeltas != \"always\"\n            && Date.now() - this.sequenceStartTime > 2000\n        ) {\n            shouldMerge = false; // the sequence is too long\n        }\n\n        if (shouldMerge)\n            this.session.mergeUndoDeltas = true;\n        else if (mergeableCommands.indexOf(e.command.name) !== -1)\n            this.sequenceStartTime = Date.now();\n    };\n\n    /**\n     * Sets a new key handler, such as \"vim\" or \"windows\".\n     * @param {String} keyboardHandler The new key handler\n     *\n     **/\n    this.setKeyboardHandler = function(keyboardHandler, cb) {\n        if (keyboardHandler && typeof keyboardHandler === \"string\" && keyboardHandler != \"ace\") {\n            this.$keybindingId = keyboardHandler;\n            var _self = this;\n            config.loadModule([\"keybinding\", keyboardHandler], function(module) {\n                if (_self.$keybindingId == keyboardHandler)\n                    _self.keyBinding.setKeyboardHandler(module && module.handler);\n                cb && cb();\n            });\n        } else {\n            this.$keybindingId = null;\n            this.keyBinding.setKeyboardHandler(keyboardHandler);\n            cb && cb();\n        }\n    };\n\n    /**\n     * Returns the keyboard handler, such as \"vim\" or \"windows\".\n     *\n     * @returns {String}\n     *\n     **/\n    this.getKeyboardHandler = function() {\n        return this.keyBinding.getKeyboardHandler();\n    };\n\n\n    /**\n     * Emitted whenever the [[EditSession]] changes.\n     * @event changeSession\n     * @param {Object} e An object with two properties, `oldSession` and `session`, that represent the old and new [[EditSession]]s.\n     *\n     **/\n    /**\n     * Sets a new editsession to use. This method also emits the `'changeSession'` event.\n     * @param {EditSession} session The new session to use\n     *\n     **/\n    this.setSession = function(session) {\n        if (this.session == session)\n            return;\n        \n        // make sure operationEnd events are not emitted to wrong session\n        if (this.curOp) this.endOperation();\n        this.curOp = {};\n\n        var oldSession = this.session;\n        if (oldSession) {\n            this.session.off(\"change\", this.$onDocumentChange);\n            this.session.off(\"changeMode\", this.$onChangeMode);\n            this.session.off(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n            this.session.off(\"changeTabSize\", this.$onChangeTabSize);\n            this.session.off(\"changeWrapLimit\", this.$onChangeWrapLimit);\n            this.session.off(\"changeWrapMode\", this.$onChangeWrapMode);\n            this.session.off(\"changeFold\", this.$onChangeFold);\n            this.session.off(\"changeFrontMarker\", this.$onChangeFrontMarker);\n            this.session.off(\"changeBackMarker\", this.$onChangeBackMarker);\n            this.session.off(\"changeBreakpoint\", this.$onChangeBreakpoint);\n            this.session.off(\"changeAnnotation\", this.$onChangeAnnotation);\n            this.session.off(\"changeOverwrite\", this.$onCursorChange);\n            this.session.off(\"changeScrollTop\", this.$onScrollTopChange);\n            this.session.off(\"changeScrollLeft\", this.$onScrollLeftChange);\n\n            var selection = this.session.getSelection();\n            selection.off(\"changeCursor\", this.$onCursorChange);\n            selection.off(\"changeSelection\", this.$onSelectionChange);\n        }\n\n        this.session = session;\n        if (session) {\n            this.$onDocumentChange = this.onDocumentChange.bind(this);\n            session.on(\"change\", this.$onDocumentChange);\n            this.renderer.setSession(session);\n    \n            this.$onChangeMode = this.onChangeMode.bind(this);\n            session.on(\"changeMode\", this.$onChangeMode);\n    \n            this.$onTokenizerUpdate = this.onTokenizerUpdate.bind(this);\n            session.on(\"tokenizerUpdate\", this.$onTokenizerUpdate);\n    \n            this.$onChangeTabSize = this.renderer.onChangeTabSize.bind(this.renderer);\n            session.on(\"changeTabSize\", this.$onChangeTabSize);\n    \n            this.$onChangeWrapLimit = this.onChangeWrapLimit.bind(this);\n            session.on(\"changeWrapLimit\", this.$onChangeWrapLimit);\n    \n            this.$onChangeWrapMode = this.onChangeWrapMode.bind(this);\n            session.on(\"changeWrapMode\", this.$onChangeWrapMode);\n    \n            this.$onChangeFold = this.onChangeFold.bind(this);\n            session.on(\"changeFold\", this.$onChangeFold);\n    \n            this.$onChangeFrontMarker = this.onChangeFrontMarker.bind(this);\n            this.session.on(\"changeFrontMarker\", this.$onChangeFrontMarker);\n    \n            this.$onChangeBackMarker = this.onChangeBackMarker.bind(this);\n            this.session.on(\"changeBackMarker\", this.$onChangeBackMarker);\n    \n            this.$onChangeBreakpoint = this.onChangeBreakpoint.bind(this);\n            this.session.on(\"changeBreakpoint\", this.$onChangeBreakpoint);\n    \n            this.$onChangeAnnotation = this.onChangeAnnotation.bind(this);\n            this.session.on(\"changeAnnotation\", this.$onChangeAnnotation);\n    \n            this.$onCursorChange = this.onCursorChange.bind(this);\n            this.session.on(\"changeOverwrite\", this.$onCursorChange);\n    \n            this.$onScrollTopChange = this.onScrollTopChange.bind(this);\n            this.session.on(\"changeScrollTop\", this.$onScrollTopChange);\n    \n            this.$onScrollLeftChange = this.onScrollLeftChange.bind(this);\n            this.session.on(\"changeScrollLeft\", this.$onScrollLeftChange);\n    \n            this.selection = session.getSelection();\n            this.selection.on(\"changeCursor\", this.$onCursorChange);\n    \n            this.$onSelectionChange = this.onSelectionChange.bind(this);\n            this.selection.on(\"changeSelection\", this.$onSelectionChange);\n    \n            this.onChangeMode();\n    \n            this.onCursorChange();\n    \n            this.onScrollTopChange();\n            this.onScrollLeftChange();\n            this.onSelectionChange();\n            this.onChangeFrontMarker();\n            this.onChangeBackMarker();\n            this.onChangeBreakpoint();\n            this.onChangeAnnotation();\n            this.session.getUseWrapMode() && this.renderer.adjustWrapLimit();\n            this.renderer.updateFull();\n        } else {\n            this.selection = null;\n            this.renderer.setSession(session);\n        }\n\n        this._signal(\"changeSession\", {\n            session: session,\n            oldSession: oldSession\n        });\n        \n        this.curOp = null;\n        \n        oldSession && oldSession._signal(\"changeEditor\", {oldEditor: this});\n        session && session._signal(\"changeEditor\", {editor: this});\n        \n        if (session && !session.destroyed)\n            session.bgTokenizer.scheduleStart();\n    };\n\n    /**\n     * Returns the current session being used.\n     * @returns {EditSession}\n     **/\n    this.getSession = function() {\n        return this.session;\n    };\n\n    /**\n     * Sets the current document to `val`.\n     * @param {String} val The new value to set for the document\n     * @param {Number} cursorPos Where to set the new value. `undefined` or 0 is selectAll, -1 is at the document start, and 1 is at the end\n     *\n     * @returns {String} The current document value\n     * @related Document.setValue\n     **/\n    this.setValue = function(val, cursorPos) {\n        this.session.doc.setValue(val);\n\n        if (!cursorPos)\n            this.selectAll();\n        else if (cursorPos == 1)\n            this.navigateFileEnd();\n        else if (cursorPos == -1)\n            this.navigateFileStart();\n\n        return val;\n    };\n\n    /**\n     * Returns the current session's content.\n     *\n     * @returns {String}\n     * @related EditSession.getValue\n     **/\n    this.getValue = function() {\n        return this.session.getValue();\n    };\n\n    /**\n     *\n     * Returns the currently highlighted selection.\n     * @returns {Selection} The selection object\n     **/\n    this.getSelection = function() {\n        return this.selection;\n    };\n\n    /**\n     * {:VirtualRenderer.onResize}\n     * @param {Boolean} force If `true`, recomputes the size, even if the height and width haven't changed\n     *\n     *\n     * @related VirtualRenderer.onResize\n     **/\n    this.resize = function(force) {\n        this.renderer.onResize(force);\n    };\n\n    /**\n     * {:VirtualRenderer.setTheme}\n     * @param {String} theme The path to a theme\n     * @param {Function} cb optional callback called when theme is loaded\n     **/\n    this.setTheme = function(theme, cb) {\n        this.renderer.setTheme(theme, cb);\n    };\n\n    /**\n     * {:VirtualRenderer.getTheme}\n     *\n     * @returns {String} The set theme\n     * @related VirtualRenderer.getTheme\n     **/\n    this.getTheme = function() {\n        return this.renderer.getTheme();\n    };\n\n    /**\n     * {:VirtualRenderer.setStyle}\n     * @param {String} style A class name\n     *\n     *\n     * @related VirtualRenderer.setStyle\n     **/\n    this.setStyle = function(style) {\n        this.renderer.setStyle(style);\n    };\n\n    /**\n     * {:VirtualRenderer.unsetStyle}\n     * @related VirtualRenderer.unsetStyle\n     **/\n    this.unsetStyle = function(style) {\n        this.renderer.unsetStyle(style);\n    };\n\n    /**\n     * Gets the current font size of the editor text.\n     */\n    this.getFontSize = function () {\n        return this.getOption(\"fontSize\") ||\n           dom.computedStyle(this.container).fontSize;\n    };\n\n    /**\n     * Set a new font size (in pixels) for the editor text.\n     * @param {String} size A font size ( _e.g._ \"12px\")\n     *\n     *\n     **/\n    this.setFontSize = function(size) {\n        this.setOption(\"fontSize\", size);\n    };\n\n    this.$highlightBrackets = function() {\n        if (this.$highlightPending) {\n            return;\n        }\n\n        // perform highlight async to not block the browser during navigation\n        var self = this;\n        this.$highlightPending = true;\n        setTimeout(function () {\n            self.$highlightPending = false;\n            var session = self.session;\n            if (!session || session.destroyed) return;\n            if (session.$bracketHighlight) {\n                session.$bracketHighlight.markerIds.forEach(function(id) {\n                    session.removeMarker(id);\n                });\n                session.$bracketHighlight = null;\n            }\n            var pos = self.getCursorPosition();\n            var handler = self.getKeyboardHandler();\n            var isBackwards = handler && handler.$getDirectionForHighlight && handler.$getDirectionForHighlight(self);\n            var ranges = session.getMatchingBracketRanges(pos, isBackwards);\n\n            if (!ranges) {\n                var iterator = new TokenIterator(session, pos.row, pos.column);\n                var token = iterator.getCurrentToken();\n\n                if (token && /\\b(?:tag-open|tag-name)/.test(token.type)) {\n                    var tagNamesRanges = session.getMatchingTags(pos);\n                    if (tagNamesRanges) ranges = [tagNamesRanges.openTagName, tagNamesRanges.closeTagName];\n                }\n            }\n            if (!ranges && session.$mode.getMatching)\n                ranges = session.$mode.getMatching(self.session);\n            if (!ranges) {\n                if (self.getHighlightIndentGuides()) self.renderer.$textLayer.$highlightIndentGuide();\n                return;\n            }\n\n            var markerType = \"ace_bracket\";\n            if (!Array.isArray(ranges)) {\n                ranges = [ranges];\n            } else if (ranges.length == 1) {\n                markerType = \"ace_error_bracket\";\n            }\n\n            // show adjacent ranges as one\n            if (ranges.length == 2) {\n                if (Range.comparePoints(ranges[0].end, ranges[1].start) == 0)\n                    ranges = [Range.fromPoints(ranges[0].start, ranges[1].end)];\n                else if (Range.comparePoints(ranges[0].start, ranges[1].end) == 0)\n                    ranges = [Range.fromPoints(ranges[1].start, ranges[0].end)];\n            }\n\n            session.$bracketHighlight = {\n                ranges: ranges,\n                markerIds: ranges.map(function(range) {\n                    return session.addMarker(range, markerType, \"text\");\n                })\n            };\n            if (self.getHighlightIndentGuides()) self.renderer.$textLayer.$highlightIndentGuide();\n        }, 50);\n    };\n\n    /**\n     *\n     * Brings the current `textInput` into focus.\n     **/\n    this.focus = function() {\n        this.textInput.focus();\n    };\n\n    /**\n     * Returns `true` if the current `textInput` is in focus.\n     * @return {Boolean}\n     **/\n    this.isFocused = function() {\n        return this.textInput.isFocused();\n    };\n\n    /**\n     *\n     * Blurs the current `textInput`.\n     **/\n    this.blur = function() {\n        this.textInput.blur();\n    };\n\n    /**\n     * Emitted once the editor comes into focus.\n     * @event focus\n     *\n     *\n     **/\n    this.onFocus = function(e) {\n        if (this.$isFocused)\n            return;\n        this.$isFocused = true;\n        this.renderer.showCursor();\n        this.renderer.visualizeFocus();\n        this._emit(\"focus\", e);\n    };\n\n    /**\n     * Emitted once the editor has been blurred.\n     * @event blur\n     *\n     *\n     **/\n    this.onBlur = function(e) {\n        if (!this.$isFocused)\n            return;\n        this.$isFocused = false;\n        this.renderer.hideCursor();\n        this.renderer.visualizeBlur();\n        this._emit(\"blur\", e);\n    };\n\n    this.$cursorChange = function() {\n        this.renderer.updateCursor();\n        this.$highlightBrackets();\n        this.$updateHighlightActiveLine();\n    };\n\n    /**\n     * Emitted whenever the document is changed.\n     * @event change\n     * @param {Object} e Contains a single property, `data`, which has the delta of changes\n     *\n     *\n     *\n     **/\n    this.onDocumentChange = function(delta) {\n        // Rerender and emit \"change\" event.\n        var wrap = this.session.$useWrapMode;\n        var lastRow = (delta.start.row == delta.end.row ? delta.end.row : Infinity);\n        this.renderer.updateLines(delta.start.row, lastRow, wrap);\n\n        this._signal(\"change\", delta);\n        \n        // Update cursor because tab characters can influence the cursor position.\n        this.$cursorChange();\n    };\n\n    this.onTokenizerUpdate = function(e) {\n        var rows = e.data;\n        this.renderer.updateLines(rows.first, rows.last);\n    };\n\n\n    this.onScrollTopChange = function() {\n        this.renderer.scrollToY(this.session.getScrollTop());\n    };\n\n    this.onScrollLeftChange = function() {\n        this.renderer.scrollToX(this.session.getScrollLeft());\n    };\n\n    /**\n     * Emitted when the selection changes.\n     *\n     **/\n    this.onCursorChange = function() {\n        this.$cursorChange();\n        this._signal(\"changeSelection\");\n    };\n\n    this.$updateHighlightActiveLine = function() {\n        var session = this.getSession();\n\n        var highlight;\n        if (this.$highlightActiveLine) {\n            if (this.$selectionStyle != \"line\" || !this.selection.isMultiLine())\n                highlight = this.getCursorPosition();\n            if (this.renderer.theme && this.renderer.theme.$selectionColorConflict && !this.selection.isEmpty())\n                highlight = false;\n            if (this.renderer.$maxLines && this.session.getLength() === 1 && !(this.renderer.$minLines > 1))\n                highlight = false;\n        }\n\n        if (session.$highlightLineMarker && !highlight) {\n            session.removeMarker(session.$highlightLineMarker.id);\n            session.$highlightLineMarker = null;\n        } else if (!session.$highlightLineMarker && highlight) {\n            var range = new Range(highlight.row, highlight.column, highlight.row, Infinity);\n            range.id = session.addMarker(range, \"ace_active-line\", \"screenLine\");\n            session.$highlightLineMarker = range;\n        } else if (highlight) {\n            session.$highlightLineMarker.start.row = highlight.row;\n            session.$highlightLineMarker.end.row = highlight.row;\n            session.$highlightLineMarker.start.column = highlight.column;\n            session._signal(\"changeBackMarker\");\n        }\n    };\n\n    this.onSelectionChange = function(e) {\n        var session = this.session;\n\n        if (session.$selectionMarker) {\n            session.removeMarker(session.$selectionMarker);\n        }\n        session.$selectionMarker = null;\n\n        if (!this.selection.isEmpty()) {\n            var range = this.selection.getRange();\n            var style = this.getSelectionStyle();\n            session.$selectionMarker = session.addMarker(range, \"ace_selection\", style);\n        } else {\n            this.$updateHighlightActiveLine();\n        }\n\n        var re = this.$highlightSelectedWord && this.$getSelectionHighLightRegexp();\n        this.session.highlight(re);\n\n        this._signal(\"changeSelection\");\n    };\n\n    this.$getSelectionHighLightRegexp = function() {\n        var session = this.session;\n\n        var selection = this.getSelectionRange();\n        if (selection.isEmpty() || selection.isMultiLine())\n            return;\n\n        var startColumn = selection.start.column;\n        var endColumn = selection.end.column;\n        var line = session.getLine(selection.start.row);\n        \n        var needle = line.substring(startColumn, endColumn);\n        // maximum allowed size for regular expressions in 32000, \n        // but getting close to it has significant impact on the performance\n        if (needle.length > 5000 || !/[\\w\\d]/.test(needle))\n            return;\n\n        var re = this.$search.$assembleRegExp({\n            wholeWord: true,\n            caseSensitive: true,\n            needle: needle\n        });\n        \n        var wordWithBoundary = line.substring(startColumn - 1, endColumn + 1);\n        if (!re.test(wordWithBoundary))\n            return;\n        \n        return re;\n    };\n\n\n    this.onChangeFrontMarker = function() {\n        this.renderer.updateFrontMarkers();\n    };\n\n    this.onChangeBackMarker = function() {\n        this.renderer.updateBackMarkers();\n    };\n\n\n    this.onChangeBreakpoint = function() {\n        this.renderer.updateBreakpoints();\n    };\n\n    this.onChangeAnnotation = function() {\n        this.renderer.setAnnotations(this.session.getAnnotations());\n    };\n\n\n    this.onChangeMode = function(e) {\n        this.renderer.updateText();\n        this._emit(\"changeMode\", e);\n    };\n\n\n    this.onChangeWrapLimit = function() {\n        this.renderer.updateFull();\n    };\n\n    this.onChangeWrapMode = function() {\n        this.renderer.onResize(true);\n    };\n\n\n    this.onChangeFold = function() {\n        // Update the active line marker as due to folding changes the current\n        // line range on the screen might have changed.\n        this.$updateHighlightActiveLine();\n        // TODO: This might be too much updating. Okay for now.\n        this.renderer.updateFull();\n    };\n\n    \n    /**\n     * Returns the string of text currently highlighted.\n     * @returns {String}\n     **/\n    this.getSelectedText = function() {\n        return this.session.getTextRange(this.getSelectionRange());\n    };\n    \n    /**\n     * Emitted when text is copied.\n     * @event copy\n     * @param {String} text The copied text\n     *\n     **/\n    /**\n     * Returns the string of text currently highlighted.\n     * @returns {String}\n     **/\n    this.getCopyText = function() {\n        var text = this.getSelectedText();\n        var nl = this.session.doc.getNewLineCharacter();\n        var copyLine= false;\n        if (!text && this.$copyWithEmptySelection) {\n            copyLine = true;\n            var ranges = this.selection.getAllRanges();\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                if (i && ranges[i - 1].start.row == range.start.row)\n                    continue;\n                text += this.session.getLine(range.start.row) + nl;\n            }\n        }\n        var e = {text: text};\n        this._signal(\"copy\", e);\n        clipboard.lineMode = copyLine ? e.text : false;\n        return e.text;\n    };\n\n    /**\n     * Called whenever a text \"copy\" happens.\n     **/\n    this.onCopy = function() {\n        this.commands.exec(\"copy\", this);\n    };\n\n    /**\n     * Called whenever a text \"cut\" happens.\n     **/\n    this.onCut = function() {\n        this.commands.exec(\"cut\", this);\n    };\n\n    /**\n     * Emitted when text is pasted.\n     * @event paste\n     * @param {Object} an object which contains one property, `text`, that represents the text to be pasted. Editing this property will alter the text that is pasted.\n     *\n     *\n     **/\n    /**\n     * Called whenever a text \"paste\" happens.\n     * @param {String} text The pasted text\n     *\n     *\n     **/\n    this.onPaste = function(text, event) {\n        var e = {text: text, event: event};\n        this.commands.exec(\"paste\", this, e);\n    };\n    \n    this.$handlePaste = function(e) {\n        if (typeof e == \"string\") \n            e = {text: e};\n        this._signal(\"paste\", e);\n        var text = e.text;\n\n        var lineMode = text === clipboard.lineMode;\n        var session = this.session;\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode) {\n            if (lineMode)\n                session.insert({ row: this.selection.lead.row, column: 0 }, text);\n            else\n                this.insert(text);\n        } else if (lineMode) {\n            this.selection.rangeList.ranges.forEach(function(range) {\n                session.insert({ row: range.start.row, column: 0 }, text);\n            });\n        } else {\n            var lines = text.split(/\\r\\n|\\r|\\n/);\n            var ranges = this.selection.rangeList.ranges;\n    \n            var isFullLine = lines.length == 2 && (!lines[0] || !lines[1]);\n            if (lines.length != ranges.length || isFullLine)\n                return this.commands.exec(\"insertstring\", this, text);\n    \n            for (var i = ranges.length; i--;) {\n                var range = ranges[i];\n                if (!range.isEmpty())\n                    session.remove(range);\n    \n                session.insert(range.start, lines[i]);\n            }\n        }\n    };\n\n    this.execCommand = function(command, args) {\n        return this.commands.exec(command, this, args);\n    };\n\n    /**\n     * Inserts `text` into wherever the cursor is pointing.\n     * @param {String} text The new text to add\n     *\n     **/\n    this.insert = function(text, pasted) {\n        var session = this.session;\n        var mode = session.getMode();\n        var cursor = this.getCursorPosition();\n\n        if (this.getBehavioursEnabled() && !pasted) {\n            // Get a transform if the current mode wants one.\n            var transform = mode.transformAction(session.getState(cursor.row), 'insertion', this, session, text);\n            if (transform) {\n                if (text !== transform.text) {\n                    // keep automatic insertion in a separate delta, unless it is in multiselect mode\n                    if (!this.inVirtualSelectionMode) {\n                        this.session.mergeUndoDeltas = false;\n                        this.mergeNextCommand = false;\n                    }\n                }\n                text = transform.text;\n\n            }\n        }\n        \n        if (text == \"\\t\")\n            text = this.session.getTabString();\n\n        // remove selected text\n        if (!this.selection.isEmpty()) {\n            var range = this.getSelectionRange();\n            cursor = this.session.remove(range);\n            this.clearSelection();\n        }\n        else if (this.session.getOverwrite() && text.indexOf(\"\\n\") == -1) {\n            var range = new Range.fromPoints(cursor, cursor);\n            range.end.column += text.length;\n            this.session.remove(range);\n        }\n\n        if (text == \"\\n\" || text == \"\\r\\n\") {\n            var line = session.getLine(cursor.row);\n            if (cursor.column > line.search(/\\S|$/)) {\n                var d = line.substr(cursor.column).search(/\\S|$/);\n                session.doc.removeInLine(cursor.row, cursor.column, cursor.column + d);\n            }\n        }\n        this.clearSelection();\n\n        var start = cursor.column;\n        var lineState = session.getState(cursor.row);\n        var line = session.getLine(cursor.row);\n        var shouldOutdent = mode.checkOutdent(lineState, line, text);\n        session.insert(cursor, text);\n\n        if (transform && transform.selection) {\n            if (transform.selection.length == 2) { // Transform relative to the current column\n                this.selection.setSelectionRange(\n                    new Range(cursor.row, start + transform.selection[0],\n                              cursor.row, start + transform.selection[1]));\n            } else { // Transform relative to the current row.\n                this.selection.setSelectionRange(\n                    new Range(cursor.row + transform.selection[0],\n                              transform.selection[1],\n                              cursor.row + transform.selection[2],\n                              transform.selection[3]));\n            }\n        }\n        if (this.$enableAutoIndent) {\n            if (session.getDocument().isNewLine(text)) {\n                var lineIndent = mode.getNextLineIndent(lineState, line.slice(0, cursor.column), session.getTabString());\n\n                session.insert({row: cursor.row+1, column: 0}, lineIndent);\n            }\n            if (shouldOutdent)\n                mode.autoOutdent(lineState, session, cursor.row);\n        }\n    };\n\n    this.autoIndent = function () {\n        var session = this.session;\n        var mode = session.getMode();\n\n        var startRow, endRow;\n        if (this.selection.isEmpty()) {\n            startRow = 0;\n            endRow = session.doc.getLength() - 1;\n        } else {\n            var selectedRange = this.getSelectionRange();\n\n            startRow = selectedRange.start.row;\n            endRow = selectedRange.end.row;\n        }\n\n        var prevLineState = \"\";\n        var prevLine = \"\";\n        var lineIndent = \"\";\n        var line, currIndent, range;\n        var tab = session.getTabString();\n\n        for (var row = startRow; row <= endRow; row++) {\n            if (row > 0) {\n                prevLineState = session.getState(row - 1);\n                prevLine = session.getLine(row - 1);\n                lineIndent = mode.getNextLineIndent(prevLineState, prevLine, tab);\n            }\n\n            line = session.getLine(row);\n            currIndent = mode.$getIndent(line);\n            if (lineIndent !== currIndent) {\n                if (currIndent.length > 0) {\n                    range = new Range(row, 0, row, currIndent.length);\n                    session.remove(range);\n                }\n                if (lineIndent.length > 0) {\n                    session.insert({row: row, column: 0}, lineIndent);\n                }\n            }\n\n            mode.autoOutdent(prevLineState, session, row);\n        }\n    };\n\n\n    this.onTextInput = function(text, composition) {\n        if (!composition)\n            return this.keyBinding.onTextInput(text);\n        \n        this.startOperation({command: { name: \"insertstring\" }});\n        var applyComposition = this.applyComposition.bind(this, text, composition);\n        if (this.selection.rangeCount)\n            this.forEachSelection(applyComposition);\n        else\n            applyComposition();\n        this.endOperation();\n    };\n    \n    this.applyComposition = function(text, composition) {\n        if (composition.extendLeft || composition.extendRight) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.extendLeft;\n            r.end.column += composition.extendRight;\n            if (r.start.column < 0) {\n                r.start.row--;\n                r.start.column += this.session.getLine(r.start.row).length + 1;\n            }\n            this.selection.setRange(r);\n            if (!text && !r.isEmpty())\n                this.remove();\n        }\n        if (text || !this.selection.isEmpty())\n            this.insert(text, true);\n        if (composition.restoreStart || composition.restoreEnd) {\n            var r = this.selection.getRange();\n            r.start.column -= composition.restoreStart;\n            r.end.column -= composition.restoreEnd;\n            this.selection.setRange(r);\n        }\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        return this.keyBinding.onCommandKey(e, hashId, keyCode);\n    };\n\n    /**\n     * Pass in `true` to enable overwrites in your session, or `false` to disable. If overwrites is enabled, any text you enter will type over any text after it. If the value of `overwrite` changes, this function also emits the `changeOverwrite` event.\n     * @param {Boolean} overwrite Defines whether or not to set overwrites\n     *\n     *\n     * @related EditSession.setOverwrite\n     **/\n    this.setOverwrite = function(overwrite) {\n        this.session.setOverwrite(overwrite);\n    };\n\n    /**\n     * Returns `true` if overwrites are enabled; `false` otherwise.\n     * @returns {Boolean}\n     * @related EditSession.getOverwrite\n     **/\n    this.getOverwrite = function() {\n        return this.session.getOverwrite();\n    };\n\n    /**\n     * Sets the value of overwrite to the opposite of whatever it currently is.\n     * @related EditSession.toggleOverwrite\n     **/\n    this.toggleOverwrite = function() {\n        this.session.toggleOverwrite();\n    };\n\n    /**\n     * Sets how fast the mouse scrolling should do.\n     * @param {Number} speed A value indicating the new speed (in milliseconds)\n     **/\n    this.setScrollSpeed = function(speed) {\n        this.setOption(\"scrollSpeed\", speed);\n    };\n\n    /**\n     * Returns the value indicating how fast the mouse scroll speed is (in milliseconds).\n     * @returns {Number}\n     **/\n    this.getScrollSpeed = function() {\n        return this.getOption(\"scrollSpeed\");\n    };\n\n    /**\n     * Sets the delay (in milliseconds) of the mouse drag.\n     * @param {Number} dragDelay A value indicating the new delay\n     **/\n    this.setDragDelay = function(dragDelay) {\n        this.setOption(\"dragDelay\", dragDelay);\n    };\n\n    /**\n     * Returns the current mouse drag delay.\n     * @returns {Number}\n     **/\n    this.getDragDelay = function() {\n        return this.getOption(\"dragDelay\");\n    };\n\n    /**\n     * Emitted when the selection style changes, via [[Editor.setSelectionStyle]].\n     * @event changeSelectionStyle\n     * @param {Object} data Contains one property, `data`, which indicates the new selection style\n     **/\n    /**\n     * Draw selection markers spanning whole line, or only over selected text. Default value is \"line\"\n     * @param {String} style The new selection style \"line\"|\"text\"\n     *\n     **/\n    this.setSelectionStyle = function(val) {\n        this.setOption(\"selectionStyle\", val);\n    };\n\n    /**\n     * Returns the current selection style.\n     * @returns {String}\n     **/\n    this.getSelectionStyle = function() {\n        return this.getOption(\"selectionStyle\");\n    };\n\n    /**\n     * Determines whether or not the current line should be highlighted.\n     * @param {Boolean} shouldHighlight Set to `true` to highlight the current line\n     **/\n    this.setHighlightActiveLine = function(shouldHighlight) {\n        this.setOption(\"highlightActiveLine\", shouldHighlight);\n    };\n    /**\n     * Returns `true` if current lines are always highlighted.\n     * @return {Boolean}\n     **/\n    this.getHighlightActiveLine = function() {\n        return this.getOption(\"highlightActiveLine\");\n    };\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n\n    /**\n     * Determines if the currently selected word should be highlighted.\n     * @param {Boolean} shouldHighlight Set to `true` to highlight the currently selected word\n     *\n     **/\n    this.setHighlightSelectedWord = function(shouldHighlight) {\n        this.setOption(\"highlightSelectedWord\", shouldHighlight);\n    };\n\n    /**\n     * Returns `true` if currently highlighted words are to be highlighted.\n     * @returns {Boolean}\n     **/\n    this.getHighlightSelectedWord = function() {\n        return this.$highlightSelectedWord;\n    };\n\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.renderer.setAnimatedScroll(shouldAnimate);\n    };\n\n    this.getAnimatedScroll = function(){\n        return this.renderer.getAnimatedScroll();\n    };\n\n    /**\n     * If `showInvisibles` is set to `true`, invisible characters&mdash;like spaces or new lines&mdash;are show in the editor.\n     * @param {Boolean} showInvisibles Specifies whether or not to show invisible characters\n     *\n     **/\n    this.setShowInvisibles = function(showInvisibles) {\n        this.renderer.setShowInvisibles(showInvisibles);\n    };\n\n    /**\n     * Returns `true` if invisible characters are being shown.\n     * @returns {Boolean}\n     **/\n    this.getShowInvisibles = function() {\n        return this.renderer.getShowInvisibles();\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.renderer.setDisplayIndentGuides(display);\n    };\n\n    this.getDisplayIndentGuides = function() {\n        return this.renderer.getDisplayIndentGuides();\n    };\n\n    this.setHighlightIndentGuides = function(highlight) {\n        this.renderer.setHighlightIndentGuides(highlight);\n    };\n\n    this.getHighlightIndentGuides = function() {\n        return this.renderer.getHighlightIndentGuides();\n    };\n\n    /**\n     * If `showPrintMargin` is set to `true`, the print margin is shown in the editor.\n     * @param {Boolean} showPrintMargin Specifies whether or not to show the print margin\n     *\n     **/\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.renderer.setShowPrintMargin(showPrintMargin);\n    };\n\n    /**\n     * Returns `true` if the print margin is being shown.\n     * @returns {Boolean}\n     **/\n    this.getShowPrintMargin = function() {\n        return this.renderer.getShowPrintMargin();\n    };\n\n    /**\n     * Sets the column defining where the print margin should be.\n     * @param {Number} showPrintMargin Specifies the new print margin\n     *\n     **/\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.renderer.setPrintMarginColumn(showPrintMargin);\n    };\n\n    /**\n     * Returns the column number of where the print margin is.\n     * @returns {Number}\n     **/\n    this.getPrintMarginColumn = function() {\n        return this.renderer.getPrintMarginColumn();\n    };\n\n    /**\n     * If `readOnly` is true, then the editor is set to read-only mode, and none of the content can change.\n     * @param {Boolean} readOnly Specifies whether the editor can be modified or not\n     *\n     **/\n    this.setReadOnly = function(readOnly) {\n        this.setOption(\"readOnly\", readOnly);\n    };\n\n    /**\n     * Returns `true` if the editor is set to read-only mode.\n     * @returns {Boolean}\n     **/\n    this.getReadOnly = function() {\n        return this.getOption(\"readOnly\");\n    };\n\n    /**\n     * Specifies whether to use behaviors or not. [\"Behaviors\" in this case is the auto-pairing of special characters, like quotation marks, parenthesis, or brackets.]{: #BehaviorsDef}\n     * @param {Boolean} enabled Enables or disables behaviors\n     *\n     **/\n    this.setBehavioursEnabled = function (enabled) {\n        this.setOption(\"behavioursEnabled\", enabled);\n    };\n\n    /**\n     * Returns `true` if the behaviors are currently enabled. {:BehaviorsDef}\n     *\n     * @returns {Boolean}\n     **/\n    this.getBehavioursEnabled = function () {\n        return this.getOption(\"behavioursEnabled\");\n    };\n\n    /**\n     * Specifies whether to use wrapping behaviors or not, i.e. automatically wrapping the selection with characters such as brackets\n     * when such a character is typed in.\n     * @param {Boolean} enabled Enables or disables wrapping behaviors\n     *\n     **/\n    this.setWrapBehavioursEnabled = function (enabled) {\n        this.setOption(\"wrapBehavioursEnabled\", enabled);\n    };\n\n    /**\n     * Returns `true` if the wrapping behaviors are currently enabled.\n     **/\n    this.getWrapBehavioursEnabled = function () {\n        return this.getOption(\"wrapBehavioursEnabled\");\n    };\n\n    /**\n     * Indicates whether the fold widgets should be shown or not.\n     * @param {Boolean} show Specifies whether the fold widgets are shown\n     **/\n    this.setShowFoldWidgets = function(show) {\n        this.setOption(\"showFoldWidgets\", show);\n\n    };\n    /**\n     * Returns `true` if the fold widgets are shown.\n     * @return {Boolean}\n     **/\n    this.getShowFoldWidgets = function() {\n        return this.getOption(\"showFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(fade) {\n        this.setOption(\"fadeFoldWidgets\", fade);\n    };\n\n    this.getFadeFoldWidgets = function() {\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n\n    /**\n     * Removes the current selection or one character.\n     * @param {String} dir The direction of the deletion to occur, either \"left\" or \"right\"\n     *\n     **/\n    this.remove = function(dir) {\n        if (this.selection.isEmpty()){\n            if (dir == \"left\")\n                this.selection.selectLeft();\n            else\n                this.selection.selectRight();\n        }\n\n        var range = this.getSelectionRange();\n        if (this.getBehavioursEnabled()) {\n            var session = this.session;\n            var state = session.getState(range.start.row);\n            var new_range = session.getMode().transformAction(state, 'deletion', this, session, range);\n\n            if (range.end.column === 0) {\n                var text = session.getTextRange(range);\n                if (text[text.length - 1] == \"\\n\") {\n                    var line = session.getLine(range.end.row);\n                    if (/^\\s+$/.test(line)) {\n                        range.end.column = line.length;\n                    }\n                }\n            }\n            if (new_range)\n                range = new_range;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n\n    /**\n     * Removes the word directly to the right of the current selection.\n     **/\n    this.removeWordRight = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordRight();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n\n    /**\n     * Removes the word directly to the left of the current selection.\n     **/\n    this.removeWordLeft = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectWordLeft();\n\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n\n    /**\n     * Removes all the words to the left of the current selection, until the start of the line.\n     **/\n    this.removeToLineStart = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineStart();\n        if (this.selection.isEmpty())\n            this.selection.selectLeft();\n        this.session.remove(this.getSelectionRange());\n        this.clearSelection();\n    };\n\n    /**\n     * Removes all the words to the right of the current selection, until the end of the line.\n     **/\n    this.removeToLineEnd = function() {\n        if (this.selection.isEmpty())\n            this.selection.selectLineEnd();\n\n        var range = this.getSelectionRange();\n        if (range.start.column == range.end.column && range.start.row == range.end.row) {\n            range.end.column = 0;\n            range.end.row++;\n        }\n\n        this.session.remove(range);\n        this.clearSelection();\n    };\n\n    /**\n     * Splits the line at the current selection (by inserting an `'\\n'`).\n     **/\n    this.splitLine = function() {\n        if (!this.selection.isEmpty()) {\n            this.session.remove(this.getSelectionRange());\n            this.clearSelection();\n        }\n\n        var cursor = this.getCursorPosition();\n        this.insert(\"\\n\");\n        this.moveCursorToPosition(cursor);\n    };\n\n    /**\n     * Transposes current line.\n     **/\n    this.transposeLetters = function() {\n        if (!this.selection.isEmpty()) {\n            return;\n        }\n\n        var cursor = this.getCursorPosition();\n        var column = cursor.column;\n        if (column === 0)\n            return;\n\n        var line = this.session.getLine(cursor.row);\n        var swap, range;\n        if (column < line.length) {\n            swap = line.charAt(column) + line.charAt(column-1);\n            range = new Range(cursor.row, column-1, cursor.row, column+1);\n        }\n        else {\n            swap = line.charAt(column-1) + line.charAt(column-2);\n            range = new Range(cursor.row, column-2, cursor.row, column);\n        }\n        this.session.replace(range, swap);\n        this.session.selection.moveToPosition(range.end);\n    };\n\n    /**\n     * Converts the current selection entirely into lowercase.\n     **/\n    this.toLowerCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toLowerCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n\n    /**\n     * Converts the current selection entirely into uppercase.\n     **/\n    this.toUpperCase = function() {\n        var originalRange = this.getSelectionRange();\n        if (this.selection.isEmpty()) {\n            this.selection.selectWord();\n        }\n\n        var range = this.getSelectionRange();\n        var text = this.session.getTextRange(range);\n        this.session.replace(range, text.toUpperCase());\n        this.selection.setSelectionRange(originalRange);\n    };\n\n    /**\n     * Inserts an indentation into the current cursor position or indents the selected lines.\n     *\n     * @related EditSession.indentRows\n     **/\n    this.indent = function() {\n        var session = this.session;\n        var range = this.getSelectionRange();\n\n        if (range.start.row < range.end.row) {\n            var rows = this.$getSelectedRows();\n            session.indentRows(rows.first, rows.last, \"\\t\");\n            return;\n        } else if (range.start.column < range.end.column) {\n            var text = session.getTextRange(range);\n            if (!/^\\s+$/.test(text)) {\n                var rows = this.$getSelectedRows();\n                session.indentRows(rows.first, rows.last, \"\\t\");\n                return;\n            }\n        }\n        \n        var line = session.getLine(range.start.row);\n        var position = range.start;\n        var size = session.getTabSize();\n        var column = session.documentToScreenColumn(position.row, position.column);\n\n        if (this.session.getUseSoftTabs()) {\n            var count = (size - column % size);\n            var indentString = lang.stringRepeat(\" \", count);\n        } else {\n            var count = column % size;\n            while (line[range.start.column - 1] == \" \" && count) {\n                range.start.column--;\n                count--;\n            }\n            this.selection.setSelectionRange(range);\n            indentString = \"\\t\";\n        }\n        return this.insert(indentString);\n    };\n\n    /**\n     * Indents the current line.\n     * @related EditSession.indentRows\n     **/\n    this.blockIndent = function() {\n        var rows = this.$getSelectedRows();\n        this.session.indentRows(rows.first, rows.last, \"\\t\");\n    };\n\n    /**\n     * Outdents the current line.\n     * @related EditSession.outdentRows\n     **/\n    this.blockOutdent = function() {\n        var selection = this.session.getSelection();\n        this.session.outdentRows(selection.getRange());\n    };\n\n    // TODO: move out of core when we have good mechanism for managing extensions\n    this.sortLines = function() {\n        var rows = this.$getSelectedRows();\n        var session = this.session;\n\n        var lines = [];\n        for (var i = rows.first; i <= rows.last; i++)\n            lines.push(session.getLine(i));\n\n        lines.sort(function(a, b) {\n            if (a.toLowerCase() < b.toLowerCase()) return -1;\n            if (a.toLowerCase() > b.toLowerCase()) return 1;\n            return 0;\n        });\n\n        var deleteRange = new Range(0, 0, 0, 0);\n        for (var i = rows.first; i <= rows.last; i++) {\n            var line = session.getLine(i);\n            deleteRange.start.row = i;\n            deleteRange.end.row = i;\n            deleteRange.end.column = line.length;\n            session.replace(deleteRange, lines[i-rows.first]);\n        }\n    };\n\n    /**\n     * Given the currently selected range, this function either comments all the lines, or uncomments all of them.\n     **/\n    this.toggleCommentLines = function() {\n        var state = this.session.getState(this.getCursorPosition().row);\n        var rows = this.$getSelectedRows();\n        this.session.getMode().toggleCommentLines(state, this.session, rows.first, rows.last);\n    };\n\n    this.toggleBlockComment = function() {\n        var cursor = this.getCursorPosition();\n        var state = this.session.getState(cursor.row);\n        var range = this.getSelectionRange();\n        this.session.getMode().toggleBlockComment(state, this.session, range, cursor);\n    };\n\n    /**\n     * Works like [[EditSession.getTokenAt]], except it returns a number.\n     * @returns {Number}\n     **/\n    this.getNumberAt = function(row, column) {\n        var _numberRx = /[\\-]?[0-9]+(?:\\.[0-9]+)?/g;\n        _numberRx.lastIndex = 0;\n\n        var s = this.session.getLine(row);\n        while (_numberRx.lastIndex < column) {\n            var m = _numberRx.exec(s);\n            if(m.index <= column && m.index+m[0].length >= column){\n                var number = {\n                    value: m[0],\n                    start: m.index,\n                    end: m.index+m[0].length\n                };\n                return number;\n            }\n        }\n        return null;\n    };\n\n    /**\n     * If the character before the cursor is a number, this functions changes its value by `amount`.\n     * @param {Number} amount The value to change the numeral by (can be negative to decrease value)\n     *\n     **/\n    this.modifyNumber = function(amount) {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n\n        // get the char before the cursor\n        var charRange = new Range(row, column-1, row, column);\n\n        var c = this.session.getTextRange(charRange);\n        // if the char is a digit\n        if (!isNaN(parseFloat(c)) && isFinite(c)) {\n            // get the whole number the digit is part of\n            var nr = this.getNumberAt(row, column);\n            // if number found\n            if (nr) {\n                var fp = nr.value.indexOf(\".\") >= 0 ? nr.start + nr.value.indexOf(\".\") + 1 : nr.end;\n                var decimals = nr.start + nr.value.length - fp;\n\n                var t = parseFloat(nr.value);\n                t *= Math.pow(10, decimals);\n\n\n                if(fp !== nr.end && column < fp){\n                    amount *= Math.pow(10, nr.end - column - 1);\n                } else {\n                    amount *= Math.pow(10, nr.end - column);\n                }\n\n                t += amount;\n                t /= Math.pow(10, decimals);\n                var nnr = t.toFixed(decimals);\n\n                //update number\n                var replaceRange = new Range(row, nr.start, row, nr.end);\n                this.session.replace(replaceRange, nnr);\n\n                //reposition the cursor\n                this.moveCursorTo(row, Math.max(nr.start +1, column + nnr.length - nr.value.length));\n\n            }\n        } else {\n            this.toggleWord();\n        }\n    };\n\n    this.$toggleWordPairs = [\n        [\"first\", \"last\"],\n        [\"true\", \"false\"],\n        [\"yes\", \"no\"],\n        [\"width\", \"height\"],\n        [\"top\", \"bottom\"],\n        [\"right\", \"left\"],\n        [\"on\", \"off\"],\n        [\"x\", \"y\"],\n        [\"get\", \"set\"],\n        [\"max\", \"min\"],\n        [\"horizontal\", \"vertical\"],\n        [\"show\", \"hide\"],\n        [\"add\", \"remove\"],\n        [\"up\", \"down\"],\n        [\"before\", \"after\"],\n        [\"even\", \"odd\"],\n        [\"in\", \"out\"],\n        [\"inside\", \"outside\"],\n        [\"next\", \"previous\"],\n        [\"increase\", \"decrease\"],\n        [\"attach\", \"detach\"],\n        [\"&&\", \"||\"],\n        [\"==\", \"!=\"]\n    ];\n\n    this.toggleWord = function () {\n        var row = this.selection.getCursor().row;\n        var column = this.selection.getCursor().column;\n        this.selection.selectWord();\n        var currentState = this.getSelectedText();\n        var currWordStart = this.selection.getWordRange().start.column;\n        var wordParts = currentState.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g, '$1 ').split(/\\s/);\n        var delta = column - currWordStart - 1;\n        if (delta < 0) delta = 0;\n        var curLength = 0, itLength = 0;\n        var that = this;\n        if (currentState.match(/[A-Za-z0-9_]+/)) {\n            wordParts.forEach(function (item, i) {\n                itLength = curLength + item.length;\n                if (delta >= curLength && delta <= itLength) {\n                    currentState = item;\n                    that.selection.clearSelection();\n                    that.moveCursorTo(row, curLength + currWordStart);\n                    that.selection.selectTo(row, itLength + currWordStart);\n                }\n                curLength = itLength;\n            });\n        }\n\n        var wordPairs = this.$toggleWordPairs;\n        var reg;\n        for (var i = 0; i < wordPairs.length; i++) {\n            var item = wordPairs[i];\n            for (var j = 0; j <= 1; j++) {\n                var negate = +!j;\n                var firstCondition = currentState.match(new RegExp('^\\\\s?_?(' + lang.escapeRegExp(item[j]) + ')\\\\s?$', 'i'));\n                if (firstCondition) {\n                    var secondCondition = currentState.match(new RegExp('([_]|^|\\\\s)(' + lang.escapeRegExp(firstCondition[1]) + ')($|\\\\s)', 'g'));\n                    if (secondCondition) {\n                        reg = currentState.replace(new RegExp(lang.escapeRegExp(item[j]), 'i'), function (result) {\n                            var res = item[negate];\n                            if (result.toUpperCase() == result) {\n                                res = res.toUpperCase();\n                            } else if (result.charAt(0).toUpperCase() == result.charAt(0)) {\n                                res = res.substr(0, 0) + item[negate].charAt(0).toUpperCase() + res.substr(1);\n                            }\n                            return res;\n                        });\n                        this.insert(reg);\n                        reg = \"\";\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Finds link at defined {row} and {column}\n     * @returns {String}\n     **/\n    this.findLinkAt = function (row, column) {\n        var line = this.session.getLine(row);\n        var wordParts = line.split(/((?:https?|ftp):\\/\\/[\\S]+)/);\n        var columnPosition = column;\n        if (columnPosition < 0) columnPosition = 0;\n        var previousPosition = 0, currentPosition = 0, match;\n        for (let item of wordParts) {\n            currentPosition = previousPosition + item.length;\n            if (columnPosition >= previousPosition && columnPosition <= currentPosition) {\n                if (item.match(/((?:https?|ftp):\\/\\/[\\S]+)/)) {\n                    match = item.replace(/[\\s:.,'\";}\\]]+$/, \"\");\n                    break;\n                }\n            }\n            previousPosition = currentPosition;\n        }\n        return match;\n    };\n\n    /**\n     * Open valid url under cursor in another tab\n     * @returns {Boolean}\n     **/\n    this.openLink = function () {\n        var cursor =  this.selection.getCursor();\n        var url = this.findLinkAt(cursor.row, cursor.column);\n        if (url)\n            window.open(url, '_blank');\n        return url != null;\n    };\n\n    /**\n     * Removes all the lines in the current selection\n     * @related EditSession.remove\n     **/\n    this.removeLines = function() {\n        var rows = this.$getSelectedRows();\n        this.session.removeFullLines(rows.first, rows.last);\n        this.clearSelection();\n    };\n\n    this.duplicateSelection = function() {\n        var sel = this.selection;\n        var doc = this.session;\n        var range = sel.getRange();\n        var reverse = sel.isBackwards();\n        if (range.isEmpty()) {\n            var row = range.start.row;\n            doc.duplicateLines(row, row);\n        } else {\n            var point = reverse ? range.start : range.end;\n            var endPoint = doc.insert(point, doc.getTextRange(range), false);\n            range.start = point;\n            range.end = endPoint;\n\n            sel.setSelectionRange(range, reverse);\n        }\n    };\n\n    /**\n     * Shifts all the selected lines down one row.\n     *\n     * @returns {Number} On success, it returns -1.\n     * @related EditSession.moveLinesUp\n     **/\n    this.moveLinesDown = function() {\n        this.$moveLines(1, false);\n    };\n\n    /**\n     * Shifts all the selected lines up one row.\n     * @returns {Number} On success, it returns -1.\n     * @related EditSession.moveLinesDown\n     **/\n    this.moveLinesUp = function() {\n        this.$moveLines(-1, false);\n    };\n\n    /**\n     * Moves a range of text from the given range to the given position. `toPosition` is an object that looks like this:\n     * ```json\n     *    { row: newRowLocation, column: newColumnLocation }\n     * ```\n     * @param {Range} fromRange The range of text you want moved within the document\n     * @param {Object} toPosition The location (row and column) where you want to move the text to\n     *\n     * @returns {Range} The new range where the text was moved to.\n     * @related EditSession.moveText\n     **/\n    this.moveText = function(range, toPosition, copy) {\n        return this.session.moveText(range, toPosition, copy);\n    };\n\n    /**\n     * Copies all the selected lines up one row.\n     * @returns {Number} On success, returns 0.\n     *\n     **/\n    this.copyLinesUp = function() {\n        this.$moveLines(-1, true);\n    };\n\n    /**\n     * Copies all the selected lines down one row.\n     * @returns {Number} On success, returns the number of new rows added; in other words, `lastRow - firstRow + 1`.\n     * @related EditSession.duplicateLines\n     *\n     **/\n    this.copyLinesDown = function() {\n        this.$moveLines(1, true);\n    };\n\n    /**\n     * for internal use\n     * @ignore\n     *\n     **/\n    this.$moveLines = function(dir, copy) {\n        var rows, moved;\n        var selection = this.selection;\n        if (!selection.inMultiSelectMode || this.inVirtualSelectionMode) {\n            var range = selection.toOrientedRange();\n            rows = this.$getSelectedRows(range);\n            moved = this.session.$moveLines(rows.first, rows.last, copy ? 0 : dir);\n            if (copy && dir == -1) moved = 0;\n            range.moveBy(moved, 0);\n            selection.fromOrientedRange(range);\n        } else {\n            var ranges = selection.rangeList.ranges;\n            selection.rangeList.detach(this.session);\n            this.inVirtualSelectionMode = true;\n            \n            var diff = 0;\n            var totalDiff = 0;\n            var l = ranges.length;\n            for (var i = 0; i < l; i++) {\n                var rangeIndex = i;\n                ranges[i].moveBy(diff, 0);\n                rows = this.$getSelectedRows(ranges[i]);\n                var first = rows.first;\n                var last = rows.last;\n                while (++i < l) {\n                    if (totalDiff) ranges[i].moveBy(totalDiff, 0);\n                    var subRows = this.$getSelectedRows(ranges[i]);\n                    if (copy && subRows.first != last)\n                        break;\n                    else if (!copy && subRows.first > last + 1)\n                        break;\n                    last = subRows.last;\n                }\n                i--;\n                diff = this.session.$moveLines(first, last, copy ? 0 : dir);\n                if (copy && dir == -1) rangeIndex = i + 1;\n                while (rangeIndex <= i) {\n                    ranges[rangeIndex].moveBy(diff, 0);\n                    rangeIndex++;\n                }\n                if (!copy) diff = 0;\n                totalDiff += diff;\n            }\n            \n            selection.fromOrientedRange(selection.ranges[0]);\n            selection.rangeList.attach(this.session);\n            this.inVirtualSelectionMode = false;\n        }\n    };\n\n    /**\n     * Returns an object indicating the currently selected rows. The object looks like this:\n     *\n     * ```json\n     * { first: range.start.row, last: range.end.row }\n     * ```\n     *\n     * @returns {Object}\n     **/\n    this.$getSelectedRows = function(range) {\n        range = (range || this.getSelectionRange()).collapseRows();\n\n        return {\n            first: this.session.getRowFoldStart(range.start.row),\n            last: this.session.getRowFoldEnd(range.end.row)\n        };\n    };\n\n    this.onCompositionStart = function(compositionState) {\n        this.renderer.showComposition(compositionState);\n    };\n\n    this.onCompositionUpdate = function(text) {\n        this.renderer.setCompositionText(text);\n    };\n\n    this.onCompositionEnd = function() {\n        this.renderer.hideComposition();\n    };\n\n    /**\n     * {:VirtualRenderer.getFirstVisibleRow}\n     *\n     * @returns {Number}\n     * @related VirtualRenderer.getFirstVisibleRow\n     **/\n    this.getFirstVisibleRow = function() {\n        return this.renderer.getFirstVisibleRow();\n    };\n\n    /**\n     * {:VirtualRenderer.getLastVisibleRow}\n     *\n     * @returns {Number}\n     * @related VirtualRenderer.getLastVisibleRow\n     **/\n    this.getLastVisibleRow = function() {\n        return this.renderer.getLastVisibleRow();\n    };\n\n    /**\n     * Indicates if the row is currently visible on the screen.\n     * @param {Number} row The row to check\n     *\n     * @returns {Boolean}\n     **/\n    this.isRowVisible = function(row) {\n        return (row >= this.getFirstVisibleRow() && row <= this.getLastVisibleRow());\n    };\n\n    /**\n     * Indicates if the entire row is currently visible on the screen.\n     * @param {Number} row The row to check\n     *\n     *\n     * @returns {Boolean}\n     **/\n    this.isRowFullyVisible = function(row) {\n        return (row >= this.renderer.getFirstFullyVisibleRow() && row <= this.renderer.getLastFullyVisibleRow());\n    };\n\n    /**\n     * Returns the number of currently visible rows.\n     * @returns {Number}\n     **/\n    this.$getVisibleRowCount = function() {\n        return this.renderer.getScrollBottomRow() - this.renderer.getScrollTopRow() + 1;\n    };\n\n    this.$moveByPage = function(dir, select) {\n        var renderer = this.renderer;\n        var config = this.renderer.layerConfig;\n        var rows = dir * Math.floor(config.height / config.lineHeight);\n\n        if (select === true) {\n            this.selection.$moveSelection(function(){\n                this.moveCursorBy(rows, 0);\n            });\n        } else if (select === false) {\n            this.selection.moveCursorBy(rows, 0);\n            this.selection.clearSelection();\n        }\n\n        var scrollTop = renderer.scrollTop;\n\n        renderer.scrollBy(0, rows * config.lineHeight);\n        if (select != null)\n            renderer.scrollCursorIntoView(null, 0.5);\n\n        renderer.animateScrolling(scrollTop);\n    };\n\n    /**\n     * Selects the text from the current position of the document until where a \"page down\" finishes.\n     **/\n    this.selectPageDown = function() {\n        this.$moveByPage(1, true);\n    };\n\n    /**\n     * Selects the text from the current position of the document until where a \"page up\" finishes.\n     **/\n    this.selectPageUp = function() {\n        this.$moveByPage(-1, true);\n    };\n\n    /**\n     * Shifts the document to wherever \"page down\" is, as well as moving the cursor position.\n     **/\n    this.gotoPageDown = function() {\n       this.$moveByPage(1, false);\n    };\n\n    /**\n     * Shifts the document to wherever \"page up\" is, as well as moving the cursor position.\n     **/\n    this.gotoPageUp = function() {\n        this.$moveByPage(-1, false);\n    };\n\n    /**\n     * Scrolls the document to wherever \"page down\" is, without changing the cursor position.\n     **/\n    this.scrollPageDown = function() {\n        this.$moveByPage(1);\n    };\n\n    /**\n     * Scrolls the document to wherever \"page up\" is, without changing the cursor position.\n     **/\n    this.scrollPageUp = function() {\n        this.$moveByPage(-1);\n    };\n\n    /**\n     * Moves the editor to the specified row.\n     * @related VirtualRenderer.scrollToRow\n     **/\n    this.scrollToRow = function(row) {\n        this.renderer.scrollToRow(row);\n    };\n\n    /**\n     * Scrolls to a line. If `center` is `true`, it puts the line in middle of screen (or attempts to).\n     * @param {Number} line The line to scroll to\n     * @param {Boolean} center If `true`\n     * @param {Boolean} animate If `true` animates scrolling\n     * @param {Function} callback Function to be called when the animation has finished\n     *\n     *\n     * @related VirtualRenderer.scrollToLine\n     **/\n    this.scrollToLine = function(line, center, animate, callback) {\n        this.renderer.scrollToLine(line, center, animate, callback);\n    };\n\n    /**\n     * Attempts to center the current selection on the screen.\n     **/\n    this.centerSelection = function() {\n        var range = this.getSelectionRange();\n        var pos = {\n            row: Math.floor(range.start.row + (range.end.row - range.start.row) / 2),\n            column: Math.floor(range.start.column + (range.end.column - range.start.column) / 2)\n        };\n        this.renderer.alignCursor(pos, 0.5);\n    };\n\n    /**\n     * Gets the current position of the cursor.\n     * @returns {Object} An object that looks something like this:\n     *\n     * ```json\n     * { row: currRow, column: currCol }\n     * ```\n     *\n     * @related Selection.getCursor\n     **/\n    this.getCursorPosition = function() {\n        return this.selection.getCursor();\n    };\n\n    /**\n     * Returns the screen position of the cursor.\n     * @returns {Number}\n     * @related EditSession.documentToScreenPosition\n     **/\n    this.getCursorPositionScreen = function() {\n        return this.session.documentToScreenPosition(this.getCursorPosition());\n    };\n\n    /**\n     * {:Selection.getRange}\n     * @returns {Range}\n     * @related Selection.getRange\n     **/\n    this.getSelectionRange = function() {\n        return this.selection.getRange();\n    };\n\n\n    /**\n     * Selects all the text in editor.\n     * @related Selection.selectAll\n     **/\n    this.selectAll = function() {\n        this.selection.selectAll();\n    };\n\n    /**\n     * {:Selection.clearSelection}\n     * @related Selection.clearSelection\n     **/\n    this.clearSelection = function() {\n        this.selection.clearSelection();\n    };\n\n    /**\n     * Moves the cursor to the specified row and column. Note that this does not de-select the current selection.\n     * @param {Number} row The new row number\n     * @param {Number} column The new column number\n     *\n     *\n     * @related Selection.moveCursorTo\n     **/\n    this.moveCursorTo = function(row, column) {\n        this.selection.moveCursorTo(row, column);\n    };\n\n    /**\n     * Moves the cursor to the position indicated by `pos.row` and `pos.column`.\n     * @param {Object} pos An object with two properties, row and column\n     *\n     *\n     * @related Selection.moveCursorToPosition\n     **/\n    this.moveCursorToPosition = function(pos) {\n        this.selection.moveCursorToPosition(pos);\n    };\n\n    /**\n     * Moves the cursor's row and column to the next matching bracket or HTML tag.\n     *\n     **/\n    this.jumpToMatching = function (select, expand) {\n        var cursor = this.getCursorPosition();\n        var iterator = new TokenIterator(this.session, cursor.row, cursor.column);\n        var prevToken = iterator.getCurrentToken();\n        var tokenCount = 0;\n        if (prevToken && prevToken.type.indexOf('tag-name') !== -1) {\n            prevToken = iterator.stepBackward();\n        }\n        var token = prevToken || iterator.stepForward();\n\n        if (!token) return;\n\n        //get next closing tag or bracket\n        var matchType;\n        var found = false;\n        var depth = {};\n        var i = cursor.column - token.start;\n        var bracketType;\n        var brackets = {\n            \")\": \"(\",\n            \"(\": \"(\",\n            \"]\": \"[\",\n            \"[\": \"[\",\n            \"{\": \"{\",\n            \"}\": \"{\"\n        };\n\n        do {\n            if (token.value.match(/[{}()\\[\\]]/g)) {\n                for (; i < token.value.length && !found; i++) {\n                    if (!brackets[token.value[i]]) {\n                        continue;\n                    }\n\n                    bracketType = brackets[token.value[i]] + '.' + token.type.replace(\"rparen\", \"lparen\");\n\n                    if (isNaN(depth[bracketType])) {\n                        depth[bracketType] = 0;\n                    }\n\n                    switch (token.value[i]) {\n                        case '(':\n                        case '[':\n                        case '{':\n                            depth[bracketType]++;\n                            break;\n                        case ')':\n                        case ']':\n                        case '}':\n                            depth[bracketType]--;\n\n                            if (depth[bracketType] === -1) {\n                                matchType = 'bracket';\n                                found = true;\n                            }\n                            break;\n                    }\n                }\n            }\n            else if (token.type.indexOf('tag-name') !== -1) {\n                if (isNaN(depth[token.value])) {\n                    depth[token.value] = 0;\n                }\n\n                if (prevToken.value === '<' && tokenCount > 1) {\n                    depth[token.value]++;\n                }\n                else if (prevToken.value === '</') {\n                    depth[token.value]--;\n                }\n\n                if (depth[token.value] === -1) {\n                    matchType = 'tag';\n                    found = true;\n                }\n            }\n\n            if (!found) {\n                prevToken = token;\n                tokenCount++;\n                token = iterator.stepForward();\n                i = 0;\n            }\n        } while (token && !found);\n\n        //no match found\n        if (!matchType) return;\n\n        var range, pos;\n        if (matchType === 'bracket') {\n            range = this.session.getBracketRange(cursor);\n            if (!range) {\n                range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1,\n                    iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() + i - 1\n                );\n                pos = range.start;\n                if (expand || pos.row === cursor.row && Math.abs(pos.column - cursor.column)\n                    < 2) range = this.session.getBracketRange(pos);\n            }\n        }\n        else if (matchType === 'tag') {\n            if (!token || token.type.indexOf('tag-name') === -1) return;\n            range = new Range(iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2,\n                iterator.getCurrentTokenRow(), iterator.getCurrentTokenColumn() - 2\n            );\n\n            //find matching tag\n            if (range.compare(cursor.row, cursor.column) === 0) {\n                var tagsRanges = this.session.getMatchingTags(cursor);\n                if (tagsRanges) {\n                    if (tagsRanges.openTag.contains(cursor.row, cursor.column)) {\n                        range = tagsRanges.closeTag;\n                        pos = range.start;\n                    }\n                    else {\n                        range = tagsRanges.openTag;\n                        if (tagsRanges.closeTag.start.row === cursor.row && tagsRanges.closeTag.start.column\n                            === cursor.column) pos = range.end; else pos = range.start;\n                    }\n                }\n            }\n\n            //we found it\n            pos = pos || range.start;\n        }\n\n        pos = range && range.cursor || pos;\n        if (pos) {\n            if (select) {\n                if (range && expand) {\n                    this.selection.setRange(range);\n                }\n                else if (range && range.isEqual(this.getSelectionRange())) {\n                    this.clearSelection();\n                }\n                else {\n                    this.selection.selectTo(pos.row, pos.column);\n                }\n            }\n            else {\n                this.selection.moveTo(pos.row, pos.column);\n            }\n        }\n    };\n\n    /**\n     * Moves the cursor to the specified line number, and also into the indicated column.\n     * @param {Number} lineNumber The line number to go to\n     * @param {Number} column A column number to go to\n     * @param {Boolean} animate If `true` animates scolling\n     *\n     **/\n    this.gotoLine = function(lineNumber, column, animate) {\n        this.selection.clearSelection();\n        this.session.unfold({row: lineNumber - 1, column: column || 0});\n\n        // todo: find a way to automatically exit multiselect mode\n        this.exitMultiSelectMode && this.exitMultiSelectMode();\n        this.moveCursorTo(lineNumber - 1, column || 0);\n\n        if (!this.isRowFullyVisible(lineNumber - 1))\n            this.scrollToLine(lineNumber - 1, true, animate);\n    };\n\n    /**\n     * Moves the cursor to the specified row and column. Note that this does de-select the current selection.\n     * @param {Number} row The new row number\n     * @param {Number} column The new column number\n     *\n     *\n     * @related Editor.moveCursorTo\n     **/\n    this.navigateTo = function(row, column) {\n        this.selection.moveTo(row, column);\n    };\n\n    /**\n     * Moves the cursor up in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} times The number of times to change navigation\n     *\n     *\n     **/\n    this.navigateUp = function(times) {\n        if (this.selection.isMultiLine() && !this.selection.isBackwards()) {\n            var selectionStart = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionStart);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(-times || -1, 0);\n    };\n\n    /**\n     * Moves the cursor down in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} times The number of times to change navigation\n     *\n     *\n     **/\n    this.navigateDown = function(times) {\n        if (this.selection.isMultiLine() && this.selection.isBackwards()) {\n            var selectionEnd = this.selection.anchor.getPosition();\n            return this.moveCursorToPosition(selectionEnd);\n        }\n        this.selection.clearSelection();\n        this.selection.moveCursorBy(times || 1, 0);\n    };\n\n    /**\n     * Moves the cursor left in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} times The number of times to change navigation\n     *\n     *\n     **/\n    this.navigateLeft = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionStart = this.getSelectionRange().start;\n            this.moveCursorToPosition(selectionStart);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorLeft();\n            }\n        }\n        this.clearSelection();\n    };\n\n    /**\n     * Moves the cursor right in the document the specified number of times. Note that this does de-select the current selection.\n     * @param {Number} times The number of times to change navigation\n     *\n     *\n     **/\n    this.navigateRight = function(times) {\n        if (!this.selection.isEmpty()) {\n            var selectionEnd = this.getSelectionRange().end;\n            this.moveCursorToPosition(selectionEnd);\n        }\n        else {\n            times = times || 1;\n            while (times--) {\n                this.selection.moveCursorRight();\n            }\n        }\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the start of the current line. Note that this does de-select the current selection.\n     **/\n    this.navigateLineStart = function() {\n        this.selection.moveCursorLineStart();\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the end of the current line. Note that this does de-select the current selection.\n     **/\n    this.navigateLineEnd = function() {\n        this.selection.moveCursorLineEnd();\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the end of the current file. Note that this does de-select the current selection.\n     **/\n    this.navigateFileEnd = function() {\n        this.selection.moveCursorFileEnd();\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the start of the current file. Note that this does de-select the current selection.\n     **/\n    this.navigateFileStart = function() {\n        this.selection.moveCursorFileStart();\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the word immediately to the right of the current position. Note that this does de-select the current selection.\n     **/\n    this.navigateWordRight = function() {\n        this.selection.moveCursorWordRight();\n        this.clearSelection();\n    };\n\n    /**\n     *\n     * Moves the cursor to the word immediately to the left of the current position. Note that this does de-select the current selection.\n     **/\n    this.navigateWordLeft = function() {\n        this.selection.moveCursorWordLeft();\n        this.clearSelection();\n    };\n\n    /**\n     * Replaces the first occurrence of `options.needle` with the value in `replacement`.\n     * @param {String} replacement The text to replace with\n     * @param {Object} options The [[Search `Search`]] options to use\n     *\n     *\n     **/\n    this.replace = function(replacement, options) {\n        if (options)\n            this.$search.set(options);\n\n        var range = this.$search.find(this.session);\n        var replaced = 0;\n        if (!range)\n            return replaced;\n\n        if (this.$tryReplace(range, replacement)) {\n            replaced = 1;\n        }\n\n        this.selection.setSelectionRange(range);\n        this.renderer.scrollSelectionIntoView(range.start, range.end);\n\n        return replaced;\n    };\n\n    /**\n     * Replaces all occurrences of `options.needle` with the value in `replacement`.\n     * @param {String} replacement The text to replace with\n     * @param {Object} options The [[Search `Search`]] options to use\n     *\n     *\n     **/\n    this.replaceAll = function(replacement, options) {\n        if (options) {\n            this.$search.set(options);\n        }\n\n        var ranges = this.$search.findAll(this.session);\n        var replaced = 0;\n        if (!ranges.length)\n            return replaced;\n\n        var selection = this.getSelectionRange();\n        this.selection.moveTo(0, 0);\n\n        for (var i = ranges.length - 1; i >= 0; --i) {\n            if(this.$tryReplace(ranges[i], replacement)) {\n                replaced++;\n            }\n        }\n\n        this.selection.setSelectionRange(selection);\n\n        return replaced;\n    };\n\n    this.$tryReplace = function(range, replacement) {\n        var input = this.session.getTextRange(range);\n        replacement = this.$search.replace(input, replacement);\n        if (replacement !== null) {\n            range.end = this.session.replace(range, replacement);\n            return range;\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * {:Search.getOptions} For more information on `options`, see [[Search `Search`]].\n     * @related Search.getOptions\n     * @returns {Object}\n     **/\n    this.getLastSearchOptions = function() {\n        return this.$search.getOptions();\n    };\n\n    /**\n     * Attempts to find `needle` within the document. For more information on `options`, see [[Search `Search`]].\n     * @param {String} needle The text to search for (optional)\n     * @param {Object} options An object defining various search properties\n     * @param {Boolean} animate If `true` animate scrolling\n     *\n     *\n     * @related Search.find\n     **/\n    this.find = function(needle, options, animate) {\n        if (!options)\n            options = {};\n\n        if (typeof needle == \"string\" || needle instanceof RegExp)\n            options.needle = needle;\n        else if (typeof needle == \"object\")\n            oop.mixin(options, needle);\n\n        var range = this.selection.getRange();\n        if (options.needle == null) {\n            needle = this.session.getTextRange(range)\n                || this.$search.$options.needle;\n            if (!needle) {\n                range = this.session.getWordRange(range.start.row, range.start.column);\n                needle = this.session.getTextRange(range);\n            }\n            this.$search.set({needle: needle});\n        }\n\n        this.$search.set(options);\n        if (!options.start)\n            this.$search.set({start: range});\n\n        var newRange = this.$search.find(this.session);\n        if (options.preventScroll)\n            return newRange;\n        if (newRange) {\n            this.revealRange(newRange, animate);\n            return newRange;\n        }\n        // clear selection if nothing is found\n        if (options.backwards)\n            range.start = range.end;\n        else\n            range.end = range.start;\n        this.selection.setRange(range);\n    };\n\n    /**\n     * Performs another search for `needle` in the document. For more information on `options`, see [[Search `Search`]].\n     * @param {Object} options search options\n     * @param {Boolean} animate If `true` animate scrolling\n     *\n     *\n     * @related Editor.find\n     **/\n    this.findNext = function(options, animate) {\n        this.find({skipCurrent: true, backwards: false}, options, animate);\n    };\n\n    /**\n     * Performs a search for `needle` backwards. For more information on `options`, see [[Search `Search`]].\n     * @param {Object} options search options\n     * @param {Boolean} animate If `true` animate scrolling\n     *\n     *\n     * @related Editor.find\n     **/\n    this.findPrevious = function(options, animate) {\n        this.find(options, {skipCurrent: true, backwards: true}, animate);\n    };\n\n    this.revealRange = function(range, animate) {\n        this.session.unfold(range);\n        this.selection.setSelectionRange(range);\n\n        var scrollTop = this.renderer.scrollTop;\n        this.renderer.scrollSelectionIntoView(range.start, range.end, 0.5);\n        if (animate !== false)\n            this.renderer.animateScrolling(scrollTop);\n    };\n\n    /**\n     * {:UndoManager.undo}\n     * @related UndoManager.undo\n     **/\n    this.undo = function() {\n        this.session.getUndoManager().undo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n\n    /**\n     * {:UndoManager.redo}\n     * @related UndoManager.redo\n     **/\n    this.redo = function() {\n        this.session.getUndoManager().redo(this.session);\n        this.renderer.scrollCursorIntoView(null, 0.5);\n    };\n\n    /**\n     *\n     * Cleans up the entire editor.\n     **/\n    this.destroy = function() {\n        if (this.$toDestroy) {\n            this.$toDestroy.forEach(function(el) {\n                el.destroy();\n            });\n            this.$toDestroy = null;\n        }\n        if (this.$mouseHandler)\n            this.$mouseHandler.destroy();\n        this.renderer.destroy();\n        this._signal(\"destroy\", this);\n        if (this.session)\n            this.session.destroy();\n        if (this._$emitInputEvent)\n            this._$emitInputEvent.cancel();\n        this.removeAllListeners();\n    };\n\n    /**\n     * Enables automatic scrolling of the cursor into view when editor itself is inside scrollable element\n     * @param {Boolean} enable default true\n     **/\n    this.setAutoScrollEditorIntoView = function(enable) {\n        if (!enable)\n            return;\n        var rect;\n        var self = this;\n        var shouldScroll = false;\n        if (!this.$scrollAnchor)\n            this.$scrollAnchor = document.createElement(\"div\");\n        var scrollAnchor = this.$scrollAnchor;\n        scrollAnchor.style.cssText = \"position:absolute\";\n        this.container.insertBefore(scrollAnchor, this.container.firstChild);\n        var onChangeSelection = this.on(\"changeSelection\", function() {\n            shouldScroll = true;\n        });\n        // needed to not trigger sync reflow\n        var onBeforeRender = this.renderer.on(\"beforeRender\", function() {\n            if (shouldScroll)\n                rect = self.renderer.container.getBoundingClientRect();\n        });\n        var onAfterRender = this.renderer.on(\"afterRender\", function() {\n            if (shouldScroll && rect && (self.isFocused()\n                || self.searchBox && self.searchBox.isFocused())\n            ) {\n                var renderer = self.renderer;\n                var pos = renderer.$cursorLayer.$pixelPos;\n                var config = renderer.layerConfig;\n                var top = pos.top - config.offset;\n                if (pos.top >= 0 && top + rect.top < 0) {\n                    shouldScroll = true;\n                } else if (pos.top < config.height &&\n                    pos.top + rect.top + config.lineHeight > window.innerHeight) {\n                    shouldScroll = false;\n                } else {\n                    shouldScroll = null;\n                }\n                if (shouldScroll != null) {\n                    scrollAnchor.style.top = top + \"px\";\n                    scrollAnchor.style.left = pos.left + \"px\";\n                    scrollAnchor.style.height = config.lineHeight + \"px\";\n                    scrollAnchor.scrollIntoView(shouldScroll);\n                }\n                shouldScroll = rect = null;\n            }\n        });\n        this.setAutoScrollEditorIntoView = function(enable) {\n            if (enable)\n                return;\n            delete this.setAutoScrollEditorIntoView;\n            this.off(\"changeSelection\", onChangeSelection);\n            this.renderer.off(\"afterRender\", onAfterRender);\n            this.renderer.off(\"beforeRender\", onBeforeRender);\n        };\n    };\n\n\n    this.$resetCursorStyle = function() {\n        var style = this.$cursorStyle || \"ace\";\n        var cursorLayer = this.renderer.$cursorLayer;\n        if (!cursorLayer)\n            return;\n        cursorLayer.setSmoothBlinking(/smooth/.test(style));\n        cursorLayer.isBlinking = !this.$readOnly && style != \"wide\";\n        dom.setCssClass(cursorLayer.element, \"ace_slim-cursors\", /slim/.test(style));\n    };\n\n    /**\n     * opens a prompt displaying message\n     **/\n    this.prompt = function(message, options, callback) {\n        var editor = this;\n        config.loadModule(\"./ext/prompt\", function (module) {\n            module.prompt(editor, message, options, callback);\n        });\n    };\n\n}).call(Editor.prototype);\n\n\n\nconfig.defineOptions(Editor.prototype, \"editor\", {\n    selectionStyle: {\n        set: function(style) {\n            this.onSelectionChange();\n            this._signal(\"changeSelectionStyle\", {data: style});\n        },\n        initialValue: \"line\"\n    },\n    highlightActiveLine: {\n        set: function() {this.$updateHighlightActiveLine();},\n        initialValue: true\n    },\n    highlightSelectedWord: {\n        set: function(shouldHighlight) {this.$onSelectionChange();},\n        initialValue: true\n    },\n    readOnly: {\n        set: function(readOnly) {\n            this.textInput.setReadOnly(readOnly);\n            this.$resetCursorStyle(); \n        },\n        initialValue: false\n    },\n    copyWithEmptySelection: {\n        set: function(value) {\n            this.textInput.setCopyWithEmptySelection(value);\n        },\n        initialValue: false\n    },\n    cursorStyle: {\n        set: function(val) { this.$resetCursorStyle(); },\n        values: [\"ace\", \"slim\", \"smooth\", \"wide\"],\n        initialValue: \"ace\"\n    },\n    mergeUndoDeltas: {\n        values: [false, true, \"always\"],\n        initialValue: true\n    },\n    behavioursEnabled: {initialValue: true},\n    wrapBehavioursEnabled: {initialValue: true},\n    enableAutoIndent: {initialValue: true},\n    autoScrollEditorIntoView: {\n        set: function(val) {this.setAutoScrollEditorIntoView(val);}\n    },\n    keyboardHandler: {\n        set: function(val) { this.setKeyboardHandler(val); },\n        get: function() { return this.$keybindingId; },\n        handlesSet: true\n    },\n    value: {\n        set: function(val) { this.session.setValue(val); },\n        get: function() { return this.getValue(); },\n        handlesSet: true,\n        hidden: true\n    },\n    session: {\n        set: function(val) { this.setSession(val); },\n        get: function() { return this.session; },\n        handlesSet: true,\n        hidden: true\n    },\n    \n    showLineNumbers: {\n        set: function(show) {\n            this.renderer.$gutterLayer.setShowLineNumbers(show);\n            this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER);\n            if (show && this.$relativeLineNumbers)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        },\n        initialValue: true\n    },\n    relativeLineNumbers: {\n        set: function(value) {\n            if (this.$showLineNumbers && value)\n                relativeNumberRenderer.attach(this);\n            else\n                relativeNumberRenderer.detach(this);\n        }\n    },\n    placeholder: {\n        set: function(message) {\n            if (!this.$updatePlaceholder) {\n                this.$updatePlaceholder = function() {\n                    var value = this.session && (this.renderer.$composition || this.getValue());\n                    if (value && this.renderer.placeholderNode) {\n                        this.renderer.off(\"afterRender\", this.$updatePlaceholder);\n                        dom.removeCssClass(this.container, \"ace_hasPlaceholder\");\n                        this.renderer.placeholderNode.remove();\n                        this.renderer.placeholderNode = null;\n                    } else if (!value && !this.renderer.placeholderNode) {\n                        this.renderer.on(\"afterRender\", this.$updatePlaceholder);\n                        dom.addCssClass(this.container, \"ace_hasPlaceholder\");\n                        var el = dom.createElement(\"div\");\n                        el.className = \"ace_placeholder\";\n                        el.textContent = this.$placeholder || \"\";\n                        this.renderer.placeholderNode = el;\n                        this.renderer.content.appendChild(this.renderer.placeholderNode);\n                    } else if (!value && this.renderer.placeholderNode) {\n                        this.renderer.placeholderNode.textContent = this.$placeholder || \"\";\n                    }\n                }.bind(this);\n                this.on(\"input\", this.$updatePlaceholder);\n            }\n            this.$updatePlaceholder();\n        }\n    },\n    customScrollbar: \"renderer\",\n    hScrollBarAlwaysVisible: \"renderer\",\n    vScrollBarAlwaysVisible: \"renderer\",\n    highlightGutterLine: \"renderer\",\n    animatedScroll: \"renderer\",\n    showInvisibles: \"renderer\",\n    showPrintMargin: \"renderer\",\n    printMarginColumn: \"renderer\",\n    printMargin: \"renderer\",\n    fadeFoldWidgets: \"renderer\",\n    showFoldWidgets: \"renderer\",\n    displayIndentGuides: \"renderer\",\n    highlightIndentGuides: \"renderer\",\n    showGutter: \"renderer\",\n    fontSize: \"renderer\",\n    fontFamily: \"renderer\",\n    maxLines: \"renderer\",\n    minLines: \"renderer\",\n    scrollPastEnd: \"renderer\",\n    fixedWidthGutter: \"renderer\",\n    theme: \"renderer\",\n    hasCssTransforms: \"renderer\",\n    maxPixelHeight: \"renderer\",\n    useTextareaForIME: \"renderer\",\n\n    scrollSpeed: \"$mouseHandler\",\n    dragDelay: \"$mouseHandler\",\n    dragEnabled: \"$mouseHandler\",\n    focusTimeout: \"$mouseHandler\",\n    tooltipFollowsMouse: \"$mouseHandler\",\n\n    firstLineNumber: \"session\",\n    overwrite: \"session\",\n    newLineMode: \"session\",\n    useWorker: \"session\",\n    useSoftTabs: \"session\",\n    navigateWithinSoftTabs: \"session\",\n    tabSize: \"session\",\n    wrap: \"session\",\n    indentedSoftWrap: \"session\",\n    foldStyle: \"session\",\n    mode: \"session\"\n});\n\n\nvar relativeNumberRenderer = {\n    getText: function(session, row) {\n        return (Math.abs(session.selection.lead.row - row) || (row + 1 + (row < 9 ? \"\\xb7\" : \"\"))) + \"\";\n    },\n    getWidth: function(session, lastLineNumber, config) {\n        return Math.max(\n            lastLineNumber.toString().length,\n            (config.lastRow + 1).toString().length,\n            2\n        ) * config.characterWidth;\n    },\n    update: function(e, editor) {\n        editor.renderer.$loop.schedule(editor.renderer.CHANGE_GUTTER);\n    },\n    attach: function(editor) {\n        editor.renderer.$gutterLayer.$renderer = this;\n        editor.on(\"changeSelection\", this.update);\n        this.update(null, editor);\n    },\n    detach: function(editor) {\n        if (editor.renderer.$gutterLayer.$renderer == this)\n            editor.renderer.$gutterLayer.$renderer = null;\n        editor.off(\"changeSelection\", this.update);\n        this.update(null, editor);\n    }\n};\n\nexports.Editor = Editor;\n","\"use strict\";\nvar LineWidgets = require(\"../line_widgets\").LineWidgets;\nvar dom = require(\"../lib/dom\");\nvar Range = require(\"../range\").Range;\n\nfunction binarySearch(array, needle, comparator) {\n    var first = 0;\n    var last = array.length - 1;\n\n    while (first <= last) {\n        var mid = (first + last) >> 1;\n        var c = comparator(needle, array[mid]);\n        if (c > 0)\n            first = mid + 1;\n        else if (c < 0)\n            last = mid - 1;\n        else\n            return mid;\n    }\n\n    // Return the nearest lesser index, \"-1\" means \"0, \"-2\" means \"1\", etc.\n    return -(first + 1);\n}\n\nfunction findAnnotations(session, row, dir) {\n    var annotations = session.getAnnotations().sort(Range.comparePoints);\n    if (!annotations.length)\n        return;\n    \n    var i = binarySearch(annotations, {row: row, column: -1}, Range.comparePoints);\n    if (i < 0)\n        i = -i - 1;\n    \n    if (i >= annotations.length)\n        i = dir > 0 ? 0 : annotations.length - 1;\n    else if (i === 0 && dir < 0)\n        i = annotations.length - 1;\n    \n    var annotation = annotations[i];\n    if (!annotation || !dir)\n        return;\n\n    if (annotation.row === row) {\n        do {\n            annotation = annotations[i += dir];\n        } while (annotation && annotation.row === row);\n        if (!annotation)\n            return annotations.slice();\n    }\n    \n    \n    var matched = [];\n    row = annotation.row;\n    do {\n        matched[dir < 0 ? \"unshift\" : \"push\"](annotation);\n        annotation = annotations[i += dir];\n    } while (annotation && annotation.row == row);\n    return matched.length && matched;\n}\n\nexports.showErrorMarker = function(editor, dir) {\n    var session = editor.session;\n    if (!session.widgetManager) {\n        session.widgetManager = new LineWidgets(session);\n        session.widgetManager.attach(editor);\n    }\n    \n    var pos = editor.getCursorPosition();\n    var row = pos.row;\n    var oldWidget = session.widgetManager.getWidgetsAtRow(row).filter(function(w) {\n        return w.type == \"errorMarker\";\n    })[0];\n    if (oldWidget) {\n        oldWidget.destroy();\n    } else {\n        row -= dir;\n    }\n    var annotations = findAnnotations(session, row, dir);\n    var gutterAnno;\n    if (annotations) {\n        var annotation = annotations[0];\n        pos.column = (annotation.pos && typeof annotation.column != \"number\"\n            ? annotation.pos.sc\n            : annotation.column) || 0;\n        pos.row = annotation.row;\n        gutterAnno = editor.renderer.$gutterLayer.$annotations[pos.row];\n    } else if (oldWidget) {\n        return;\n    } else {\n        gutterAnno = {\n            text: [\"Looks good!\"],\n            className: \"ace_ok\"\n        };\n    }\n    editor.session.unfold(pos.row);\n    editor.selection.moveToPosition(pos);\n    \n    var w = {\n        row: pos.row, \n        fixedWidth: true,\n        coverGutter: true,\n        el: dom.createElement(\"div\"),\n        type: \"errorMarker\"\n    };\n    var el = w.el.appendChild(dom.createElement(\"div\"));\n    var arrow = w.el.appendChild(dom.createElement(\"div\"));\n    arrow.className = \"error_widget_arrow \" + gutterAnno.className;\n    \n    var left = editor.renderer.$cursorLayer\n        .getPixelPosition(pos).left;\n    arrow.style.left = left + editor.renderer.gutterWidth - 5 + \"px\";\n    \n    w.el.className = \"error_widget_wrapper\";\n    el.className = \"error_widget \" + gutterAnno.className;\n    el.innerHTML = gutterAnno.text.join(\"<br>\");\n    \n    el.appendChild(dom.createElement(\"div\"));\n    \n    var kb = function(_, hashId, keyString) {\n        if (hashId === 0 && (keyString === \"esc\" || keyString === \"return\")) {\n            w.destroy();\n            return {command: \"null\"};\n        }\n    };\n    \n    w.destroy = function() {\n        if (editor.$mouseHandler.isMousePressed)\n            return;\n        editor.keyBinding.removeKeyboardHandler(kb);\n        session.widgetManager.removeLineWidget(w);\n        editor.off(\"changeSelection\", w.destroy);\n        editor.off(\"changeSession\", w.destroy);\n        editor.off(\"mouseup\", w.destroy);\n        editor.off(\"change\", w.destroy);\n    };\n    \n    editor.keyBinding.addKeyboardHandler(kb);\n    editor.on(\"changeSelection\", w.destroy);\n    editor.on(\"changeSession\", w.destroy);\n    editor.on(\"mouseup\", w.destroy);\n    editor.on(\"change\", w.destroy);\n    \n    editor.session.widgetManager.addLineWidget(w);\n    \n    w.el.onmousedown = editor.focus.bind(editor);\n    \n    editor.renderer.scrollCursorIntoView(null, 0.5, {bottom: w.el.offsetHeight});\n};\n\n\ndom.importCssString(`\n    .error_widget_wrapper {\n        background: inherit;\n        color: inherit;\n        border:none\n    }\n    .error_widget {\n        border-top: solid 2px;\n        border-bottom: solid 2px;\n        margin: 5px 0;\n        padding: 10px 40px;\n        white-space: pre-wrap;\n    }\n    .error_widget.ace_error, .error_widget_arrow.ace_error{\n        border-color: #ff5a5a\n    }\n    .error_widget.ace_warning, .error_widget_arrow.ace_warning{\n        border-color: #F1D817\n    }\n    .error_widget.ace_info, .error_widget_arrow.ace_info{\n        border-color: #5a5a5a\n    }\n    .error_widget.ace_ok, .error_widget_arrow.ace_ok{\n        border-color: #5aaa5a\n    }\n    .error_widget_arrow {\n        position: absolute;\n        border: solid 5px;\n        border-top-color: transparent!important;\n        border-right-color: transparent!important;\n        border-left-color: transparent!important;\n        top: -5px;\n    }\n`, \"error_marker.css\", false);\n","\"use strict\";\n\nvar snippetManager = require(\"../snippets\").snippetManager;\nvar Autocomplete = require(\"../autocomplete\").Autocomplete;\nvar config = require(\"../config\");\nvar lang = require(\"../lib/lang\");\nvar util = require(\"../autocomplete/util\");\n\nvar textCompleter = require(\"../autocomplete/text_completer\");\nvar keyWordCompleter = {\n    getCompletions: function(editor, session, pos, prefix, callback) {\n        if (session.$mode.completer) {\n            return session.$mode.completer.getCompletions(editor, session, pos, prefix, callback);\n        }\n        var state = editor.session.getState(pos.row);\n        var completions = session.$mode.getCompletions(state, session, pos, prefix);\n        completions = completions.map((el) => el.completerId = keyWordCompleter.id);\n        callback(null, completions);\n    },\n    id: \"keywordCompleter\"\n};\n\nvar transformSnippetTooltip = function(str) {\n    var record = {};\n    return str.replace(/\\${(\\d+)(:(.*?))?}/g, function(_, p1, p2, p3) {\n        return (record[p1] = p3 || '');\n    }).replace(/\\$(\\d+?)/g, function (_, p1) {\n        return record[p1];\n    });\n};\n\nvar snippetCompleter = {\n    getCompletions: function(editor, session, pos, prefix, callback) {\n        var scopes = [];\n\n        // set scope to html-tag if we're inside an html tag\n        var token = session.getTokenAt(pos.row, pos.column);\n        if (token && token.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\\.xml$/))\n            scopes.push('html-tag');\n        else\n            scopes = snippetManager.getActiveScopes(editor);\n\n        var snippetMap = snippetManager.snippetMap;\n        var completions = [];\n        scopes.forEach(function(scope) {\n            var snippets = snippetMap[scope] || [];\n            for (var i = snippets.length; i--;) {\n                var s = snippets[i];\n                var caption = s.name || s.tabTrigger;\n                if (!caption)\n                    continue;\n                completions.push({\n                    caption: caption,\n                    snippet: s.content,\n                    meta: s.tabTrigger && !s.name ? s.tabTrigger + \"\\u21E5 \" : \"snippet\",\n                    type: \"snippet\",\n                    completerId: snippetCompleter.id\n                });\n            }\n        }, this);\n        callback(null, completions);\n    },\n    getDocTooltip: function(item) {\n        if (item.type == \"snippet\" && !item.docHTML) {\n            item.docHTML = [\n                \"<b>\", lang.escapeHTML(item.caption), \"</b>\", \"<hr></hr>\",\n                lang.escapeHTML(transformSnippetTooltip(item.snippet))\n            ].join(\"\");\n        }\n    },\n    id: \"snippetCompleter\"\n};\n\nvar completers = [snippetCompleter, textCompleter, keyWordCompleter];\n// Modifies list of default completers\nexports.setCompleters = function(val) {\n    completers.length = 0;\n    if (val) completers.push.apply(completers, val);\n};\nexports.addCompleter = function(completer) {\n    completers.push(completer);\n};\n\n// Exports existing completer so that user can construct his own set of completers.\nexports.textCompleter = textCompleter;\nexports.keyWordCompleter = keyWordCompleter;\nexports.snippetCompleter = snippetCompleter;\n\nvar expandSnippet = {\n    name: \"expandSnippet\",\n    exec: function(editor) {\n        return snippetManager.expandWithTab(editor);\n    },\n    bindKey: \"Tab\"\n};\n\nvar onChangeMode = function(e, editor) {\n    loadSnippetsForMode(editor.session.$mode);\n};\n\nvar loadSnippetsForMode = function(mode) {\n    if (typeof mode == \"string\")\n        mode = config.$modes[mode];\n    if (!mode)\n        return;\n    if (!snippetManager.files)\n        snippetManager.files = {};\n    \n    loadSnippetFile(mode.$id, mode.snippetFileId);\n    if (mode.modes)\n        mode.modes.forEach(loadSnippetsForMode);\n};\n\nvar loadSnippetFile = function(id, snippetFilePath) {\n    if (!snippetFilePath || !id || snippetManager.files[id])\n        return;\n    snippetManager.files[id] = {};\n    config.loadModule(snippetFilePath, function(m) {\n        if (!m) return;\n        snippetManager.files[id] = m;\n        if (!m.snippets && m.snippetText)\n            m.snippets = snippetManager.parseSnippetFile(m.snippetText);\n        snippetManager.register(m.snippets || [], m.scope);\n        if (m.includeScopes) {\n            snippetManager.snippetMap[m.scope].includeScopes = m.includeScopes;\n            m.includeScopes.forEach(function(x) {\n                loadSnippetsForMode(\"ace/mode/\" + x);\n            });\n        }\n    });\n};\n\nvar doLiveAutocomplete = function(e) {\n    var editor = e.editor;\n    var hasCompleter = editor.completer && editor.completer.activated;\n\n    // We don't want to autocomplete with no prefix\n    if (e.command.name === \"backspace\") {\n        if (hasCompleter && !util.getCompletionPrefix(editor))\n            editor.completer.detach();\n    }\n    else if (e.command.name === \"insertstring\") {\n        var prefix = util.getCompletionPrefix(editor);\n        // Only autocomplete if there's a prefix that can be matched\n        if (prefix && !hasCompleter) {\n            var completer = Autocomplete.for(editor);\n            // Disable autoInsert\n            completer.autoInsert = false;\n            completer.showPopup(editor);\n        }\n    }\n};\n\nvar Editor = require(\"../editor\").Editor;\nrequire(\"../config\").defineOptions(Editor.prototype, \"editor\", {\n    enableBasicAutocompletion: {\n        set: function(val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val)? val: completers;\n                this.commands.addCommand(Autocomplete.startCommand);\n            } else {\n                this.commands.removeCommand(Autocomplete.startCommand);\n            }\n        },\n        value: false\n    },\n    /**\n     * Enable live autocompletion\n     */\n    enableLiveAutocompletion: {\n        /**\n         * @param {boolean} val\n         */\n        set: function(val) {\n            if (val) {\n                if (!this.completers)\n                    this.completers = Array.isArray(val)? val: completers;\n                // On each change automatically trigger the autocomplete\n                this.commands.on('afterExec', doLiveAutocomplete);\n            } else {\n                this.commands.removeListener('afterExec', doLiveAutocomplete);\n            }\n        },\n        value: false\n    },\n    enableSnippets: {\n        set: function(val) {\n            if (val) {\n                this.commands.addCommand(expandSnippet);\n                this.on(\"changeMode\", onChangeMode);\n                onChangeMode(null, this);\n            } else {\n                this.commands.removeCommand(expandSnippet);\n                this.off(\"changeMode\", onChangeMode);\n            }\n        },\n        value: false\n    }\n});\n","\"use strict\";\n\nvar keyUtil = require(\"../lib/keys\");\nvar useragent = require(\"../lib/useragent\");\nvar KEY_MODS = keyUtil.KEY_MODS;\n\nfunction HashHandler(config, platform) {\n    this.platform = platform || (useragent.isMac ? \"mac\" : \"win\");\n    this.commands = {};\n    this.commandKeyBinding = {};\n    this.addCommands(config);\n    this.$singleCommand = true;\n}\n\nfunction MultiHashHandler(config, platform) {\n    HashHandler.call(this, config, platform);\n    this.$singleCommand = false;\n}\n\nMultiHashHandler.prototype = HashHandler.prototype;\n\n(function() {\n    \n\n    this.addCommand = function(command) {\n        if (this.commands[command.name])\n            this.removeCommand(command);\n\n        this.commands[command.name] = command;\n\n        if (command.bindKey)\n            this._buildKeyHash(command);\n    };\n\n    this.removeCommand = function(command, keepCommand) {\n        var name = command && (typeof command === 'string' ? command : command.name);\n        command = this.commands[name];\n        if (!keepCommand)\n            delete this.commands[name];\n\n        // exhaustive search is brute force but since removeCommand is\n        // not a performance critical operation this should be OK\n        var ckb = this.commandKeyBinding;\n        for (var keyId in ckb) {\n            var cmdGroup = ckb[keyId];\n            if (cmdGroup == command) {\n                delete ckb[keyId];\n            } else if (Array.isArray(cmdGroup)) {\n                var i = cmdGroup.indexOf(command);\n                if (i != -1) {\n                    cmdGroup.splice(i, 1);\n                    if (cmdGroup.length == 1)\n                        ckb[keyId] = cmdGroup[0];\n                }\n            }\n        }\n    };\n\n    this.bindKey = function(key, command, position) {\n        if (typeof key == \"object\" && key) {\n            if (position == undefined)\n                position = key.position;\n            key = key[this.platform];\n        }\n        if (!key)\n            return;\n        if (typeof command == \"function\")\n            return this.addCommand({exec: command, bindKey: key, name: command.name || key});\n        \n        key.split(\"|\").forEach(function(keyPart) {\n            var chain = \"\";\n            if (keyPart.indexOf(\" \") != -1) {\n                var parts = keyPart.split(/\\s+/);\n                keyPart = parts.pop();\n                parts.forEach(function(keyPart) {\n                    var binding = this.parseKeys(keyPart);\n                    var id = KEY_MODS[binding.hashId] + binding.key;\n                    chain += (chain ? \" \" : \"\") + id;\n                    this._addCommandToBinding(chain, \"chainKeys\");\n                }, this);\n                chain += \" \";\n            }\n            var binding = this.parseKeys(keyPart);\n            var id = KEY_MODS[binding.hashId] + binding.key;\n            this._addCommandToBinding(chain + id, command, position);\n        }, this);\n    };\n    \n    function getPosition(command) {\n        return typeof command == \"object\" && command.bindKey\n            && command.bindKey.position \n            || (command.isDefault ? -100 : 0);\n    }\n    this._addCommandToBinding = function(keyId, command, position) {\n        var ckb = this.commandKeyBinding, i;\n        if (!command) {\n            delete ckb[keyId];\n        } else if (!ckb[keyId] || this.$singleCommand) {\n            ckb[keyId] = command;\n        } else {\n            if (!Array.isArray(ckb[keyId])) {\n                ckb[keyId] = [ckb[keyId]];\n            } else if ((i = ckb[keyId].indexOf(command)) != -1) {\n                ckb[keyId].splice(i, 1);\n            }\n            \n            if (typeof position != \"number\") {\n                position = getPosition(command);\n            }\n\n            var commands = ckb[keyId];\n            for (i = 0; i < commands.length; i++) {\n                var other = commands[i];\n                var otherPos = getPosition(other);\n                if (otherPos > position)\n                    break;\n            }\n            commands.splice(i, 0, command);\n        }\n    };\n\n    this.addCommands = function(commands) {\n        commands && Object.keys(commands).forEach(function(name) {\n            var command = commands[name];\n            if (!command)\n                return;\n            \n            if (typeof command === \"string\")\n                return this.bindKey(command, name);\n\n            if (typeof command === \"function\")\n                command = { exec: command };\n\n            if (typeof command !== \"object\")\n                return;\n\n            if (!command.name)\n                command.name = name;\n\n            this.addCommand(command);\n        }, this);\n    };\n\n    this.removeCommands = function(commands) {\n        Object.keys(commands).forEach(function(name) {\n            this.removeCommand(commands[name]);\n        }, this);\n    };\n\n    this.bindKeys = function(keyList) {\n        Object.keys(keyList).forEach(function(key) {\n            this.bindKey(key, keyList[key]);\n        }, this);\n    };\n\n    this._buildKeyHash = function(command) {\n        this.bindKey(command.bindKey, command);\n    };\n\n    // accepts keys in the form ctrl+Enter or ctrl-Enter\n    // keys without modifiers or shift only \n    this.parseKeys = function(keys) {\n        var parts = keys.toLowerCase().split(/[\\-\\+]([\\-\\+])?/).filter(function(x){return x;});\n        var key = parts.pop();\n\n        var keyCode = keyUtil[key];\n        if (keyUtil.FUNCTION_KEYS[keyCode])\n            key = keyUtil.FUNCTION_KEYS[keyCode].toLowerCase();\n        else if (!parts.length)\n            return {key: key, hashId: -1};\n        else if (parts.length == 1 && parts[0] == \"shift\")\n            return {key: key.toUpperCase(), hashId: -1};\n\n        var hashId = 0;\n        for (var i = parts.length; i--;) {\n            var modifier = keyUtil.KEY_MODS[parts[i]];\n            if (modifier == null) {\n                if (typeof console != \"undefined\")\n                    console.error(\"invalid modifier \" + parts[i] + \" in \" + keys);\n                return false;\n            }\n            hashId |= modifier;\n        }\n        return {key: key, hashId: hashId};\n    };\n\n    this.findKeyCommand = function findKeyCommand(hashId, keyString) {\n        var key = KEY_MODS[hashId] + keyString;\n        return this.commandKeyBinding[key];\n    };\n\n    this.handleKeyboard = function(data, hashId, keyString, keyCode) {\n        if (keyCode < 0) return;\n        var key = KEY_MODS[hashId] + keyString;\n        var command = this.commandKeyBinding[key];\n        if (data.$keyChain) {\n            data.$keyChain += \" \" + key;\n            command = this.commandKeyBinding[data.$keyChain] || command;\n        }\n        \n        if (command) {\n            if (command == \"chainKeys\" || command[command.length - 1] == \"chainKeys\") {\n                data.$keyChain = data.$keyChain || key;\n                return {command: \"null\"};\n            }\n        }\n        \n        if (data.$keyChain) {\n            if ((!hashId || hashId == 4) && keyString.length == 1)\n                data.$keyChain = data.$keyChain.slice(0, -key.length - 1); // wait for input\n            else if (hashId == -1 || keyCode > 0)\n                data.$keyChain = \"\"; // reset keyChain\n        }\n        return {command: command};\n    };\n    \n    this.getStatusText = function(editor, data) {\n        return data.$keyChain || \"\";\n    };\n\n}).call(HashHandler.prototype);\n\nexports.HashHandler = HashHandler;\nexports.MultiHashHandler = MultiHashHandler;\n","\"use strict\";\n\nvar keyUtil  = require(\"../lib/keys\");\nvar event = require(\"../lib/event\");\n\nvar KeyBinding = function(editor) {\n    this.$editor = editor;\n    this.$data = {editor: editor};\n    this.$handlers = [];\n    this.setDefaultHandler(editor.commands);\n};\n\n(function() {\n    this.setDefaultHandler = function(kb) {\n        this.removeKeyboardHandler(this.$defaultHandler);\n        this.$defaultHandler = kb;\n        this.addKeyboardHandler(kb, 0);\n    };\n\n    this.setKeyboardHandler = function(kb) {\n        var h = this.$handlers;\n        if (h[h.length - 1] == kb)\n            return;\n\n        while (h[h.length - 1] && h[h.length - 1] != this.$defaultHandler)\n            this.removeKeyboardHandler(h[h.length - 1]);\n\n        this.addKeyboardHandler(kb, 1);\n    };\n\n    this.addKeyboardHandler = function(kb, pos) {\n        if (!kb)\n            return;\n        if (typeof kb == \"function\" && !kb.handleKeyboard)\n            kb.handleKeyboard = kb;\n        var i = this.$handlers.indexOf(kb);\n        if (i != -1)\n            this.$handlers.splice(i, 1);\n\n        if (pos == undefined)\n            this.$handlers.push(kb);\n        else\n            this.$handlers.splice(pos, 0, kb);\n\n        if (i == -1 && kb.attach)\n            kb.attach(this.$editor);\n    };\n\n    this.removeKeyboardHandler = function(kb) {\n        var i = this.$handlers.indexOf(kb);\n        if (i == -1)\n            return false;\n        this.$handlers.splice(i, 1);\n        kb.detach && kb.detach(this.$editor);\n        return true;\n    };\n\n    this.getKeyboardHandler = function() {\n        return this.$handlers[this.$handlers.length - 1];\n    };\n    \n    this.getStatusText = function() {\n        var data = this.$data;\n        var editor = data.editor;\n        return this.$handlers.map(function(h) {\n            return h.getStatusText && h.getStatusText(editor, data) || \"\";\n        }).filter(Boolean).join(\" \");\n    };\n\n    this.$callKeyboardHandlers = function(hashId, keyString, keyCode, e) {\n        var toExecute;\n        var success = false;\n        var commands = this.$editor.commands;\n\n        for (var i = this.$handlers.length; i--;) {\n            toExecute = this.$handlers[i].handleKeyboard(\n                this.$data, hashId, keyString, keyCode, e\n            );\n            if (!toExecute || !toExecute.command)\n                continue;\n            \n            // allow keyboardHandler to consume keys\n            if (toExecute.command == \"null\") {\n                success = true;\n            } else {\n                success = commands.exec(toExecute.command, this.$editor, toExecute.args, e);\n            }\n            // do not stop input events to not break repeating\n            if (success && e && hashId != -1 && \n                toExecute.passEvent != true && toExecute.command.passEvent != true\n            ) {\n                event.stopEvent(e);\n            }\n            if (success)\n                break;\n        }\n        \n        if (!success && hashId == -1) {\n            toExecute = {command: \"insertstring\"};\n            success = commands.exec(\"insertstring\", this.$editor, keyString);\n        }\n        \n        if (success && this.$editor._signal)\n            this.$editor._signal(\"keyboardActivity\", toExecute);\n        \n        return success;\n    };\n\n    this.onCommandKey = function(e, hashId, keyCode) {\n        var keyString = keyUtil.keyCodeToString(keyCode);\n        return this.$callKeyboardHandlers(hashId, keyString, keyCode, e);\n    };\n\n    this.onTextInput = function(text) {\n        return this.$callKeyboardHandlers(-1, text);\n    };\n\n}).call(KeyBinding.prototype);\n\nexports.KeyBinding = KeyBinding;\n","\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar clipboard = require(\"../clipboard\");\nvar BROKEN_SETDATA = useragent.isChrome < 18;\nvar USE_IE_MIME_TYPE =  useragent.isIE;\nvar HAS_FOCUS_ARGS = useragent.isChrome > 63;\nvar MAX_LINE_LENGTH = 400;\n\nvar KEYS = require(\"../lib/keys\");\nvar MODS = KEYS.KEY_MODS;\nvar isIOS = useragent.isIOS;\nvar valueResetRegex = isIOS ? /\\s/ : /\\n/;\nvar isMobile = useragent.isMobile;\n\nvar TextInput = function(parentNode, host) {\n    var text = dom.createElement(\"textarea\");\n    text.className = \"ace_text-input\";\n\n    text.setAttribute(\"wrap\", \"off\");\n    text.setAttribute(\"autocorrect\", \"off\");\n    text.setAttribute(\"autocapitalize\", \"off\");\n    text.setAttribute(\"spellcheck\", false);\n\n    text.style.opacity = \"0\";\n    parentNode.insertBefore(text, parentNode.firstChild);\n\n    var copied = false;\n    var pasted = false;\n    var inComposition = false;\n    var sendingText = false;\n    var tempStyle = '';\n    \n    if (!isMobile)\n        text.style.fontSize = \"1px\";\n\n    var commandMode = false;\n    var ignoreFocusEvents = false;\n    \n    var lastValue = \"\";\n    var lastSelectionStart = 0;\n    var lastSelectionEnd = 0;\n    var lastRestoreEnd = 0;\n    \n    // FOCUS\n    // ie9 throws error if document.activeElement is accessed too soon\n    try { var isFocused = document.activeElement === text; } catch(e) {}\n    \n    event.addListener(text, \"blur\", function(e) {\n        if (ignoreFocusEvents) return;\n        host.onBlur(e);\n        isFocused = false;\n    }, host);\n    event.addListener(text, \"focus\", function(e) {\n        if (ignoreFocusEvents) return;\n        isFocused = true;\n        if (useragent.isEdge) {\n            // on edge focus event is fired even if document itself is not focused\n            try {\n                if (!document.hasFocus())\n                    return;\n            } catch(e) {}\n        }\n        host.onFocus(e);\n        if (useragent.isEdge)\n            setTimeout(resetSelection);\n        else\n            resetSelection();\n    }, host);\n    this.$focusScroll = false;\n    this.focus = function() {\n        if (tempStyle || HAS_FOCUS_ARGS || this.$focusScroll == \"browser\")\n            return text.focus({ preventScroll: true });\n\n        var top = text.style.top;\n        text.style.position = \"fixed\";\n        text.style.top = \"0px\";\n        try {\n            var isTransformed = text.getBoundingClientRect().top != 0;\n        } catch(e) {\n            // getBoundingClientRect on IE throws error if element is not in the dom tree\n            return;\n        }\n        var ancestors = [];\n        if (isTransformed) {\n            var t = text.parentElement;\n            while (t && t.nodeType == 1) {\n                ancestors.push(t);\n                t.setAttribute(\"ace_nocontext\", true);\n                if (!t.parentElement && t.getRootNode)\n                    t = t.getRootNode().host;\n                else\n                    t = t.parentElement;\n            }\n        }\n        text.focus({ preventScroll: true });\n        if (isTransformed) {\n            ancestors.forEach(function(p) {\n                p.removeAttribute(\"ace_nocontext\");\n            });\n        }\n        setTimeout(function() {\n            text.style.position = \"\";\n            if (text.style.top == \"0px\")\n                text.style.top = top;\n        }, 0);\n    };\n    this.blur = function() {\n        text.blur();\n    };\n    this.isFocused = function() {\n        return isFocused;\n    };\n    \n    host.on(\"beforeEndOperation\", function() {\n        var curOp = host.curOp;\n        var commandName = curOp && curOp.command && curOp.command.name;\n        if (commandName == \"insertstring\")\n            return;\n        var isUserAction = commandName && (curOp.docChanged || curOp.selectionChanged);\n        if (inComposition && isUserAction) {\n            // exit composition from commands other than insertstring\n            lastValue = text.value = \"\";\n            onCompositionEnd();\n        }\n        // sync value of textarea\n        resetSelection();\n    });\n    \n    var resetSelection = isIOS\n    ? function(value) {\n        if (!isFocused || (copied && !value) || sendingText) return;\n        if (!value) \n            value = \"\";\n        var newValue = \"\\n ab\" + value + \"cde fg\\n\";\n        if (newValue != text.value)\n            text.value = lastValue = newValue;\n        \n        var selectionStart = 4;\n        var selectionEnd = 4 + (value.length || (host.selection.isEmpty() ? 0 : 1));\n\n        if (lastSelectionStart != selectionStart || lastSelectionEnd != selectionEnd) {\n            text.setSelectionRange(selectionStart, selectionEnd);\n        }\n        lastSelectionStart = selectionStart;\n        lastSelectionEnd = selectionEnd;\n    }\n    : function() {\n        if (inComposition || sendingText)\n            return;\n        // modifying selection of blured textarea can focus it (chrome mac/linux)\n        if (!isFocused && !afterContextMenu)\n            return;\n        // this prevents infinite recursion on safari 8 \n        // see https://github.com/ajaxorg/ace/issues/2114\n        inComposition = true;\n        \n        var selectionStart = 0;\n        var selectionEnd = 0;\n        var line = \"\";\n\n        if (host.session) {\n            var selection = host.selection;\n            var range = selection.getRange();\n            var row = selection.cursor.row;\n            selectionStart = range.start.column;\n            selectionEnd = range.end.column;\n            line = host.session.getLine(row);\n\n            if (range.start.row != row) {\n                var prevLine = host.session.getLine(row - 1);\n                selectionStart = range.start.row < row - 1 ? 0 : selectionStart;\n                selectionEnd += prevLine.length + 1;\n                line = prevLine + \"\\n\" + line;\n            }\n            else if (range.end.row != row) {\n                var nextLine = host.session.getLine(row + 1);\n                selectionEnd = range.end.row > row  + 1 ? nextLine.length : selectionEnd;\n                selectionEnd += line.length + 1;\n                line = line + \"\\n\" + nextLine;\n            }\n            else if (isMobile && row > 0) {\n                line = \"\\n\" + line;\n                selectionEnd += 1;\n                selectionStart += 1;\n            }\n\n            if (line.length > MAX_LINE_LENGTH) {\n                if (selectionStart < MAX_LINE_LENGTH && selectionEnd < MAX_LINE_LENGTH) {\n                    line = line.slice(0, MAX_LINE_LENGTH);\n                } else {\n                    line = \"\\n\";\n                    if (selectionStart == selectionEnd) {\n                        selectionStart = selectionEnd = 0;\n                    }\n                    else {\n                        selectionStart = 0;\n                        selectionEnd = 1;\n                    }\n                }\n            }\n        }\n\n        var newValue = line + \"\\n\\n\";\n        if (newValue != lastValue) {\n            text.value = lastValue = newValue;\n            lastSelectionStart = lastSelectionEnd = newValue.length;\n        }\n        \n        // contextmenu on mac may change the selection\n        if (afterContextMenu) {\n            lastSelectionStart = text.selectionStart;\n            lastSelectionEnd = text.selectionEnd;\n        }\n        // on firefox this throws if textarea is hidden\n        if (\n            lastSelectionEnd != selectionEnd \n            || lastSelectionStart != selectionStart \n            || text.selectionEnd != lastSelectionEnd // on ie edge selectionEnd changes silently after the initialization\n        ) {\n            try {\n                text.setSelectionRange(selectionStart, selectionEnd);\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n            } catch(e){}\n        }\n        inComposition = false;\n    };\n    this.resetSelection = resetSelection;\n\n    if (isFocused)\n        host.onFocus();\n\n\n    var isAllSelected = function(text) {\n        return text.selectionStart === 0 && text.selectionEnd >= lastValue.length\n            && text.value === lastValue && lastValue\n            && text.selectionEnd !== lastSelectionEnd;\n    };\n\n    var onSelect = function(e) {\n        if (inComposition)\n            return;\n        if (copied) {\n            copied = false;\n        } else if (isAllSelected(text)) {\n            host.selectAll();\n            resetSelection();\n        } else if (isMobile && text.selectionStart != lastSelectionStart) {\n            resetSelection();\n        }\n    };\n\n    var inputHandler = null;\n    this.setInputHandler = function(cb) {inputHandler = cb;};\n    this.getInputHandler = function() {return inputHandler;};\n    var afterContextMenu = false;\n    \n    var sendText = function(value, fromInput) {\n        if (afterContextMenu)\n            afterContextMenu = false;\n        if (pasted) {\n            resetSelection();\n            if (value)\n                host.onPaste(value);\n            pasted = false;\n            return \"\";\n        } else {\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n        \n            var extendLeft = lastSelectionStart;\n            var extendRight = lastValue.length - lastSelectionEnd;\n            \n            var inserted = value;\n            var restoreStart = value.length - selectionStart;\n            var restoreEnd = value.length - selectionEnd;\n        \n            var i = 0;\n            while (extendLeft > 0 && lastValue[i] == value[i]) {\n                i++;\n                extendLeft--;\n            }\n            inserted = inserted.slice(i);\n            i = 1;\n            while (extendRight > 0 && lastValue.length - i > lastSelectionStart - 1  && lastValue[lastValue.length - i] == value[value.length - i]) {\n                i++;\n                extendRight--;\n            }\n            restoreStart -= i-1;\n            restoreEnd -= i-1;\n            var endIndex = inserted.length - i + 1;\n            if (endIndex < 0) {\n                extendLeft = -endIndex;\n                endIndex = 0;\n            } \n            inserted = inserted.slice(0, endIndex);\n            \n            // composition update can be called without any change\n            if (!fromInput && !inserted && !restoreStart && !extendLeft && !extendRight && !restoreEnd)\n                return \"\";\n            sendingText = true;\n            \n            // some android keyboards converts two spaces into sentence end, which is not useful for code\n            var shouldReset = false;\n            if (useragent.isAndroid && inserted == \". \") {\n                inserted = \"  \";\n                shouldReset = true;\n            }\n            \n            if (inserted && !extendLeft && !extendRight && !restoreStart && !restoreEnd || commandMode) {\n                host.onTextInput(inserted);\n            } else {\n                host.onTextInput(inserted, {\n                    extendLeft: extendLeft,\n                    extendRight: extendRight,\n                    restoreStart: restoreStart,\n                    restoreEnd: restoreEnd\n                });\n            }\n            sendingText = false;\n            \n            lastValue = value;\n            lastSelectionStart = selectionStart;\n            lastSelectionEnd = selectionEnd;\n            lastRestoreEnd = restoreEnd;\n            return shouldReset ? \"\\n\" : inserted;\n        }\n    };\n    var onInput = function(e) {\n        if (inComposition)\n            return onCompositionUpdate();\n        if (e && e.inputType) {\n            if (e.inputType == \"historyUndo\") return host.execCommand(\"undo\");\n            if (e.inputType == \"historyRedo\") return host.execCommand(\"redo\");\n        }\n        var data = text.value;\n        var inserted = sendText(data, true);\n        if (\n            data.length > MAX_LINE_LENGTH + 100 \n            || valueResetRegex.test(inserted)\n            || isMobile && lastSelectionStart < 1 && lastSelectionStart == lastSelectionEnd\n        ) {\n            resetSelection();\n        }\n    };\n    \n    var handleClipboardData = function(e, data, forceIEMime) {\n        var clipboardData = e.clipboardData || window.clipboardData;\n        if (!clipboardData || BROKEN_SETDATA)\n            return;\n        // using \"Text\" doesn't work on old webkit but ie needs it\n        var mime = USE_IE_MIME_TYPE || forceIEMime ? \"Text\" : \"text/plain\";\n        try {\n            if (data) {\n                // Safari 5 has clipboardData object, but does not handle setData()\n                return clipboardData.setData(mime, data) !== false;\n            } else {\n                return clipboardData.getData(mime);\n            }\n        } catch(e) {\n            if (!forceIEMime)\n                return handleClipboardData(e, data, true);\n        }\n    };\n\n    var doCopy = function(e, isCut) {\n        var data = host.getCopyText();\n        if (!data)\n            return event.preventDefault(e);\n\n        if (handleClipboardData(e, data)) {\n            if (isIOS) {\n                resetSelection(data);\n                copied = data;\n                setTimeout(function () {\n                    copied = false;\n                }, 10);\n            }\n            isCut ? host.onCut() : host.onCopy();\n            event.preventDefault(e);\n        } else {\n            copied = true;\n            text.value = data;\n            text.select();\n            setTimeout(function(){\n                copied = false;\n                resetSelection();\n                isCut ? host.onCut() : host.onCopy();\n            });\n        }\n    };\n    \n    var onCut = function(e) {\n        doCopy(e, true);\n    };\n    \n    var onCopy = function(e) {\n        doCopy(e, false);\n    };\n    \n    var onPaste = function(e) {\n        var data = handleClipboardData(e);\n        if (clipboard.pasteCancelled())\n            return;\n        if (typeof data == \"string\") {\n            if (data)\n                host.onPaste(data, e);\n            if (useragent.isIE)\n                setTimeout(resetSelection);\n            event.preventDefault(e);\n        }\n        else {\n            text.value = \"\";\n            pasted = true;\n        }\n    };\n\n    event.addCommandKeyListener(text, host.onCommandKey.bind(host), host);\n\n    event.addListener(text, \"select\", onSelect, host);\n    event.addListener(text, \"input\", onInput, host);\n\n    event.addListener(text, \"cut\", onCut, host);\n    event.addListener(text, \"copy\", onCopy, host);\n    event.addListener(text, \"paste\", onPaste, host);\n\n\n    // Opera has no clipboard events\n    if (!('oncut' in text) || !('oncopy' in text) || !('onpaste' in text)) {\n        event.addListener(parentNode, \"keydown\", function(e) {\n            if ((useragent.isMac && !e.metaKey) || !e.ctrlKey)\n                return;\n\n            switch (e.keyCode) {\n                case 67:\n                    onCopy(e);\n                    break;\n                case 86:\n                    onPaste(e);\n                    break;\n                case 88:\n                    onCut(e);\n                    break;\n            }\n        }, host);\n    }\n\n\n    // COMPOSITION\n    var onCompositionStart = function(e) {\n        if (inComposition || !host.onCompositionStart || host.$readOnly) \n            return;\n        \n        inComposition = {};\n\n        if (commandMode)\n            return;\n        \n        if (e.data)\n            inComposition.useTextareaForIME = false;\n        \n        setTimeout(onCompositionUpdate, 0);\n        host._signal(\"compositionStart\");\n        host.on(\"mousedown\", cancelComposition);\n        \n        var range = host.getSelectionRange();\n        range.end.row = range.start.row;\n        range.end.column = range.start.column;\n        inComposition.markerRange = range;\n        inComposition.selectionStart = lastSelectionStart;\n        host.onCompositionStart(inComposition);\n        \n        if (inComposition.useTextareaForIME) {\n            lastValue = text.value = \"\";\n            lastSelectionStart = 0;\n            lastSelectionEnd = 0;\n        }\n        else {\n            if (text.msGetInputContext)\n                inComposition.context = text.msGetInputContext();\n            if (text.getInputContext)\n                inComposition.context = text.getInputContext();\n        }\n    };\n\n    var onCompositionUpdate = function() {\n        if (!inComposition || !host.onCompositionUpdate || host.$readOnly)\n            return;\n        if (commandMode)\n            return cancelComposition();\n        \n        if (inComposition.useTextareaForIME) {\n            host.onCompositionUpdate(text.value);\n        }\n        else {\n            var data = text.value;\n            sendText(data);\n            if (inComposition.markerRange) {\n                if (inComposition.context) {\n                    inComposition.markerRange.start.column = inComposition.selectionStart\n                        = inComposition.context.compositionStartOffset;\n                }\n                inComposition.markerRange.end.column = inComposition.markerRange.start.column\n                    + lastSelectionEnd - inComposition.selectionStart + lastRestoreEnd;\n            }\n        }\n    };\n\n    var onCompositionEnd = function(e) {\n        if (!host.onCompositionEnd || host.$readOnly) return;\n        inComposition = false;\n        host.onCompositionEnd();\n        host.off(\"mousedown\", cancelComposition);\n        // note that resetting value of textarea at this point doesn't always work\n        // because textarea value can be silently restored\n        if (e) onInput();\n    };\n    \n\n    function cancelComposition() {\n        // force end composition\n        ignoreFocusEvents = true;\n        text.blur();\n        text.focus();\n        ignoreFocusEvents = false;\n    }\n\n    var syncComposition = lang.delayedCall(onCompositionUpdate, 50).schedule.bind(null, null);\n    \n    function onKeyup(e) {\n        // workaround for a bug in ie where pressing esc silently moves selection out of textarea\n        if (e.keyCode == 27 && text.value.length < text.selectionStart) {\n            if (!inComposition)\n                lastValue = text.value;\n            lastSelectionStart = lastSelectionEnd = -1;\n            resetSelection();\n        }\n        syncComposition();\n    }\n\n    event.addListener(text, \"compositionstart\", onCompositionStart, host);\n    event.addListener(text, \"compositionupdate\", onCompositionUpdate, host);\n    event.addListener(text, \"keyup\", onKeyup, host);\n    event.addListener(text, \"keydown\", syncComposition, host);\n    event.addListener(text, \"compositionend\", onCompositionEnd, host);\n\n    this.getElement = function() {\n        return text;\n    };\n    \n    // allows to ignore composition (used by vim keyboard handler in the normal mode)\n    // this is useful on mac, where with some keyboard layouts (e.g swedish) ^ starts composition\n    this.setCommandMode = function(value) {\n        commandMode = value;\n        text.readOnly = false;\n    };\n    \n    this.setReadOnly = function(readOnly) {\n        if (!commandMode)\n            text.readOnly = readOnly;\n    };\n\n    this.setCopyWithEmptySelection = function(value) {\n    };\n\n    this.onContextMenu = function(e) {\n        afterContextMenu = true;\n        resetSelection();\n        host._emit(\"nativecontextmenu\", {target: host, domEvent: e});\n        this.moveToMouse(e, true);\n    };\n    \n    this.moveToMouse = function(e, bringToFront) {\n        if (!tempStyle)\n            tempStyle = text.style.cssText;\n        text.style.cssText = (bringToFront ? \"z-index:100000;\" : \"\")\n            + (useragent.isIE ? \"opacity:0.1;\" : \"\")\n            + \"text-indent: -\" + (lastSelectionStart + lastSelectionEnd) * host.renderer.characterWidth * 0.5 + \"px;\";\n\n        var rect = host.container.getBoundingClientRect();\n        var style = dom.computedStyle(host.container);\n        var top = rect.top + (parseInt(style.borderTopWidth) || 0);\n        var left = rect.left + (parseInt(rect.borderLeftWidth) || 0);\n        var maxTop = rect.bottom - top - text.clientHeight -2;\n        var move = function(e) {\n            dom.translate(text, e.clientX - left - 2, Math.min(e.clientY - top - 2, maxTop));\n        }; \n        move(e);\n\n        if (e.type != \"mousedown\")\n            return;\n\n        host.renderer.$isMousePressed = true;\n\n        clearTimeout(closeTimeout);\n        // on windows context menu is opened after mouseup\n        if (useragent.isWin)\n            event.capture(host.container, move, onContextMenuClose);\n    };\n\n    this.onContextMenuClose = onContextMenuClose;\n    var closeTimeout;\n    function onContextMenuClose() {\n        clearTimeout(closeTimeout);\n        closeTimeout = setTimeout(function () {\n            if (tempStyle) {\n                text.style.cssText = tempStyle;\n                tempStyle = '';\n            }\n            host.renderer.$isMousePressed = false;\n            if (host.renderer.$keepTextAreaAtCursor)\n                host.renderer.$moveTextAreaToCursor();\n        }, 0);\n    }\n\n    var onContextMenu = function(e) {\n        host.textInput.onContextMenu(e);\n        onContextMenuClose();\n    };\n    event.addListener(text, \"mouseup\", onContextMenu, host);\n    event.addListener(text, \"mousedown\", function(e) {\n        e.preventDefault();\n        onContextMenuClose();\n    }, host);\n    event.addListener(host.renderer.scroller, \"contextmenu\", onContextMenu, host);\n    event.addListener(text, \"contextmenu\", onContextMenu, host);\n    \n    if (isIOS)\n        addIosSelectionHandler(parentNode, host, text);\n\n    function addIosSelectionHandler(parentNode, host, text) {\n        var typingResetTimeout = null;\n        var typing = false;\n\n        text.addEventListener(\"keydown\", function (e) {\n            if (typingResetTimeout) clearTimeout(typingResetTimeout);\n            typing = true;\n        }, true);\n\n        text.addEventListener(\"keyup\", function (e) {\n            typingResetTimeout = setTimeout(function () {\n                typing = false;\n            }, 100);\n        }, true);\n    \n        // IOS doesn't fire events for arrow keys, but this unique hack changes everything!\n        var detectArrowKeys = function(e) {\n            if (document.activeElement !== text) return;\n            if (typing || inComposition || host.$mouseHandler.isMousePressed) return;\n\n            if (copied) {\n                return;\n            }\n            var selectionStart = text.selectionStart;\n            var selectionEnd = text.selectionEnd;\n            \n            var key = null;\n            var modifier = 0;\n            // console.log(selectionStart, selectionEnd);\n            if (selectionStart == 0) {\n                key = KEYS.up;\n            } else if (selectionStart == 1) {\n                key = KEYS.home;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd] == \"\\n\") {\n                key = KEYS.end;\n            } else if (selectionStart < lastSelectionStart && lastValue[selectionStart - 1] == \" \") {\n                key = KEYS.left;\n                modifier = MODS.option;\n            } else if (\n                selectionStart < lastSelectionStart\n                || (\n                    selectionStart == lastSelectionStart \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.left;\n            } else if (selectionEnd > lastSelectionEnd && lastValue.slice(0, selectionEnd).split(\"\\n\").length > 2) {\n                key = KEYS.down;\n            } else if (selectionEnd > lastSelectionEnd && lastValue[selectionEnd - 1] == \" \") {\n                key = KEYS.right;\n                modifier = MODS.option;\n            } else if (\n                selectionEnd > lastSelectionEnd\n                || (\n                    selectionEnd == lastSelectionEnd \n                    && lastSelectionEnd != lastSelectionStart\n                    && selectionStart == selectionEnd\n                )\n            ) {\n                key = KEYS.right;\n            }\n            \n            if (selectionStart !== selectionEnd)\n                modifier |= MODS.shift;\n\n            if (key) {\n                var result = host.onCommandKey({}, modifier, key);\n                if (!result && host.commands) {\n                    key = KEYS.keyCodeToString(key);\n                    var command = host.commands.findKeyCommand(modifier, key);\n                    if (command)\n                        host.execCommand(command);\n                }\n                lastSelectionStart = selectionStart;\n                lastSelectionEnd = selectionEnd;\n                resetSelection(\"\");\n            }\n        };\n        // On iOS, \"selectionchange\" can only be attached to the document object...\n        document.addEventListener(\"selectionchange\", detectArrowKeys);\n        host.on(\"destroy\", function() {\n            document.removeEventListener(\"selectionchange\", detectArrowKeys);\n        });\n    }\n\n    this.destroy = function() {\n        if (text.parentElement)\n            text.parentElement.removeChild(text);\n    };\n};\n\nexports.TextInput = TextInput;\nexports.$setUserAgentForTests = function(_isMobile, _isIOS) {\n    isMobile = _isMobile;\n    isIOS = _isIOS;\n};\n","\"use strict\";\n\nvar dom = require(\"../lib/dom\");\n\nvar Cursor = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_cursor-layer\";\n    parentEl.appendChild(this.element);\n    \n    this.isVisible = false;\n    this.isBlinking = true;\n    this.blinkInterval = 1000;\n    this.smoothBlinking = false;\n\n    this.cursors = [];\n    this.cursor = this.addCursor();\n    dom.addCssClass(this.element, \"ace_hidden-cursors\");\n    this.$updateCursors = this.$updateOpacity.bind(this);\n};\n\n(function() {\n    \n    this.$updateOpacity = function(val) {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            dom.setStyle(cursors[i].style, \"opacity\", val ? \"\" : \"0\");\n    };\n\n    this.$startCssAnimation = function() {\n        var cursors = this.cursors;\n        for (var i = cursors.length; i--; )\n            cursors[i].style.animationDuration = this.blinkInterval + \"ms\";\n\n        this.$isAnimating = true;\n        setTimeout(function() {\n            if (this.$isAnimating) {\n                dom.addCssClass(this.element, \"ace_animate-blinking\");\n            }\n        }.bind(this));\n    };\n    \n    this.$stopCssAnimation = function() {\n        this.$isAnimating = false;\n        dom.removeCssClass(this.element, \"ace_animate-blinking\");\n    };\n\n    this.$padding = 0;\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n\n    this.setSession = function(session) {\n        this.session = session;\n    };\n\n    this.setBlinking = function(blinking) {\n        if (blinking != this.isBlinking) {\n            this.isBlinking = blinking;\n            this.restartTimer();\n        }\n    };\n\n    this.setBlinkInterval = function(blinkInterval) {\n        if (blinkInterval != this.blinkInterval) {\n            this.blinkInterval = blinkInterval;\n            this.restartTimer();\n        }\n    };\n\n    this.setSmoothBlinking = function(smoothBlinking) {\n        if (smoothBlinking != this.smoothBlinking) {\n            this.smoothBlinking = smoothBlinking;\n            dom.setCssClass(this.element, \"ace_smooth-blinking\", smoothBlinking);\n            this.$updateCursors(true);\n            this.restartTimer();\n        }\n    };\n\n    this.addCursor = function() {\n        var el = dom.createElement(\"div\");\n        el.className = \"ace_cursor\";\n        this.element.appendChild(el);\n        this.cursors.push(el);\n        return el;\n    };\n\n    this.removeCursor = function() {\n        if (this.cursors.length > 1) {\n            var el = this.cursors.pop();\n            el.parentNode.removeChild(el);\n            return el;\n        }\n    };\n\n    this.hideCursor = function() {\n        this.isVisible = false;\n        dom.addCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.showCursor = function() {\n        this.isVisible = true;\n        dom.removeCssClass(this.element, \"ace_hidden-cursors\");\n        this.restartTimer();\n    };\n\n    this.restartTimer = function() {\n        var update = this.$updateCursors;\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n        this.$stopCssAnimation();\n\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = false;\n            dom.removeCssClass(this.element, \"ace_smooth-blinking\");\n        }\n        \n        update(true);\n\n        if (!this.isBlinking || !this.blinkInterval || !this.isVisible) {\n            this.$stopCssAnimation();\n            return;\n        }\n\n        if (this.smoothBlinking) {\n            this.$isSmoothBlinking = true;\n            setTimeout(function() {\n                if (this.$isSmoothBlinking) {\n                    dom.addCssClass(this.element, \"ace_smooth-blinking\");\n                }\n            }.bind(this));\n        }\n        \n        if (dom.HAS_CSS_ANIMATION) {\n            this.$startCssAnimation();\n        } else {\n            var blink = function(){\n                this.timeoutId = setTimeout(function() {\n                    update(false);\n                }, 0.6 * this.blinkInterval);\n            }.bind(this);\n    \n            this.intervalId = setInterval(function() {\n                update(true);\n                blink();\n            }, this.blinkInterval);\n            blink();\n        }\n    };\n\n    this.getPixelPosition = function(position, onScreen) {\n        if (!this.config || !this.session)\n            return {left : 0, top : 0};\n\n        if (!position)\n            position = this.session.selection.getCursor();\n        var pos = this.session.documentToScreenPosition(position);\n        var cursorLeft = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, position.row)\n            ? this.session.$bidiHandler.getPosLeft(pos.column)\n            : pos.column * this.config.characterWidth);\n\n        var cursorTop = (pos.row - (onScreen ? this.config.firstRowScreen : 0)) *\n            this.config.lineHeight;\n\n        return {left : cursorLeft, top : cursorTop};\n    };\n\n    this.isCursorInView = function(pixelPos, config) {\n        return pixelPos.top >= 0 && pixelPos.top < config.maxHeight;\n    };\n\n    this.update = function(config) {\n        this.config = config;\n\n        var selections = this.session.$selectionMarkers;\n        var i = 0, cursorIndex = 0;\n\n        if (selections === undefined || selections.length === 0){\n            selections = [{cursor: null}];\n        }\n\n        for (var i = 0, n = selections.length; i < n; i++) {\n            var pixelPos = this.getPixelPosition(selections[i].cursor, true);\n            if ((pixelPos.top > config.height + config.offset ||\n                 pixelPos.top < 0) && i > 1) {\n                continue;\n            }\n\n            var element = this.cursors[cursorIndex++] || this.addCursor();\n            var style = element.style;\n            \n            if (!this.drawCursor) {\n                if (!this.isCursorInView(pixelPos, config)) {\n                    dom.setStyle(style, \"display\", \"none\");\n                } else {\n                    dom.setStyle(style, \"display\", \"block\");\n                    dom.translate(element, pixelPos.left, pixelPos.top);\n                    dom.setStyle(style, \"width\", Math.round(config.characterWidth) + \"px\");\n                    dom.setStyle(style, \"height\", config.lineHeight + \"px\");\n                }\n            } else {\n                this.drawCursor(element, pixelPos, config, selections[i], this.session);\n            }\n        }\n        while (this.cursors.length > cursorIndex)\n            this.removeCursor();\n\n        var overwrite = this.session.getOverwrite();\n        this.$setOverwrite(overwrite);\n\n        // cache for textarea and gutter highlight\n        this.$pixelPos = pixelPos;\n        this.restartTimer();\n    };\n    \n    this.drawCursor = null;\n\n    this.$setOverwrite = function(overwrite) {\n        if (overwrite != this.overwrite) {\n            this.overwrite = overwrite;\n            if (overwrite)\n                dom.addCssClass(this.element, \"ace_overwrite-cursors\");\n            else\n                dom.removeCssClass(this.element, \"ace_overwrite-cursors\");\n        }\n    };\n\n    this.destroy = function() {\n        clearInterval(this.intervalId);\n        clearTimeout(this.timeoutId);\n    };\n\n}).call(Cursor.prototype);\n\nexports.Cursor = Cursor;\n","\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar Decorator = function (parent, renderer) {\n    this.canvas = dom.createElement(\"canvas\");\n    this.renderer = renderer;\n    this.pixelRatio = 1;\n    this.maxHeight = renderer.layerConfig.maxHeight;\n    this.lineHeight = renderer.layerConfig.lineHeight;\n    this.canvasHeight = parent.parent.scrollHeight;\n    this.heightRatio = this.canvasHeight / this.maxHeight;\n    this.canvasWidth = parent.width;\n    this.minDecorationHeight = (2 * this.pixelRatio) | 0;\n    this.halfMinDecorationHeight = (this.minDecorationHeight / 2) | 0;\n\n    this.canvas.width = this.canvasWidth;\n    this.canvas.height = this.canvasHeight;\n    this.canvas.style.top = 0 + \"px\";\n    this.canvas.style.right = 0 + \"px\";\n    this.canvas.style.zIndex = 7 + \"px\";\n    this.canvas.style.position = \"absolute\";\n    this.colors = {};\n    this.colors.dark = {\n        \"error\": \"rgba(255, 18, 18, 1)\",\n        \"warning\": \"rgba(18, 136, 18, 1)\",\n        \"info\": \"rgba(18, 18, 136, 1)\"\n    };\n\n    this.colors.light = {\n        \"error\": \"rgb(255,51,51)\",\n        \"warning\": \"rgb(32,133,72)\",\n        \"info\": \"rgb(35,68,138)\"\n    };\n\n    parent.element.appendChild(this.canvas);\n\n};\n\n(function () {\n    oop.implement(this, EventEmitter);\n\n    this.$updateDecorators = function (config) {\n        var colors = (this.renderer.theme.isDark === true) ? this.colors.dark : this.colors.light;\n        if (config) {\n            this.maxHeight = config.maxHeight;\n            this.lineHeight = config.lineHeight;\n            this.canvasHeight = config.height;\n            var allLineHeight = (config.lastRow + 1) * this.lineHeight;\n            if (allLineHeight < this.canvasHeight) {\n                this.heightRatio = 1;\n            }\n            else {\n                this.heightRatio = this.canvasHeight / this.maxHeight;\n            }\n        }\n        var ctx = this.canvas.getContext(\"2d\");\n\n        function compare(a, b) {\n            if (a.priority < b.priority) return -1;\n            if (a.priority > b.priority) return 1;\n            return 0;\n        }\n\n        var annotations = this.renderer.session.$annotations;\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        if (annotations) {\n            var priorities = {\n                \"info\": 1,\n                \"warning\": 2,\n                \"error\": 3\n            };\n            annotations.forEach(function (item) {\n                item.priority = priorities[item.type] || null;\n            });\n            annotations = annotations.sort(compare);\n            var foldData = this.renderer.session.$foldData;\n\n            for (let i = 0; i < annotations.length; i++) {\n                let row = annotations[i].row;\n                let compensateFold = this.compensateFoldRows(row, foldData);\n                let currentY = Math.round((row - compensateFold) * this.lineHeight * this.heightRatio);\n                let y1 = Math.round(((row - compensateFold) * this.lineHeight * this.heightRatio));\n                let y2 = Math.round((((row - compensateFold) * this.lineHeight + this.lineHeight) * this.heightRatio));\n                const height = y2 - y1;\n                if (height < this.minDecorationHeight) {\n                    let yCenter = ((y1 + y2) / 2) | 0;\n                    if (yCenter < this.halfMinDecorationHeight) {\n                        yCenter = this.halfMinDecorationHeight;\n                    }\n                    else if (yCenter + this.halfMinDecorationHeight > this.canvasHeight) {\n                        yCenter = this.canvasHeight - this.halfMinDecorationHeight;\n                    }\n                    y1 = Math.round(yCenter - this.halfMinDecorationHeight);\n                    y2 = Math.round(yCenter + this.halfMinDecorationHeight);\n                }\n\n                ctx.fillStyle = colors[annotations[i].type] || null;\n                ctx.fillRect(0, currentY, this.canvasWidth, y2 - y1);\n            }\n        }\n        var cursor = this.renderer.session.selection.getCursor();\n        if (cursor) {\n            let compensateFold = this.compensateFoldRows(cursor.row, foldData);\n            let currentY = Math.round((cursor.row - compensateFold) * this.lineHeight * this.heightRatio);\n            ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n            ctx.fillRect(0, currentY, this.canvasWidth, 2);\n        }\n\n    };\n\n    this.compensateFoldRows = function (row, foldData) {\n        let compensateFold = 0;\n        if (foldData && foldData.length > 0) {\n            for (let j = 0; j < foldData.length; j++) {\n                if (row > foldData[j].start.row && row < foldData[j].end.row) {\n                    compensateFold += row - foldData[j].start.row;\n                }\n                else if (row >= foldData[j].end.row) {\n                    compensateFold += foldData[j].end.row - foldData[j].start.row;\n                }\n            }\n        }\n        return compensateFold;\n    };\n}.call(Decorator.prototype));\n\nexports.Decorator = Decorator;","var oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar DEFAULT_CHAR_COUNT = 250;\nvar USE_OBSERVER = typeof ResizeObserver == \"function\";\nvar L = 200;\n\nvar FontMetrics = exports.FontMetrics = function(parentEl, charCount) {\n    this.charCount = charCount || DEFAULT_CHAR_COUNT;\n\n    this.el = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.el.style, true);\n\n    this.$main = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$main.style);\n\n    this.$measureNode = dom.createElement(\"div\");\n    this.$setMeasureNodeStyles(this.$measureNode.style);\n\n    this.el.appendChild(this.$main);\n    this.el.appendChild(this.$measureNode);\n    parentEl.appendChild(this.el);\n\n    this.$measureNode.textContent = lang.stringRepeat(\"X\", this.charCount);\n\n    this.$characterSize = {width: 0, height: 0};\n\n    if (USE_OBSERVER)\n        this.$addObserver();\n    else\n        this.checkForSizeChanges();\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.$characterSize = {width: 0, height: 0};\n\n    this.$setMeasureNodeStyles = function(style, isRoot) {\n        style.width = style.height = \"auto\";\n        style.left = style.top = \"0px\";\n        style.visibility = \"hidden\";\n        style.position = \"absolute\";\n        style.whiteSpace = \"pre\";\n\n        if (useragent.isIE < 8) {\n            style[\"font-family\"] = \"inherit\";\n        } else {\n            style.font = \"inherit\";\n        }\n        style.overflow = isRoot ? \"hidden\" : \"visible\";\n    };\n\n    this.checkForSizeChanges = function(size) {\n        if (size === undefined)\n            size = this.$measureSizes();\n        if (size && (this.$characterSize.width !== size.width || this.$characterSize.height !== size.height)) {\n            this.$measureNode.style.fontWeight = \"bold\";\n            var boldSize = this.$measureSizes();\n            this.$measureNode.style.fontWeight = \"\";\n            this.$characterSize = size;\n            this.charSizes = Object.create(null);\n            this.allowBoldFonts = boldSize && boldSize.width === size.width && boldSize.height === size.height;\n            this._emit(\"changeCharacterSize\", {data: size});\n        }\n    };\n\n    this.$addObserver = function() {\n        var self = this;\n        this.$observer = new window.ResizeObserver(function(e) {\n            // e[0].contentRect is broken on safari when zoomed;\n            self.checkForSizeChanges();\n        });\n        this.$observer.observe(this.$measureNode);\n    };\n\n    this.$pollSizeChanges = function() {\n        if (this.$pollSizeChangesTimer || this.$observer)\n            return this.$pollSizeChangesTimer;\n        var self = this;\n\n        return this.$pollSizeChangesTimer = event.onIdle(function cb() {\n            self.checkForSizeChanges();\n            event.onIdle(cb, 500);\n        }, 500);\n    };\n\n    this.setPolling = function(val) {\n        if (val) {\n            this.$pollSizeChanges();\n        } else if (this.$pollSizeChangesTimer) {\n            clearInterval(this.$pollSizeChangesTimer);\n            this.$pollSizeChangesTimer = 0;\n        }\n    };\n\n    this.$measureSizes = function(node) {\n        node = node || this.$measureNode;\n\n        // Avoid `Element.clientWidth` since it is rounded to an integer (see\n        // https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth).\n        // Using it here can result in a noticeable cursor offset for long lines.\n        const rect = node.getBoundingClientRect();\n        const charSize = {\n            height: rect.height,\n            width: rect.width / this.charCount\n        };\n\n        // Size and width can be null if the editor is not visible or\n        // detached from the document\n        if (charSize.width === 0 || charSize.height === 0)\n            return null;\n        return charSize;\n    };\n\n    this.$measureCharWidth = function(ch) {\n        this.$main.textContent = lang.stringRepeat(ch, this.charCount);\n        // Avoid `Element.clientWidth` since it is rounded to an integer (see\n        // https://developer.mozilla.org/en-US/docs/Web/API/Element/clientWidth).\n        var rect = this.$main.getBoundingClientRect();\n        return rect.width / this.charCount;\n    };\n\n    this.getCharacterWidth = function(ch) {\n        var w = this.charSizes[ch];\n        if (w === undefined) {\n            w = this.charSizes[ch] = this.$measureCharWidth(ch) / this.$characterSize.width;\n        }\n        return w;\n    };\n\n    this.destroy = function() {\n        clearInterval(this.$pollSizeChangesTimer);\n        if (this.$observer)\n            this.$observer.disconnect();\n        if (this.el && this.el.parentNode)\n            this.el.parentNode.removeChild(this.el);\n    };\n\n\n    this.$getZoom = function getZoom(element) {\n        if (!element || !element.parentElement) return 1;\n        return (window.getComputedStyle(element).zoom || 1) * getZoom(element.parentElement);\n    };\n    this.$initTransformMeasureNodes = function() {\n        var t = function(t, l) {\n            return [\"div\", {\n                style: \"position: absolute;top:\" + t + \"px;left:\" + l + \"px;\"\n            }];\n        };\n        this.els = dom.buildDom([t(0, 0), t(L, 0), t(0, L), t(L, L)], this.el);\n    };\n    // general transforms from element coordinates x to screen coordinates u have the form\n    // | m1[0] m2[0] t[0] |   | x |       | u |\n    // | m1[1] m2[1] t[1] | . | y |  == k | v |\n    // | h[0]  h[1]  1    |   | 1 |       | 1 |\n    // this function finds the coeeficients of the matrix using positions of four points\n    //  \n    this.transformCoordinates = function(clientPos, elPos) {\n        if (clientPos) {\n            var zoom = this.$getZoom(this.el);\n            clientPos = mul(1 / zoom, clientPos);\n        }\n        function solve(l1, l2, r) {\n            var det = l1[1] * l2[0] - l1[0] * l2[1];\n            return [\n                (-l2[1] * r[0] + l2[0] * r[1]) / det,\n                (+l1[1] * r[0] - l1[0] * r[1]) / det\n            ];\n        }\n        function sub(a, b) { return [a[0] - b[0], a[1] - b[1]]; }\n        function add(a, b) { return [a[0] + b[0], a[1] + b[1]]; }\n        function mul(a, b) { return [a * b[0], a * b[1]]; }\n\n        if (!this.els)\n            this.$initTransformMeasureNodes();\n\n        function p(el) {\n            var r = el.getBoundingClientRect();\n            return [r.left, r.top];\n        }\n\n        var a = p(this.els[0]);\n        var b = p(this.els[1]);\n        var c = p(this.els[2]);\n        var d = p(this.els[3]);\n\n        var h = solve(sub(d, b), sub(d, c), sub(add(b, c), add(d, a)));\n\n        var m1 = mul(1 + h[0], sub(b, a));\n        var m2 = mul(1 + h[1], sub(c, a));\n\n        if (elPos) {\n            var x = elPos;\n            var k = h[0] * x[0] / L + h[1] * x[1] / L + 1;\n            var ut = add(mul(x[0], m1), mul(x[1], m2));\n            return  add(mul(1 / k / L, ut), a);\n        }\n        var u = sub(clientPos, a);\n        var f = solve(sub(m1, mul(h[0], u)), sub(m2, mul(h[1], u)), u);\n        return mul(L, f);\n    };\n\n}).call(FontMetrics.prototype);\n","\"use strict\";\n\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\nvar Lines = require(\"./lines\").Lines;\n\nvar Gutter = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_gutter-layer\";\n    parentEl.appendChild(this.element);\n    this.setShowFoldWidgets(this.$showFoldWidgets);\n    \n    this.gutterWidth = 0;\n\n    this.$annotations = [];\n    this.$updateAnnotations = this.$updateAnnotations.bind(this);\n    \n    this.$lines = new Lines(this.element);\n    this.$lines.$offsetCoefficient = 1;\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.off(\"change\", this.$updateAnnotations);\n        this.session = session;\n        if (session)\n            session.on(\"change\", this.$updateAnnotations);\n    };\n\n    this.addGutterDecoration = function(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.addGutterDecoration\");\n        this.session.addGutterDecoration(row, className);\n    };\n\n    this.removeGutterDecoration = function(row, className) {\n        if (window.console)\n            console.warn && console.warn(\"deprecated use session.removeGutterDecoration\");\n        this.session.removeGutterDecoration(row, className);\n    };\n\n    this.setAnnotations = function(annotations) {\n        // iterate over sparse array\n        this.$annotations = [];\n        for (var i = 0; i < annotations.length; i++) {\n            var annotation = annotations[i];\n            var row = annotation.row;\n            var rowInfo = this.$annotations[row];\n            if (!rowInfo)\n                rowInfo = this.$annotations[row] = {text: []};\n           \n            var annoText = annotation.text;\n            annoText = annoText ? lang.escapeHTML(annoText) : annotation.html || \"\";\n\n            if (rowInfo.text.indexOf(annoText) === -1)\n                rowInfo.text.push(annoText);\n\n            var type = annotation.type;\n            var className = annotation.className;\n            if (className) \n                rowInfo.className = className;\n            else if (type == \"error\")\n                rowInfo.className = \" ace_error\";\n            else if (type == \"warning\" && rowInfo.className != \" ace_error\")\n                rowInfo.className = \" ace_warning\";\n            else if (type == \"info\" && (!rowInfo.className))\n                rowInfo.className = \" ace_info\";\n        }\n    };\n\n    this.$updateAnnotations = function (delta) {\n        if (!this.$annotations.length)\n            return;\n        var firstRow = delta.start.row;\n        var len = delta.end.row - firstRow;\n        if (len === 0) {\n            // do nothing\n        } else if (delta.action == 'remove') {\n            this.$annotations.splice(firstRow, len + 1, null);\n        } else {\n            var args = new Array(len + 1);\n            args.unshift(firstRow, 1);\n            this.$annotations.splice.apply(this.$annotations, args);\n        }\n    };\n\n    this.update = function(config) {\n        this.config = config;\n        \n        var session = this.session;\n        var firstRow = config.firstRow;\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            session.getLength() - 1);\n            \n        this.oldLastRow = lastRow;\n        this.config = config;\n        \n        this.$lines.moveContainer(config);\n        this.$updateCursorRow();\n            \n        var fold = session.getNextFoldLine(firstRow);\n        var foldStart = fold ? fold.start.row : Infinity;\n\n        var cell = null;\n        var index = -1;\n        var row = firstRow;\n        \n        while (true) {\n            if (row > foldStart) {\n                row = fold.end.row + 1;\n                fold = session.getNextFoldLine(row, fold);\n                foldStart = fold ? fold.start.row : Infinity;\n            }\n            if (row > lastRow) {\n                while (this.$lines.getLength() > index + 1)\n                    this.$lines.pop();\n                    \n                break;\n            }\n\n            cell = this.$lines.get(++index);\n            if (cell) {\n                cell.row = row;\n            } else {\n                cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n                this.$lines.push(cell);\n            }\n\n            this.$renderCell(cell, config, fold, row);\n            row++;\n        }\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n\n    this.$updateGutterWidth = function(config) {\n        var session = this.session;\n        \n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        \n        var firstLineNumber = session.$firstLineNumber;\n        var lastLineText = this.$lines.last() ? this.$lines.last().text : \"\";\n        \n        if (this.$fixedWidth || session.$useWrapMode)\n            lastLineText = session.getLength() + firstLineNumber - 1;\n\n        var gutterWidth = gutterRenderer \n            ? gutterRenderer.getWidth(session, lastLineText, config)\n            : lastLineText.toString().length * config.characterWidth;\n        \n        var padding = this.$padding || this.$computePadding();\n        gutterWidth += padding.left + padding.right;\n        if (gutterWidth !== this.gutterWidth && !isNaN(gutterWidth)) {\n            this.gutterWidth = gutterWidth;\n            this.element.parentNode.style.width = \n            this.element.style.width = Math.ceil(this.gutterWidth) + \"px\";\n            this._signal(\"changeGutterWidth\", gutterWidth);\n        }\n    };\n    \n    this.$updateCursorRow = function() {\n        if (!this.$highlightGutterLine)\n            return;\n            \n        var position = this.session.selection.getCursor();\n        if (this.$cursorRow === position.row)\n            return;\n        \n        this.$cursorRow = position.row;\n    };\n    \n    this.updateLineHighlight = function() {\n        if (!this.$highlightGutterLine)\n            return;\n        var row = this.session.selection.cursor.row;\n        this.$cursorRow = row;\n\n        if (this.$cursorCell && this.$cursorCell.row == row)\n            return;\n        if (this.$cursorCell)\n            this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n        var cells = this.$lines.cells;\n        this.$cursorCell = null;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            if (cell.row >= this.$cursorRow) {\n                if (cell.row > this.$cursorRow) {\n                    var fold = this.session.getFoldLine(this.$cursorRow);\n                    if (i > 0 && fold && fold.start.row == cells[i - 1].row)\n                        cell = cells[i - 1];\n                    else\n                        break;\n                }\n                cell.element.className = \"ace_gutter-active-line \" + cell.element.className;\n                this.$cursorCell = cell;\n                break;\n            }\n        }\n    };\n    \n    this.scrollLines = function(config) {\n        var oldConfig = this.config;\n        this.config = config;\n        \n        this.$updateCursorRow();\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n        \n        this.$lines.moveContainer(config);\n\n        var lastRow = Math.min(config.lastRow + config.gutterOffset,  // needed to compensate for hor scollbar\n            this.session.getLength() - 1);\n        var oldLastRow = this.oldLastRow;\n        this.oldLastRow = lastRow;\n        \n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldLastRow > lastRow)\n            for (var row=this.session.getFoldedRowCount(lastRow + 1, oldLastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLines(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (lastRow > oldLastRow) {\n            this.$lines.push(this.$renderLines(config, oldLastRow + 1, lastRow));\n        }\n        \n        this.updateLineHighlight();\n        \n        this._signal(\"afterRender\");\n        this.$updateGutterWidth(config);\n    };\n\n    this.$renderLines = function(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var cell = this.$lines.createCell(row, config, this.session, onCreateCell);\n            this.$renderCell(cell, config, foldLine, row);\n            fragment.push(cell);\n\n            row++;\n        }\n        return fragment;\n    };\n    \n    this.$renderCell = function(cell, config, fold, row) {\n        var element = cell.element;\n        \n        var session = this.session;\n        \n        var textNode = element.childNodes[0];\n        var foldWidget = element.childNodes[1];\n\n        var firstLineNumber = session.$firstLineNumber;\n        \n        var breakpoints = session.$breakpoints;\n        var decorations = session.$decorations;\n        var gutterRenderer = session.gutterRenderer || this.$renderer;\n        var foldWidgets = this.$showFoldWidgets && session.foldWidgets;\n        var foldStart = fold ? fold.start.row : Number.MAX_VALUE;\n        \n        var className = \"ace_gutter-cell \";\n        if (this.$highlightGutterLine) {\n            if (row == this.$cursorRow || (fold && row < this.$cursorRow && row >= foldStart &&  this.$cursorRow <= fold.end.row)) {\n                className += \"ace_gutter-active-line \";\n                if (this.$cursorCell != cell) {\n                    if (this.$cursorCell)\n                        this.$cursorCell.element.className = this.$cursorCell.element.className.replace(\"ace_gutter-active-line \", \"\");\n                    this.$cursorCell = cell;\n                }\n            }\n        }\n        \n        if (breakpoints[row])\n            className += breakpoints[row];\n        if (decorations[row])\n            className += decorations[row];\n        if (this.$annotations[row])\n            className += this.$annotations[row].className;\n        if (element.className != className)\n            element.className = className;\n\n        if (foldWidgets) {\n            var c = foldWidgets[row];\n            // check if cached value is invalidated and we need to recompute\n            if (c == null)\n                c = foldWidgets[row] = session.getFoldWidget(row);\n        }\n\n        if (c) {\n            var className = \"ace_fold-widget ace_\" + c;\n            if (c == \"start\" && row == foldStart && row < fold.end.row)\n                className += \" ace_closed\";\n            else\n                className += \" ace_open\";\n            if (foldWidget.className != className)\n                foldWidget.className = className;\n\n            var foldHeight = config.lineHeight + \"px\";\n            dom.setStyle(foldWidget.style, \"height\", foldHeight);\n            dom.setStyle(foldWidget.style, \"display\", \"inline-block\");\n        } else {\n            if (foldWidget) {\n                dom.setStyle(foldWidget.style, \"display\", \"none\");\n            }\n        }\n        \n        var text = (gutterRenderer\n            ? gutterRenderer.getText(session, row)\n            : row + firstLineNumber).toString();\n            \n        if (text !== textNode.data) {\n            textNode.data = text;\n        }\n        \n        dom.setStyle(cell.element.style, \"height\", this.$lines.computeLineHeight(row, config, session) + \"px\");\n        dom.setStyle(cell.element.style, \"top\", this.$lines.computeLineTop(row, config, session) + \"px\");\n        \n        cell.text = text;\n        return cell;\n    };\n\n    this.$fixedWidth = false;\n    \n    this.$highlightGutterLine = true;\n    this.$renderer = \"\";\n    this.setHighlightGutterLine = function(highlightGutterLine) {\n        this.$highlightGutterLine = highlightGutterLine;\n    };\n    \n    this.$showLineNumbers = true;\n    this.$renderer = \"\";\n    this.setShowLineNumbers = function(show) {\n        this.$renderer = !show && {\n            getWidth: function() {return 0;},\n            getText: function() {return \"\";}\n        };\n    };\n    \n    this.getShowLineNumbers = function() {\n        return this.$showLineNumbers;\n    };\n    \n    this.$showFoldWidgets = true;\n    this.setShowFoldWidgets = function(show) {\n        if (show)\n            dom.addCssClass(this.element, \"ace_folding-enabled\");\n        else\n            dom.removeCssClass(this.element, \"ace_folding-enabled\");\n\n        this.$showFoldWidgets = show;\n        this.$padding = null;\n    };\n    \n    this.getShowFoldWidgets = function() {\n        return this.$showFoldWidgets;\n    };\n\n    this.$computePadding = function() {\n        if (!this.element.firstChild)\n            return {left: 0, right: 0};\n        var style = dom.computedStyle(this.element.firstChild);\n        this.$padding = {};\n        this.$padding.left = (parseInt(style.borderLeftWidth) || 0)\n            + (parseInt(style.paddingLeft) || 0) + 1;\n        this.$padding.right = (parseInt(style.borderRightWidth) || 0)\n            + (parseInt(style.paddingRight) || 0);\n        return this.$padding;\n    };\n\n    this.getRegion = function(point) {\n        var padding = this.$padding || this.$computePadding();\n        var rect = this.element.getBoundingClientRect();\n        if (point.x < padding.left + rect.left)\n            return \"markers\";\n        if (this.$showFoldWidgets && point.x > rect.right - padding.right)\n            return \"foldWidgets\";\n    };\n\n}).call(Gutter.prototype);\n\nfunction onCreateCell(element) {\n    var textNode = document.createTextNode('');\n    element.appendChild(textNode);\n    \n    var foldWidget = dom.createElement(\"span\");\n    element.appendChild(foldWidget);\n    \n    return element;\n}\n\nexports.Gutter = Gutter;\n","\"use strict\";\n\nvar dom = require(\"../lib/dom\");\n\nvar Lines = function(element, canvasHeight) {\n    this.element = element;\n    this.canvasHeight = canvasHeight || 500000;\n    this.element.style.height = (this.canvasHeight * 2) + \"px\";\n    \n    this.cells = [];\n    this.cellCache = [];\n    this.$offsetCoefficient = 0;\n};\n\n(function() {\n    \n    this.moveContainer = function(config) {\n        dom.translate(this.element, 0, -((config.firstRowScreen * config.lineHeight) % this.canvasHeight) - config.offset * this.$offsetCoefficient);\n    };    \n    \n    this.pageChanged = function(oldConfig, newConfig) {\n        return (\n            Math.floor((oldConfig.firstRowScreen * oldConfig.lineHeight) / this.canvasHeight) !==\n            Math.floor((newConfig.firstRowScreen * newConfig.lineHeight) / this.canvasHeight)\n        );\n    };\n    \n    this.computeLineTop = function(row, config, session) {\n        var screenTop = config.firstRowScreen * config.lineHeight;\n        var screenPage = Math.floor(screenTop / this.canvasHeight);\n        var lineTop = session.documentToScreenRow(row, 0) * config.lineHeight;\n        return lineTop - (screenPage * this.canvasHeight);\n    };\n    \n    this.computeLineHeight = function(row, config, session) {\n        return config.lineHeight * session.getRowLineCount(row);\n    };\n    \n    this.getLength = function() {\n        return this.cells.length;\n    };\n    \n    this.get = function(index) {\n        return this.cells[index];\n    };\n    \n    this.shift = function() {\n        this.$cacheCell(this.cells.shift());\n    };\n    \n    this.pop = function() {\n        this.$cacheCell(this.cells.pop());\n    };\n    \n    this.push = function(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.push.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            this.element.appendChild(fragment);\n        } else {\n            this.cells.push(cell);\n            this.element.appendChild(cell.element);\n        }\n    };\n    \n    this.unshift = function(cell) {\n        if (Array.isArray(cell)) {\n            this.cells.unshift.apply(this.cells, cell);\n            var fragment = dom.createFragment(this.element);\n            for (var i=0; i<cell.length; i++) {\n                fragment.appendChild(cell[i].element);\n            }\n            if (this.element.firstChild)\n                this.element.insertBefore(fragment, this.element.firstChild);\n            else\n                this.element.appendChild(fragment);\n        } else {\n            this.cells.unshift(cell);\n            this.element.insertAdjacentElement(\"afterbegin\", cell.element);\n        }\n    };\n    \n    this.last = function() {\n        if (this.cells.length)\n            return this.cells[this.cells.length-1];\n        else\n            return null;\n    };\n    \n    this.$cacheCell = function(cell) {\n        if (!cell)\n            return;\n            \n        cell.element.remove();\n        this.cellCache.push(cell);\n    };\n    \n    this.createCell = function(row, config, session, initElement) {\n        var cell = this.cellCache.pop();\n        if (!cell) {\n            var element = dom.createElement(\"div\");\n            if (initElement)\n                initElement(element);\n            \n            this.element.appendChild(element);\n            \n            cell = {\n                element: element,\n                text: \"\",\n                row: row\n            };\n        }\n        cell.row = row;\n        \n        return cell;\n    };\n    \n}).call(Lines.prototype);\n\nexports.Lines = Lines;\n","\"use strict\";\n\nvar Range = require(\"../range\").Range;\nvar dom = require(\"../lib/dom\");\n\nvar Marker = function(parentEl) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_marker-layer\";\n    parentEl.appendChild(this.element);\n};\n\n(function() {\n\n    this.$padding = 0;\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n    };\n    this.setSession = function(session) {\n        this.session = session;\n    };\n    \n    this.setMarkers = function(markers) {\n        this.markers = markers;\n    };\n    \n    this.elt = function(className, css) {\n        var x = this.i != -1 && this.element.childNodes[this.i];\n        if (!x) {\n            x = document.createElement(\"div\");\n            this.element.appendChild(x);\n            this.i = -1;\n        } else {\n            this.i++;\n        }\n        x.style.cssText = css;\n        x.className = className;\n    };\n\n    this.update = function(config) {\n        if (!config) return;\n\n        this.config = config;\n\n        this.i = 0;\n        var html;\n        for (var key in this.markers) {\n            var marker = this.markers[key];\n\n            if (!marker.range) {\n                marker.update(html, this, this.session, config);\n                continue;\n            }\n\n            var range = marker.range.clipRows(config.firstRow, config.lastRow);\n            if (range.isEmpty()) continue;\n\n            range = range.toScreenRange(this.session);\n            if (marker.renderer) {\n                var top = this.$getTop(range.start.row, config);\n                var left = this.$padding + range.start.column * config.characterWidth;\n                marker.renderer(html, range, left, top, config);\n            } else if (marker.type == \"fullLine\") {\n                this.drawFullLineMarker(html, range, marker.clazz, config);\n            } else if (marker.type == \"screenLine\") {\n                this.drawScreenLineMarker(html, range, marker.clazz, config);\n            } else if (range.isMultiLine()) {\n                if (marker.type == \"text\")\n                    this.drawTextMarker(html, range, marker.clazz, config);\n                else\n                    this.drawMultiLineMarker(html, range, marker.clazz, config);\n            } else {\n                this.drawSingleLineMarker(html, range, marker.clazz + \" ace_start\" + \" ace_br15\", config);\n            }\n        }\n        if (this.i !=-1) {\n            while (this.i < this.element.childElementCount)\n                this.element.removeChild(this.element.lastChild);\n        }\n    };\n\n    this.$getTop = function(row, layerConfig) {\n        return (row - layerConfig.firstRowScreen) * layerConfig.lineHeight;\n    };\n\n    function getBorderClass(tl, tr, br, bl) {\n        return (tl ? 1 : 0) | (tr ? 2 : 0) | (br ? 4 : 0) | (bl ? 8 : 0);\n    }\n    // Draws a marker, which spans a range of text on multiple lines \n    this.drawTextMarker = function(stringBuilder, range, clazz, layerConfig, extraStyle) {\n        var session = this.session;\n        var start = range.start.row;\n        var end = range.end.row;\n        var row = start;\n        var prev = 0; \n        var curr = 0;\n        var next = session.getScreenLastRowColumn(row);\n        var lineRange = new Range(row, range.start.column, row, curr);\n        for (; row <= end; row++) {\n            lineRange.start.row = lineRange.end.row = row;\n            lineRange.start.column = row == start ? range.start.column : session.getRowWrapIndent(row);\n            lineRange.end.column = next;\n            prev = curr;\n            curr = next;\n            next = row + 1 < end ? session.getScreenLastRowColumn(row + 1) : row == end ? 0 : range.end.column;\n            this.drawSingleLineMarker(stringBuilder, lineRange, \n                clazz + (row == start  ? \" ace_start\" : \"\") + \" ace_br\"\n                    + getBorderClass(row == start || row == start + 1 && range.start.column, prev < curr, curr > next, row == end),\n                layerConfig, row == end ? 0 : 1, extraStyle);\n        }\n    };\n\n    // Draws a multi line marker, where lines span the full width\n    this.drawMultiLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        // from selection start to the end of the line\n        var padding = this.$padding;\n        var height = config.lineHeight;\n        var top = this.$getTop(range.start.row, config);\n        var left = padding + range.start.column * config.characterWidth;\n        extraStyle = extraStyle || \"\";\n\n        if (this.session.$bidiHandler.isBidiRow(range.start.row)) {\n           var range1 = range.clone();\n           range1.end.row = range1.start.row;\n           range1.end.column = this.session.getLine(range1.start.row).length;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br1 ace_start\", config, null, extraStyle);\n        } else {\n            this.elt(\n                clazz + \" ace_br1 ace_start\",\n                \"height:\"+ height+ \"px;\"+ \"right:0;\"+ \"top:\"+top+ \"px;left:\"+ left+ \"px;\" + (extraStyle || \"\")\n            );\n        }\n        // from start of the last line to the selection end\n        if (this.session.$bidiHandler.isBidiRow(range.end.row)) {\n           var range1 = range.clone();\n           range1.start.row = range1.end.row;\n           range1.start.column = 0;\n           this.drawBidiSingleLineMarker(stringBuilder, range1, clazz + \" ace_br12\", config, null, extraStyle);\n        } else {\n            top = this.$getTop(range.end.row, config);\n            var width = range.end.column * config.characterWidth;\n\n            this.elt(\n                clazz + \" ace_br12\",\n                \"height:\"+ height+ \"px;\"+\n                \"width:\"+ width+ \"px;\"+\n                \"top:\"+ top+ \"px;\"+\n                \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n            );\n        }\n        // all the complete lines\n        height = (range.end.row - range.start.row - 1) * config.lineHeight;\n        if (height <= 0)\n            return;\n        top = this.$getTop(range.start.row + 1, config);\n        \n        var radiusClass = (range.start.column ? 1 : 0) | (range.end.column ? 0 : 8);\n\n        this.elt(\n            clazz + (radiusClass ? \" ace_br\" + radiusClass : \"\"),\n            \"height:\"+ height+ \"px;\"+\n            \"right:0;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ padding+ \"px;\"+ (extraStyle || \"\")\n        );\n    };\n\n    // Draws a marker which covers part or whole width of a single screen line\n    this.drawSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        if (this.session.$bidiHandler.isBidiRow(range.start.row))\n            return this.drawBidiSingleLineMarker(stringBuilder, range, clazz, config, extraLength, extraStyle);\n        var height = config.lineHeight;\n        var width = (range.end.column + (extraLength || 0) - range.start.column) * config.characterWidth;\n\n        var top = this.$getTop(range.start.row, config);\n        var left = this.$padding + range.start.column * config.characterWidth;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"width:\"+ width+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:\"+ left+ \"px;\"+ (extraStyle || \"\")\n        );\n    };\n\n    // Draws Bidi marker which covers part or whole width of a single screen line\n    this.drawBidiSingleLineMarker = function(stringBuilder, range, clazz, config, extraLength, extraStyle) {\n        var height = config.lineHeight, top = this.$getTop(range.start.row, config), padding = this.$padding;\n        var selections = this.session.$bidiHandler.getSelections(range.start.column, range.end.column);\n\n        selections.forEach(function(selection) {\n            this.elt(\n                clazz,\n                \"height:\" + height + \"px;\" +\n                \"width:\" + selection.width + (extraLength || 0) + \"px;\" +\n                \"top:\" + top + \"px;\" +\n                \"left:\" + (padding + selection.left) + \"px;\" + (extraStyle || \"\")\n            );\n        }, this);\n    };\n\n    this.drawFullLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n        if (range.start.row != range.end.row)\n            height += this.$getTop(range.end.row, config) - top;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    };\n    \n    this.drawScreenLineMarker = function(stringBuilder, range, clazz, config, extraStyle) {\n        var top = this.$getTop(range.start.row, config);\n        var height = config.lineHeight;\n\n        this.elt(\n            clazz,\n            \"height:\"+ height+ \"px;\"+\n            \"top:\"+ top+ \"px;\"+\n            \"left:0;right:0;\"+ (extraStyle || \"\")\n        );\n    };\n\n}).call(Marker.prototype);\n\nexports.Marker = Marker;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar dom = require(\"../lib/dom\");\nvar lang = require(\"../lib/lang\");\nvar Lines = require(\"./lines\").Lines;\nvar EventEmitter = require(\"../lib/event_emitter\").EventEmitter;\n\nvar Text = function(parentEl) {\n    this.dom = dom;\n    this.element = this.dom.createElement(\"div\");\n    this.element.className = \"ace_layer ace_text-layer\";\n    parentEl.appendChild(this.element);\n    this.$updateEolChar = this.$updateEolChar.bind(this);\n    this.$lines = new Lines(this.element);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    this.EOF_CHAR = \"\\xB6\";\n    this.EOL_CHAR_LF = \"\\xAC\";\n    this.EOL_CHAR_CRLF = \"\\xa4\";\n    this.EOL_CHAR = this.EOL_CHAR_LF;\n    this.TAB_CHAR = \"\\u2014\"; //\"\\u21E5\";\n    this.SPACE_CHAR = \"\\xB7\";\n    this.$padding = 0;\n    this.MAX_LINE_LENGTH = 10000;\n    // Smaller chunks result in higher cursor precision at the cost of more DOM nodes\n    this.MAX_CHUNK_LENGTH = 250;\n\n    this.$updateEolChar = function() {\n        var doc = this.session.doc;\n        var unixMode = doc.getNewLineCharacter() == \"\\n\" && doc.getNewLineMode() != \"windows\";\n        var EOL_CHAR = unixMode ? this.EOL_CHAR_LF : this.EOL_CHAR_CRLF;\n        if (this.EOL_CHAR != EOL_CHAR) {\n            this.EOL_CHAR = EOL_CHAR;\n            return true;\n        }\n    };\n\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.element.style.margin = \"0 \" + padding + \"px\";\n    };\n\n    this.getLineHeight = function() {\n        return this.$fontMetrics.$characterSize.height || 0;\n    };\n\n    this.getCharacterWidth = function() {\n        return this.$fontMetrics.$characterSize.width || 0;\n    };\n\n    this.$setFontMetrics = function(measure) {\n        this.$fontMetrics = measure;\n        this.$fontMetrics.on(\"changeCharacterSize\", function(e) {\n            this._signal(\"changeCharacterSize\", e);\n        }.bind(this));\n        this.$pollSizeChanges();\n    };\n\n    this.checkForSizeChanges = function() {\n        this.$fontMetrics.checkForSizeChanges();\n    };\n    this.$pollSizeChanges = function() {\n        return this.$pollSizeChangesTimer = this.$fontMetrics.$pollSizeChanges();\n    };\n    this.setSession = function(session) {\n        this.session = session;\n        if (session)\n            this.$computeTabString();\n    };\n\n    this.showInvisibles = false;\n    this.showSpaces = false;\n    this.showTabs = false;\n    this.showEOL = false;\n    this.setShowInvisibles = function(showInvisibles) {\n        if (this.showInvisibles == showInvisibles)\n            return false;\n\n        this.showInvisibles = showInvisibles;\n        if (typeof showInvisibles == \"string\") {\n            this.showSpaces = /tab/i.test(showInvisibles);\n            this.showTabs = /space/i.test(showInvisibles);\n            this.showEOL = /eol/i.test(showInvisibles);\n        } else {\n            this.showSpaces = this.showTabs = this.showEOL = showInvisibles;\n        }\n        this.$computeTabString();\n        return true;\n    };\n\n    this.displayIndentGuides = true;\n    this.setDisplayIndentGuides = function(display) {\n        if (this.displayIndentGuides == display)\n            return false;\n\n        this.displayIndentGuides = display;\n        this.$computeTabString();\n        return true;\n    };\n\n    this.$highlightIndentGuides = true;\n    this.setHighlightIndentGuides = function (highlight) {\n        if (this.$highlightIndentGuides === highlight) return false;\n\n        this.$highlightIndentGuides = highlight;\n        return highlight;\n    };\n\n    this.$tabStrings = [];\n    this.onChangeTabSize =\n    this.$computeTabString = function() {\n        var tabSize = this.session.getTabSize();\n        this.tabSize = tabSize;\n        var tabStr = this.$tabStrings = [0];\n        for (var i = 1; i < tabSize + 1; i++) {\n            if (this.showTabs) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_tab\";\n                span.textContent = lang.stringRepeat(this.TAB_CHAR, i);\n                tabStr.push(span);\n            } else {\n                tabStr.push(this.dom.createTextNode(lang.stringRepeat(\" \", i), this.element));\n            }\n        }\n        if (this.displayIndentGuides) {\n            this.$indentGuideRe =  /\\s\\S| \\t|\\t |\\s$/;\n            var className = \"ace_indent-guide\";\n            var spaceClass = this.showSpaces ? \" ace_invisible ace_invisible_space\" : \"\";\n            var spaceContent = this.showSpaces\n                ? lang.stringRepeat(this.SPACE_CHAR, this.tabSize)\n                : lang.stringRepeat(\" \", this.tabSize);\n\n            var tabClass = this.showTabs ? \" ace_invisible ace_invisible_tab\" : \"\";\n            var tabContent = this.showTabs\n                ? lang.stringRepeat(this.TAB_CHAR, this.tabSize)\n                : spaceContent;\n\n            var span = this.dom.createElement(\"span\");\n            span.className = className + spaceClass;\n            span.textContent = spaceContent;\n            this.$tabStrings[\" \"] = span;\n\n            var span = this.dom.createElement(\"span\");\n            span.className = className + tabClass;\n            span.textContent = tabContent;\n            this.$tabStrings[\"\\t\"] = span;\n        }\n    };\n\n    this.updateLines = function(config, firstRow, lastRow) {\n        // Due to wrap line changes there can be new lines if e.g.\n        // the line to updated wrapped in the meantime.\n        if (this.config.lastRow != config.lastRow ||\n            this.config.firstRow != config.firstRow) {\n            return this.update(config);\n        }\n\n        this.config = config;\n\n        var first = Math.max(firstRow, config.firstRow);\n        var last = Math.min(lastRow, config.lastRow);\n\n        var lineElements = this.element.childNodes;\n        var lineElementsIdx = 0;\n\n        for (var row = config.firstRow; row < first; row++) {\n            var foldLine = this.session.getFoldLine(row);\n            if (foldLine) {\n                if (foldLine.containsRow(first)) {\n                    first = foldLine.start.row;\n                    break;\n                } else {\n                    row = foldLine.end.row;\n                }\n            }\n            lineElementsIdx ++;\n        }\n\n        var heightChanged = false;\n        var row = first;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row :Infinity;\n            }\n            if (row > last)\n                break;\n\n            var lineElement = lineElements[lineElementsIdx++];\n            if (lineElement) {\n                this.dom.removeChildren(lineElement);\n                this.$renderLine(\n                    lineElement, row, row == foldStart ? foldLine : false\n                );\n\n                if (heightChanged)\n                    lineElement.style.top = this.$lines.computeLineTop(row, config, this.session) + \"px\";\n\n                var height = (config.lineHeight * this.session.getRowLength(row)) + \"px\";\n                if (lineElement.style.height != height) {\n                    heightChanged = true;\n                    lineElement.style.height = height;\n                }\n            }\n            row++;\n        }\n        if (heightChanged) {\n            while (lineElementsIdx < this.$lines.cells.length) {\n                var cell = this.$lines.cells[lineElementsIdx++];\n                cell.element.style.top = this.$lines.computeLineTop(cell.row, config, this.session) + \"px\";\n            }\n        }\n    };\n\n    this.scrollLines = function(config) {\n        var oldConfig = this.config;\n        this.config = config;\n\n        if (this.$lines.pageChanged(oldConfig, config))\n            return this.update(config);\n\n        this.$lines.moveContainer(config);\n\n        var lastRow = config.lastRow;\n        var oldLastRow = oldConfig ? oldConfig.lastRow : -1;\n\n        if (!oldConfig || oldLastRow < config.firstRow)\n            return this.update(config);\n\n        if (lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (!oldConfig || oldConfig.lastRow < config.firstRow)\n            return this.update(config);\n\n        if (config.lastRow < oldConfig.firstRow)\n            return this.update(config);\n\n        if (oldConfig.firstRow < config.firstRow)\n            for (var row=this.session.getFoldedRowCount(oldConfig.firstRow, config.firstRow - 1); row>0; row--)\n                this.$lines.shift();\n\n        if (oldConfig.lastRow > config.lastRow)\n            for (var row=this.session.getFoldedRowCount(config.lastRow + 1, oldConfig.lastRow); row>0; row--)\n                this.$lines.pop();\n\n        if (config.firstRow < oldConfig.firstRow) {\n            this.$lines.unshift(this.$renderLinesFragment(config, config.firstRow, oldConfig.firstRow - 1));\n        }\n\n        if (config.lastRow > oldConfig.lastRow) {\n            this.$lines.push(this.$renderLinesFragment(config, oldConfig.lastRow + 1, config.lastRow));\n        }\n        this.$highlightIndentGuide();\n    };\n\n    this.$renderLinesFragment = function(config, firstRow, lastRow) {\n        var fragment = [];\n        var row = firstRow;\n        var foldLine = this.session.getNextFoldLine(row);\n        var foldStart = foldLine ? foldLine.start.row : Infinity;\n\n        while (true) {\n            if (row > foldStart) {\n                row = foldLine.end.row+1;\n                foldLine = this.session.getNextFoldLine(row, foldLine);\n                foldStart = foldLine ? foldLine.start.row : Infinity;\n            }\n            if (row > lastRow)\n                break;\n\n            var line = this.$lines.createCell(row, config, this.session);\n\n            var lineEl = line.element;\n            this.dom.removeChildren(lineEl);\n            dom.setStyle(lineEl.style, \"height\", this.$lines.computeLineHeight(row, config, this.session) + \"px\");\n            dom.setStyle(lineEl.style, \"top\", this.$lines.computeLineTop(row, config, this.session) + \"px\");\n\n            // Get the tokens per line as there might be some lines in between\n            // beeing folded.\n            this.$renderLine(lineEl, row, row == foldStart ? foldLine : false);\n\n            if (this.$useLineGroups()) {\n                lineEl.className = \"ace_line_group\";\n            } else {\n                lineEl.className = \"ace_line\";\n            }\n            fragment.push(line);\n\n            row++;\n        }\n        return fragment;\n    };\n\n    this.update = function(config) {\n        this.$lines.moveContainer(config);\n\n        this.config = config;\n\n        var firstRow = config.firstRow;\n        var lastRow = config.lastRow;\n\n        var lines = this.$lines;\n        while (lines.getLength())\n            lines.pop();\n\n        lines.push(this.$renderLinesFragment(config, firstRow, lastRow));\n    };\n\n    this.$textToken = {\n        \"text\": true,\n        \"rparen\": true,\n        \"lparen\": true\n    };\n\n    this.$renderTokenInChunks = function(parent, screenColumn, token, value) {\n        var newScreenColumn;\n        for (var i = 0; i < value.length; i += this.MAX_CHUNK_LENGTH) {\n            var valueChunk = value.substring(i, i + this.MAX_CHUNK_LENGTH);\n            var tokenChunk = {\n                type: token.type,\n                value: valueChunk\n            };\n            newScreenColumn = this.$renderToken(parent, screenColumn + i, tokenChunk, valueChunk);\n        }\n        return newScreenColumn;\n    };\n\n    this.$renderToken = function(parent, screenColumn, token, value) {\n        var self = this;\n        var re = /(\\t)|( +)|([\\x00-\\x1f\\x80-\\xa0\\xad\\u1680\\u180E\\u2000-\\u200f\\u2028\\u2029\\u202F\\u205F\\uFEFF\\uFFF9-\\uFFFC\\u2066\\u2067\\u2068\\u202A\\u202B\\u202D\\u202E\\u202C\\u2069]+)|(\\u3000)|([\\u1100-\\u115F\\u11A3-\\u11A7\\u11FA-\\u11FF\\u2329-\\u232A\\u2E80-\\u2E99\\u2E9B-\\u2EF3\\u2F00-\\u2FD5\\u2FF0-\\u2FFB\\u3001-\\u303E\\u3041-\\u3096\\u3099-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u3190-\\u31BA\\u31C0-\\u31E3\\u31F0-\\u321E\\u3220-\\u3247\\u3250-\\u32FE\\u3300-\\u4DBF\\u4E00-\\uA48C\\uA490-\\uA4C6\\uA960-\\uA97C\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFAFF\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE66\\uFE68-\\uFE6B\\uFF01-\\uFF60\\uFFE0-\\uFFE6]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/g;\n\n        var valueFragment = this.dom.createFragment(this.element);\n\n        var m;\n        var i = 0;\n        while (m = re.exec(value)) {\n            var tab = m[1];\n            var simpleSpace = m[2];\n            var controlCharacter = m[3];\n            var cjkSpace = m[4];\n            var cjk = m[5];\n\n            if (!self.showSpaces && simpleSpace)\n                continue;\n\n            var before = i != m.index ? value.slice(i, m.index) : \"\";\n\n            i = m.index + m[0].length;\n\n            if (before) {\n                valueFragment.appendChild(this.dom.createTextNode(before, this.element));\n            }\n\n            if (tab) {\n                var tabSize = self.session.getScreenTabSize(screenColumn + m.index);\n                valueFragment.appendChild(self.$tabStrings[tabSize].cloneNode(true));\n                screenColumn += tabSize - 1;\n            } else if (simpleSpace) {\n                if (self.showSpaces) {\n                    var span = this.dom.createElement(\"span\");\n                    span.className = \"ace_invisible ace_invisible_space\";\n                    span.textContent = lang.stringRepeat(self.SPACE_CHAR, simpleSpace.length);\n                    valueFragment.appendChild(span);\n                } else {\n                    valueFragment.appendChild(this.com.createTextNode(simpleSpace, this.element));\n                }\n            } else if (controlCharacter) {\n                var span = this.dom.createElement(\"span\");\n                span.className = \"ace_invisible ace_invisible_space ace_invalid\";\n                span.textContent = lang.stringRepeat(self.SPACE_CHAR, controlCharacter.length);\n                valueFragment.appendChild(span);\n            } else if (cjkSpace) {\n                // U+3000 is both invisible AND full-width, so must be handled uniquely\n                screenColumn += 1;\n\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = self.showSpaces ? \"ace_cjk ace_invisible ace_invisible_space\" : \"ace_cjk\";\n                span.textContent = self.showSpaces ? self.SPACE_CHAR : cjkSpace;\n                valueFragment.appendChild(span);\n            } else if (cjk) {\n                screenColumn += 1;\n                var span = this.dom.createElement(\"span\");\n                span.style.width = (self.config.characterWidth * 2) + \"px\";\n                span.className = \"ace_cjk\";\n                span.textContent = cjk;\n                valueFragment.appendChild(span);\n            }\n        }\n\n        valueFragment.appendChild(this.dom.createTextNode(i ? value.slice(i) : value, this.element));\n\n        var span = this.dom.createElement(\"span\");\n        if (!this.$textToken[token.type]) {\n            var classes = \"ace_\" + token.type.replace(/\\./g, \" ace_\");\n            if (token.type == \"fold\")\n                span.style.width = (token.value.length * this.config.characterWidth) + \"px\";\n\n            span.className = classes;\n        }\n        span.appendChild(valueFragment);\n        parent.appendChild(span);\n\n        return screenColumn + value.length;\n    };\n\n    this.renderIndentGuide = function(parent, value, max) {\n        var cols = value.search(this.$indentGuideRe);\n        if (cols <= 0 || cols >= max)\n            return value;\n        if (value[0] == \" \") {\n            cols -= cols % this.tabSize;\n            var count = cols/this.tabSize;\n            for (var i=0; i<count; i++) {\n                parent.appendChild(this.$tabStrings[\" \"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        } else if (value[0] == \"\\t\") {\n            for (var i=0; i<cols; i++) {\n                parent.appendChild(this.$tabStrings[\"\\t\"].cloneNode(true));\n            }\n            this.$highlightIndentGuide();\n            return value.substr(cols);\n        }\n        this.$highlightIndentGuide();\n        return value;\n    };\n\n    this.$highlightIndentGuide = function () {\n        if (!this.$highlightIndentGuides || !this.displayIndentGuides) return;\n\n        this.$highlightIndentGuideMarker = {\n            indentLevel: undefined,\n            start: undefined,\n            end: undefined,\n            dir: undefined\n        };\n        var lines = this.session.doc.$lines;\n        if (!lines) return;\n\n        var cursor = this.session.selection.getCursor();\n        var initialIndent = /^\\s*/.exec(this.session.doc.getLine(cursor.row))[0].length;\n        var elementIndentLevel = Math.floor(initialIndent / this.tabSize);\n        this.$highlightIndentGuideMarker = {\n            indentLevel: elementIndentLevel,\n            start: cursor.row\n        };\n\n        var bracketHighlight = this.session.$bracketHighlight;\n        if (bracketHighlight) {\n            var ranges = this.session.$bracketHighlight.ranges;\n            for (var i = 0; i < ranges.length; i++) {\n                if (cursor.row !== ranges[i].start.row) {\n                    this.$highlightIndentGuideMarker.end = ranges[i].start.row;\n                    if (cursor.row > ranges[i].start.row) {\n                        this.$highlightIndentGuideMarker.dir = -1;\n                    }\n                    else {\n                        this.$highlightIndentGuideMarker.dir = 1;\n                    }\n                    break;\n                }\n            }\n        }\n\n        if (!this.$highlightIndentGuideMarker.end) {\n            if (lines[cursor.row] !== '' && cursor.column === lines[cursor.row].length) {\n                this.$highlightIndentGuideMarker.dir = 1;\n                for (var i = cursor.row + 1; i < lines.length; i++) {\n                    var line = lines[i];\n                    var currentIndent = /^\\s*/.exec(line)[0].length;\n                    if (line !== '') {\n                        this.$highlightIndentGuideMarker.end = i;\n                        if (currentIndent <= initialIndent) break;\n                    }\n                }\n            }\n        }\n\n        this.$renderHighlightIndentGuide();\n    };\n\n    this.$clearActiveIndentGuide = function () {\n        var cells = this.$lines.cells;\n        for (var i = 0; i < cells.length; i++) {\n            var cell = cells[i];\n            var childNodes = cell.element.childNodes;\n            if (childNodes.length > 0) {\n                for (var j = 0; j < childNodes.length; j++) {\n                    if (childNodes[j].classList && childNodes[j].classList.contains(\"ace_indent-guide-active\")) {\n                        childNodes[j].classList.remove(\"ace_indent-guide-active\");\n                        break;\n                    }\n                }\n            }\n        }\n    };\n\n    this.$setIndentGuideActive = function (cell, indentLevel) {\n        var line = this.session.doc.getLine(cell.row);\n        if (line !== \"\") {\n            var childNodes = cell.element.childNodes;\n            if (childNodes) {\n                let node = childNodes[indentLevel - 1];\n                if (node && node.classList && node.classList.contains(\"ace_indent-guide\")) node.classList.add(\n                    \"ace_indent-guide-active\");\n            }\n        }\n    };\n\n    this.$renderHighlightIndentGuide = function () {\n        if (!this.$lines) return;\n        var cells = this.$lines.cells;\n        this.$clearActiveIndentGuide();\n        var indentLevel = this.$highlightIndentGuideMarker.indentLevel;\n        if (indentLevel !== 0) {\n            if (this.$highlightIndentGuideMarker.dir === 1) {\n                for (var i = 0; i < cells.length; i++) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row >= this.$highlightIndentGuideMarker.start\n                        + 1) {\n                        if (cell.row >= this.$highlightIndentGuideMarker.end) break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n            else {\n                for (var i = cells.length - 1; i >= 0; i--) {\n                    var cell = cells[i];\n                    if (this.$highlightIndentGuideMarker.end && cell.row < this.$highlightIndentGuideMarker.start) {\n                        if (cell.row <= this.$highlightIndentGuideMarker.end) break;\n                        this.$setIndentGuideActive(cell, indentLevel);\n                    }\n                }\n            }\n        }\n    };\n\n    this.$createLineElement = function(parent) {\n        var lineEl = this.dom.createElement(\"div\");\n        lineEl.className = \"ace_line\";\n        lineEl.style.height = this.config.lineHeight + \"px\";\n\n        return lineEl;\n    };\n\n    this.$renderWrappedLine = function(parent, tokens, splits) {\n        var chars = 0;\n        var split = 0;\n        var splitChars = splits[0];\n        var screenColumn = 0;\n\n        var lineEl = this.$createLineElement();\n        parent.appendChild(lineEl);\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                chars = value.length;\n                value = this.renderIndentGuide(lineEl, value, splitChars);\n                if (!value)\n                    continue;\n                chars -= value.length;\n            }\n\n            if (chars + value.length < splitChars) {\n                screenColumn = this.$renderTokenInChunks(lineEl, screenColumn, token, value);\n                chars += value.length;\n            } else {\n                while (chars + value.length >= splitChars) {\n                    screenColumn = this.$renderTokenInChunks(\n                        lineEl, screenColumn,\n                        token, value.substring(0, splitChars - chars)\n                    );\n                    value = value.substring(splitChars - chars);\n                    chars = splitChars;\n\n                    lineEl = this.$createLineElement();\n                    parent.appendChild(lineEl);\n\n                    lineEl.appendChild(this.dom.createTextNode(lang.stringRepeat(\"\\xa0\", splits.indent), this.element));\n\n                    split ++;\n                    screenColumn = 0;\n                    splitChars = splits[split] || Number.MAX_VALUE;\n                }\n                if (value.length != 0) {\n                    chars += value.length;\n                    screenColumn = this.$renderTokenInChunks(\n                        lineEl, screenColumn, token, value\n                    );\n                }\n            }\n        }\n\n        if (splits[splits.length - 1] > this.MAX_LINE_LENGTH)\n            this.$renderOverflowMessage(lineEl, screenColumn, null, \"\", true);\n    };\n\n    this.$renderSimpleLine = function(parent, tokens) {\n        var screenColumn = 0;\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            var value = token.value;\n            if (i == 0 && this.displayIndentGuides) {\n                value = this.renderIndentGuide(parent, value);\n                if (!value)\n                    continue;\n            }\n            if (screenColumn + value.length > this.MAX_LINE_LENGTH) {\n                this.$renderOverflowMessage(parent, screenColumn, token, value);\n                return;\n            }\n            screenColumn = this.$renderTokenInChunks(parent, screenColumn, token, value);\n        }\n    };\n\n    this.$renderOverflowMessage = function(parent, screenColumn, token, value, hide) {\n        if (token) {\n            this.$renderTokenInChunks(\n                parent,\n                screenColumn,\n                token,\n                value.slice(0, this.MAX_LINE_LENGTH - screenColumn)\n            );\n        }\n\n        var overflowEl = this.dom.createElement(\"span\");\n        overflowEl.className = \"ace_inline_button ace_keyword ace_toggle_wrap\";\n        overflowEl.textContent = hide ? \"<hide>\" : \"<click to see more...>\";\n\n        parent.appendChild(overflowEl);\n    };\n\n    // row is either first row of foldline or not in fold\n    this.$renderLine = function(parent, row, foldLine) {\n        if (!foldLine && foldLine != false)\n            foldLine = this.session.getFoldLine(row);\n\n        if (foldLine)\n            var tokens = this.$getFoldLineTokens(row, foldLine);\n        else\n            var tokens = this.session.getTokens(row);\n\n        var lastLineEl = parent;\n        if (tokens.length) {\n            var splits = this.session.getRowSplitData(row);\n            if (splits && splits.length) {\n                this.$renderWrappedLine(parent, tokens, splits);\n                var lastLineEl = parent.lastChild;\n            } else {\n                var lastLineEl = parent;\n                if (this.$useLineGroups()) {\n                    lastLineEl = this.$createLineElement();\n                    parent.appendChild(lastLineEl);\n                }\n                this.$renderSimpleLine(lastLineEl, tokens);\n            }\n        } else if (this.$useLineGroups()) {\n            lastLineEl = this.$createLineElement();\n            parent.appendChild(lastLineEl);\n        }\n\n        if (this.showEOL && lastLineEl) {\n            if (foldLine)\n                row = foldLine.end.row;\n\n            var invisibleEl = this.dom.createElement(\"span\");\n            invisibleEl.className = \"ace_invisible ace_invisible_eol\";\n            invisibleEl.textContent = row == this.session.getLength() - 1 ? this.EOF_CHAR : this.EOL_CHAR;\n\n            lastLineEl.appendChild(invisibleEl);\n        }\n    };\n\n    this.$getFoldLineTokens = function(row, foldLine) {\n        var session = this.session;\n        var renderTokens = [];\n\n        function addTokens(tokens, from, to) {\n            var idx = 0, col = 0;\n            while ((col + tokens[idx].value.length) < from) {\n                col += tokens[idx].value.length;\n                idx++;\n\n                if (idx == tokens.length)\n                    return;\n            }\n            if (col != from) {\n                var value = tokens[idx].value.substring(from - col);\n                // Check if the token value is longer then the from...to spacing.\n                if (value.length > (to - from))\n                    value = value.substring(0, to - from);\n\n                renderTokens.push({\n                    type: tokens[idx].type,\n                    value: value\n                });\n\n                col = from + value.length;\n                idx += 1;\n            }\n\n            while (col < to && idx < tokens.length) {\n                var value = tokens[idx].value;\n                if (value.length + col > to) {\n                    renderTokens.push({\n                        type: tokens[idx].type,\n                        value: value.substring(0, to - col)\n                    });\n                } else\n                    renderTokens.push(tokens[idx]);\n                col += value.length;\n                idx += 1;\n            }\n        }\n\n        var tokens = session.getTokens(row);\n        foldLine.walk(function(placeholder, row, column, lastColumn, isNewRow) {\n            if (placeholder != null) {\n                renderTokens.push({\n                    type: \"fold\",\n                    value: placeholder\n                });\n            } else {\n                if (isNewRow)\n                    tokens = session.getTokens(row);\n\n                if (tokens.length)\n                    addTokens(tokens, lastColumn, column);\n            }\n        }, foldLine.end.row, this.session.getLine(foldLine.end.row).length);\n\n        return renderTokens;\n    };\n\n    this.$useLineGroups = function() {\n        // For the updateLines function to work correctly, it's important that the\n        // child nodes of this.element correspond on a 1-to-1 basis to rows in the\n        // document (as distinct from lines on the screen). For sessions that are\n        // wrapped, this means we need to add a layer to the node hierarchy (tagged\n        // with the class name ace_line_group).\n        return this.session.getUseWrapMode();\n    };\n\n    this.destroy = function() {};\n}).call(Text.prototype);\n\nexports.Text = Text;\n","\"no use strict\";\n\nvar oop = require(\"./oop\");\nvar EventEmitter = require(\"./event_emitter\").EventEmitter;\n\nvar optionsProvider = {\n    setOptions: function(optList) {\n        Object.keys(optList).forEach(function(key) {\n            this.setOption(key, optList[key]);\n        }, this);\n    },\n    getOptions: function(optionNames) {\n        var result = {};\n        if (!optionNames) {\n            var options = this.$options;\n            optionNames = Object.keys(options).filter(function(key) {\n                return !options[key].hidden;\n            });\n        } else if (!Array.isArray(optionNames)) {\n            result = optionNames;\n            optionNames = Object.keys(result);\n        }\n        optionNames.forEach(function(key) {\n            result[key] = this.getOption(key);\n        }, this);\n        return result;\n    },\n    setOption: function(name, value) {\n        if (this[\"$\" + name] === value)\n            return;\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].setOption(name, value);\n\n        if (!opt.handlesSet)\n            this[\"$\" + name] = value;\n        if (opt && opt.set)\n            opt.set.call(this, value);\n    },\n    getOption: function(name) {\n        var opt = this.$options[name];\n        if (!opt) {\n            return warn('misspelled option \"' + name + '\"');\n        }\n        if (opt.forwardTo)\n            return this[opt.forwardTo] && this[opt.forwardTo].getOption(name);\n        return opt && opt.get ? opt.get.call(this) : this[\"$\" + name];\n    }\n};\n\nfunction warn(message) {\n    if (typeof console != \"undefined\" && console.warn)\n        console.warn.apply(console, arguments);\n}\n\nfunction reportError(msg, data) {\n    var e = new Error(msg);\n    e.data = data;\n    if (typeof console == \"object\" && console.error)\n        console.error(e);\n    setTimeout(function() { throw e; });\n}\n\nvar AppConfig = function() {\n    this.$defaultOptions = {};\n};\n\n(function() {\n    // module loading\n    oop.implement(this, EventEmitter);\n    /*\n     * option {name, value, initialValue, setterName, set, get }\n     */\n    this.defineOptions = function(obj, path, options) {\n        if (!obj.$options)\n            this.$defaultOptions[path] = obj.$options = {};\n\n        Object.keys(options).forEach(function(key) {\n            var opt = options[key];\n            if (typeof opt == \"string\")\n                opt = {forwardTo: opt};\n\n            opt.name || (opt.name = key);\n            obj.$options[opt.name] = opt;\n            if (\"initialValue\" in opt)\n                obj[\"$\" + opt.name] = opt.initialValue;\n        });\n\n        // implement option provider interface\n        oop.implement(obj, optionsProvider);\n\n        return this;\n    };\n\n    this.resetOptions = function(obj) {\n        Object.keys(obj.$options).forEach(function(key) {\n            var opt = obj.$options[key];\n            if (\"value\" in opt)\n                obj.setOption(key, opt.value);\n        });\n    };\n\n    this.setDefaultValue = function(path, name, value) {\n        if (!path) {\n            for (path in this.$defaultOptions)\n                if (this.$defaultOptions[path][name])\n                    break;\n            if (!this.$defaultOptions[path][name])\n                return false;\n        }\n        var opts = this.$defaultOptions[path] || (this.$defaultOptions[path] = {});\n        if (opts[name]) {\n            if (opts.forwardTo)\n                this.setDefaultValue(opts.forwardTo, name, value);\n            else\n                opts[name].value = value;\n        }\n    };\n\n    this.setDefaultValues = function(path, optionHash) {\n        Object.keys(optionHash).forEach(function(key) {\n            this.setDefaultValue(path, key, optionHash[key]);\n        }, this);\n    };\n    \n    this.warn = warn;\n    this.reportError = reportError;\n    \n}).call(AppConfig.prototype);\n\nexports.AppConfig = AppConfig;\n","\"use strict\";\n\nvar ArabicAlefBetIntervalsBegine = ['\\u0621', '\\u0641'];\nvar ArabicAlefBetIntervalsEnd = ['\\u063A', '\\u064a'];\nvar dir = 0, hiLevel = 0;\nvar lastArabic = false, hasUBAT_AL = false,  hasUBAT_B = false,  hasUBAT_S = false, hasBlockSep = false, hasSegSep = false;\n\nvar impTab_LTR = [\n\t\t\t\t/*\t\tL,\t\tR,\t\tEN,\t\tAN,\t\tN,\t\tIL,\t\tCond */\n/* 0 LTR text\t*/\t[\t0,\t\t3,\t\t0,\t\t1,\t\t0,\t\t0,\t\t0\t],\n/* 1 LTR+AN\t\t*/\t[\t0,\t\t3,\t\t0,\t\t1,\t\t2,\t\t2,\t\t0\t],\n/* 2 LTR+AN+N\t*/\t[\t0,\t\t3,\t\t0,\t\t0x11,\t\t2,\t\t0,\t\t1\t],\n/* 3 RTL text\t*/\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t1,\t\t0\t],\n/* 4 RTL cont\t*/\t[\t0,\t\t3,\t\t0x15,\t\t0x15,\t\t4,\t\t0,\t\t1\t],\n/* 5 RTL+EN/AN\t*/\t[\t0,\t\t3,\t\t5,\t\t5,\t\t4,\t\t2,\t\t0\t]\n];\n\nvar impTab_RTL = [\n\t\t/*\t\tL,\t\tR,\t\tEN,\t\tAN,\t\tN,\t\tIL,\t\tCond */\n/* 0 RTL text\t*/\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t1,\t\t0\t],\n/* 1 RTL+EN/AN\t*/\t[\t2,\t\t0,\t\t1,\t\t1,\t\t0,\t\t2,\t\t0\t],\n/* 2 LTR text\t*/\t[\t2,\t\t0,\t\t2,\t\t1,\t\t3,\t\t2,\t\t0\t],\n/* 3 LTR+cont\t*/\t[\t2,\t\t0,\t\t2,\t\t0x21,\t\t3,\t\t1,\t\t1\t]\n];\n\nvar LTR = 0, RTL = 1;\n\nvar L = 0; /* left to right */\nvar R = 1; /* right to left */\nvar EN = 2; /* European digit */\nvar AN = 3; /* Arabic-Indic digit */\nvar ON = 4; /* neutral */\nvar B = 5; /* block separator */\nvar S = 6; /* segment separator */\nvar AL = 7; /* Arabic Letter */\nvar WS = 8; /* white space */\nvar CS = 9; /* common digit separator */\nvar ES = 10; /* European digit separator */\nvar ET = 11; /* European digit terminator */\nvar NSM = 12; /* Non Spacing Mark */\nvar LRE = 13; /* LRE */\nvar RLE = 14; /* RLE */\nvar PDF = 15; /* PDF */\nvar LRO = 16; /* LRO */\nvar RLO = 17; /* RLO */\nvar BN = 18; /* Boundary Neutral */\n\nvar UnicodeTBL00 = [\nBN,BN,BN,BN,BN,BN,BN,BN,BN,S,B,S,WS,B,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,B,B,B,S,\nWS,ON,ON,ET,ET,ET,ON,ON,ON,ON,ON,ES,CS,ES,CS,CS,\nEN,EN,EN,EN,EN,EN,EN,EN,EN,EN,CS,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,ON,\nON,L,L,L,L,L,L,L,L,L,L,L,L,L,L,L,\nL,L,L,L,L,L,L,L,L,L,L,ON,ON,ON,ON,BN,\nBN,BN,BN,BN,BN,B,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nBN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,BN,\nCS,ON,ET,ET,ET,ET,ON,ON,ON,ON,L,ON,ON,BN,ON,ON,\nET,ET,EN,EN,ON,L,ON,ON,ON,EN,L,ON,ON,ON,ON,ON\n];\n\nvar UnicodeTBL20 = [\nWS,WS,WS,WS,WS,WS,WS,WS,WS,WS,WS,BN,BN,BN,L,R\t,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,WS,B,LRE,RLE,PDF,LRO,RLO,CS,\nET,ET,ET,ET,ET,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,CS,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,\nON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,ON,WS\n];\n\nfunction _computeLevels(chars, levels, len, charTypes) {\n\tvar impTab = dir ? impTab_RTL : impTab_LTR\n\t\t, prevState = null, newClass = null, newLevel = null, newState = 0\n\t\t, action = null, cond = null, condPos = -1, i = null, ix = null, classes = [];\n\n\tif (!charTypes) {\n\t\tfor (i = 0, charTypes = []; i < len; i++) {\n\t\t\tcharTypes[i] = _getCharacterType(chars[i]);\n\t\t}\n\t}\n\thiLevel = dir;\n\tlastArabic = false;\n\thasUBAT_AL = false;\n\thasUBAT_B = false;\n\thasUBAT_S = false;\n\tfor (ix = 0; ix < len; ix++){\n\t\tprevState = newState;\n\t\tclasses[ix] = newClass = _getCharClass(chars, charTypes, classes, ix);\n\t\tnewState = impTab[prevState][newClass];\n\t\taction = newState & 0xF0;\n\t\tnewState &= 0x0F;\n\t\tlevels[ix] = newLevel = impTab[newState][5];\n\t\tif (action > 0){\n\t\t\tif (action == 0x10){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = 1;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t} else {\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tcond = impTab[newState][6];\n\t\tif (cond){\n\t\t\tif(condPos == -1){\n\t\t\t\tcondPos = ix;\n\t\t\t}\n\t\t}else{\n\t\t\tif (condPos > -1){\n\t\t\t\tfor(i = condPos; i < ix; i++){\n\t\t\t\t\tlevels[i] = newLevel;\n\t\t\t\t}\n\t\t\t\tcondPos = -1;\n\t\t\t}\n\t\t}\n\t\tif (charTypes[ix] == B){\n\t\t\tlevels[ix] = 0;\n\t\t}\n\t\thiLevel |= newLevel;\n\t}\n\tif (hasUBAT_S){\n\t\tfor(i = 0; i < len; i++){\n\t\t\tif(charTypes[i] == S){\n\t\t\t\tlevels[i] = dir;\n\t\t\t\tfor(var j = i - 1; j >= 0; j--){\n\t\t\t\t\tif(charTypes[j] == WS){\n\t\t\t\t\t\tlevels[j] = dir;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction _invertLevel(lev, levels, _array) {\n\tif (hiLevel < lev){\n\t\treturn;\n\t}\n\tif (lev == 1 && dir == RTL && !hasUBAT_B){\n\t\t_array.reverse();\n\t\treturn;\n\t}\n\tvar len = _array.length, start = 0, end, lo, hi, tmp;\n\twhile(start < len){\n\t\tif (levels[start] >= lev){\n\t\t\tend = start + 1;\n\t\twhile(end < len && levels[end] >= lev){\n\t\t\tend++;\n\t\t}\n\t\tfor(lo = start, hi = end - 1 ; lo < hi; lo++, hi--){\n\t\t\ttmp = _array[lo];\n\t\t\t_array[lo] = _array[hi];\n\t\t\t_array[hi] = tmp;\n\t\t}\n\t\tstart = end;\n\t}\n\tstart++;\n\t}\n}\n\nfunction _getCharClass(chars, types, classes, ix) {\t\t\t\n\tvar cType = types[ix], wType, nType, len, i;\n\tswitch(cType){\n\t\tcase L:\n\t\tcase R:\n\t\t\tlastArabic = false;\n\t\tcase ON:\n\t\tcase AN:\n\t\t\treturn cType;\n\t\tcase EN:\n\t\t\treturn lastArabic ? AN : EN;\n\t\tcase AL:\n\t\t\tlastArabic = true;\n\t\t\thasUBAT_AL = true;\n\t\t\treturn R;\n\t\tcase WS:\n\t\t\treturn ON;\n\t\tcase CS:\n\t\t\tif (ix < 1 || (ix + 1) >= types.length ||\n\t\t\t\t((wType = classes[ix - 1]) != EN && wType != AN) ||\n\t\t\t\t((nType = types[ix + 1]) != EN && nType != AN)){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\tif (lastArabic){nType = AN;}\n\t\t\treturn nType == wType ? nType : ON;\n\t\tcase ES:\n\t\t\twType = ix > 0 ? classes[ix - 1] : B;\n\t\t\tif (wType == EN && (ix + 1) < types.length && types[ix + 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase ET:\n\t\t\tif (ix > 0 && classes[ix - 1] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\tif (lastArabic){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\ti = ix + 1;\n\t\t\tlen = types.length;\n\t\t\twhile (i < len && types[i] == ET){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len && types[i] == EN){\n\t\t\t\treturn EN;\n\t\t\t}\n\t\t\treturn ON;\n\t\tcase NSM:\n\t\t\tlen = types.length;\n\t\t\ti = ix + 1;\n\t\t\twhile (i < len && types[i] == NSM){\n\t\t\t\ti++;\n\t\t\t}\n\t\t\tif (i < len){\n\t\t\t\tvar c = chars[ix], rtlCandidate = (c >= 0x0591 && c <= 0x08FF) || c == 0xFB1E;\n\t\t\t\t\n\t\t\t\twType = types[i];\n\t\t\t\tif (rtlCandidate && (wType == R || wType == AL)){\n\t\t\t\t\treturn R;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ix < 1 || (wType = types[ix - 1]) == B){\n\t\t\t\treturn ON;\n\t\t\t}\n\t\t\treturn classes[ix - 1];\n\t\tcase B:\n\t\t\tlastArabic = false;\n\t\t\thasUBAT_B = true;\n\t\t\treturn dir;\n\t\tcase S:\n\t\t\thasUBAT_S = true;\n\t\t\treturn ON;\n\t\tcase LRE:\n\t\tcase RLE:\n\t\tcase LRO:\n\t\tcase RLO:\n\t\tcase PDF:\n\t\t\tlastArabic = false;\n\t\tcase BN:\n\t\t\treturn ON;\n\t}\n}\n\nfunction _getCharacterType( ch ) {\t\t\n\tvar uc = ch.charCodeAt(0), hi = uc >> 8;\n\t\n\tif (hi == 0) {\t\t\n\t\treturn ((uc > 0x00BF) ? L : UnicodeTBL00[uc]);\n\t} else if (hi == 5) {\n\t\treturn (/[\\u0591-\\u05f4]/.test(ch) ? R : L);\n\t} else if (hi == 6) {\n\t\tif (/[\\u0610-\\u061a\\u064b-\\u065f\\u06d6-\\u06e4\\u06e7-\\u06ed]/.test(ch))\n\t\t\treturn NSM;\n\t\telse if (/[\\u0660-\\u0669\\u066b-\\u066c]/.test(ch))\n\t\t\treturn AN;\n\t\telse if (uc == 0x066A)\n\t\t\treturn ET;\n\t\telse if (/[\\u06f0-\\u06f9]/.test(ch))\n\t\t\treturn EN;\t\t\t\n\t\telse\n\t\t\treturn AL;\n\t} else if (hi == 0x20 && uc <= 0x205F) {\n\t\treturn UnicodeTBL20[uc & 0xFF];\n\t} else if (hi == 0xFE) {\n\t\treturn (uc >= 0xFE70 ? AL : ON);\n\t}\t\t\n\treturn ON;\t\n}\n\nfunction _isArabicDiacritics( ch ) {\n\treturn (ch >= '\\u064b' && ch <= '\\u0655');\n}\n\n/* Strong LTR character (0 - even), regular width */\nexports.L = L;\n/* Strong RTL character (1 - odd), Bidi width */\nexports.R = R;\n/* European digit (2 - even), regular width */\nexports.EN = EN;\n/* Neutral RTL-by-context character (3 - odd), regular width */\nexports.ON_R = 3;\n/* Hindi (Arabic) digit (4 - even), Bidi width */\nexports.AN = 4;\n/* Arabic LamAlef (5 - odd), Half Bidi width */\nexports.R_H = 5;\n/* invisible EOL (6 - even), zero width */\nexports.B = 6;\n/* invisible RLE (7 - odd), zero width */\nexports.RLE = 7;\n\nexports.DOT = \"\\xB7\";\n\n/**\n * Performs text reordering by implementing Unicode Bidi algorithm\n * with aim to produce logical<->visual map and Bidi levels\n * @param {String} text string to be reordered\n * @param {Array} unicode character types produced by call to 'hasBidiCharacters'\n * @param {Boolean} 'true' for right-to-left text direction, otherwise 'false'\n *\n * @return {Object} An object containing logicalFromVisual map and Bidi levels\n **/\nexports.doBidiReorder = function(text, textCharTypes, isRtl) {\n\tif (text.length < 2)\n\t\treturn {};\n\t\t\n\tvar chars = text.split(\"\"), logicalFromVisual = new Array(chars.length),\n\t\tbidiLevels = new Array(chars.length), levels = []; \n\n\tdir = isRtl ? RTL : LTR;\n\n\t_computeLevels(chars, levels, chars.length, textCharTypes);\n\n\tfor (var i = 0; i < logicalFromVisual.length; logicalFromVisual[i] = i, i++);\n\n\t_invertLevel(2, levels, logicalFromVisual);\n\t_invertLevel(1, levels, logicalFromVisual);\n\n\tfor (var i = 0; i < logicalFromVisual.length - 1; i++) { //fix levels to reflect character width\n\t\tif (textCharTypes[i] === AN) {\n\t\t\tlevels[i] = exports.AN;\n\t\t} else if (levels[i] === R && ((textCharTypes[i] > AL && textCharTypes[i] < LRE) \n\t\t\t|| textCharTypes[i] === ON || textCharTypes[i] === BN)) {\n\t\t\tlevels[i] = exports.ON_R;\n\t\t} else if ((i > 0 && chars[i - 1] === '\\u0644') && /\\u0622|\\u0623|\\u0625|\\u0627/.test(chars[i])) {\n\t\t\tlevels[i - 1] = levels[i] = exports.R_H;\n\t\t\ti++;\n\t\t}\n\t}\n\t/* fix level to mark zero length EOL */\n\tif (chars[chars.length - 1] === exports.DOT)\n\t\tlevels[chars.length - 1] = exports.B;\n\t\t\t\t\n\tif (chars[0] === '\\u202B')\n\t\tlevels[0] = exports.RLE;\n\t\t\t\t\n\tfor (var i = 0; i < logicalFromVisual.length; i++) {\n\t\tbidiLevels[i] = levels[logicalFromVisual[i]];\n\t}\n\n\treturn {'logicalFromVisual': logicalFromVisual, 'bidiLevels': bidiLevels};\n};\t\n\n/**\n * Performs character classification, to be used in Unicode Bidi algorithm.\n * @param {String} text string to be reordered\n * @param {Array} unicode character types (to be filled by this method)\n *\n * @return {Boolean} 'true' if text contains Bidi characters, otherwise 'false' \n **/\nexports.hasBidiCharacters = function(text, textCharTypes){\n\tvar ret = false;\n\tfor (var i = 0; i < text.length; i++){\n\t\ttextCharTypes[i] = _getCharacterType(text.charAt(i));\n\t\tif (!ret && (textCharTypes[i] == R || textCharTypes[i] == AL || textCharTypes[i] == AN))\n\t\t\tret = true;\n\t}\n\treturn ret;\n};\n\n/**\n * Returns visual index corresponding to logical index basing on logicalFromvisual \n * map provided by Unicode Bidi algorithm.\n * @param {Number} logIdx logical index of character in text buffer\n * @param {Object} rowMap object containing logicalFromVisual map\n *\n * @return {Number} visual index (on display) corresponding to logical index\n **/\t\nexports.getVisualFromLogicalIdx = function(logIdx, rowMap) {\n\tfor (var i = 0; i < rowMap.logicalFromVisual.length; i++) {\n\t\tif (rowMap.logicalFromVisual[i] == logIdx)\n\t\t\treturn i;\n\t}\n\treturn 0;\n};\n","\"use strict\";\n\nvar useragent = require(\"./useragent\"); \nvar XHTML_NS = \"http://www.w3.org/1999/xhtml\";\n\nexports.buildDom = function buildDom(arr, parent, refs) {\n    if (typeof arr == \"string\" && arr) {\n        var txt = document.createTextNode(arr);\n        if (parent)\n            parent.appendChild(txt);\n        return txt;\n    }\n    \n    if (!Array.isArray(arr)) {\n        if (arr && arr.appendChild && parent)\n            parent.appendChild(arr);\n        return arr;\n    }\n    if (typeof arr[0] != \"string\" || !arr[0]) {\n        var els = [];\n        for (var i = 0; i < arr.length; i++) {\n            var ch = buildDom(arr[i], parent, refs);\n            ch && els.push(ch);\n        }\n        return els;\n    }\n    \n    var el = document.createElement(arr[0]);\n    var options = arr[1];\n    var childIndex = 1;\n    if (options && typeof options == \"object\" && !Array.isArray(options))\n        childIndex = 2;\n    for (var i = childIndex; i < arr.length; i++)\n        buildDom(arr[i], el, refs);\n    if (childIndex == 2) {\n        Object.keys(options).forEach(function(n) {\n            var val = options[n];\n            if (n === \"class\") {\n                el.className = Array.isArray(val) ? val.join(\" \") : val;\n            } else if (typeof val == \"function\" || n == \"value\" || n[0] == \"$\") {\n                el[n] = val;\n            } else if (n === \"ref\") {\n                if (refs) refs[val] = el;\n            } else if (n === \"style\") {\n                if (typeof val == \"string\") el.style.cssText = val;\n            } else if (val != null) {\n                el.setAttribute(n, val);\n            }\n        });\n    }\n    if (parent)\n        parent.appendChild(el);\n    return el;\n};\n\nexports.getDocumentHead = function(doc) {\n    if (!doc)\n        doc = document;\n    return doc.head || doc.getElementsByTagName(\"head\")[0] || doc.documentElement;\n};\n\nexports.createElement = function(tag, ns) {\n    return document.createElementNS ?\n            document.createElementNS(ns || XHTML_NS, tag) :\n            document.createElement(tag);\n};\n\nexports.removeChildren = function(element) {\n    element.innerHTML = \"\";\n};\n\nexports.createTextNode = function(textContent, element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createTextNode(textContent);\n};\n\nexports.createFragment = function(element) {\n    var doc = element ? element.ownerDocument : document;\n    return doc.createDocumentFragment();\n};\n\nexports.hasCssClass = function(el, name) {\n    var classes = (el.className + \"\").split(/\\s+/g);\n    return classes.indexOf(name) !== -1;\n};\n\n/*\n* Add a CSS class to the list of classes on the given node\n*/\nexports.addCssClass = function(el, name) {\n    if (!exports.hasCssClass(el, name)) {\n        el.className += \" \" + name;\n    }\n};\n\n/*\n* Remove a CSS class from the list of classes on the given node\n*/\nexports.removeCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g);\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        classes.splice(index, 1);\n    }\n    el.className = classes.join(\" \");\n};\n\nexports.toggleCssClass = function(el, name) {\n    var classes = el.className.split(/\\s+/g), add = true;\n    while (true) {\n        var index = classes.indexOf(name);\n        if (index == -1) {\n            break;\n        }\n        add = false;\n        classes.splice(index, 1);\n    }\n    if (add)\n        classes.push(name);\n\n    el.className = classes.join(\" \");\n    return add;\n};\n\n\n/*\n    * Add or remove a CSS class from the list of classes on the given node\n    * depending on the value of <tt>include</tt>\n    */\nexports.setCssClass = function(node, className, include) {\n    if (include) {\n        exports.addCssClass(node, className);\n    } else {\n        exports.removeCssClass(node, className);\n    }\n};\n\nexports.hasCssString = function(id, doc) {\n    var index = 0, sheets;\n    doc = doc || document;\n    if ((sheets = doc.querySelectorAll(\"style\"))) {\n        while (index < sheets.length) {\n            if (sheets[index++].id === id) {\n                return true;\n            }\n        }\n    }\n};\n\nexports.removeElementById = function(id, doc) {\n    doc = doc || document;\n    if(doc.getElementById(id)) {\n        doc.getElementById(id).remove();\n    }\n};\n\nvar strictCSP;\nvar cssCache = [];\nexports.useStrictCSP = function(value) {\n    strictCSP = value;\n    if (value == false) insertPendingStyles();\n    else if (!cssCache) cssCache = [];\n};\n\nfunction insertPendingStyles() {\n    var cache = cssCache;\n    cssCache = null;\n    cache && cache.forEach(function(item) {\n        importCssString(item[0], item[1]);\n    });\n}\n\nfunction importCssString(cssText, id, target) {\n    if (typeof document == \"undefined\")\n        return;\n    if (cssCache) {\n        if (target) {\n            insertPendingStyles();\n        } else if (target === false) {\n            return cssCache.push([cssText, id]);\n        }\n    }\n    if (strictCSP) return;\n\n    var container = target;\n    if (!target || !target.getRootNode) {\n        container = document;\n    } else {\n        container = target.getRootNode();\n        if (!container || container == target)\n            container = document;\n    }\n    \n    var doc = container.ownerDocument || container;\n    \n    // If style is already imported return immediately.\n    if (id && exports.hasCssString(id, container))\n        return null;\n    \n    if (id)\n        cssText += \"\\n/*# sourceURL=ace/css/\" + id + \" */\";\n    \n    var style = exports.createElement(\"style\");\n    style.appendChild(doc.createTextNode(cssText));\n    if (id)\n        style.id = id;\n\n    if (container == doc)\n        container = exports.getDocumentHead(doc);\n    container.insertBefore(style, container.firstChild);\n}\nexports.importCssString = importCssString;\n\nexports.importCssStylsheet = function(uri, doc) {\n    exports.buildDom([\"link\", {rel: \"stylesheet\", href: uri}], exports.getDocumentHead(doc));\n};\nexports.scrollbarWidth = function(doc) {\n    var inner = exports.createElement(\"ace_inner\");\n    inner.style.width = \"100%\";\n    inner.style.minWidth = \"0px\";\n    inner.style.height = \"200px\";\n    inner.style.display = \"block\";\n\n    var outer = exports.createElement(\"ace_outer\");\n    var style = outer.style;\n\n    style.position = \"absolute\";\n    style.left = \"-10000px\";\n    style.overflow = \"hidden\";\n    style.width = \"200px\";\n    style.minWidth = \"0px\";\n    style.height = \"150px\";\n    style.display = \"block\";\n\n    outer.appendChild(inner);\n\n    var body = (doc && doc.documentElement) || (document && document.documentElement);\n    if (!body) return 0;\n\n    body.appendChild(outer);\n\n    var noScrollbar = inner.offsetWidth;\n\n    style.overflow = \"scroll\";\n    var withScrollbar = inner.offsetWidth;\n\n    if (noScrollbar === withScrollbar) {\n        withScrollbar = outer.clientWidth;\n    }\n\n    body.removeChild(outer);\n\n    return noScrollbar - withScrollbar;\n};\n\nexports.computedStyle = function(element, style) {\n    return window.getComputedStyle(element, \"\") || {};\n};\n\nexports.setStyle = function(styles, property, value) {\n    if (styles[property] !== value) {\n        //console.log(\"set style\", property, styles[property], value);\n        styles[property] = value;\n    }\n};\n\nexports.HAS_CSS_ANIMATION = false;\nexports.HAS_CSS_TRANSFORMS = false;\nexports.HI_DPI = useragent.isWin\n    ? typeof window !== \"undefined\" && window.devicePixelRatio >= 1.5\n    : true;\n\nif (useragent.isChromeOS) exports.HI_DPI = false;\n\nif (typeof document !== \"undefined\") {\n    // detect CSS transformation support\n    var div = document.createElement(\"div\");\n    if (exports.HI_DPI && div.style.transform  !== undefined)\n        exports.HAS_CSS_TRANSFORMS = true;\n    if (!useragent.isEdge && typeof div.style.animationName !== \"undefined\")\n        exports.HAS_CSS_ANIMATION = true;\n    div = null;\n}\n\nif (exports.HAS_CSS_TRANSFORMS) {\n    exports.translate = function(element, tx, ty) {\n        element.style.transform = \"translate(\" + Math.round(tx) + \"px, \" + Math.round(ty) +\"px)\";\n    };\n} else {\n    exports.translate = function(element, tx, ty) {\n        element.style.top = Math.round(ty) + \"px\";\n        element.style.left = Math.round(tx) + \"px\";\n    };\n}\n","\"use strict\";\n\nvar keys = require(\"./keys\");\nvar useragent = require(\"./useragent\");\n\nvar pressedKeys = null;\nvar ts = 0;\n\nvar activeListenerOptions;\nfunction detectListenerOptionsSupport() {\n    activeListenerOptions = false;\n    try {\n        document.createComment(\"\").addEventListener(\"test\", function() {}, { \n            get passive() { \n                activeListenerOptions = {passive: false};\n            }\n        });\n    } catch(e) {}\n}\n\nfunction getListenerOptions() {\n    if (activeListenerOptions == undefined)\n        detectListenerOptionsSupport();\n    return activeListenerOptions;\n}\n\nfunction EventListener(elem, type, callback) {\n    this.elem = elem;\n    this.type = type;\n    this.callback = callback;\n}\nEventListener.prototype.destroy = function() {\n    removeListener(this.elem, this.type, this.callback);\n    this.elem = this.type = this.callback = undefined;\n};\n\nvar addListener = exports.addListener = function(elem, type, callback, destroyer) {\n    elem.addEventListener(type, callback, getListenerOptions());\n    if (destroyer)\n        destroyer.$toDestroy.push(new EventListener(elem, type, callback));\n};\n\nvar removeListener = exports.removeListener = function(elem, type, callback) {\n    elem.removeEventListener(type, callback, getListenerOptions());\n};\n\n/*\n* Prevents propagation and clobbers the default action of the passed event\n*/\nexports.stopEvent = function(e) {\n    exports.stopPropagation(e);\n    exports.preventDefault(e);\n    return false;\n};\n\nexports.stopPropagation = function(e) {\n    if (e.stopPropagation)\n        e.stopPropagation();\n};\n\nexports.preventDefault = function(e) {\n    if (e.preventDefault)\n        e.preventDefault();\n};\n\n/*\n * @return {Number} 0 for left button, 1 for middle button, 2 for right button\n */\nexports.getButton = function(e) {\n    if (e.type == \"dblclick\")\n        return 0;\n    if (e.type == \"contextmenu\" || (useragent.isMac && (e.ctrlKey && !e.altKey && !e.shiftKey)))\n        return 2;\n\n    // DOM Event\n    return e.button;\n};\n\nexports.capture = function(el, eventHandler, releaseCaptureHandler) {\n    var ownerDocument = el && el.ownerDocument || document;\n    function onMouseUp(e) {\n        eventHandler && eventHandler(e);\n        releaseCaptureHandler && releaseCaptureHandler(e);\n\n        removeListener(ownerDocument, \"mousemove\", eventHandler);\n        removeListener(ownerDocument, \"mouseup\", onMouseUp);\n        removeListener(ownerDocument, \"dragstart\", onMouseUp);\n    }\n\n    addListener(ownerDocument, \"mousemove\", eventHandler);\n    addListener(ownerDocument, \"mouseup\", onMouseUp);\n    addListener(ownerDocument, \"dragstart\", onMouseUp);\n    \n    return onMouseUp;\n};\n\nexports.addMouseWheelListener = function(el, callback, destroyer) {\n    addListener(el, \"wheel\",  function(e) {\n        var factor = 0.15;\n        // workaround for firefox changing deltaMode based on which property is accessed first\n        var deltaX = e.deltaX || 0;\n        var deltaY = e.deltaY || 0;\n        switch (e.deltaMode) {\n            case e.DOM_DELTA_PIXEL:\n                e.wheelX = deltaX * factor;\n                e.wheelY = deltaY * factor;\n                break;\n            case e.DOM_DELTA_LINE:\n                var linePixels = 15;\n                e.wheelX = deltaX * linePixels;\n                e.wheelY = deltaY * linePixels;\n                break;\n            case e.DOM_DELTA_PAGE:\n                var pagePixels = 150;\n                e.wheelX = deltaX * pagePixels;\n                e.wheelY = deltaY * pagePixels;\n                break;\n        }\n        callback(e);\n    }, destroyer);\n};\n\nexports.addMultiMouseDownListener = function(elements, timeouts, eventHandler, callbackName, destroyer) {\n    var clicks = 0;\n    var startX, startY, timer; \n    var eventNames = {\n        2: \"dblclick\",\n        3: \"tripleclick\",\n        4: \"quadclick\"\n    };\n\n    function onMousedown(e) {\n        if (exports.getButton(e) !== 0) {\n            clicks = 0;\n        } else if (e.detail > 1) {\n            clicks++;\n            if (clicks > 4)\n                clicks = 1;\n        } else {\n            clicks = 1;\n        }\n        if (useragent.isIE) {\n            var isNewClick = Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5;\n            if (!timer || isNewClick)\n                clicks = 1;\n            if (timer)\n                clearTimeout(timer);\n            timer = setTimeout(function() {timer = null;}, timeouts[clicks - 1] || 600);\n\n            if (clicks == 1) {\n                startX = e.clientX;\n                startY = e.clientY;\n            }\n        }\n        \n        e._clicks = clicks;\n\n        eventHandler[callbackName](\"mousedown\", e);\n\n        if (clicks > 4)\n            clicks = 0;\n        else if (clicks > 1)\n            return eventHandler[callbackName](eventNames[clicks], e);\n    }\n    if (!Array.isArray(elements))\n        elements = [elements];\n    elements.forEach(function(el) {\n        addListener(el, \"mousedown\", onMousedown, destroyer);\n    });\n};\n\nvar getModifierHash = function(e) {\n    return 0 | (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0);\n};\n\nexports.getModifierString = function(e) {\n    return keys.KEY_MODS[getModifierHash(e)];\n};\n\nfunction normalizeCommandKeys(callback, e, keyCode) {\n    var hashId = getModifierHash(e);\n\n    if (!useragent.isMac && pressedKeys) {\n        if (e.getModifierState && (e.getModifierState(\"OS\") || e.getModifierState(\"Win\")))\n            hashId |= 8;\n        if (pressedKeys.altGr) {\n            if ((3 & hashId) != 3)\n                pressedKeys.altGr = 0;\n            else\n                return;\n        }\n        if (keyCode === 18 || keyCode === 17) {\n            var location = \"location\" in e ? e.location : e.keyLocation;\n            if (keyCode === 17 && location === 1) {\n                if (pressedKeys[keyCode] == 1)\n                    ts = e.timeStamp;\n            } else if (keyCode === 18 && hashId === 3 && location === 2) {\n                var dt = e.timeStamp - ts;\n                if (dt < 50)\n                    pressedKeys.altGr = true;\n            }\n        }\n    }\n    \n    if (keyCode in keys.MODIFIER_KEYS) {\n        keyCode = -1;\n    }\n    \n    if (!hashId && keyCode === 13) {\n        var location = \"location\" in e ? e.location : e.keyLocation;\n        if (location === 3) {\n            callback(e, hashId, -keyCode);\n            if (e.defaultPrevented)\n                return;\n        }\n    }\n    \n    if (useragent.isChromeOS && hashId & 8) {\n        callback(e, hashId, keyCode);\n        if (e.defaultPrevented)\n            return;\n        else\n            hashId &= ~8;\n    }\n\n    // If there is no hashId and the keyCode is not a function key, then\n    // we don't call the callback as we don't handle a command key here\n    // (it's a normal key/character input).\n    if (!hashId && !(keyCode in keys.FUNCTION_KEYS) && !(keyCode in keys.PRINTABLE_KEYS)) {\n        return false;\n    }\n    \n    return callback(e, hashId, keyCode);\n}\n\n\nexports.addCommandKeyListener = function(el, callback, destroyer) {\n    if (useragent.isOldGecko || (useragent.isOpera && !(\"KeyboardEvent\" in window))) {\n        // Old versions of Gecko aka. Firefox < 4.0 didn't repeat the keydown\n        // event if the user pressed the key for a longer time. Instead, the\n        // keydown event was fired once and later on only the keypress event.\n        // To emulate the 'right' keydown behavior, the keyCode of the initial\n        // keyDown event is stored and in the following keypress events the\n        // stores keyCode is used to emulate a keyDown event.\n        var lastKeyDownKeyCode = null;\n        addListener(el, \"keydown\", function(e) {\n            lastKeyDownKeyCode = e.keyCode;\n        }, destroyer);\n        addListener(el, \"keypress\", function(e) {\n            return normalizeCommandKeys(callback, e, lastKeyDownKeyCode);\n        }, destroyer);\n    } else {\n        var lastDefaultPrevented = null;\n\n        addListener(el, \"keydown\", function(e) {\n            pressedKeys[e.keyCode] = (pressedKeys[e.keyCode] || 0) + 1;\n            var result = normalizeCommandKeys(callback, e, e.keyCode);\n            lastDefaultPrevented = e.defaultPrevented;\n            return result;\n        }, destroyer);\n\n        addListener(el, \"keypress\", function(e) {\n            if (lastDefaultPrevented && (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey)) {\n                exports.stopEvent(e);\n                lastDefaultPrevented = null;\n            }\n        }, destroyer);\n\n        addListener(el, \"keyup\", function(e) {\n            pressedKeys[e.keyCode] = null;\n        }, destroyer);\n\n        if (!pressedKeys) {\n            resetPressedKeys();\n            addListener(window, \"focus\", resetPressedKeys);\n        }\n    }\n};\nfunction resetPressedKeys() {\n    pressedKeys = Object.create(null);\n}\n\nif (typeof window == \"object\" && window.postMessage && !useragent.isOldIE) {\n    var postMessageId = 1;\n    exports.nextTick = function(callback, win) {\n        win = win || window;\n        var messageName = \"zero-timeout-message-\" + (postMessageId++);\n        \n        var listener = function(e) {\n            if (e.data == messageName) {\n                exports.stopPropagation(e);\n                removeListener(win, \"message\", listener);\n                callback();\n            }\n        };\n        \n        addListener(win, \"message\", listener);\n        win.postMessage(messageName, \"*\");\n    };\n}\n\nexports.$idleBlocked = false;\nexports.onIdle = function(cb, timeout) {\n    return setTimeout(function handler() {\n        if (!exports.$idleBlocked) {\n            cb();\n        } else {\n            setTimeout(handler, 100);\n        }\n    }, timeout);\n};\n\nexports.$idleBlockId = null;\nexports.blockIdle = function(delay) {\n    if (exports.$idleBlockId)\n        clearTimeout(exports.$idleBlockId);\n        \n    exports.$idleBlocked = true;\n    exports.$idleBlockId = setTimeout(function() {\n        exports.$idleBlocked = false;\n    }, delay || 100);\n};\n\nexports.nextFrame = typeof window == \"object\" && (window.requestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.msRequestAnimationFrame\n    || window.oRequestAnimationFrame);\n\nif (exports.nextFrame)\n    exports.nextFrame = exports.nextFrame.bind(window);\nelse\n    exports.nextFrame = function(callback) {\n        setTimeout(callback, 17);\n    };\n","\"use strict\";\n\nvar EventEmitter = {};\nvar stopPropagation = function() { this.propagationStopped = true; };\nvar preventDefault = function() { this.defaultPrevented = true; };\n\nEventEmitter._emit =\nEventEmitter._dispatchEvent = function(eventName, e) {\n    this._eventRegistry || (this._eventRegistry = {});\n    this._defaultHandlers || (this._defaultHandlers = {});\n\n    var listeners = this._eventRegistry[eventName] || [];\n    var defaultHandler = this._defaultHandlers[eventName];\n    if (!listeners.length && !defaultHandler)\n        return;\n\n    if (typeof e != \"object\" || !e)\n        e = {};\n\n    if (!e.type)\n        e.type = eventName;\n    if (!e.stopPropagation)\n        e.stopPropagation = stopPropagation;\n    if (!e.preventDefault)\n        e.preventDefault = preventDefault;\n\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++) {\n        listeners[i](e, this);\n        if (e.propagationStopped)\n            break;\n    }\n    \n    if (defaultHandler && !e.defaultPrevented)\n        return defaultHandler(e, this);\n};\n\n\nEventEmitter._signal = function(eventName, e) {\n    var listeners = (this._eventRegistry || {})[eventName];\n    if (!listeners)\n        return;\n    listeners = listeners.slice();\n    for (var i=0; i<listeners.length; i++)\n        listeners[i](e, this);\n};\n\nEventEmitter.once = function(eventName, callback) {\n    var _self = this;\n    this.on(eventName, function newCallback() {\n        _self.off(eventName, newCallback);\n        callback.apply(null, arguments);\n    });\n    if (!callback) {\n        /*global Promise*/\n        return new Promise(function(resolve) {\n            callback = resolve;\n        });\n    }\n};\n\n\nEventEmitter.setDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        handlers = this._defaultHandlers = {_disabled_: {}};\n    \n    if (handlers[eventName]) {\n        var old = handlers[eventName];\n        var disabled = handlers._disabled_[eventName];\n        if (!disabled)\n            handlers._disabled_[eventName] = disabled = [];\n        disabled.push(old);\n        var i = disabled.indexOf(callback);\n        if (i != -1) \n            disabled.splice(i, 1);\n    }\n    handlers[eventName] = callback;\n};\nEventEmitter.removeDefaultHandler = function(eventName, callback) {\n    var handlers = this._defaultHandlers;\n    if (!handlers)\n        return;\n    var disabled = handlers._disabled_[eventName];\n    \n    if (handlers[eventName] == callback) {\n        if (disabled)\n            this.setDefaultHandler(eventName, disabled.pop());\n    } else if (disabled) {\n        var i = disabled.indexOf(callback);\n        if (i != -1)\n            disabled.splice(i, 1);\n    }\n};\n\nEventEmitter.on =\nEventEmitter.addEventListener = function(eventName, callback, capturing) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        listeners = this._eventRegistry[eventName] = [];\n\n    if (listeners.indexOf(callback) == -1)\n        listeners[capturing ? \"unshift\" : \"push\"](callback);\n    return callback;\n};\n\nEventEmitter.off =\nEventEmitter.removeListener =\nEventEmitter.removeEventListener = function(eventName, callback) {\n    this._eventRegistry = this._eventRegistry || {};\n\n    var listeners = this._eventRegistry[eventName];\n    if (!listeners)\n        return;\n\n    var index = listeners.indexOf(callback);\n    if (index !== -1)\n        listeners.splice(index, 1);\n};\n\nEventEmitter.removeAllListeners = function(eventName) {\n    if (!eventName) this._eventRegistry = this._defaultHandlers = undefined;\n    if (this._eventRegistry) this._eventRegistry[eventName] = undefined;\n    if (this._defaultHandlers) this._defaultHandlers[eventName] = undefined;\n};\n\nexports.EventEmitter = EventEmitter;\n","/*! @license\n==========================================================================\nSproutCore -- JavaScript Application Framework\ncopyright 2006-2009, Sprout Systems Inc., Apple Inc. and contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a\ncopy of this software and associated documentation files (the \"Software\"),\nto deal in the Software without restriction, including without limitation\nthe rights to use, copy, modify, merge, publish, distribute, sublicense,\nand/or sell copies of the Software, and to permit persons to whom the\nSoftware is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\nDEALINGS IN THE SOFTWARE.\n\nSproutCore and the SproutCore logo are trademarks of Sprout Systems, Inc.\n\nFor more information about SproutCore, visit http://www.sproutcore.com\n\n\n==========================================================================\n@license */\n\n// Most of the following code is taken from SproutCore with a few changes.\n\n\"use strict\";\n\nvar oop = require(\"./oop\");\n\n/*\n * Helper functions and hashes for key handling.\n */\nvar Keys = (function() {\n    var ret = {\n        MODIFIER_KEYS: {\n            16: 'Shift', 17: 'Ctrl', 18: 'Alt', 224: 'Meta',\n            91: 'MetaLeft', 92: 'MetaRight', 93: 'ContextMenu'\n        },\n\n        KEY_MODS: {\n            \"ctrl\": 1, \"alt\": 2, \"option\" : 2, \"shift\": 4,\n            \"super\": 8, \"meta\": 8, \"command\": 8, \"cmd\": 8, \n            \"control\": 1\n        },\n\n        FUNCTION_KEYS : {\n            8  : \"Backspace\",\n            9  : \"Tab\",\n            13 : \"Return\",\n            19 : \"Pause\",\n            27 : \"Esc\",\n            32 : \"Space\",\n            33 : \"PageUp\",\n            34 : \"PageDown\",\n            35 : \"End\",\n            36 : \"Home\",\n            37 : \"Left\",\n            38 : \"Up\",\n            39 : \"Right\",\n            40 : \"Down\",\n            44 : \"Print\",\n            45 : \"Insert\",\n            46 : \"Delete\",\n            96 : \"Numpad0\",\n            97 : \"Numpad1\",\n            98 : \"Numpad2\",\n            99 : \"Numpad3\",\n            100: \"Numpad4\",\n            101: \"Numpad5\",\n            102: \"Numpad6\",\n            103: \"Numpad7\",\n            104: \"Numpad8\",\n            105: \"Numpad9\",\n            '-13': \"NumpadEnter\",\n            112: \"F1\",\n            113: \"F2\",\n            114: \"F3\",\n            115: \"F4\",\n            116: \"F5\",\n            117: \"F6\",\n            118: \"F7\",\n            119: \"F8\",\n            120: \"F9\",\n            121: \"F10\",\n            122: \"F11\",\n            123: \"F12\",\n            144: \"Numlock\",\n            145: \"Scrolllock\"\n        },\n\n        PRINTABLE_KEYS: {\n           32: ' ',  48: '0',  49: '1',  50: '2',  51: '3',  52: '4', 53:  '5',\n           54: '6',  55: '7',  56: '8',  57: '9',  59: ';',  61: '=', 65:  'a',\n           66: 'b',  67: 'c',  68: 'd',  69: 'e',  70: 'f',  71: 'g', 72:  'h',\n           73: 'i',  74: 'j',  75: 'k',  76: 'l',  77: 'm',  78: 'n', 79:  'o',\n           80: 'p',  81: 'q',  82: 'r',  83: 's',  84: 't',  85: 'u', 86:  'v',\n           87: 'w',  88: 'x',  89: 'y',  90: 'z', 107: '+', 109: '-', 110: '.',\n          186: ';', 187: '=', 188: ',', 189: '-', 190: '.', 191: '/', 192: '`',\n          219: '[', 220: '\\\\',221: ']', 222: \"'\", 111: '/', 106: '*'\n        }\n    };\n\n    // workaround for firefox bug\n    ret.PRINTABLE_KEYS[173] = '-';\n\n    // A reverse map of FUNCTION_KEYS\n    var name, i;\n    for (i in ret.FUNCTION_KEYS) {\n        name = ret.FUNCTION_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n\n    // A reverse map of PRINTABLE_KEYS\n    for (i in ret.PRINTABLE_KEYS) {\n        name = ret.PRINTABLE_KEYS[i].toLowerCase();\n        ret[name] = parseInt(i, 10);\n    }\n\n    // Add the MODIFIER_KEYS, FUNCTION_KEYS and PRINTABLE_KEYS to the KEY\n    // variables as well.\n    oop.mixin(ret, ret.MODIFIER_KEYS);\n    oop.mixin(ret, ret.PRINTABLE_KEYS);\n    oop.mixin(ret, ret.FUNCTION_KEYS);\n\n    // aliases\n    ret.enter = ret[\"return\"];\n    ret.escape = ret.esc;\n    ret.del = ret[\"delete\"];\n    \n    (function() {\n        var mods = [\"cmd\", \"ctrl\", \"alt\", \"shift\"];\n        for (var i = Math.pow(2, mods.length); i--;) {            \n            ret.KEY_MODS[i] = mods.filter(function(x) {\n                return i & ret.KEY_MODS[x];\n            }).join(\"-\") + \"-\";\n        }\n    })();\n\n    ret.KEY_MODS[0] = \"\";\n    ret.KEY_MODS[-1] = \"input-\";\n\n    return ret;\n})();\noop.mixin(exports, Keys);\n\nexports.keyCodeToString = function(keyCode) {\n    // Language-switching keystroke in Chrome/Linux emits keyCode 0.\n    var keyString = Keys[keyCode];\n    if (typeof keyString != \"string\")\n        keyString = String.fromCharCode(keyCode);\n    return keyString.toLowerCase();\n};\n","\"use strict\";\n\nexports.last = function(a) {\n    return a[a.length - 1];\n};\n\nexports.stringReverse = function(string) {\n    return string.split(\"\").reverse().join(\"\");\n};\n\nexports.stringRepeat = function (string, count) {\n    var result = '';\n    while (count > 0) {\n        if (count & 1)\n            result += string;\n\n        if (count >>= 1)\n            string += string;\n    }\n    return result;\n};\n\nvar trimBeginRegexp = /^\\s\\s*/;\nvar trimEndRegexp = /\\s\\s*$/;\n\nexports.stringTrimLeft = function (string) {\n    return string.replace(trimBeginRegexp, '');\n};\n\nexports.stringTrimRight = function (string) {\n    return string.replace(trimEndRegexp, '');\n};\n\nexports.copyObject = function(obj) {\n    var copy = {};\n    for (var key in obj) {\n        copy[key] = obj[key];\n    }\n    return copy;\n};\n\nexports.copyArray = function(array){\n    var copy = [];\n    for (var i=0, l=array.length; i<l; i++) {\n        if (array[i] && typeof array[i] == \"object\")\n            copy[i] = this.copyObject(array[i]);\n        else \n            copy[i] = array[i];\n    }\n    return copy;\n};\n\nexports.deepCopy = function deepCopy(obj) {\n    if (typeof obj !== \"object\" || !obj)\n        return obj;\n    var copy;\n    if (Array.isArray(obj)) {\n        copy = [];\n        for (var key = 0; key < obj.length; key++) {\n            copy[key] = deepCopy(obj[key]);\n        }\n        return copy;\n    }\n    if (Object.prototype.toString.call(obj) !== \"[object Object]\")\n        return obj;\n    \n    copy = {};\n    for (var key in obj)\n        copy[key] = deepCopy(obj[key]);\n    return copy;\n};\n\nexports.arrayToMap = function(arr) {\n    var map = {};\n    for (var i=0; i<arr.length; i++) {\n        map[arr[i]] = 1;\n    }\n    return map;\n\n};\n\nexports.createMap = function(props) {\n    var map = Object.create(null);\n    for (var i in props) {\n        map[i] = props[i];\n    }\n    return map;\n};\n\n/*\n * splice out of 'array' anything that === 'value'\n */\nexports.arrayRemove = function(array, value) {\n  for (var i = 0; i <= array.length; i++) {\n    if (value === array[i]) {\n      array.splice(i, 1);\n    }\n  }\n};\n\nexports.escapeRegExp = function(str) {\n    return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g, '\\\\$1');\n};\n\nexports.escapeHTML = function(str) {\n    return (\"\" + str).replace(/&/g, \"&#38;\").replace(/\"/g, \"&#34;\").replace(/'/g, \"&#39;\").replace(/</g, \"&#60;\");\n};\n\nexports.getMatchOffsets = function(string, regExp) {\n    var matches = [];\n\n    string.replace(regExp, function(str) {\n        matches.push({\n            offset: arguments[arguments.length-2],\n            length: str.length\n        });\n    });\n\n    return matches;\n};\n\n/* deprecated */\nexports.deferredCall = function(fcn) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var deferred = function(timeout) {\n        deferred.cancel();\n        timer = setTimeout(callback, timeout || 0);\n        return deferred;\n    };\n\n    deferred.schedule = deferred;\n\n    deferred.call = function() {\n        this.cancel();\n        fcn();\n        return deferred;\n    };\n\n    deferred.cancel = function() {\n        clearTimeout(timer);\n        timer = null;\n        return deferred;\n    };\n    \n    deferred.isPending = function() {\n        return timer;\n    };\n\n    return deferred;\n};\n\n\nexports.delayedCall = function(fcn, defaultTimeout) {\n    var timer = null;\n    var callback = function() {\n        timer = null;\n        fcn();\n    };\n\n    var _self = function(timeout) {\n        if (timer == null)\n            timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n\n    _self.delay = function(timeout) {\n        timer && clearTimeout(timer);\n        timer = setTimeout(callback, timeout || defaultTimeout);\n    };\n    _self.schedule = _self;\n\n    _self.call = function() {\n        this.cancel();\n        fcn();\n    };\n\n    _self.cancel = function() {\n        timer && clearTimeout(timer);\n        timer = null;\n    };\n\n    _self.isPending = function() {\n        return timer;\n    };\n\n    return _self;\n};\n","/*\n * based on code from:\n *\n * @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/requirejs for details\n */\n\n\"use strict\";\nvar dom = require(\"./dom\");\n\nexports.get = function (url, callback) {\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', url, true);\n    xhr.onreadystatechange = function () {\n        //Do not explicitly handle errors, those should be\n        //visible via console output in the browser.\n        if (xhr.readyState === 4) {\n            callback(xhr.responseText);\n        }\n    };\n    xhr.send(null);\n};\n\nexports.loadScript = function(path, callback) {\n    var head = dom.getDocumentHead();\n    var s = document.createElement('script');\n\n    s.src = path;\n    head.appendChild(s);\n\n    s.onload = s.onreadystatechange = function(_, isAbort) {\n        if (isAbort || !s.readyState || s.readyState == \"loaded\" || s.readyState == \"complete\") {\n            s = s.onload = s.onreadystatechange = null;\n            if (!isAbort)\n                callback();\n        }\n    };\n};\n\n/*\n * Convert a url into a fully qualified absolute URL\n * This function does not work in IE6\n */\nexports.qualifyURL = function(url) {\n    var a = document.createElement('a');\n    a.href = url;\n    return a.href;\n};\n","\"use strict\";\n\nexports.inherits = function(ctor, superCtor) {\n    ctor.super_ = superCtor;\n    ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n        }\n    });\n};\n\nexports.mixin = function(obj, mixin) {\n    for (var key in mixin) {\n        obj[key] = mixin[key];\n    }\n    return obj;\n};\n\nexports.implement = function(proto, mixin) {\n    exports.mixin(proto, mixin);\n};\n","\"use strict\";\n\n/*\n * I hate doing this, but we need some way to determine if the user is on a Mac\n * The reason is that users have different expectations of their key combinations.\n *\n * Take copy as an example, Mac people expect to use CMD or APPLE + C\n * Windows folks expect to use CTRL + C\n */\nexports.OS = {\n    LINUX: \"LINUX\",\n    MAC: \"MAC\",\n    WINDOWS: \"WINDOWS\"\n};\n\n/*\n * Return an exports.OS constant\n */\nexports.getOS = function() {\n    if (exports.isMac) {\n        return exports.OS.MAC;\n    } else if (exports.isLinux) {\n        return exports.OS.LINUX;\n    } else {\n        return exports.OS.WINDOWS;\n    }\n};\n\n// this can be called in non browser environments (e.g. from ace/requirejs/text)\nvar _navigator = typeof navigator == \"object\" ? navigator : {};\n\nvar os = (/mac|win|linux/i.exec(_navigator.platform) || [\"other\"])[0].toLowerCase();\nvar ua = _navigator.userAgent || \"\";\nvar appName = _navigator.appName || \"\";\n\n// Is the user using a browser that identifies itself as Windows\nexports.isWin = (os == \"win\");\n\n// Is the user using a browser that identifies itself as Mac OS\nexports.isMac = (os == \"mac\");\n\n// Is the user using a browser that identifies itself as Linux\nexports.isLinux = (os == \"linux\");\n\n// Windows Store JavaScript apps (aka Metro apps written in HTML5 and JavaScript) do not use the \"Microsoft Internet Explorer\" string in their user agent, but \"MSAppHost\" instead.\nexports.isIE = \n    (appName == \"Microsoft Internet Explorer\" || appName.indexOf(\"MSAppHost\") >= 0)\n    ? parseFloat((ua.match(/(?:MSIE |Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1])\n    : parseFloat((ua.match(/(?:Trident\\/[0-9]+[\\.0-9]+;.*rv:)([0-9]+[\\.0-9]+)/)||[])[1]); // for ie\n    \nexports.isOldIE = exports.isIE && exports.isIE < 9;\n\n// Is this Firefox or related?\nexports.isGecko = exports.isMozilla = ua.match(/ Gecko\\/\\d+/);\n\n// Is this Opera \nexports.isOpera = typeof opera == \"object\" && Object.prototype.toString.call(window.opera) == \"[object Opera]\";\n\n// Is the user using a browser that identifies itself as WebKit \nexports.isWebKit = parseFloat(ua.split(\"WebKit/\")[1]) || undefined;\n\nexports.isChrome = parseFloat(ua.split(\" Chrome/\")[1]) || undefined;\n\nexports.isEdge = parseFloat(ua.split(\" Edge/\")[1]) || undefined;\n\nexports.isAIR = ua.indexOf(\"AdobeAIR\") >= 0;\n\nexports.isAndroid = ua.indexOf(\"Android\") >= 0;\n\nexports.isChromeOS = ua.indexOf(\" CrOS \") >= 0;\n\nexports.isIOS = /iPad|iPhone|iPod/.test(ua) && !window.MSStream;\n\nif (exports.isIOS) exports.isMac = true;\n\nexports.isMobile = exports.isIOS || exports.isAndroid;\n","\"use strict\";\n\nvar dom = require(\"./lib/dom\");\n\nfunction LineWidgets(session) {\n    this.session = session;\n    this.session.widgetManager = this;\n    this.session.getRowLength = this.getRowLength;\n    this.session.$getWidgetScreenLength = this.$getWidgetScreenLength;\n    this.updateOnChange = this.updateOnChange.bind(this);\n    this.renderWidgets = this.renderWidgets.bind(this);\n    this.measureWidgets = this.measureWidgets.bind(this);\n    this.session._changedWidgets = [];\n    this.$onChangeEditor = this.$onChangeEditor.bind(this);\n    \n    this.session.on(\"change\", this.updateOnChange);\n    this.session.on(\"changeFold\", this.updateOnFold);\n    this.session.on(\"changeEditor\", this.$onChangeEditor);\n}\n\n(function() {\n    this.getRowLength = function(row) {\n        var h;\n        if (this.lineWidgets)\n            h = this.lineWidgets[row] && this.lineWidgets[row].rowCount || 0;\n        else \n            h = 0;\n        if (!this.$useWrapMode || !this.$wrapData[row]) {\n            return 1 + h;\n        } else {\n            return this.$wrapData[row].length + 1 + h;\n        }\n    };\n\n    this.$getWidgetScreenLength = function() {\n        var screenRows = 0;\n        this.lineWidgets.forEach(function(w){\n            if (w && w.rowCount && !w.hidden)\n                screenRows += w.rowCount;\n        });\n        return screenRows;\n    };    \n    \n    this.$onChangeEditor = function(e) {\n        this.attach(e.editor);\n    };\n    \n    this.attach = function(editor) {\n        if (editor  && editor.widgetManager && editor.widgetManager != this)\n            editor.widgetManager.detach();\n\n        if (this.editor == editor)\n            return;\n\n        this.detach();\n        this.editor = editor;\n        \n        if (editor) {\n            editor.widgetManager = this;\n            editor.renderer.on(\"beforeRender\", this.measureWidgets);\n            editor.renderer.on(\"afterRender\", this.renderWidgets);\n        }\n    };\n    this.detach = function(e) {\n        var editor = this.editor;\n        if (!editor)\n            return;\n        \n        this.editor = null;\n        editor.widgetManager = null;\n        \n        editor.renderer.off(\"beforeRender\", this.measureWidgets);\n        editor.renderer.off(\"afterRender\", this.renderWidgets);\n        var lineWidgets = this.session.lineWidgets;\n        lineWidgets && lineWidgets.forEach(function(w) {\n            if (w && w.el && w.el.parentNode) {\n                w._inDocument = false;\n                w.el.parentNode.removeChild(w.el);\n            }\n        });\n    };\n\n    this.updateOnFold = function(e, session) {\n        var lineWidgets = session.lineWidgets;\n        if (!lineWidgets || !e.action)\n            return;\n        var fold = e.data;\n        var start = fold.start.row;\n        var end = fold.end.row;\n        var hide = e.action == \"add\";\n        for (var i = start + 1; i < end; i++) {\n            if (lineWidgets[i])\n                lineWidgets[i].hidden = hide;\n        }\n        if (lineWidgets[end]) {\n            if (hide) {\n                if (!lineWidgets[start])\n                    lineWidgets[start] = lineWidgets[end];\n                else\n                    lineWidgets[end].hidden = hide;\n            } else {\n                if (lineWidgets[start] == lineWidgets[end])\n                    lineWidgets[start] = undefined;\n                lineWidgets[end].hidden = hide;\n            }\n        }\n    };\n    \n    this.updateOnChange = function(delta) {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        \n        var startRow = delta.start.row;\n        var len = delta.end.row - startRow;\n\n        if (len === 0) {\n            // return\n        } else if (delta.action == \"remove\") {\n            var removed = lineWidgets.splice(startRow + 1, len);\n            if (!lineWidgets[startRow] && removed[removed.length - 1]) {\n                lineWidgets[startRow] = removed.pop();\n            }\n            removed.forEach(function(w) {\n                w && this.removeLineWidget(w);\n            }, this);\n            this.$updateRows();\n        } else {\n            var args = new Array(len);\n            if (lineWidgets[startRow] && lineWidgets[startRow].column != null) {\n                if (delta.start.column > lineWidgets[startRow].column)\n                    startRow++;\n            }\n            args.unshift(startRow, 0);\n            lineWidgets.splice.apply(lineWidgets, args);\n            this.$updateRows();\n        }\n    };\n    \n    this.$updateRows = function() {\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets) return;\n        var noWidgets = true;\n        lineWidgets.forEach(function(w, i) {\n            if (w) {\n                noWidgets = false;\n                w.row = i;\n                while (w.$oldWidget) {\n                    w.$oldWidget.row = i;\n                    w = w.$oldWidget;\n                }\n            }\n        });\n        if (noWidgets)\n            this.session.lineWidgets = null;\n    };\n\n    this.$registerLineWidget = function(w) {\n        if (!this.session.lineWidgets)\n            this.session.lineWidgets = new Array(this.session.getLength());\n        \n        var old = this.session.lineWidgets[w.row];\n        if (old) {\n            w.$oldWidget = old;\n            if (old.el && old.el.parentNode) {\n                old.el.parentNode.removeChild(old.el);\n                old._inDocument = false;\n            }\n        }\n            \n        this.session.lineWidgets[w.row] = w;\n        return w;\n    };\n    \n    this.addLineWidget = function(w) {\n        this.$registerLineWidget(w);\n        w.session = this.session;\n        \n        if (!this.editor) return w;\n        \n        var renderer = this.editor.renderer;\n        if (w.html && !w.el) {\n            w.el = dom.createElement(\"div\");\n            w.el.innerHTML = w.html;\n        }\n        if (w.el) {\n            dom.addCssClass(w.el, \"ace_lineWidgetContainer\");\n            w.el.style.position = \"absolute\";\n            w.el.style.zIndex = 5;\n            renderer.container.appendChild(w.el);\n            w._inDocument = true;\n            \n            if (!w.coverGutter) {\n                w.el.style.zIndex = 3;\n            }\n            if (w.pixelHeight == null) {\n                w.pixelHeight = w.el.offsetHeight;\n            }\n        }\n        if (w.rowCount == null) {\n            w.rowCount = w.pixelHeight / renderer.layerConfig.lineHeight;\n        }\n        \n        var fold = this.session.getFoldAt(w.row, 0);\n        w.$fold = fold;\n        if (fold) {\n            var lineWidgets = this.session.lineWidgets;\n            if (w.row == fold.end.row && !lineWidgets[fold.start.row])\n                lineWidgets[fold.start.row] = w;\n            else\n                w.hidden = true;\n        }\n            \n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        \n        this.$updateRows();\n        this.renderWidgets(null, renderer);\n        this.onWidgetChanged(w);\n        return w;\n    };\n    \n    this.removeLineWidget = function(w) {\n        w._inDocument = false;\n        w.session = null;\n        if (w.el && w.el.parentNode)\n            w.el.parentNode.removeChild(w.el);\n        if (w.editor && w.editor.destroy) try {\n            w.editor.destroy();\n        } catch(e){}\n        if (this.session.lineWidgets) {\n            var w1 = this.session.lineWidgets[w.row];\n            if (w1 == w) {\n                this.session.lineWidgets[w.row] = w.$oldWidget;\n                if (w.$oldWidget)\n                    this.onWidgetChanged(w.$oldWidget);\n            } else {\n                while (w1) {\n                    if (w1.$oldWidget == w) {\n                        w1.$oldWidget = w.$oldWidget;\n                        break;\n                    }\n                    w1 = w1.$oldWidget;\n                }\n            }\n        }\n        this.session._emit(\"changeFold\", {data:{start:{row: w.row}}});\n        this.$updateRows();\n    };\n    \n    this.getWidgetsAtRow = function(row) {\n        var lineWidgets = this.session.lineWidgets;\n        var w = lineWidgets && lineWidgets[row];\n        var list = [];\n        while (w) {\n            list.push(w);\n            w = w.$oldWidget;\n        }\n        return list;\n    };\n    \n    this.onWidgetChanged = function(w) {\n        this.session._changedWidgets.push(w);\n        this.editor && this.editor.renderer.updateFull();\n    };\n    \n    this.measureWidgets = function(e, renderer) {\n        var changedWidgets = this.session._changedWidgets;\n        var config = renderer.layerConfig;\n        \n        if (!changedWidgets || !changedWidgets.length) return;\n        var min = Infinity;\n        for (var i = 0; i < changedWidgets.length; i++) {\n            var w = changedWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.session != this.session) continue;\n            if (!w._inDocument) {\n                if (this.session.lineWidgets[w.row] != w)\n                    continue;\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            \n            w.h = w.el.offsetHeight;\n            \n            if (!w.fixedWidth) {\n                w.w = w.el.offsetWidth;\n                w.screenWidth = Math.ceil(w.w / config.characterWidth);\n            }\n            \n            var rowCount = w.h / config.lineHeight;\n            if (w.coverLine) {\n                rowCount -= this.session.getRowLineCount(w.row);\n                if (rowCount < 0)\n                    rowCount = 0;\n            }\n            if (w.rowCount != rowCount) {\n                w.rowCount = rowCount;\n                if (w.row < min)\n                    min = w.row;\n            }\n        }\n        if (min != Infinity) {\n            this.session._emit(\"changeFold\", {data:{start:{row: min}}});\n            this.session.lineWidgetWidth = null;\n        }\n        this.session._changedWidgets = [];\n    };\n    \n    this.renderWidgets = function(e, renderer) {\n        var config = renderer.layerConfig;\n        var lineWidgets = this.session.lineWidgets;\n        if (!lineWidgets)\n            return;\n        var first = Math.min(this.firstRow, config.firstRow);\n        var last = Math.max(this.lastRow, config.lastRow, lineWidgets.length);\n        \n        while (first > 0 && !lineWidgets[first])\n            first--;\n        \n        this.firstRow = config.firstRow;\n        this.lastRow = config.lastRow;\n\n        renderer.$cursorLayer.config = config;\n        for (var i = first; i <= last; i++) {\n            var w = lineWidgets[i];\n            if (!w || !w.el) continue;\n            if (w.hidden) {\n                w.el.style.top = -100 - (w.pixelHeight || 0) + \"px\";\n                continue;\n            }\n            if (!w._inDocument) {\n                w._inDocument = true;\n                renderer.container.appendChild(w.el);\n            }\n            var top = renderer.$cursorLayer.getPixelPosition({row: i, column:0}, true).top;\n            if (!w.coverLine)\n                top += config.lineHeight * this.session.getRowLineCount(w.row);\n            w.el.style.top = top - config.offset + \"px\";\n            \n            var left = w.coverGutter ? 0 : renderer.gutterWidth;\n            if (!w.fixedWidth)\n                left -= renderer.scrollLeft;\n            w.el.style.left = left + \"px\";\n            \n            if (w.fullWidth && w.screenWidth) {\n                w.el.style.minWidth = config.width + 2 * config.padding + \"px\";\n            }\n            \n            if (w.fixedWidth) {\n                w.el.style.right = renderer.scrollBar.getWidth() + \"px\";\n            } else {\n                w.el.style.right = \"\";\n            }\n        }\n    };\n    \n}).call(LineWidgets.prototype);\n\n\nexports.LineWidgets = LineWidgets;\n","\"use strict\";\n\nvar Behaviour = function() {\n   this.$behaviours = {};\n};\n\n(function () {\n\n    this.add = function (name, action, callback) {\n        switch (undefined) {\n          case this.$behaviours:\n              this.$behaviours = {};\n          case this.$behaviours[name]:\n              this.$behaviours[name] = {};\n        }\n        this.$behaviours[name][action] = callback;\n    };\n    \n    this.addBehaviours = function (behaviours) {\n        for (var key in behaviours) {\n            for (var action in behaviours[key]) {\n                this.add(key, action, behaviours[key][action]);\n            }\n        }\n    };\n    \n    this.remove = function (name) {\n        if (this.$behaviours && this.$behaviours[name]) {\n            delete this.$behaviours[name];\n        }\n    };\n    \n    this.inherit = function (mode, filter) {\n        if (typeof mode === \"function\") {\n            var behaviours = new mode().getBehaviours(filter);\n        } else {\n            var behaviours = mode.getBehaviours(filter);\n        }\n        this.addBehaviours(behaviours);\n    };\n    \n    this.getBehaviours = function (filter) {\n        if (!filter) {\n            return this.$behaviours;\n        } else {\n            var ret = {};\n            for (var i = 0; i < filter.length; i++) {\n                if (this.$behaviours[filter[i]]) {\n                    ret[filter[i]] = this.$behaviours[filter[i]];\n                }\n            }\n            return ret;\n        }\n    };\n\n}).call(Behaviour.prototype);\n\nexports.Behaviour = Behaviour;\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar CstyleBehaviour = require(\"./cstyle\").CstyleBehaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\n\nvar CssBehaviour = function () {\n\n    this.inherit(CstyleBehaviour);\n\n    this.add(\"colon\", \"insertion\", function (state, action, editor, session, text) {\n        if (text === ':' && editor.selection.isEmpty()) {\n            var cursor = editor.getCursorPosition();\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            if (token && token.value.match(/\\s+/)) {\n                token = iterator.stepBackward();\n            }\n            if (token && token.type === 'support.type') {\n                var line = session.doc.getLine(cursor.row);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n                if (rightChar === ':') {\n                    return {\n                       text: '',\n                       selection: [1, 1]\n                    };\n                }\n                if (/^(\\s+[^;]|\\s*$)/.test(line.substring(cursor.column))) {\n                    return {\n                       text: ':;',\n                       selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"colon\", \"deletion\", function (state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected === ':') {\n            var cursor = editor.getCursorPosition();\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            if (token && token.value.match(/\\s+/)) {\n                token = iterator.stepBackward();\n            }\n            if (token && token.type === 'support.type') {\n                var line = session.doc.getLine(range.start.row);\n                var rightChar = line.substring(range.end.column, range.end.column + 1);\n                if (rightChar === ';') {\n                    range.end.column ++;\n                    return range;\n                }\n            }\n        }\n    });\n\n    this.add(\"semicolon\", \"insertion\", function (state, action, editor, session, text) {\n        if (text === ';' && editor.selection.isEmpty()) {\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === ';') {\n                return {\n                   text: '',\n                   selection: [1, 1]\n                };\n            }\n        }\n    });\n\n    this.add(\"!important\", \"insertion\", function (state, action, editor, session, text) {\n        if (text === '!' && editor.selection.isEmpty()) {\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n\n            if (/^\\s*(;|}|$)/.test(line.substring(cursor.column))) {\n                return {\n                    text: '!important',\n                    selection: [10, 10]\n                };\n            }\n        }\n    });\n\n};\noop.inherits(CssBehaviour, CstyleBehaviour);\n\nexports.CssBehaviour = CssBehaviour;\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\nvar lang = require(\"../../lib/lang\");\n\nvar SAFE_INSERT_IN_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\"];\nvar SAFE_INSERT_BEFORE_TOKENS =\n    [\"text\", \"paren.rparen\", \"rparen\", \"paren\", \"punctuation.operator\", \"comment\"];\n\nvar context;\nvar contextCache = {};\nvar defaultQuotes = {'\"' : '\"', \"'\" : \"'\"};\n\nvar initContext = function(editor) {\n    var id = -1;\n    if (editor.multiSelect) {\n        id = editor.selection.index;\n        if (contextCache.rangeCount != editor.multiSelect.rangeCount)\n            contextCache = {rangeCount: editor.multiSelect.rangeCount};\n    }\n    if (contextCache[id])\n        return context = contextCache[id];\n    context = contextCache[id] = {\n        autoInsertedBrackets: 0,\n        autoInsertedRow: -1,\n        autoInsertedLineEnd: \"\",\n        maybeInsertedBrackets: 0,\n        maybeInsertedRow: -1,\n        maybeInsertedLineStart: \"\",\n        maybeInsertedLineEnd: \"\"\n    };\n};\n\nvar getWrapped = function(selection, selected, opening, closing) {\n    var rowDiff = selection.end.row - selection.start.row;\n    return {\n        text: opening + selected + closing,\n        selection: [\n                0,\n                selection.start.column + 1,\n                rowDiff,\n                selection.end.column + (rowDiff ? 0 : 1)\n            ]\n    };\n};\n\nvar CstyleBehaviour = function(options) {\n    this.add(\"braces\", \"insertion\", function(state, action, editor, session, text) {\n        var cursor = editor.getCursorPosition();\n        var line = session.doc.getLine(cursor.row);\n        if (text == '{') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && selected !== \"{\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '{', '}');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                if (/[\\]\\}\\)]/.test(line[cursor.column]) || editor.inMultiSelectMode || options && options.braces) {\n                    CstyleBehaviour.recordAutoInsert(editor, session, \"}\");\n                    return {\n                        text: '{}',\n                        selection: [1, 1]\n                    };\n                } else {\n                    CstyleBehaviour.recordMaybeInsert(editor, session, \"{\");\n                    return {\n                        text: '{',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == '}') {\n            initContext(editor);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == '}') {\n                var matching = session.$findOpeningBracket('}', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        } else if (text == \"\\n\" || text == \"\\r\\n\") {\n            initContext(editor);\n            var closing = \"\";\n            if (CstyleBehaviour.isMaybeInsertedClosing(cursor, line)) {\n                closing = lang.stringRepeat(\"}\", context.maybeInsertedBrackets);\n                CstyleBehaviour.clearMaybeInsertedClosing();\n            }\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar === '}') {\n                var openBracePos = session.findMatchingBracket({row: cursor.row, column: cursor.column+1}, '}');\n                if (!openBracePos)\n                     return null;\n                var next_indent = this.$getIndent(session.getLine(openBracePos.row));\n            } else if (closing) {\n                var next_indent = this.$getIndent(line);\n            } else {\n                CstyleBehaviour.clearMaybeInsertedClosing();\n                return;\n            }\n            var indent = next_indent + session.getTabString();\n\n            return {\n                text: '\\n' + indent + '\\n' + next_indent + closing,\n                selection: [1, indent.length, 1, indent.length]\n            };\n        } else {\n            CstyleBehaviour.clearMaybeInsertedClosing();\n        }\n    });\n\n    this.add(\"braces\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '{') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.end.column, range.end.column + 1);\n            if (rightChar == '}') {\n                range.end.column++;\n                return range;\n            } else {\n                context.maybeInsertedBrackets--;\n            }\n        }\n    });\n\n    this.add(\"parens\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '(') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '(', ')');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \")\");\n                return {\n                    text: '()',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ')') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ')') {\n                var matching = session.$findOpeningBracket(')', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"parens\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '(') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ')') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"insertion\", function(state, action, editor, session, text) {\n        if (text == '[') {\n            initContext(editor);\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, '[', ']');\n            } else if (CstyleBehaviour.isSaneInsertion(editor, session)) {\n                CstyleBehaviour.recordAutoInsert(editor, session, \"]\");\n                return {\n                    text: '[]',\n                    selection: [1, 1]\n                };\n            }\n        } else if (text == ']') {\n            initContext(editor);\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            if (rightChar == ']') {\n                var matching = session.$findOpeningBracket(']', {column: cursor.column + 1, row: cursor.row});\n                if (matching !== null && CstyleBehaviour.isAutoInsertedClosing(cursor, line, text)) {\n                    CstyleBehaviour.popAutoInsertedClosing();\n                    return {\n                        text: '',\n                        selection: [1, 1]\n                    };\n                }\n            }\n        }\n    });\n\n    this.add(\"brackets\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && selected == '[') {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == ']') {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"insertion\", function(state, action, editor, session, text) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n        if (text.length == 1 && quotes[text]) {\n            if (this.lineCommentStart && this.lineCommentStart.indexOf(text) != -1) \n                return;\n            initContext(editor);\n            var quote = text;\n            var selection = editor.getSelectionRange();\n            var selected = session.doc.getTextRange(selection);\n            if (selected !== \"\" && (selected.length != 1 || !quotes[selected]) && editor.getWrapBehavioursEnabled()) {\n                return getWrapped(selection, selected, quote, quote);\n            } else if (!selected) {\n                var cursor = editor.getCursorPosition();\n                var line = session.doc.getLine(cursor.row);\n                var leftChar = line.substring(cursor.column-1, cursor.column);\n                var rightChar = line.substring(cursor.column, cursor.column + 1);\n                \n                var token = session.getTokenAt(cursor.row, cursor.column);\n                var rightToken = session.getTokenAt(cursor.row, cursor.column + 1);\n                // We're escaped.\n                if (leftChar == \"\\\\\" && token && /escape/.test(token.type))\n                    return null;\n                \n                var stringBefore = token && /string|escape/.test(token.type);\n                var stringAfter = !rightToken || /string|escape/.test(rightToken.type);\n                \n                var pair;\n                if (rightChar == quote) {\n                    pair = stringBefore !== stringAfter;\n                    if (pair && /string\\.end/.test(rightToken.type))\n                        pair = false;\n                } else {\n                    if (stringBefore && !stringAfter)\n                        return null; // wrap string with different quote\n                    if (stringBefore && stringAfter)\n                        return null; // do not pair quotes inside strings\n                    var wordRe = session.$mode.tokenRe;\n                    wordRe.lastIndex = 0;\n                    var isWordBefore = wordRe.test(leftChar);\n                    wordRe.lastIndex = 0;\n                    var isWordAfter = wordRe.test(leftChar);\n                    if (isWordBefore || isWordAfter)\n                        return null; // before or after alphanumeric\n                    if (rightChar && !/[\\s;,.})\\]\\\\]/.test(rightChar))\n                        return null; // there is rightChar and it isn't closing\n                    var charBefore = line[cursor.column - 2];\n                    if (leftChar == quote &&  (charBefore == quote || wordRe.test(charBefore)))\n                        return null;\n                    pair = true;\n                }\n                return {\n                    text: pair ? quote + quote : \"\",\n                    selection: [1,1]\n                };\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"deletion\", function(state, action, editor, session, range) {\n        var quotes = session.$mode.$quotes || defaultQuotes;\n\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && quotes.hasOwnProperty(selected)) {\n            initContext(editor);\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n};\n\n    \nCstyleBehaviour.isSaneInsertion = function(editor, session) {\n    var cursor = editor.getCursorPosition();\n    var iterator = new TokenIterator(session, cursor.row, cursor.column);\n    \n    // Don't insert in the middle of a keyword/identifier/lexical\n    if (!this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS)) {\n        if (/[)}\\]]/.test(editor.session.getLine(cursor.row)[cursor.column]))\n            return true;\n        // Look ahead in case we're at the end of a token\n        var iterator2 = new TokenIterator(session, cursor.row, cursor.column + 1);\n        if (!this.$matchTokenType(iterator2.getCurrentToken() || \"text\", SAFE_INSERT_IN_TOKENS))\n            return false;\n    }\n    \n    // Only insert in front of whitespace/comments\n    iterator.stepForward();\n    return iterator.getCurrentTokenRow() !== cursor.row ||\n        this.$matchTokenType(iterator.getCurrentToken() || \"text\", SAFE_INSERT_BEFORE_TOKENS);\n};\n\nCstyleBehaviour.$matchTokenType = function(token, types) {\n    return types.indexOf(token.type || token) > -1;\n};\n\nCstyleBehaviour.recordAutoInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    // Reset previous state if text or context changed too much\n    if (!this.isAutoInsertedClosing(cursor, line, context.autoInsertedLineEnd[0]))\n        context.autoInsertedBrackets = 0;\n    context.autoInsertedRow = cursor.row;\n    context.autoInsertedLineEnd = bracket + line.substr(cursor.column);\n    context.autoInsertedBrackets++;\n};\n\nCstyleBehaviour.recordMaybeInsert = function(editor, session, bracket) {\n    var cursor = editor.getCursorPosition();\n    var line = session.doc.getLine(cursor.row);\n    if (!this.isMaybeInsertedClosing(cursor, line))\n        context.maybeInsertedBrackets = 0;\n    context.maybeInsertedRow = cursor.row;\n    context.maybeInsertedLineStart = line.substr(0, cursor.column) + bracket;\n    context.maybeInsertedLineEnd = line.substr(cursor.column);\n    context.maybeInsertedBrackets++;\n};\n\nCstyleBehaviour.isAutoInsertedClosing = function(cursor, line, bracket) {\n    return context.autoInsertedBrackets > 0 &&\n        cursor.row === context.autoInsertedRow &&\n        bracket === context.autoInsertedLineEnd[0] &&\n        line.substr(cursor.column) === context.autoInsertedLineEnd;\n};\n\nCstyleBehaviour.isMaybeInsertedClosing = function(cursor, line) {\n    return context.maybeInsertedBrackets > 0 &&\n        cursor.row === context.maybeInsertedRow &&\n        line.substr(cursor.column) === context.maybeInsertedLineEnd &&\n        line.substr(0, cursor.column) == context.maybeInsertedLineStart;\n};\n\nCstyleBehaviour.popAutoInsertedClosing = function() {\n    context.autoInsertedLineEnd = context.autoInsertedLineEnd.substr(1);\n    context.autoInsertedBrackets--;\n};\n\nCstyleBehaviour.clearMaybeInsertedClosing = function() {\n    if (context) {\n        context.maybeInsertedBrackets = 0;\n        context.maybeInsertedRow = -1;\n    }\n};\n\n\n\noop.inherits(CstyleBehaviour, Behaviour);\n\nexports.CstyleBehaviour = CstyleBehaviour;\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Behaviour = require(\"../behaviour\").Behaviour;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\nvar lang = require(\"../../lib/lang\");\n\nfunction is(token, type) {\n    return token && token.type.lastIndexOf(type + \".xml\") > -1;\n}\n\nvar XmlBehaviour = function () {\n\n    this.add(\"string_dquotes\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '\"' || text == \"'\") {\n            var quote = text;\n            var selected = session.doc.getTextRange(editor.getSelectionRange());\n            if (selected !== \"\" && selected !== \"'\" && selected != '\"' && editor.getWrapBehavioursEnabled()) {\n                return {\n                    text: quote + selected + quote,\n                    selection: false\n                };\n            }\n\n            var cursor = editor.getCursorPosition();\n            var line = session.doc.getLine(cursor.row);\n            var rightChar = line.substring(cursor.column, cursor.column + 1);\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n\n            if (rightChar == quote && (is(token, \"attribute-value\") || is(token, \"string\"))) {\n                // Ignore input and move right one if we're typing over the closing quote.\n                return {\n                    text: \"\",\n                    selection: [1, 1]\n                };\n            }\n\n            if (!token)\n                token = iterator.stepBackward();\n\n            if (!token)\n                return;\n\n            while (is(token, \"tag-whitespace\") || is(token, \"whitespace\")) {\n                token = iterator.stepBackward();\n            }\n            var rightSpace = !rightChar || rightChar.match(/\\s/);\n            if (is(token, \"attribute-equals\") && (rightSpace || rightChar == '>') || (is(token, \"decl-attribute-equals\") && (rightSpace || rightChar == '?'))) {\n                return {\n                    text: quote + quote,\n                    selection: [1, 1]\n                };\n            }\n        }\n    });\n\n    this.add(\"string_dquotes\", \"deletion\", function(state, action, editor, session, range) {\n        var selected = session.doc.getTextRange(range);\n        if (!range.isMultiLine() && (selected == '\"' || selected == \"'\")) {\n            var line = session.doc.getLine(range.start.row);\n            var rightChar = line.substring(range.start.column + 1, range.start.column + 2);\n            if (rightChar == selected) {\n                range.end.column++;\n                return range;\n            }\n        }\n    });\n\n    this.add(\"autoclosing\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == '>') {\n            var position = editor.getSelectionRange().start;\n            var iterator = new TokenIterator(session, position.row, position.column);\n            var token = iterator.getCurrentToken() || iterator.stepBackward();\n\n            // exit if we're not in a tag\n            if (!token || !(is(token, \"tag-name\") || is(token, \"tag-whitespace\") || is(token, \"attribute-name\") || is(token, \"attribute-equals\") || is(token, \"attribute-value\")))\n                return;\n\n            // exit if we're inside of a quoted attribute value\n            if (is(token, \"reference.attribute-value\"))\n                return;\n            if (is(token, \"attribute-value\")) {\n                var tokenEndColumn = iterator.getCurrentTokenColumn() + token.value.length;\n                if (position.column < tokenEndColumn)\n                    return;\n                if (position.column == tokenEndColumn) {\n                    var nextToken = iterator.stepForward();\n                    // TODO also handle non-closed string at the end of the line\n                    if (nextToken && is(nextToken, \"attribute-value\"))\n                        return;\n                    iterator.stepBackward();\n                }\n            }\n            \n            if (/^\\s*>/.test(session.getLine(position.row).slice(position.column)))\n                return;\n\n            // find tag name\n            while (!is(token, \"tag-name\")) {\n                token = iterator.stepBackward();\n                if (token.value == \"<\") {\n                    token = iterator.stepForward();\n                    break;\n                }\n            }\n\n            var tokenRow = iterator.getCurrentTokenRow();\n            var tokenColumn = iterator.getCurrentTokenColumn();\n\n            // exit if the tag is ending\n            if (is(iterator.stepBackward(), \"end-tag-open\"))\n                return;\n\n            var element = token.value;\n            if (tokenRow == position.row)\n                element = element.substring(0, position.column - tokenColumn);\n\n            if (this.voidElements.hasOwnProperty(element.toLowerCase()))\n                 return;\n\n            return {\n               text: \">\" + \"</\" + element + \">\",\n               selection: [1, 1]\n            };\n        }\n    });\n\n    this.add(\"autoindent\", \"insertion\", function (state, action, editor, session, text) {\n        if (text == \"\\n\") {\n            var cursor = editor.getCursorPosition();\n            var line = session.getLine(cursor.row);\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n\n            if (token && token.type.indexOf(\"tag-close\") !== -1) {\n                if (token.value == \"/>\")\n                    return;\n                //get tag name\n                while (token && token.type.indexOf(\"tag-name\") === -1) {\n                    token = iterator.stepBackward();\n                }\n\n                if (!token) {\n                    return;\n                }\n\n                var tag = token.value;\n                var row = iterator.getCurrentTokenRow();\n\n                //don't indent after closing tag\n                token = iterator.stepBackward();\n                if (!token || token.type.indexOf(\"end-tag\") !== -1) {\n                    return;\n                }\n\n                if (this.voidElements && !this.voidElements[tag]) {\n                    var nextToken = session.getTokenAt(cursor.row, cursor.column+1);\n                    var line = session.getLine(row);\n                    var nextIndent = this.$getIndent(line);\n                    var indent = nextIndent + session.getTabString();\n\n                    if (nextToken && nextToken.value === \"</\") {\n                        return {\n                            text: \"\\n\" + indent + \"\\n\" + nextIndent,\n                            selection: [1, indent.length, 1, indent.length]\n                        };\n                    } else {\n                        return {\n                            text: \"\\n\" + indent\n                        };\n                    }\n                }\n            }\n        }\n    });\n\n};\n\noop.inherits(XmlBehaviour, Behaviour);\n\nexports.XmlBehaviour = XmlBehaviour;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar CssHighlightRules = require(\"./css_highlight_rules\").CssHighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar WorkerClient = require(\"../worker/worker_client\").WorkerClient;\nvar CssCompletions = require(\"./css_completions\").CssCompletions;\nvar CssBehaviour = require(\"./behaviour/css\").CssBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\n\nvar Mode = function() {\n    this.HighlightRules = CssHighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CssBehaviour();\n    this.$completer = new CssCompletions();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.foldingRules = \"cStyle\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        // ignore braces in comments\n        var tokens = this.getTokenizer().getLineTokens(line, state).tokens;\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        var match = line.match(/^.*\\{\\s*$/);\n        if (match) {\n            indent += tab;\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        return this.$completer.getCompletions(state, session, pos, prefix);\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], \"ace/mode/css_worker\", \"Worker\");\n        worker.attachToDocument(session.getDocument());\n\n        worker.on(\"annotate\", function(e) {\n            session.setAnnotations(e.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n    this.$id = \"ace/mode/css\";\n    this.snippetFileId = \"ace/snippets/css\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar propertyMap = {\n    \"background\": {\"#$0\": 1},\n    \"background-color\": {\"#$0\": 1, \"transparent\": 1, \"fixed\": 1},\n    \"background-image\": {\"url('/$0')\": 1},\n    \"background-repeat\": {\"repeat\": 1, \"repeat-x\": 1, \"repeat-y\": 1, \"no-repeat\": 1, \"inherit\": 1},\n    \"background-position\": {\"bottom\":2, \"center\":2, \"left\":2, \"right\":2, \"top\":2, \"inherit\":2},\n    \"background-attachment\": {\"scroll\": 1, \"fixed\": 1},\n    \"background-size\": {\"cover\": 1, \"contain\": 1},\n    \"background-clip\": {\"border-box\": 1, \"padding-box\": 1, \"content-box\": 1},\n    \"background-origin\": {\"border-box\": 1, \"padding-box\": 1, \"content-box\": 1},\n    \"border\": {\"solid $0\": 1, \"dashed $0\": 1, \"dotted $0\": 1, \"#$0\": 1},\n    \"border-color\": {\"#$0\": 1},\n    \"border-style\": {\"solid\":2, \"dashed\":2, \"dotted\":2, \"double\":2, \"groove\":2, \"hidden\":2, \"inherit\":2, \"inset\":2, \"none\":2, \"outset\":2, \"ridged\":2},\n    \"border-collapse\": {\"collapse\": 1, \"separate\": 1},\n    \"bottom\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"clear\": {\"left\": 1, \"right\": 1, \"both\": 1, \"none\": 1},\n    \"color\": {\"#$0\": 1, \"rgb(#$00,0,0)\": 1},\n    \"cursor\": {\"default\": 1, \"pointer\": 1, \"move\": 1, \"text\": 1, \"wait\": 1, \"help\": 1, \"progress\": 1, \"n-resize\": 1, \"ne-resize\": 1, \"e-resize\": 1, \"se-resize\": 1, \"s-resize\": 1, \"sw-resize\": 1, \"w-resize\": 1, \"nw-resize\": 1},\n    \"display\": {\"none\": 1, \"block\": 1, \"inline\": 1, \"inline-block\": 1, \"table-cell\": 1},\n    \"empty-cells\": {\"show\": 1, \"hide\": 1},\n    \"float\": {\"left\": 1, \"right\": 1, \"none\": 1},\n    \"font-family\": {\"Arial\":2,\"Comic Sans MS\":2,\"Consolas\":2,\"Courier New\":2,\"Courier\":2,\"Georgia\":2,\"Monospace\":2,\"Sans-Serif\":2, \"Segoe UI\":2,\"Tahoma\":2,\"Times New Roman\":2,\"Trebuchet MS\":2,\"Verdana\": 1},\n    \"font-size\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"font-weight\": {\"bold\": 1, \"normal\": 1},\n    \"font-style\": {\"italic\": 1, \"normal\": 1},\n    \"font-variant\": {\"normal\": 1, \"small-caps\": 1},\n    \"height\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"left\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"letter-spacing\": {\"normal\": 1},\n    \"line-height\": {\"normal\": 1},\n    \"list-style-type\": {\"none\": 1, \"disc\": 1, \"circle\": 1, \"square\": 1, \"decimal\": 1, \"decimal-leading-zero\": 1, \"lower-roman\": 1, \"upper-roman\": 1, \"lower-greek\": 1, \"lower-latin\": 1, \"upper-latin\": 1, \"georgian\": 1, \"lower-alpha\": 1, \"upper-alpha\": 1},\n    \"margin\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"margin-right\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"margin-left\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"margin-top\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"margin-bottom\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"max-height\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"max-width\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"min-height\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"min-width\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"overflow\": {\"hidden\": 1, \"visible\": 1, \"auto\": 1, \"scroll\": 1},\n    \"overflow-x\": {\"hidden\": 1, \"visible\": 1, \"auto\": 1, \"scroll\": 1},\n    \"overflow-y\": {\"hidden\": 1, \"visible\": 1, \"auto\": 1, \"scroll\": 1},\n    \"padding\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"padding-top\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"padding-right\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"padding-bottom\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"padding-left\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"page-break-after\": {\"auto\": 1, \"always\": 1, \"avoid\": 1, \"left\": 1, \"right\": 1},\n    \"page-break-before\": {\"auto\": 1, \"always\": 1, \"avoid\": 1, \"left\": 1, \"right\": 1},\n    \"position\": {\"absolute\": 1, \"relative\": 1, \"fixed\": 1, \"static\": 1},\n    \"right\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"table-layout\": {\"fixed\": 1, \"auto\": 1},\n    \"text-decoration\": {\"none\": 1, \"underline\": 1, \"line-through\": 1, \"blink\": 1},\n    \"text-align\": {\"left\": 1, \"right\": 1, \"center\": 1, \"justify\": 1},\n    \"text-transform\": {\"capitalize\": 1, \"uppercase\": 1, \"lowercase\": 1, \"none\": 1},\n    \"top\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"vertical-align\": {\"top\": 1, \"bottom\": 1},\n    \"visibility\": {\"hidden\": 1, \"visible\": 1},\n    \"white-space\": {\"nowrap\": 1, \"normal\": 1, \"pre\": 1, \"pre-line\": 1, \"pre-wrap\": 1},\n    \"width\": {\"px\": 1, \"em\": 1, \"%\": 1},\n    \"word-spacing\": {\"normal\": 1},\n\n    // opacity\n    \"filter\": {\"alpha(opacity=$0100)\": 1},\n\n    \"text-shadow\": {\"$02px 2px 2px #777\": 1},\n    \"text-overflow\": {\"ellipsis-word\": 1, \"clip\": 1, \"ellipsis\": 1},\n\n    // border radius\n    \"-moz-border-radius\": 1,\n    \"-moz-border-radius-topright\": 1,\n    \"-moz-border-radius-bottomright\": 1,\n    \"-moz-border-radius-topleft\": 1,\n    \"-moz-border-radius-bottomleft\": 1,\n    \"-webkit-border-radius\": 1,\n    \"-webkit-border-top-right-radius\": 1,\n    \"-webkit-border-top-left-radius\": 1,\n    \"-webkit-border-bottom-right-radius\": 1,\n    \"-webkit-border-bottom-left-radius\": 1,\n\n    // dropshadows\n    \"-moz-box-shadow\": 1,\n    \"-webkit-box-shadow\": 1,\n\n    // transformations\n    \"transform\": {\"rotate($00deg)\": 1, \"skew($00deg)\": 1},\n    \"-moz-transform\": {\"rotate($00deg)\": 1, \"skew($00deg)\": 1},\n    \"-webkit-transform\": {\"rotate($00deg)\": 1, \"skew($00deg)\": 1 }\n};\n\nvar CssCompletions = function() {\n\n};\n\n(function() {\n\n    this.completionsDefined = false;\n\n    this.defineCompletions = function() {\n        //fill in missing properties\n        if (document) {\n            var style = document.createElement('c').style;\n\n            for (var i in style) {\n                if (typeof style[i] !== 'string')\n                    continue;\n\n                var name = i.replace(/[A-Z]/g, function(x) {\n                    return '-' + x.toLowerCase();\n                });\n\n                if (!propertyMap.hasOwnProperty(name))\n                    propertyMap[name] = 1;\n            }\n        }\n\n        this.completionsDefined = true;\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        if (!this.completionsDefined) {\n            this.defineCompletions();\n        }\n\n        if (state==='ruleset' || session.$mode.$id == \"ace/mode/scss\") {\n            //css attribute value\n            var line = session.getLine(pos.row).substr(0, pos.column);\n            var inParens = /\\([^)]*$/.test(line);\n            if (inParens) {\n                line = line.substr(line.lastIndexOf('(') + 1);\n            }\n            if (/:[^;]+$/.test(line)) {\n                /([\\w\\-]+):[^:]*$/.test(line);\n\n                return this.getPropertyValueCompletions(state, session, pos, prefix);\n            } else {\n                return this.getPropertyCompletions(state, session, pos, prefix, inParens);\n            }\n        }\n\n        return [];\n    };\n\n    this.getPropertyCompletions = function(state, session, pos, prefix, skipSemicolon) {\n        skipSemicolon = skipSemicolon || false;\n        var properties = Object.keys(propertyMap);\n        return properties.map(function(property){\n            return {\n                caption: property,\n                snippet: property + ': $0' + (skipSemicolon ? '' : ';'),\n                meta: \"property\",\n                score: 1000000\n            };\n        });\n    };\n\n    this.getPropertyValueCompletions = function(state, session, pos, prefix) {\n        var line = session.getLine(pos.row).substr(0, pos.column);\n        var property = (/([\\w\\-]+):[^:]*$/.exec(line) || {})[1];\n\n        if (!property)\n            return [];\n        var values = [];\n        if (property in propertyMap && typeof propertyMap[property] === \"object\") {\n            values = Object.keys(propertyMap[property]);\n        }\n        return values.map(function(value){\n            return {\n                caption: value,\n                snippet: value,\n                meta: \"property value\",\n                score: 1000000\n            };\n        });\n    };\n\n}).call(CssCompletions.prototype);\n\nexports.CssCompletions = CssCompletions;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\n\n/* Exports are for Stylus and Less highlighters */\nvar supportType = exports.supportType = \"align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|max-zoom|min-height|min-width|min-zoom|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|user-select|user-zoom|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index\";\nvar supportFunction = exports.supportFunction = \"rgb|rgba|url|attr|counter|counters\";\nvar supportConstant = exports.supportConstant = \"absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|flex-end|flex-start|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero|zoom\";\nvar supportConstantColor = exports.supportConstantColor = \"aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen\";\nvar supportConstantFonts = exports.supportConstantFonts = \"arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace\";\n\nvar numRe = exports.numRe = \"\\\\-?(?:(?:[0-9]+(?:\\\\.[0-9]+)?)|(?:\\\\.[0-9]+))\";\nvar pseudoElements = exports.pseudoElements = \"(\\\\:+)\\\\b(after|before|first-letter|first-line|moz-selection|selection)\\\\b\";\nvar pseudoClasses  = exports.pseudoClasses =  \"(:)\\\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\\\b\";\n\nvar CssHighlightRules = function() {\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.function\": supportFunction,\n        \"support.constant\": supportConstant,\n        \"support.type\": supportType,\n        \"support.constant.color\": supportConstantColor,\n        \"support.constant.fonts\": supportConstantFonts\n    }, \"text\", true);\n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"start\" : [{\n            include : [\"strings\", \"url\", \"comments\"]\n        }, {\n            token: \"paren.lparen\",\n            regex: \"\\\\{\",\n            next:  \"ruleset\"\n        }, {\n            token: \"paren.rparen\",\n            regex: \"\\\\}\"\n        }, {\n            token: \"string\",\n            regex: \"@(?!viewport)\",\n            next:  \"media\"\n        }, {\n            token: \"keyword\",\n            regex: \"#[a-z0-9-_]+\"\n        }, {\n            token: \"keyword\",\n            regex: \"%\"\n        }, {\n            token: \"variable\",\n            regex: \"\\\\.[a-z0-9-_]+\"\n        }, {\n            token: \"string\",\n            regex: \":[a-z0-9-_]+\"\n        }, {\n            token : \"constant.numeric\",\n            regex : numRe\n        }, {\n            token: \"constant\",\n            regex: \"[a-z0-9-_]+\"\n        }, {\n            caseInsensitive: true\n        }],\n\n        \"media\": [{\n            include : [\"strings\", \"url\", \"comments\"]\n        }, {\n            token: \"paren.lparen\",\n            regex: \"\\\\{\",\n            next:  \"start\"\n        }, {\n            token: \"paren.rparen\",\n            regex: \"\\\\}\",\n            next:  \"start\"\n        }, {\n            token: \"string\",\n            regex: \";\",\n            next:  \"start\"\n        }, {\n            token: \"keyword\",\n            regex: \"(?:media|supports|document|charset|import|namespace|media|supports|document\"\n                + \"|page|font|keyframes|viewport|counter-style|font-feature-values\"\n                + \"|swash|ornaments|annotation|stylistic|styleset|character-variant)\"\n        }],\n\n        \"comments\" : [{\n            token: \"comment\", // multi line comment\n            regex: \"\\\\/\\\\*\",\n            push: [{\n                token : \"comment\",\n                regex : \"\\\\*\\\\/\",\n                next : \"pop\"\n            }, {\n                defaultToken : \"comment\"\n            }]\n        }],\n\n        \"ruleset\" : [{\n            regex : \"-(webkit|ms|moz|o)-\",\n            token : \"text\"\n        }, {\n            token : \"punctuation.operator\",\n            regex : \"[:;]\"\n        }, {\n            token : \"paren.rparen\",\n            regex : \"\\\\}\",\n            next : \"start\"\n        }, {\n            include : [\"strings\", \"url\", \"comments\"]\n        }, {\n            token : [\"constant.numeric\", \"keyword\"],\n            regex : \"(\" + numRe + \")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)\"\n        }, {\n            token : \"constant.numeric\",\n            regex : numRe\n        }, {\n            token : \"constant.numeric\",  // hex6 color\n            regex : \"#[a-f0-9]{6}\"\n        }, {\n            token : \"constant.numeric\", // hex3 color\n            regex : \"#[a-f0-9]{3}\"\n        }, {\n            token : [\"punctuation\", \"entity.other.attribute-name.pseudo-element.css\"],\n            regex : pseudoElements\n        }, {\n            token : [\"punctuation\", \"entity.other.attribute-name.pseudo-class.css\"],\n            regex : pseudoClasses\n        }, {\n            include: \"url\"\n        }, {\n            token : keywordMapper,\n            regex : \"\\\\-?[a-zA-Z_][a-zA-Z0-9_\\\\-]*\"\n        }, {\n            caseInsensitive: true\n        }],\n\n        url: [{\n            token : \"support.function\",\n            regex : \"(?:url(:?-prefix)?|domain|regexp)\\\\(\",\n            push: [{\n                token : \"support.function\",\n                regex : \"\\\\)\",\n                next : \"pop\"\n            }, {\n                defaultToken: \"string\"\n            }]\n        }],\n\n        strings: [{\n            token : \"string.start\",\n            regex : \"'\",\n            push : [{\n                token : \"string.end\",\n                regex : \"'|$\",\n                next: \"pop\"\n            }, {\n                include : \"escapes\"\n            }, {\n                token : \"constant.language.escape\",\n                regex : /\\\\$/,\n                consumeLineEnd: true\n            }, {\n                defaultToken: \"string\"\n            }]\n        }, {\n            token : \"string.start\",\n            regex : '\"',\n            push : [{\n                token : \"string.end\",\n                regex : '\"|$',\n                next: \"pop\"\n            }, {\n                include : \"escapes\"\n            }, {\n                token : \"constant.language.escape\",\n                regex : /\\\\$/,\n                consumeLineEnd: true\n            }, {\n                defaultToken: \"string\"\n            }]\n        }],\n        escapes: [{\n            token : \"constant.language.escape\",\n            regex : /\\\\([a-fA-F\\d]{1,6}|[^a-fA-F\\d])/\n        }]\n\n    };\n\n    this.normalizeRules();\n};\n\noop.inherits(CssHighlightRules, TextHighlightRules);\n\nexports.CssHighlightRules = CssHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar DocCommentHighlightRules = function() {\n    this.$rules = {\n        \"start\" : [ {\n            token : \"comment.doc.tag\",\n            regex : \"@[\\\\w\\\\d_]+\" // TODO: fix email addresses\n        }, \n        DocCommentHighlightRules.getTagRule(),\n        {\n            defaultToken : \"comment.doc\",\n            caseInsensitive: true\n        }]\n    };\n};\n\noop.inherits(DocCommentHighlightRules, TextHighlightRules);\n\nDocCommentHighlightRules.getTagRule = function(start) {\n    return {\n        token : \"comment.doc.tag.storage.type\",\n        regex : \"\\\\b(?:TODO|FIXME|XXX|HACK)\\\\b\"\n    };\n};\n\nDocCommentHighlightRules.getStartRule = function(start) {\n    return {\n        token : \"comment.doc\", // doc comment\n        regex : \"\\\\/\\\\*(?=\\\\*)\",\n        next  : start\n    };\n};\n\nDocCommentHighlightRules.getEndRule = function (start) {\n    return {\n        token : \"comment.doc\", // closing comment\n        regex : \"\\\\*\\\\/\",\n        next  : start\n    };\n};\n\n\nexports.DocCommentHighlightRules = DocCommentHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Range = require(\"../../range\").Range;\nvar BaseFoldMode = require(\"./fold_mode\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(commentRegex) {\n    if (commentRegex) {\n        this.foldingStartMarker = new RegExp(\n            this.foldingStartMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.start)\n        );\n        this.foldingStopMarker = new RegExp(\n            this.foldingStopMarker.source.replace(/\\|[^|]*?$/, \"|\" + commentRegex.end)\n        );\n    }\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n    \n    this.foldingStartMarker = /([\\{\\[\\(])[^\\}\\]\\)]*$|^\\s*(\\/\\*)/;\n    this.foldingStopMarker = /^[^\\[\\{\\(]*([\\}\\]\\)])|^[\\s\\*]*(\\*\\/)/;\n    this.singleLineBlockCommentRe= /^\\s*(\\/\\*).*\\*\\/\\s*$/;\n    this.tripleStarBlockCommentRe = /^\\s*(\\/\\*\\*\\*).*\\*\\/\\s*$/;\n    this.startRegionRe = /^\\s*(\\/\\*|\\/\\/)#?region\\b/;\n    \n    //prevent naming conflict with any modes that inherit from cstyle and override this (like csharp)\n    this._getFoldWidgetBase = this.getFoldWidget;\n    \n    /**\n     * Gets fold widget with some non-standard extras:\n     *\n     * @example lineCommentRegionStart\n     *      //#region [optional description]\n     *\n     * @example blockCommentRegionStart\n     *      /*#region [optional description] *[/]\n     *\n     * @example tripleStarFoldingSection\n     *      /*** this folds even though 1 line because it has 3 stars ***[/]\n     * \n     * @note the pound symbol for region tags is optional\n     */\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n    \n        if (this.singleLineBlockCommentRe.test(line)) {\n            // No widget for single line block comment unless region or triple star\n            if (!this.startRegionRe.test(line) && !this.tripleStarBlockCommentRe.test(line))\n                return \"\";\n        }\n    \n        var fw = this._getFoldWidgetBase(session, foldStyle, row);\n    \n        if (!fw && this.startRegionRe.test(line))\n            return \"start\"; // lineCommentRegionStart\n    \n        return fw;\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row, forceMultiline) {\n        var line = session.getLine(row);\n        \n        if (this.startRegionRe.test(line))\n            return this.getCommentRegionBlock(session, line, row);\n        \n        var match = line.match(this.foldingStartMarker);\n        if (match) {\n            var i = match.index;\n\n            if (match[1])\n                return this.openingBracketBlock(session, match[1], row, i);\n                \n            var range = session.getCommentFoldRange(row, i + match[0].length, 1);\n            \n            if (range && !range.isMultiLine()) {\n                if (forceMultiline) {\n                    range = this.getSectionRange(session, row);\n                } else if (foldStyle != \"all\")\n                    range = null;\n            }\n            \n            return range;\n        }\n\n        if (foldStyle === \"markbegin\")\n            return;\n\n        var match = line.match(this.foldingStopMarker);\n        if (match) {\n            var i = match.index + match[0].length;\n\n            if (match[1])\n                return this.closingBracketBlock(session, match[1], row, i);\n\n            return session.getCommentFoldRange(row, i, -1);\n        }\n    };\n    \n    this.getSectionRange = function(session, row) {\n        var line = session.getLine(row);\n        var startIndent = line.search(/\\S/);\n        var startRow = row;\n        var startColumn = line.length;\n        row = row + 1;\n        var endRow = row;\n        var maxRow = session.getLength();\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var indent = line.search(/\\S/);\n            if (indent === -1)\n                continue;\n            if  (startIndent > indent)\n                break;\n            var subRange = this.getFoldWidgetRange(session, \"all\", row);\n            \n            if (subRange) {\n                if (subRange.start.row <= startRow) {\n                    break;\n                } else if (subRange.isMultiLine()) {\n                    row = subRange.end.row;\n                } else if (startIndent == indent) {\n                    break;\n                }\n            }\n            endRow = row;\n        }\n        \n        return new Range(startRow, startColumn, endRow, session.getLine(endRow).length);\n    };\n    \n    /**\n     * gets comment region block with end region assumed to be start of comment in any cstyle mode or SQL mode (--) which inherits from this.\n     * There may optionally be a pound symbol before the region/endregion statement\n     */\n    this.getCommentRegionBlock = function(session, line, row) {\n        var startColumn = line.search(/\\s*$/);\n        var maxRow = session.getLength();\n        var startRow = row;\n        \n        var re = /^\\s*(?:\\/\\*|\\/\\/|--)#?(end)?region\\b/;\n        var depth = 1;\n        while (++row < maxRow) {\n            line = session.getLine(row);\n            var m = re.exec(line);\n            if (!m) continue;\n            if (m[1]) depth--;\n            else depth++;\n\n            if (!depth) break;\n        }\n\n        var endRow = row;\n        if (endRow > startRow) {\n            return new Range(startRow, startColumn, endRow, line.length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n","\"use strict\";\n\nvar Range = require(\"../../range\").Range;\n\nvar FoldMode = exports.FoldMode = function() {};\n\n(function() {\n\n    this.foldingStartMarker = null;\n    this.foldingStopMarker = null;\n\n    // must return \"\" if there's no fold, to enable caching\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        if (this.foldingStartMarker.test(line))\n            return \"start\";\n        if (foldStyle == \"markbeginend\"\n                && this.foldingStopMarker\n                && this.foldingStopMarker.test(line))\n            return \"end\";\n        return \"\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        return null;\n    };\n\n    this.indentationBlock = function(session, row, column) {\n        var re = /\\S/;\n        var line = session.getLine(row);\n        var startLevel = line.search(re);\n        if (startLevel == -1)\n            return;\n\n        var startColumn = column || line.length;\n        var maxRow = session.getLength();\n        var startRow = row;\n        var endRow = row;\n\n        while (++row < maxRow) {\n            var level = session.getLine(row).search(re);\n\n            if (level == -1)\n                continue;\n\n            if (level <= startLevel) {\n                var token = session.getTokenAt(row, 0);\n                if (!token || token.type !== \"string\")\n                    break;\n            }\n\n            endRow = row;\n        }\n\n        if (endRow > startRow) {\n            var endColumn = session.getLine(endRow).length;\n            return new Range(startRow, startColumn, endRow, endColumn);\n        }\n    };\n\n    this.openingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var start = {row: row, column: column + 1};\n        var end = session.$findClosingBracket(bracket, start, typeRe);\n        if (!end)\n            return;\n\n        var fw = session.foldWidgets[end.row];\n        if (fw == null)\n            fw = session.getFoldWidget(end.row);\n\n        if (fw == \"start\" && end.row > start.row) {\n            end.row --;\n            end.column = session.getLine(end.row).length;\n        }\n        return Range.fromPoints(start, end);\n    };\n\n    this.closingBracketBlock = function(session, bracket, row, column, typeRe) {\n        var end = {row: row, column: column};\n        var start = session.$findOpeningBracket(bracket, end);\n\n        if (!start)\n            return;\n\n        start.column++;\n        end.column--;\n\n        return  Range.fromPoints(start, end);\n    };\n}).call(FoldMode.prototype);\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar MixedFoldMode = require(\"./mixed\").FoldMode;\nvar XmlFoldMode = require(\"./xml\").FoldMode;\nvar CStyleFoldMode = require(\"./cstyle\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(voidElements, optionalTags) {\n    MixedFoldMode.call(this, new XmlFoldMode(voidElements, optionalTags), {\n        \"js-\": new CStyleFoldMode(),\n        \"css-\": new CStyleFoldMode()\n    });\n};\n\noop.inherits(FoldMode, MixedFoldMode);\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar BaseFoldMode = require(\"./fold_mode\").FoldMode;\nvar Range = require(\"../../range\").Range;\nvar TokenIterator = require(\"../../token_iterator\").TokenIterator;\n\n\nvar FoldMode = exports.FoldMode = function() {};\n\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n\n    this.foldingStartMarker = /\\b(function|then|do|repeat)\\b|{\\s*$|(\\[=*\\[)/;\n    this.foldingStopMarker = /\\bend\\b|^\\s*}|\\]=*\\]/;\n\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var line = session.getLine(row);\n        var isStart = this.foldingStartMarker.test(line);\n        var isEnd = this.foldingStopMarker.test(line);\n\n        if (isStart && !isEnd) {\n            var match = line.match(this.foldingStartMarker);\n            if (match[1] == \"then\" && /\\belseif\\b/.test(line))\n                return;\n            if (match[1]) {\n                if (session.getTokenAt(row, match.index + 1).type === \"keyword\")\n                    return \"start\";\n            } else if (match[2]) {\n                var type = session.bgTokenizer.getState(row) || \"\";\n                if (type[0] == \"bracketedComment\" || type[0] == \"bracketedString\")\n                    return \"start\";\n            } else {\n                return \"start\";\n            }\n        }\n        if (foldStyle != \"markbeginend\" || !isEnd || isStart && isEnd)\n            return \"\";\n\n        var match = line.match(this.foldingStopMarker);\n        if (match[0] === \"end\") {\n            if (session.getTokenAt(row, match.index + 1).type === \"keyword\")\n                return \"end\";\n        } else if (match[0][0] === \"]\") {\n            var type = session.bgTokenizer.getState(row - 1) || \"\";\n            if (type[0] == \"bracketedComment\" || type[0] == \"bracketedString\")\n                return \"end\";\n        } else\n            return \"end\";\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        var line = session.doc.getLine(row);\n        var match = this.foldingStartMarker.exec(line);\n        if (match) {\n            if (match[1])\n                return this.luaBlock(session, row, match.index + 1);\n\n            if (match[2])\n                return session.getCommentFoldRange(row, match.index + 1);\n\n            return this.openingBracketBlock(session, \"{\", row, match.index);\n        }\n\n        var match = this.foldingStopMarker.exec(line);\n        if (match) {\n            if (match[0] === \"end\") {\n                if (session.getTokenAt(row, match.index + 1).type === \"keyword\")\n                    return this.luaBlock(session, row, match.index + 1);\n            }\n\n            if (match[0][0] === \"]\")\n                return session.getCommentFoldRange(row, match.index + 1);\n\n            return this.closingBracketBlock(session, \"}\", row, match.index + match[0].length);\n        }\n    };\n\n    this.luaBlock = function(session, row, column, tokenRange) {\n        var stream = new TokenIterator(session, row, column);\n        var indentKeywords = {\n            \"function\": 1,\n            \"do\": 1,\n            \"then\": 1,\n            \"elseif\": -1,\n            \"end\": -1,\n            \"repeat\": 1,\n            \"until\": -1\n        };\n\n        var token = stream.getCurrentToken();\n        if (!token || token.type != \"keyword\")\n            return;\n\n        var val = token.value;\n        var stack = [val];\n        var dir = indentKeywords[val];\n\n        if (!dir)\n            return;\n\n        var startColumn = dir === -1 ? stream.getCurrentTokenColumn() : session.getLine(row).length;\n        var startRow = row;\n\n        stream.step = dir === -1 ? stream.stepBackward : stream.stepForward;\n        while(token = stream.step()) {\n            if (token.type !== \"keyword\")\n                continue;\n            var level = dir * indentKeywords[token.value];\n\n            if (level > 0) {\n                stack.unshift(token.value);\n            } else if (level <= 0) {\n                stack.shift();\n                if (!stack.length && token.value != \"elseif\")\n                    break;\n                if (level === 0)\n                    stack.unshift(token.value);\n            }\n        }\n\n        if (!token)\n            return null;\n\n        if (tokenRange)\n            return stream.getCurrentTokenRange();\n\n        var row = stream.getCurrentTokenRow();\n        if (dir === -1)\n            return new Range(row, session.getLine(row).length, startRow, startColumn);\n        else\n            return new Range(startRow, startColumn, row, stream.getCurrentTokenColumn());\n    };\n\n}).call(FoldMode.prototype);\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar BaseFoldMode = require(\"./fold_mode\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(defaultMode, subModes) {\n    this.defaultMode = defaultMode;\n    this.subModes = subModes;\n};\noop.inherits(FoldMode, BaseFoldMode);\n\n(function() {\n\n\n    this.$getMode = function(state) {\n        if (typeof state != \"string\") \n            state = state[0];\n        for (var key in this.subModes) {\n            if (state.indexOf(key) === 0)\n                return this.subModes[key];\n        }\n        return null;\n    };\n    \n    this.$tryMode = function(state, session, foldStyle, row) {\n        var mode = this.$getMode(state);\n        return (mode ? mode.getFoldWidget(session, foldStyle, row) : \"\");\n    };\n\n    this.getFoldWidget = function(session, foldStyle, row) {\n        return (\n            this.$tryMode(session.getState(row-1), session, foldStyle, row) ||\n            this.$tryMode(session.getState(row), session, foldStyle, row) ||\n            this.defaultMode.getFoldWidget(session, foldStyle, row)\n        );\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        var mode = this.$getMode(session.getState(row-1));\n        \n        if (!mode || !mode.getFoldWidget(session, foldStyle, row))\n            mode = this.$getMode(session.getState(row));\n        \n        if (!mode || !mode.getFoldWidget(session, foldStyle, row))\n            mode = this.defaultMode;\n        \n        return mode.getFoldWidgetRange(session, foldStyle, row);\n    };\n\n}).call(FoldMode.prototype);\n","\"use strict\";\n\nvar oop = require(\"../../lib/oop\");\nvar Range = require(\"../../range\").Range;\nvar BaseFoldMode = require(\"./fold_mode\").FoldMode;\n\nvar FoldMode = exports.FoldMode = function(voidElements, optionalEndTags) {\n    BaseFoldMode.call(this);\n    this.voidElements = voidElements || {};\n    this.optionalEndTags = oop.mixin({}, this.voidElements);\n    if (optionalEndTags)\n        oop.mixin(this.optionalEndTags, optionalEndTags);\n    \n};\noop.inherits(FoldMode, BaseFoldMode);\n\nvar Tag = function() {\n    this.tagName = \"\";\n    this.closing = false;\n    this.selfClosing = false;\n    this.start = {row: 0, column: 0};\n    this.end = {row: 0, column: 0};\n};\n\nfunction is(token, type) {\n    return token.type.lastIndexOf(type + \".xml\") > -1;\n}\n\n(function() {\n\n    this.getFoldWidget = function(session, foldStyle, row) {\n        var tag = this._getFirstTagInLine(session, row);\n\n        if (!tag)\n            return this.getCommentFoldWidget(session, row);\n\n        if (tag.closing || (!tag.tagName && tag.selfClosing))\n            return foldStyle === \"markbeginend\" ? \"end\" : \"\";\n\n        if (!tag.tagName || tag.selfClosing || this.voidElements.hasOwnProperty(tag.tagName.toLowerCase()))\n            return \"\";\n\n        if (this._findEndTagInLine(session, row, tag.tagName, tag.end.column))\n            return \"\";\n\n        return \"start\";\n    };\n    \n    this.getCommentFoldWidget = function(session, row) {\n        if (/comment/.test(session.getState(row)) && /<!-/.test(session.getLine(row)))\n            return \"start\";\n        return \"\";\n    };\n\n    /*\n     * returns a first tag (or a fragment) in a line\n     */\n    this._getFirstTagInLine = function(session, row) {\n        var tokens = session.getTokens(row);\n        var tag = new Tag();\n\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (is(token, \"tag-open\")) {\n                tag.end.column = tag.start.column + token.value.length;\n                tag.closing = is(token, \"end-tag-open\");\n                token = tokens[++i];\n                if (!token)\n                    return null;\n                tag.tagName = token.value;\n                tag.end.column += token.value.length;\n                for (i++; i < tokens.length; i++) {\n                    token = tokens[i];\n                    tag.end.column += token.value.length;\n                    if (is(token, \"tag-close\")) {\n                        tag.selfClosing = token.value == '/>';\n                        break;\n                    }\n                }\n                return tag;\n            } else if (is(token, \"tag-close\")) {\n                tag.selfClosing = token.value == '/>';\n                return tag;\n            }\n            tag.start.column += token.value.length;\n        }\n\n        return null;\n    };\n\n    this._findEndTagInLine = function(session, row, tagName, startColumn) {\n        var tokens = session.getTokens(row);\n        var column = 0;\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            column += token.value.length;\n            if (column < startColumn)\n                continue;\n            if (is(token, \"end-tag-open\")) {\n                token = tokens[i + 1];\n                if (token && token.value == tagName)\n                    return true;\n            }\n        }\n        return false;\n    };\n\n    this.getFoldWidgetRange = function(session, foldStyle, row) {\n        var tags = session.getMatchingTags({row: row, column: 0});\n        if (tags) {\n            return new Range(\n                tags.openTag.end.row, tags.openTag.end.column, tags.closeTag.start.row, tags.closeTag.start.column);\n        } else {\n            return this.getCommentFoldWidget(session, row)\n                && session.getCommentFoldRange(row, session.getLine(row).length);\n        }\n    };\n\n}).call(FoldMode.prototype);\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar TextMode = require(\"./text\").Mode;\nvar JavaScriptMode = require(\"./javascript\").Mode;\nvar CssMode = require(\"./css\").Mode;\nvar HtmlHighlightRules = require(\"./html_highlight_rules\").HtmlHighlightRules;\nvar XmlBehaviour = require(\"./behaviour/xml\").XmlBehaviour;\nvar HtmlFoldMode = require(\"./folding/html\").FoldMode;\nvar HtmlCompletions = require(\"./html_completions\").HtmlCompletions;\nvar WorkerClient = require(\"../worker/worker_client\").WorkerClient;\n\n// http://www.w3.org/TR/html5/syntax.html#void-elements\nvar voidElements = [\"area\", \"base\", \"br\", \"col\", \"embed\", \"hr\", \"img\", \"input\", \"keygen\", \"link\", \"meta\", \"menuitem\", \"param\", \"source\", \"track\", \"wbr\"];\nvar optionalEndTags = [\"li\", \"dt\", \"dd\", \"p\", \"rt\", \"rp\", \"optgroup\", \"option\", \"colgroup\", \"td\", \"th\"];\n\nvar Mode = function(options) {\n    this.fragmentContext = options && options.fragmentContext;\n    this.HighlightRules = HtmlHighlightRules;\n    this.$behaviour = new XmlBehaviour();\n    this.$completer = new HtmlCompletions();\n    \n    this.createModeDelegates({\n        \"js-\": JavaScriptMode,\n        \"css-\": CssMode\n    });\n    \n    this.foldingRules = new HtmlFoldMode(this.voidElements, lang.arrayToMap(optionalEndTags));\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.blockComment = {start: \"<!--\", end: \"-->\"};\n\n    this.voidElements = lang.arrayToMap(voidElements);\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        return this.$completer.getCompletions(state, session, pos, prefix);\n    };\n\n    this.createWorker = function(session) {\n        if (this.constructor != Mode)\n            return;\n        var worker = new WorkerClient([\"ace\"], \"ace/mode/html_worker\", \"Worker\");\n        worker.attachToDocument(session.getDocument());\n\n        if (this.fragmentContext)\n            worker.call(\"setOptions\", [{context: this.fragmentContext}]);\n\n        worker.on(\"error\", function(e) {\n            session.setAnnotations(e.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n    this.$id = \"ace/mode/html\";\n    this.snippetFileId = \"ace/snippets/html\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\n\nvar commonAttributes = [\n    \"accesskey\",\n    \"class\",\n    \"contenteditable\",\n    \"contextmenu\",\n    \"dir\",\n    \"draggable\",\n    \"dropzone\",\n    \"hidden\",\n    \"id\",\n    \"inert\",\n    \"itemid\",\n    \"itemprop\",\n    \"itemref\",\n    \"itemscope\",\n    \"itemtype\",\n    \"lang\",\n    \"spellcheck\",\n    \"style\",\n    \"tabindex\",\n    \"title\",\n    \"translate\"\n];\n\nvar eventAttributes = [\n    \"onabort\",\n    \"onblur\",\n    \"oncancel\",\n    \"oncanplay\",\n    \"oncanplaythrough\",\n    \"onchange\",\n    \"onclick\",\n    \"onclose\",\n    \"oncontextmenu\",\n    \"oncuechange\",\n    \"ondblclick\",\n    \"ondrag\",\n    \"ondragend\",\n    \"ondragenter\",\n    \"ondragleave\",\n    \"ondragover\",\n    \"ondragstart\",\n    \"ondrop\",\n    \"ondurationchange\",\n    \"onemptied\",\n    \"onended\",\n    \"onerror\",\n    \"onfocus\",\n    \"oninput\",\n    \"oninvalid\",\n    \"onkeydown\",\n    \"onkeypress\",\n    \"onkeyup\",\n    \"onload\",\n    \"onloadeddata\",\n    \"onloadedmetadata\",\n    \"onloadstart\",\n    \"onmousedown\",\n    \"onmousemove\",\n    \"onmouseout\",\n    \"onmouseover\",\n    \"onmouseup\",\n    \"onmousewheel\",\n    \"onpause\",\n    \"onplay\",\n    \"onplaying\",\n    \"onprogress\",\n    \"onratechange\",\n    \"onreset\",\n    \"onscroll\",\n    \"onseeked\",\n    \"onseeking\",\n    \"onselect\",\n    \"onshow\",\n    \"onstalled\",\n    \"onsubmit\",\n    \"onsuspend\",\n    \"ontimeupdate\",\n    \"onvolumechange\",\n    \"onwaiting\"\n];\n\nvar globalAttributes = commonAttributes.concat(eventAttributes);\n\nvar attributeMap = {\n    \"a\": {\"href\": 1, \"target\": {\"_blank\": 1, \"top\": 1}, \"ping\": 1, \"rel\": {\"nofollow\": 1, \"alternate\": 1, \"author\": 1, \"bookmark\": 1, \"help\": 1, \"license\": 1, \"next\": 1, \"noreferrer\": 1, \"prefetch\": 1, \"prev\": 1, \"search\": 1, \"tag\": 1}, \"media\": 1, \"hreflang\": 1, \"type\": 1},\n    \"abbr\": {},\n    \"address\": {},\n    \"area\": {\"shape\": 1, \"coords\": 1, \"href\": 1, \"hreflang\": 1, \"alt\": 1, \"target\": 1, \"media\": 1, \"rel\": 1, \"ping\": 1, \"type\": 1},\n    \"article\": {\"pubdate\": 1},\n    \"aside\": {},\n    \"audio\": {\"src\": 1, \"autobuffer\": 1, \"autoplay\": {\"autoplay\": 1}, \"loop\": {\"loop\": 1}, \"controls\": {\"controls\": 1}, \"muted\": {\"muted\": 1}, \"preload\": {\"auto\": 1, \"metadata\": 1, \"none\": 1 }},\n    \"b\": {},\n    \"base\": {\"href\": 1, \"target\": 1},\n    \"bdi\": {},\n    \"bdo\": {},\n    \"blockquote\": {\"cite\": 1},\n    \"body\": {\"onafterprint\": 1, \"onbeforeprint\": 1, \"onbeforeunload\": 1, \"onhashchange\": 1, \"onmessage\": 1, \"onoffline\": 1, \"onpopstate\": 1, \"onredo\": 1, \"onresize\": 1, \"onstorage\": 1, \"onundo\": 1, \"onunload\": 1},\n    \"br\": {},\n    \"button\": {\"autofocus\": 1, \"disabled\": {\"disabled\": 1}, \"form\": 1, \"formaction\": 1, \"formenctype\": 1, \"formmethod\": 1, \"formnovalidate\": 1, \"formtarget\": 1, \"name\": 1, \"value\": 1, \"type\": {\"button\": 1, \"submit\": 1}},\n    \"canvas\": {\"width\": 1, \"height\": 1},\n    \"caption\": {},\n    \"cite\": {},\n    \"code\": {},\n    \"col\": {\"span\": 1},\n    \"colgroup\": {\"span\": 1},\n    \"command\": {\"type\": 1, \"label\": 1, \"icon\": 1, \"disabled\": 1, \"checked\": 1, \"radiogroup\": 1, \"command\": 1},\n    \"data\": {},\n    \"datalist\": {},\n    \"dd\": {},\n    \"del\": {\"cite\": 1, \"datetime\": 1},\n    \"details\": {\"open\": 1},\n    \"dfn\": {},\n    \"dialog\": {\"open\": 1},\n    \"div\": {},\n    \"dl\": {},\n    \"dt\": {},\n    \"em\": {},\n    \"embed\": {\"src\": 1, \"height\": 1, \"width\": 1, \"type\": 1},\n    \"fieldset\": {\"disabled\": 1, \"form\": 1, \"name\": 1},\n    \"figcaption\": {},\n    \"figure\": {},\n    \"footer\": {},\n    \"form\": {\"accept-charset\": 1, \"action\": 1, \"autocomplete\": 1, \"enctype\": {\"multipart/form-data\": 1, \"application/x-www-form-urlencoded\": 1}, \"method\": {\"get\": 1, \"post\": 1}, \"name\": 1, \"novalidate\": 1, \"target\": {\"_blank\": 1, \"top\": 1}},\n    \"h1\": {},\n    \"h2\": {},\n    \"h3\": {},\n    \"h4\": {},\n    \"h5\": {},\n    \"h6\": {},\n    \"head\": {},\n    \"header\": {},\n    \"hr\": {},\n    \"html\": {\"manifest\": 1},\n    \"i\": {},\n    \"iframe\": {\"name\": 1, \"src\": 1, \"height\": 1, \"width\": 1, \"sandbox\": {\"allow-same-origin\": 1, \"allow-top-navigation\": 1, \"allow-forms\": 1, \"allow-scripts\": 1}, \"seamless\": {\"seamless\": 1}},\n    \"img\": {\"alt\": 1, \"src\": 1, \"height\": 1, \"width\": 1, \"usemap\": 1, \"ismap\": 1},\n    \"input\": {\n        \"type\": {\"text\": 1, \"password\": 1, \"hidden\": 1, \"checkbox\": 1, \"submit\": 1, \"radio\": 1, \"file\": 1, \"button\": 1, \"reset\": 1, \"image\": 31, \"color\": 1, \"date\": 1, \"datetime\": 1, \"datetime-local\": 1, \"email\": 1, \"month\": 1, \"number\": 1, \"range\": 1, \"search\": 1, \"tel\": 1, \"time\": 1, \"url\": 1, \"week\": 1},\n        \"accept\": 1, \"alt\": 1, \"autocomplete\": {\"on\": 1, \"off\": 1}, \"autofocus\": {\"autofocus\": 1}, \"checked\": {\"checked\": 1}, \"disabled\": {\"disabled\": 1}, \"form\": 1, \"formaction\": 1, \"formenctype\": {\"application/x-www-form-urlencoded\": 1, \"multipart/form-data\": 1, \"text/plain\": 1}, \"formmethod\": {\"get\": 1, \"post\": 1}, \"formnovalidate\": {\"formnovalidate\": 1}, \"formtarget\": {\"_blank\": 1, \"_self\": 1, \"_parent\": 1, \"_top\": 1}, \"height\": 1, \"list\": 1, \"max\": 1, \"maxlength\": 1, \"min\": 1, \"multiple\": {\"multiple\": 1}, \"name\": 1, \"pattern\": 1, \"placeholder\": 1, \"readonly\": {\"readonly\": 1}, \"required\": {\"required\": 1}, \"size\": 1, \"src\": 1, \"step\": 1, \"width\": 1, \"files\": 1, \"value\": 1},\n    \"ins\": {\"cite\": 1, \"datetime\": 1},\n    \"kbd\": {},\n    \"keygen\": {\"autofocus\": 1, \"challenge\": {\"challenge\": 1}, \"disabled\": {\"disabled\": 1}, \"form\": 1, \"keytype\": {\"rsa\": 1, \"dsa\": 1, \"ec\": 1}, \"name\": 1},\n    \"label\": {\"form\": 1, \"for\": 1},\n    \"legend\": {},\n    \"li\": {\"value\": 1},\n    \"link\": {\"href\": 1, \"hreflang\": 1, \"rel\": {\"stylesheet\": 1, \"icon\": 1}, \"media\": {\"all\": 1, \"screen\": 1, \"print\": 1}, \"type\": {\"text/css\": 1, \"image/png\": 1, \"image/jpeg\": 1, \"image/gif\": 1}, \"sizes\": 1},\n    \"main\": {},\n    \"map\": {\"name\": 1},\n    \"mark\": {},\n    \"math\": {},\n    \"menu\": {\"type\": 1, \"label\": 1},\n    \"meta\": {\"http-equiv\": {\"content-type\": 1}, \"name\": {\"description\": 1, \"keywords\": 1}, \"content\": {\"text/html; charset=UTF-8\": 1}, \"charset\": 1},\n    \"meter\": {\"value\": 1, \"min\": 1, \"max\": 1, \"low\": 1, \"high\": 1, \"optimum\": 1},\n    \"nav\": {},\n    \"noscript\": {\"href\": 1},\n    \"object\": {\"param\": 1, \"data\": 1, \"type\": 1, \"height\" : 1, \"width\": 1, \"usemap\": 1, \"name\": 1, \"form\": 1, \"classid\": 1},\n    \"ol\": {\"start\": 1, \"reversed\": 1},\n    \"optgroup\": {\"disabled\": 1, \"label\": 1},\n    \"option\": {\"disabled\": 1, \"selected\": 1, \"label\": 1, \"value\": 1},\n    \"output\": {\"for\": 1, \"form\": 1, \"name\": 1},\n    \"p\": {},\n    \"param\": {\"name\": 1, \"value\": 1},\n    \"pre\": {},\n    \"progress\": {\"value\": 1, \"max\": 1},\n    \"q\": {\"cite\": 1},\n    \"rp\": {},\n    \"rt\": {},\n    \"ruby\": {},\n    \"s\": {},\n    \"samp\": {},\n    \"script\": {\"charset\": 1, \"type\": {\"text/javascript\": 1}, \"src\": 1, \"defer\": 1, \"async\": 1},\n    \"select\": {\"autofocus\": 1, \"disabled\": 1, \"form\": 1, \"multiple\": {\"multiple\": 1}, \"name\": 1, \"size\": 1, \"readonly\":{\"readonly\": 1}},\n    \"small\": {},\n    \"source\": {\"src\": 1, \"type\": 1, \"media\": 1},\n    \"span\": {},\n    \"strong\": {},\n    \"style\": {\"type\": 1, \"media\": {\"all\": 1, \"screen\": 1, \"print\": 1}, \"scoped\": 1},\n    \"sub\": {},\n    \"sup\": {},\n    \"svg\": {},\n    \"table\": {\"summary\": 1},\n    \"tbody\": {},\n    \"td\": {\"headers\": 1, \"rowspan\": 1, \"colspan\": 1},\n    \"textarea\": {\"autofocus\": {\"autofocus\": 1}, \"disabled\": {\"disabled\": 1}, \"form\": 1, \"maxlength\": 1, \"name\": 1, \"placeholder\": 1, \"readonly\": {\"readonly\": 1}, \"required\": {\"required\": 1}, \"rows\": 1, \"cols\": 1, \"wrap\": {\"on\": 1, \"off\": 1, \"hard\": 1, \"soft\": 1}},\n    \"tfoot\": {},\n    \"th\": {\"headers\": 1, \"rowspan\": 1, \"colspan\": 1, \"scope\": 1},\n    \"thead\": {},\n    \"time\": {\"datetime\": 1},\n    \"title\": {},\n    \"tr\": {},\n    \"track\": {\"kind\": 1, \"src\": 1, \"srclang\": 1, \"label\": 1, \"default\": 1},\n    \"section\": {},\n    \"summary\": {},\n    \"u\": {},\n    \"ul\": {},\n    \"var\": {},\n    \"video\": {\"src\": 1, \"autobuffer\": 1, \"autoplay\": {\"autoplay\": 1}, \"loop\": {\"loop\": 1}, \"controls\": {\"controls\": 1}, \"width\": 1, \"height\": 1, \"poster\": 1, \"muted\": {\"muted\": 1}, \"preload\": {\"auto\": 1, \"metadata\": 1, \"none\": 1}},\n    \"wbr\": {}\n};\n\nvar elements = Object.keys(attributeMap);\n\nfunction is(token, type) {\n    return token.type.lastIndexOf(type + \".xml\") > -1;\n}\n\nfunction findTagName(session, pos) {\n    var iterator = new TokenIterator(session, pos.row, pos.column);\n    var token = iterator.getCurrentToken();\n    while (token && !is(token, \"tag-name\")){\n        token = iterator.stepBackward();\n    }\n    if (token)\n        return token.value;\n}\n\nfunction findAttributeName(session, pos) {\n    var iterator = new TokenIterator(session, pos.row, pos.column);\n    var token = iterator.getCurrentToken();\n    while (token && !is(token, \"attribute-name\")){\n        token = iterator.stepBackward();\n    }\n    if (token)\n        return token.value;\n}\n\nvar HtmlCompletions = function() {\n\n};\n\n(function() {\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        var token = session.getTokenAt(pos.row, pos.column);\n\n        if (!token)\n            return [];\n\n        // tag name\n        if (is(token, \"tag-name\") || is(token, \"tag-open\") || is(token, \"end-tag-open\"))\n            return this.getTagCompletions(state, session, pos, prefix);\n\n        // tag attribute\n        if (is(token, \"tag-whitespace\") || is(token, \"attribute-name\"))\n            return this.getAttributeCompletions(state, session, pos, prefix);\n            \n        // tag attribute values\n        if (is(token, \"attribute-value\"))\n            return this.getAttributeValueCompletions(state, session, pos, prefix);\n            \n        // HTML entities\n        var line = session.getLine(pos.row).substr(0, pos.column);\n        if (/&[a-z]*$/i.test(line))\n            return this.getHTMLEntityCompletions(state, session, pos, prefix);\n\n        return [];\n    };\n\n    this.getTagCompletions = function(state, session, pos, prefix) {\n        return elements.map(function(element){\n            return {\n                value: element,\n                meta: \"tag\",\n                score: 1000000\n            };\n        });\n    };\n\n    this.getAttributeCompletions = function(state, session, pos, prefix) {\n        var tagName = findTagName(session, pos);\n        if (!tagName)\n            return [];\n        var attributes = globalAttributes;\n        if (tagName in attributeMap) {\n            attributes = attributes.concat(Object.keys(attributeMap[tagName]));\n        }\n        return attributes.map(function(attribute){\n            return {\n                caption: attribute,\n                snippet: attribute + '=\"$0\"',\n                meta: \"attribute\",\n                score: 1000000\n            };\n        });\n    };\n\n    this.getAttributeValueCompletions = function(state, session, pos, prefix) {\n        var tagName = findTagName(session, pos);\n        var attributeName = findAttributeName(session, pos);\n        \n        if (!tagName)\n            return [];\n        var values = [];\n        if (tagName in attributeMap && attributeName in attributeMap[tagName] && typeof attributeMap[tagName][attributeName] === \"object\") {\n            values = Object.keys(attributeMap[tagName][attributeName]);\n        }\n        return values.map(function(value){\n            return {\n                caption: value,\n                snippet: value,\n                meta: \"attribute value\",\n                score: 1000000\n            };\n        });\n    };\n\n    this.getHTMLEntityCompletions = function(state, session, pos, prefix) {\n        var values = ['Aacute;', 'aacute;', 'Acirc;', 'acirc;', 'acute;', 'AElig;', 'aelig;', 'Agrave;', 'agrave;', 'alefsym;', 'Alpha;', 'alpha;', 'amp;', 'and;', 'ang;', 'Aring;', 'aring;', 'asymp;', 'Atilde;', 'atilde;', 'Auml;', 'auml;', 'bdquo;', 'Beta;', 'beta;', 'brvbar;', 'bull;', 'cap;', 'Ccedil;', 'ccedil;', 'cedil;', 'cent;', 'Chi;', 'chi;', 'circ;', 'clubs;', 'cong;', 'copy;', 'crarr;', 'cup;', 'curren;', 'Dagger;', 'dagger;', 'dArr;', 'darr;', 'deg;', 'Delta;', 'delta;', 'diams;', 'divide;', 'Eacute;', 'eacute;', 'Ecirc;', 'ecirc;', 'Egrave;', 'egrave;', 'empty;', 'emsp;', 'ensp;', 'Epsilon;', 'epsilon;', 'equiv;', 'Eta;', 'eta;', 'ETH;', 'eth;', 'Euml;', 'euml;', 'euro;', 'exist;', 'fnof;', 'forall;', 'frac12;', 'frac14;', 'frac34;', 'frasl;', 'Gamma;', 'gamma;', 'ge;', 'gt;', 'hArr;', 'harr;', 'hearts;', 'hellip;', 'Iacute;', 'iacute;', 'Icirc;', 'icirc;', 'iexcl;', 'Igrave;', 'igrave;', 'image;', 'infin;', 'int;', 'Iota;', 'iota;', 'iquest;', 'isin;', 'Iuml;', 'iuml;', 'Kappa;', 'kappa;', 'Lambda;', 'lambda;', 'lang;', 'laquo;', 'lArr;', 'larr;', 'lceil;', 'ldquo;', 'le;', 'lfloor;', 'lowast;', 'loz;', 'lrm;', 'lsaquo;', 'lsquo;', 'lt;', 'macr;', 'mdash;', 'micro;', 'middot;', 'minus;', 'Mu;', 'mu;', 'nabla;', 'nbsp;', 'ndash;', 'ne;', 'ni;', 'not;', 'notin;', 'nsub;', 'Ntilde;', 'ntilde;', 'Nu;', 'nu;', 'Oacute;', 'oacute;', 'Ocirc;', 'ocirc;', 'OElig;', 'oelig;', 'Ograve;', 'ograve;', 'oline;', 'Omega;', 'omega;', 'Omicron;', 'omicron;', 'oplus;', 'or;', 'ordf;', 'ordm;', 'Oslash;', 'oslash;', 'Otilde;', 'otilde;', 'otimes;', 'Ouml;', 'ouml;', 'para;', 'part;', 'permil;', 'perp;', 'Phi;', 'phi;', 'Pi;', 'pi;', 'piv;', 'plusmn;', 'pound;', 'Prime;', 'prime;', 'prod;', 'prop;', 'Psi;', 'psi;', 'quot;', 'radic;', 'rang;', 'raquo;', 'rArr;', 'rarr;', 'rceil;', 'rdquo;', 'real;', 'reg;', 'rfloor;', 'Rho;', 'rho;', 'rlm;', 'rsaquo;', 'rsquo;', 'sbquo;', 'Scaron;', 'scaron;', 'sdot;', 'sect;', 'shy;', 'Sigma;', 'sigma;', 'sigmaf;', 'sim;', 'spades;', 'sub;', 'sube;', 'sum;', 'sup;', 'sup1;', 'sup2;', 'sup3;', 'supe;', 'szlig;', 'Tau;', 'tau;', 'there4;', 'Theta;', 'theta;', 'thetasym;', 'thinsp;', 'THORN;', 'thorn;', 'tilde;', 'times;', 'trade;', 'Uacute;', 'uacute;', 'uArr;', 'uarr;', 'Ucirc;', 'ucirc;', 'Ugrave;', 'ugrave;', 'uml;', 'upsih;', 'Upsilon;', 'upsilon;', 'Uuml;', 'uuml;', 'weierp;', 'Xi;', 'xi;', 'Yacute;', 'yacute;', 'yen;', 'Yuml;', 'yuml;', 'Zeta;', 'zeta;', 'zwj;', 'zwnj;'];\n\n        return values.map(function(value){\n            return {\n                caption: value,\n                snippet: value,\n                meta: \"html entity\",\n                score: 1000000\n            };\n        });\n    };\n\n}).call(HtmlCompletions.prototype);\n\nexports.HtmlCompletions = HtmlCompletions;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar CssHighlightRules = require(\"./css_highlight_rules\").CssHighlightRules;\nvar JavaScriptHighlightRules = require(\"./javascript_highlight_rules\").JavaScriptHighlightRules;\nvar XmlHighlightRules = require(\"./xml_highlight_rules\").XmlHighlightRules;\n\nvar tagMap = lang.createMap({\n    a           : 'anchor',\n    button \t    : 'form',\n    form        : 'form',\n    img         : 'image',\n    input       : 'form',\n    label       : 'form',\n    option      : 'form',\n    script      : 'script',\n    select      : 'form',\n    textarea    : 'form',\n    style       : 'style',\n    table       : 'table',\n    tbody       : 'table',\n    td          : 'table',\n    tfoot       : 'table',\n    th          : 'table',\n    tr          : 'table'\n});\n\nvar HtmlHighlightRules = function() {\n    XmlHighlightRules.call(this);\n\n    this.addRules({\n        attributes: [{\n            include : \"tag_whitespace\"\n        }, {\n            token : \"entity.other.attribute-name.xml\",\n            regex : \"[-_a-zA-Z0-9:.]+\"\n        }, {\n            token : \"keyword.operator.attribute-equals.xml\",\n            regex : \"=\",\n            push : [{\n                include: \"tag_whitespace\"\n            }, {\n                token : \"string.unquoted.attribute-value.html\",\n                regex : \"[^<>='\\\"`\\\\s]+\",\n                next : \"pop\"\n            }, {\n                token : \"empty\",\n                regex : \"\",\n                next : \"pop\"\n            }]\n        }, {\n            include : \"attribute_value\"\n        }],\n        tag: [{\n            token : function(start, tag) {\n                var group = tagMap[tag];\n                return [\"meta.tag.punctuation.\" + (start == \"<\" ? \"\" : \"end-\") + \"tag-open.xml\",\n                    \"meta.tag\" + (group ? \".\" + group : \"\") + \".tag-name.xml\"];\n            },\n            regex : \"(</?)([-_a-zA-Z0-9:.]+)\",\n            next: \"tag_stuff\"\n        }],\n        tag_stuff: [\n            {include : \"attributes\"},\n            {token : \"meta.tag.punctuation.tag-close.xml\", regex : \"/?>\", next : \"start\"}\n        ]\n    });\n\n    this.embedTagRules(CssHighlightRules, \"css-\", \"style\");\n    this.embedTagRules(new JavaScriptHighlightRules({jsx: false}).getRules(), \"js-\", \"script\");\n\n    if (this.constructor === HtmlHighlightRules)\n        this.normalizeRules();\n};\n\noop.inherits(HtmlHighlightRules, XmlHighlightRules);\n\nexports.HtmlHighlightRules = HtmlHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar JavaScriptHighlightRules = require(\"./javascript_highlight_rules\").JavaScriptHighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar WorkerClient = require(\"../worker/worker_client\").WorkerClient;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\n\nvar Mode = function() {\n    this.HighlightRules = JavaScriptHighlightRules;\n    \n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n    this.$quotes = {'\"': '\"', \"'\": \"'\", \"`\": \"`\"};\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        var tokenizedLine = this.getTokenizer().getLineTokens(line, state);\n        var tokens = tokenizedLine.tokens;\n        var endState = tokenizedLine.state;\n\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        if (state == \"start\" || state == \"no_regex\") {\n            var match = line.match(/^.*(?:\\bcase\\b.*:|[\\{\\(\\[])\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        } else if (state == \"doc-start\") {\n            if (endState == \"start\" || endState == \"no_regex\") {\n                return \"\";\n            }\n            var match = line.match(/^\\s*(\\/?)\\*/);\n            if (match) {\n                if (match[1]) {\n                    indent += \" \";\n                }\n                indent += \"* \";\n            }\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], \"ace/mode/javascript_worker\", \"JavaScriptWorker\");\n        worker.attachToDocument(session.getDocument());\n\n        worker.on(\"annotate\", function(results) {\n            session.setAnnotations(results.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n    this.$id = \"ace/mode/javascript\";\n    this.snippetFileId = \"ace/snippets/javascript\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar DocCommentHighlightRules = require(\"./doc_comment_highlight_rules\").DocCommentHighlightRules;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\n// TODO: Unicode escape sequences\nvar identifierRe = \"[a-zA-Z\\\\$_\\u00a1-\\uffff][a-zA-Z\\\\d\\\\$_\\u00a1-\\uffff]*\";\n\nvar JavaScriptHighlightRules = function(options) {\n    // see: https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects\n    var keywordMapper = this.createKeywordMapper({\n        \"variable.language\":\n            \"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|\"  + // Constructors\n            \"Namespace|QName|XML|XMLList|\"                                             + // E4X\n            \"ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|\"   +\n            \"Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|\"                    +\n            \"Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|\"   + // Errors\n            \"SyntaxError|TypeError|URIError|\"                                          +\n            \"decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|\" + // Non-constructor functions\n            \"isNaN|parseFloat|parseInt|\"                                               +\n            \"JSON|Math|\"                                                               + // Other\n            \"this|arguments|prototype|window|document\"                                 , // Pseudo\n        \"keyword\":\n            \"const|yield|import|get|set|async|await|\" +\n            \"break|case|catch|continue|default|delete|do|else|finally|for|function|\" +\n            \"if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|\" +\n            // invalid or reserved\n            \"__parent__|__count__|escape|unescape|with|__proto__|\" +\n            \"class|enum|extends|super|export|implements|private|public|interface|package|protected|static\",\n        \"storage.type\":\n            \"const|let|var|function\",\n        \"constant.language\":\n            \"null|Infinity|NaN|undefined\",\n        \"support.function\":\n            \"alert\",\n        \"constant.language.boolean\": \"true|false\"\n    }, \"identifier\");\n\n    // keywords which can be followed by regular expressions\n    var kwBeforeRe = \"case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void\";\n\n    var escapedRe = \"\\\\\\\\(?:x[0-9a-fA-F]{2}|\" + // hex\n        \"u[0-9a-fA-F]{4}|\" + // unicode\n        \"u{[0-9a-fA-F]{1,6}}|\" + // es6 unicode\n        \"[0-2][0-7]{0,2}|\" + // oct\n        \"3[0-7][0-7]?|\" + // oct\n        \"[4-7][0-7]?|\" + //oct\n        \".)\";\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"no_regex\" : [\n            DocCommentHighlightRules.getStartRule(\"doc-start\"),\n            comments(\"no_regex\"),\n            {\n                token : \"string\",\n                regex : \"'(?=.)\",\n                next  : \"qstring\"\n            }, {\n                token : \"string\",\n                regex : '\"(?=.)',\n                next  : \"qqstring\"\n            }, {\n                token : \"constant.numeric\", // hexadecimal, octal and binary\n                regex : /0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\\b/\n            }, {\n                token : \"constant.numeric\", // decimal integers and floats\n                regex : /(?:\\d\\d*(?:\\.\\d*)?|\\.\\d+)(?:[eE][+-]?\\d+\\b)?/\n            }, {\n                // Sound.prototype.play =\n                token : [\n                    \"storage.type\", \"punctuation.operator\", \"support.function\",\n                    \"punctuation.operator\", \"entity.name.function\", \"text\",\"keyword.operator\"\n                ],\n                regex : \"(\" + identifierRe + \")(\\\\.)(prototype)(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)\",\n                next: \"function_arguments\"\n            }, {\n                // Sound.play = function() {  }\n                token : [\n                    \"storage.type\", \"punctuation.operator\", \"entity.name.function\", \"text\",\n                    \"keyword.operator\", \"text\", \"storage.type\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(\" + identifierRe + \")(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // play = function() {  }\n                token : [\n                    \"entity.name.function\", \"text\", \"keyword.operator\", \"text\", \"storage.type\",\n                    \"text\", \"paren.lparen\"\n                ],\n                regex : \"(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // Sound.play = function play() {  }\n                token : [\n                    \"storage.type\", \"punctuation.operator\", \"entity.name.function\", \"text\",\n                    \"keyword.operator\", \"text\",\n                    \"storage.type\", \"text\", \"entity.name.function\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(\" + identifierRe + \")(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(\\\\s+)(\\\\w+)(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // function myFunc(arg) { }\n                token : [\n                    \"storage.type\", \"text\", \"entity.name.function\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(function)(\\\\s+)(\" + identifierRe + \")(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // foobar: function() { }\n                token : [\n                    \"entity.name.function\", \"text\", \"punctuation.operator\",\n                    \"text\", \"storage.type\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(\" + identifierRe + \")(\\\\s*)(:)(\\\\s*)(function)(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // : function() { } (this is for issues with 'foo': function() { })\n                token : [\n                    \"text\", \"text\", \"storage.type\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(:)(\\\\s*)(function)(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                // from \"module-path\" (this is the only case where 'from' should be a keyword)\n                token : \"keyword\",\n                regex : \"from(?=\\\\s*('|\\\"))\"\n            }, {\n                token : \"keyword\",\n                regex : \"(?:\" + kwBeforeRe + \")\\\\b\",\n                next : \"start\"\n            }, {\n                token : [\"support.constant\"],\n                regex : /that\\b/\n            }, {\n                token : [\"storage.type\", \"punctuation.operator\", \"support.function.firebug\"],\n                regex : /(console)(\\.)(warn|info|log|error|time|trace|timeEnd|assert)\\b/\n            }, {\n                token : keywordMapper,\n                regex : identifierRe\n            }, {\n                token : \"punctuation.operator\",\n                regex : /[.](?![.])/,\n                next  : \"property\"\n            }, {\n                token : \"storage.type\",\n                regex : /=>/,\n                next  : \"start\"\n            }, {\n                token : \"keyword.operator\",\n                regex : /--|\\+\\+|\\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\\|\\||\\?:|[!$%&*+\\-~\\/^]=?/,\n                next  : \"start\"\n            }, {\n                token : \"punctuation.operator\",\n                regex : /[?:,;.]/,\n                next  : \"start\"\n            }, {\n                token : \"paren.lparen\",\n                regex : /[\\[({]/,\n                next  : \"start\"\n            }, {\n                token : \"paren.rparen\",\n                regex : /[\\])}]/\n            }, {\n                token: \"comment\",\n                regex: /^#!.*$/\n            }\n        ],\n        property: [{\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }, {\n                // Sound.play = function play() {  }\n                token : [\n                    \"storage.type\", \"punctuation.operator\", \"entity.name.function\", \"text\",\n                    \"keyword.operator\", \"text\",\n                    \"storage.type\", \"text\", \"entity.name.function\", \"text\", \"paren.lparen\"\n                ],\n                regex : \"(\" + identifierRe + \")(\\\\.)(\" + identifierRe +\")(\\\\s*)(=)(\\\\s*)(function)(?:(\\\\s+)(\\\\w+))?(\\\\s*)(\\\\()\",\n                next: \"function_arguments\"\n            }, {\n                token : \"punctuation.operator\",\n                regex : /[.](?![.])/\n            }, {\n                token : \"support.function\",\n                regex : /(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\\b(?=\\()/\n            }, {\n                token : \"support.function.dom\",\n                regex : /(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\\b(?=\\()/\n            }, {\n                token :  \"support.constant\",\n                regex : /(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\\b/\n            }, {\n                token : \"identifier\",\n                regex : identifierRe\n            }, {\n                regex: \"\",\n                token: \"empty\",\n                next: \"no_regex\"\n            }\n        ],\n        // regular expressions are only allowed after certain tokens. This\n        // makes sure we don't mix up regexps with the divison operator\n        \"start\": [\n            DocCommentHighlightRules.getStartRule(\"doc-start\"),\n            comments(\"start\"),\n            {\n                token: \"string.regexp\",\n                regex: \"\\\\/\",\n                next: \"regex\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+|^$\",\n                next : \"start\"\n            }, {\n                // immediately return to the start mode without matching\n                // anything\n                token: \"empty\",\n                regex: \"\",\n                next: \"no_regex\"\n            }\n        ],\n        \"regex\": [\n            {\n                // escapes\n                token: \"regexp.keyword.operator\",\n                regex: \"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"\n            }, {\n                // flag\n                token: \"string.regexp\",\n                regex: \"/[sxngimy]*\",\n                next: \"no_regex\"\n            }, {\n                // invalid operators\n                token : \"invalid\",\n                regex: /\\{\\d+\\b,?\\d*\\}[+*]|[+*$^?][+*]|[$^][?]|\\?{3,}/\n            }, {\n                // operators\n                token : \"constant.language.escape\",\n                regex: /\\(\\?[:=!]|\\)|\\{\\d+\\b,?\\d*\\}|[+*]\\?|[()$^+*?.]/\n            }, {\n                token : \"constant.language.delimiter\",\n                regex: /\\|/\n            }, {\n                token: \"constant.language.escape\",\n                regex: /\\[\\^?/,\n                next: \"regex_character_class\"\n            }, {\n                token: \"empty\",\n                regex: \"$\",\n                next: \"no_regex\"\n            }, {\n                defaultToken: \"string.regexp\"\n            }\n        ],\n        \"regex_character_class\": [\n            {\n                token: \"regexp.charclass.keyword.operator\",\n                regex: \"\\\\\\\\(?:u[\\\\da-fA-F]{4}|x[\\\\da-fA-F]{2}|.)\"\n            }, {\n                token: \"constant.language.escape\",\n                regex: \"]\",\n                next: \"regex\"\n            }, {\n                token: \"constant.language.escape\",\n                regex: \"-\"\n            }, {\n                token: \"empty\",\n                regex: \"$\",\n                next: \"no_regex\"\n            }, {\n                defaultToken: \"string.regexp.charachterclass\"\n            }\n        ],\n        \"function_arguments\": [\n            {\n                token: \"variable.parameter\",\n                regex: identifierRe\n            }, {\n                token: \"punctuation.operator\",\n                regex: \"[, ]+\"\n            }, {\n                token: \"punctuation.operator\",\n                regex: \"$\"\n            }, {\n                token: \"empty\",\n                regex: \"\",\n                next: \"no_regex\"\n            }\n        ],\n        \"qqstring\" : [\n            {\n                token : \"constant.language.escape\",\n                regex : escapedRe\n            }, {\n                token : \"string\",\n                regex : \"\\\\\\\\$\",\n                consumeLineEnd  : true\n            }, {\n                token : \"string\",\n                regex : '\"|$',\n                next  : \"no_regex\"\n            }, {\n                defaultToken: \"string\"\n            }\n        ],\n        \"qstring\" : [\n            {\n                token : \"constant.language.escape\",\n                regex : escapedRe\n            }, {\n                token : \"string\",\n                regex : \"\\\\\\\\$\",\n                consumeLineEnd  : true\n            }, {\n                token : \"string\",\n                regex : \"'|$\",\n                next  : \"no_regex\"\n            }, {\n                defaultToken: \"string\"\n            }\n        ]\n    };\n\n\n    if (!options || !options.noES6) {\n        this.$rules.no_regex.unshift({\n            regex: \"[{}]\", onMatch: function(val, state, stack) {\n                this.next = val == \"{\" ? this.nextState : \"\";\n                if (val == \"{\" && stack.length) {\n                    stack.unshift(\"start\", state);\n                }\n                else if (val == \"}\" && stack.length) {\n                    stack.shift();\n                    this.next = stack.shift();\n                    if (this.next.indexOf(\"string\") != -1 || this.next.indexOf(\"jsx\") != -1)\n                        return \"paren.quasi.end\";\n                }\n                return val == \"{\" ? \"paren.lparen\" : \"paren.rparen\";\n            },\n            nextState: \"start\"\n        }, {\n            token : \"string.quasi.start\",\n            regex : /`/,\n            push  : [{\n                token : \"constant.language.escape\",\n                regex : escapedRe\n            }, {\n                token : \"paren.quasi.start\",\n                regex : /\\${/,\n                push  : \"start\"\n            }, {\n                token : \"string.quasi.end\",\n                regex : /`/,\n                next  : \"pop\"\n            }, {\n                defaultToken: \"string.quasi\"\n            }]\n        });\n\n        if (!options || options.jsx != false)\n            JSX.call(this);\n    }\n\n    this.embedRules(DocCommentHighlightRules, \"doc-\",\n        [ DocCommentHighlightRules.getEndRule(\"no_regex\") ]);\n\n    this.normalizeRules();\n};\n\noop.inherits(JavaScriptHighlightRules, TextHighlightRules);\n\nfunction JSX() {\n    var tagRegex = identifierRe.replace(\"\\\\d\", \"\\\\d\\\\-\");\n    var jsxTag = {\n        onMatch : function(val, state, stack) {\n            var offset = val.charAt(1) == \"/\" ? 2 : 1;\n            if (offset == 1) {\n                if (state != this.nextState)\n                    stack.unshift(this.next, this.nextState, 0);\n                else\n                    stack.unshift(this.next);\n                stack[2]++;\n            } else if (offset == 2) {\n                if (state == this.nextState) {\n                    stack[1]--;\n                    if (!stack[1] || stack[1] < 0) {\n                        stack.shift();\n                        stack.shift();\n                    }\n                }\n            }\n            return [{\n                type: \"meta.tag.punctuation.\" + (offset == 1 ? \"\" : \"end-\") + \"tag-open.xml\",\n                value: val.slice(0, offset)\n            }, {\n                type: \"meta.tag.tag-name.xml\",\n                value: val.substr(offset)\n            }];\n        },\n        regex : \"</?\" + tagRegex + \"\",\n        next: \"jsxAttributes\",\n        nextState: \"jsx\"\n    };\n    this.$rules.start.unshift(jsxTag);\n    var jsxJsRule = {\n        regex: \"{\",\n        token: \"paren.quasi.start\",\n        push: \"start\"\n    };\n    this.$rules.jsx = [\n        jsxJsRule,\n        jsxTag,\n        {include : \"reference\"},\n        {defaultToken: \"string\"}\n    ];\n    this.$rules.jsxAttributes = [{\n        token : \"meta.tag.punctuation.tag-close.xml\",\n        regex : \"/?>\",\n        onMatch : function(value, currentState, stack) {\n            if (currentState == stack[0])\n                stack.shift();\n            if (value.length == 2) {\n                if (stack[0] == this.nextState)\n                    stack[1]--;\n                if (!stack[1] || stack[1] < 0) {\n                    stack.splice(0, 2);\n                }\n            }\n            this.next = stack[0] || \"start\";\n            return [{type: this.token, value: value}];\n        },\n        nextState: \"jsx\"\n    },\n    jsxJsRule,\n    comments(\"jsxAttributes\"),\n    {\n        token : \"entity.other.attribute-name.xml\",\n        regex : tagRegex\n    }, {\n        token : \"keyword.operator.attribute-equals.xml\",\n        regex : \"=\"\n    }, {\n        token : \"text.tag-whitespace.xml\",\n        regex : \"\\\\s+\"\n    }, {\n        token : \"string.attribute-value.xml\",\n        regex : \"'\",\n        stateName : \"jsx_attr_q\",\n        push : [\n            {token : \"string.attribute-value.xml\", regex: \"'\", next: \"pop\"},\n            {include : \"reference\"},\n            {defaultToken : \"string.attribute-value.xml\"}\n        ]\n    }, {\n        token : \"string.attribute-value.xml\",\n        regex : '\"',\n        stateName : \"jsx_attr_qq\",\n        push : [\n            {token : \"string.attribute-value.xml\", regex: '\"', next: \"pop\"},\n            {include : \"reference\"},\n            {defaultToken : \"string.attribute-value.xml\"}\n        ]\n    },\n    jsxTag\n    ];\n    this.$rules.reference = [{\n        token : \"constant.language.escape.reference.xml\",\n        regex : \"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"\n    }];\n}\n\nfunction comments(next) {\n    return [\n        {\n            token : \"comment\", // multi line comment\n            regex : /\\/\\*/,\n            next: [\n                DocCommentHighlightRules.getTagRule(),\n                {token : \"comment\", regex : \"\\\\*\\\\/\", next : next || \"pop\"},\n                {defaultToken : \"comment\", caseInsensitive: true}\n            ]\n        }, {\n            token : \"comment\",\n            regex : \"\\\\/\\\\/\",\n            next: [\n                DocCommentHighlightRules.getTagRule(),\n                {token : \"comment\", regex : \"$|^\", next : next || \"pop\"},\n                {defaultToken : \"comment\", caseInsensitive: true}\n            ]\n        }\n    ];\n}\nexports.JavaScriptHighlightRules = JavaScriptHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar HighlightRules = require(\"./json_highlight_rules\").JsonHighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\nvar WorkerClient = require(\"../worker/worker_client\").WorkerClient;\n\nvar Mode = function() {\n    this.HighlightRules = HighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n    \n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        if (state == \"start\") {\n            var match = line.match(/^.*[\\{\\(\\[]\\s*$/);\n            if (match) {\n                indent += tab;\n            }\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], \"ace/mode/json_worker\", \"JsonWorker\");\n        worker.attachToDocument(session.getDocument());\n\n        worker.on(\"annotate\", function(e) {\n            session.setAnnotations(e.data);\n        });\n\n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n\n        return worker;\n    };\n\n\n    this.$id = \"ace/mode/json\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar HighlightRules = require(\"./json5_highlight_rules\").Json5HighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\n\nvar Mode = function() {\n    this.HighlightRules = HighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.$id = \"ace/mode/json5\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar JsonHighlightRules = require(\"./json_highlight_rules\").JsonHighlightRules;\n\nvar Json5HighlightRules = function() {\n    JsonHighlightRules.call(this);\n\n    var startRules = [{\n        token : \"variable\",\n        regex : /[a-zA-Z$_\\u00a1-\\uffff][\\w$\\u00a1-\\uffff]*\\s*(?=:)/\n    }, {\n        token : \"variable\",\n        regex : /['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']\\s*(?=:)/\n    }, {\n        token : \"constant.language.boolean\",\n        regex : /(?:null)\\b/\n    }, {\n        token : \"string\",\n        regex : /'/,\n        next  : [{\n            token : \"constant.language.escape\",\n            regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\/bfnrt]|$)/,\n            consumeLineEnd  : true\n        }, {\n            token : \"string\",\n            regex : /'|$/,\n            next  : \"start\"\n        }, {\n            defaultToken : \"string\"\n        }]\n    }, {\n        token : \"string\",\n        regex : /\"(?![^\"]*\":)/,\n        next  : [{\n            token : \"constant.language.escape\",\n            regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\/bfnrt]|$)/,\n            consumeLineEnd  : true\n        }, {\n            token : \"string\",\n            regex : /\"|$/,\n            next  : \"start\"\n        }, {\n            defaultToken : \"string\"\n        }]\n    }, {\n        token : \"constant.numeric\",\n        regex : /[+-]?(?:Infinity|NaN)\\b/\n    }];\n\n    for (var key in this.$rules)\n        this.$rules[key].unshift.apply(this.$rules[key], startRules);\n\n    this.normalizeRules();\n};\n\noop.inherits(Json5HighlightRules, JsonHighlightRules);\n\nexports.Json5HighlightRules = Json5HighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar JsonHighlightRules = function() {\n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n    this.$rules = {\n        \"start\" : [\n            {\n                token : \"variable\", // single line\n                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]\\\\s*(?=:)'\n            }, {\n                token : \"string\", // single line\n                regex : '\"',\n                next  : \"string\"\n            }, {\n                token : \"constant.numeric\", // hex\n                regex : \"0[xX][0-9a-fA-F]+\\\\b\"\n            }, {\n                token : \"constant.numeric\", // float\n                regex : \"[+-]?\\\\d+(?:(?:\\\\.\\\\d*)?(?:[eE][+-]?\\\\d+)?)?\\\\b\"\n            }, {\n                token : \"constant.language.boolean\",\n                regex : \"(?:true|false)\\\\b\"\n            }, {\n                token : \"text\", // single quoted strings are not allowed\n                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n            }, {\n                token : \"comment\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\/.*$\"\n            }, {\n                token : \"comment.start\", // comments are not allowed, but who cares?\n                regex : \"\\\\/\\\\*\",\n                next  : \"comment\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"punctuation.operator\",\n                regex : /[,]/\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }\n        ],\n        \"string\" : [\n            {\n                token : \"constant.language.escape\",\n                regex : /\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[\"\\\\\\/bfnrt])/\n            }, {\n                token : \"string\",\n                regex : '\"|$',\n                next  : \"start\"\n            }, {\n                defaultToken : \"string\"\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment.end\", // comments are not allowed, but who cares?\n                regex : \"\\\\*\\\\/\",\n                next  : \"start\"\n            }, {\n                defaultToken: \"comment\"\n            }\n        ]\n    };\n    \n};\n\noop.inherits(JsonHighlightRules, TextHighlightRules);\n\nexports.JsonHighlightRules = JsonHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar LessHighlightRules = require(\"./less_highlight_rules\").LessHighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CssBehaviour = require(\"./behaviour/css\").CssBehaviour;\nvar CssCompletions = require(\"./css_completions\").CssCompletions;\n\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\n\nvar Mode = function() {\n    this.HighlightRules = LessHighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CssBehaviour();\n    this.$completer = new CssCompletions();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n\n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n    \n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        // ignore braces in comments\n        var tokens = this.getTokenizer().getLineTokens(line, state).tokens;\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        var match = line.match(/^.*\\{\\s*$/);\n        if (match) {\n            indent += tab;\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        // CSS completions only work with single (not nested) rulesets\n        return this.$completer.getCompletions(\"ruleset\", session, pos, prefix);\n    };\n\n    this.$id = \"ace/mode/less\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CssHighlightRules = require('./css_highlight_rules');\n\nvar LessHighlightRules = function() {\n\n\n    var keywordList = \"@import|@media|@font-face|@keyframes|@-webkit-keyframes|@supports|\" + \n        \"@charset|@plugin|@namespace|@document|@page|@viewport|@-ms-viewport|\" +\n        \"or|and|when|not\";\n\n    var keywords = keywordList.split('|');\n\n    var properties = CssHighlightRules.supportType.split('|');\n\n    var keywordMapper = this.createKeywordMapper({\n        \"support.constant\": CssHighlightRules.supportConstant,\n        \"keyword\": keywordList,\n        \"support.constant.color\": CssHighlightRules.supportConstantColor,\n        \"support.constant.fonts\": CssHighlightRules.supportConstantFonts\n    }, \"identifier\", true);   \n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    var numRe = \"\\\\-?(?:(?:[0-9]+)|(?:[0-9]*\\\\.[0-9]+))\";\n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"start\" : [\n            {\n                token : \"comment\",\n                regex : \"\\\\/\\\\/.*$\"\n            },\n            {\n                token : \"comment\", // multi line comment\n                regex : \"\\\\/\\\\*\",\n                next : \"comment\"\n            }, {\n                token : \"string\", // single line\n                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]'\n            }, {\n                token : \"string\", // single line\n                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n            }, {\n                token : [\"constant.numeric\", \"keyword\"],\n                regex : \"(\" + numRe + \")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vm|vw|%)\"\n            }, {\n                token : \"constant.numeric\", // hex6 color\n                regex : \"#[a-f0-9]{6}\"\n            }, {\n                token : \"constant.numeric\", // hex3 color\n                regex : \"#[a-f0-9]{3}\"\n            }, {\n                token : \"constant.numeric\",\n                regex : numRe\n            }, {\n                token : [\"support.function\", \"paren.lparen\", \"string\", \"paren.rparen\"],\n                regex : \"(url)(\\\\()(.*)(\\\\))\"\n            }, {\n                token : [\"support.function\", \"paren.lparen\"],\n                regex : \"(:extend|[a-z0-9_\\\\-]+)(\\\\()\"\n            }, {\n                token : function(value) {\n                    if (keywords.indexOf(value.toLowerCase()) > -1)\n                        return \"keyword\";\n                    else\n                        return \"variable\";\n                },\n                regex : \"[@\\\\$][a-z0-9_\\\\-@\\\\$]*\\\\b\"\n            }, {\n                token : \"variable\",\n                regex : \"[@\\\\$]\\\\{[a-z0-9_\\\\-@\\\\$]*\\\\}\"\n            }, {\n                token : function(first, second) {\n                    if(properties.indexOf(first.toLowerCase()) > -1) {\n                        return [\"support.type.property\", \"text\"];\n                    }\n                    else {\n                        return [\"support.type.unknownProperty\", \"text\"];\n                    }\n                },\n                regex : \"([a-z0-9-_]+)(\\\\s*:)\"\n            }, {\n                token : \"keyword\",\n                regex : \"&\"   // special case - always treat as keyword\n            }, {\n                token : keywordMapper,\n                regex : \"\\\\-?[@a-z_][@a-z0-9_\\\\-]*\"\n            }, {\n                token: \"variable.language\",\n                regex: \"#[a-z0-9-_]+\"\n            }, {\n                token: \"variable.language\",\n                regex: \"\\\\.[a-z0-9-_]+\"\n            }, {\n                token: \"variable.language\",\n                regex: \":[a-z_][a-z0-9-_]*\"\n            }, {\n                token: \"constant\",\n                regex: \"[a-z0-9-_]+\"\n            }, {\n                token : \"keyword.operator\",\n                regex : \"<|>|<=|>=|=|!=|-|%|\\\\+|\\\\*\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }, {\n                caseInsensitive: true\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment\", // closing comment\n                regex : \"\\\\*\\\\/\",\n                next : \"start\"\n            }, {\n                defaultToken : \"comment\"\n            }\n        ]\n    };\n    this.normalizeRules();\n};\n\noop.inherits(LessHighlightRules, TextHighlightRules);\n\nexports.LessHighlightRules = LessHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar LuaHighlightRules = require(\"./lua_highlight_rules\").LuaHighlightRules;\nvar LuaFoldMode = require(\"./folding/lua\").FoldMode;\nvar Range = require(\"../range\").Range;\nvar WorkerClient = require(\"../worker/worker_client\").WorkerClient;\n\nvar Mode = function() {\n    this.HighlightRules = LuaHighlightRules;\n    \n    this.foldingRules = new LuaFoldMode();\n    this.$behaviour = this.$defaultBehaviour;\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n   \n    this.lineCommentStart = \"--\";\n    this.blockComment = {start: \"--[[\", end: \"--]]\"};\n    \n    var indentKeywords = {\n        \"function\": 1,\n        \"then\": 1,\n        \"do\": 1,\n        \"else\": 1,\n        \"elseif\": 1,\n        \"repeat\": 1,\n        \"end\": -1,\n        \"until\": -1\n    };\n    var outdentKeywords = [\n        \"else\",\n        \"elseif\",\n        \"end\",\n        \"until\"\n    ];\n\n    function getNetIndentLevel(tokens) {\n        var level = 0;\n        // Support single-line blocks by decrementing the indent level if\n        // an ending token is found\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (token.type == \"keyword\") {\n                if (token.value in indentKeywords) {\n                    level += indentKeywords[token.value];\n                }\n            } else if (token.type == \"paren.lparen\") {\n                level += token.value.length;\n            } else if (token.type == \"paren.rparen\") {\n                level -= token.value.length;\n            }\n        }\n        // Limit the level to +/- 1 since usually users only indent one level\n        // at a time regardless of the logical nesting level\n        if (level < 0) {\n            return -1;\n        } else if (level > 0) {\n            return 1;\n        } else {\n            return 0;\n        }\n    }\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n        var level = 0;\n\n        var tokenizedLine = this.getTokenizer().getLineTokens(line, state);\n        var tokens = tokenizedLine.tokens;\n\n        if (state == \"start\") {\n            level = getNetIndentLevel(tokens);\n        }\n        if (level > 0) {\n            return indent + tab;\n        } else if (level < 0 && indent.substr(indent.length - tab.length) == tab) {\n            // Don't do a next-line outdent if we're going to do a real outdent of this line\n            if (!this.checkOutdent(state, line, \"\\n\")) {\n                return indent.substr(0, indent.length - tab.length);\n            }\n        }\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        if (input != \"\\n\" && input != \"\\r\" && input != \"\\r\\n\")\n            return false;\n\n        if (line.match(/^\\s*[\\)\\}\\]]$/))\n            return true;\n\n        var tokens = this.getTokenizer().getLineTokens(line.trim(), state).tokens;\n\n        if (!tokens || !tokens.length)\n            return false;\n\n        return (tokens[0].type == \"keyword\" && outdentKeywords.indexOf(tokens[0].value) != -1);\n    };\n\n    this.getMatching = function(session, row, column) {\n        if (row == undefined) {\n            var pos = session.selection.lead;\n            column = pos.column;\n            row = pos.row;\n        }\n\n        var startToken = session.getTokenAt(row, column);\n        if (startToken && startToken.value in indentKeywords)\n            return this.foldingRules.luaBlock(session, row, column, true);\n    };\n\n    this.autoOutdent = function(state, session, row) {\n        var line = session.getLine(row);\n        var column = line.match(/^\\s*/)[0].length;\n        if (!column || !row) return;\n\n        var startRange = this.getMatching(session, row, column + 1);\n        if (!startRange || startRange.start.row == row)\n             return;\n        var indent = this.$getIndent(session.getLine(startRange.start.row));\n        if (indent.length != column) {\n            session.replace(new Range(row, 0, row, column), indent);\n            session.outdentRows(new Range(row + 1, 0, row + 1, 0));\n        }\n    };\n\n    this.createWorker = function(session) {\n        var worker = new WorkerClient([\"ace\"], \"ace/mode/lua_worker\", \"Worker\");\n        worker.attachToDocument(session.getDocument());\n        \n        worker.on(\"annotate\", function(e) {\n            session.setAnnotations(e.data);\n        });\n        \n        worker.on(\"terminate\", function() {\n            session.clearAnnotations();\n        });\n        \n        return worker;\n    };\n\n    this.$id = \"ace/mode/lua\";\n    this.snippetFileId = \"ace/snippets/lua\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar LuaHighlightRules = function() {\n\n    var keywords = (\n        \"break|do|else|elseif|end|for|function|if|in|local|repeat|\"+\n         \"return|then|until|while|or|and|not\"\n    );\n\n    var builtinConstants = (\"true|false|nil|_G|_VERSION\");\n\n    var functions = (\n      // builtinFunctions\n        \"string|xpcall|package|tostring|print|os|unpack|require|\"+\n        \"getfenv|setmetatable|next|assert|tonumber|io|rawequal|\"+\n        \"collectgarbage|getmetatable|module|rawset|math|debug|\"+\n        \"pcall|table|newproxy|type|coroutine|_G|select|gcinfo|\"+\n        \"pairs|rawget|loadstring|ipairs|_VERSION|dofile|setfenv|\"+\n        \"load|error|loadfile|\"+\n\n        \"sub|upper|len|gfind|rep|find|match|char|dump|gmatch|\"+\n        \"reverse|byte|format|gsub|lower|preload|loadlib|loaded|\"+\n        \"loaders|cpath|config|path|seeall|exit|setlocale|date|\"+\n        \"getenv|difftime|remove|time|clock|tmpname|rename|execute|\"+\n        \"lines|write|close|flush|open|output|type|read|stderr|\"+\n        \"stdin|input|stdout|popen|tmpfile|log|max|acos|huge|\"+\n        \"ldexp|pi|cos|tanh|pow|deg|tan|cosh|sinh|random|randomseed|\"+\n        \"frexp|ceil|floor|rad|abs|sqrt|modf|asin|min|mod|fmod|log10|\"+\n        \"atan2|exp|sin|atan|getupvalue|debug|sethook|getmetatable|\"+\n        \"gethook|setmetatable|setlocal|traceback|setfenv|getinfo|\"+\n        \"setupvalue|getlocal|getregistry|getfenv|setn|insert|getn|\"+\n        \"foreachi|maxn|foreach|concat|sort|remove|resume|yield|\"+\n        \"status|wrap|create|running|\"+\n      // metatableMethods\n        \"__add|__sub|__mod|__unm|__concat|__lt|__index|__call|__gc|__metatable|\"+\n         \"__mul|__div|__pow|__len|__eq|__le|__newindex|__tostring|__mode|__tonumber\"\n    );\n\n    var stdLibaries = (\"string|package|os|io|math|debug|table|coroutine\");\n\n    var deprecatedIn5152 = (\"setn|foreach|foreachi|gcinfo|log10|maxn\");\n\n    var keywordMapper = this.createKeywordMapper({\n        \"keyword\": keywords,\n        \"support.function\": functions,\n        \"keyword.deprecated\": deprecatedIn5152,\n        \"constant.library\": stdLibaries,\n        \"constant.language\": builtinConstants,\n        \"variable.language\": \"self\"\n    }, \"identifier\");\n\n    var decimalInteger = \"(?:(?:[1-9]\\\\d*)|(?:0))\";\n    var hexInteger = \"(?:0[xX][\\\\dA-Fa-f]+)\";\n    var integer = \"(?:\" + decimalInteger + \"|\" + hexInteger + \")\";\n\n    var fraction = \"(?:\\\\.\\\\d+)\";\n    var intPart = \"(?:\\\\d+)\";\n    var pointFloat = \"(?:(?:\" + intPart + \"?\" + fraction + \")|(?:\" + intPart + \"\\\\.))\";\n    var floatNumber = \"(?:\" + pointFloat + \")\";\n\n    this.$rules = {\n        \"start\" : [{\n            stateName: \"bracketedComment\",\n            onMatch : function(value, currentState, stack){\n                stack.unshift(this.next, value.length - 2, currentState);\n                return \"comment\";\n            },\n            regex : /\\-\\-\\[=*\\[/,\n            next  : [\n                {\n                    onMatch : function(value, currentState, stack) {\n                        if (value.length == stack[1]) {\n                            stack.shift();\n                            stack.shift();\n                            this.next = stack.shift();\n                        } else {\n                            this.next = \"\";\n                        }\n                        return \"comment\";\n                    },\n                    regex : /\\]=*\\]/,\n                    next  : \"start\"\n                }, {\n                    defaultToken : \"comment\"\n                }\n            ]\n        },\n\n        {\n            token : \"comment\",\n            regex : \"\\\\-\\\\-.*$\"\n        },\n        {\n            stateName: \"bracketedString\",\n            onMatch : function(value, currentState, stack){\n                stack.unshift(this.next, value.length, currentState);\n                return \"string.start\";\n            },\n            regex : /\\[=*\\[/,\n            next  : [\n                {\n                    onMatch : function(value, currentState, stack) {\n                        if (value.length == stack[1]) {\n                            stack.shift();\n                            stack.shift();\n                            this.next = stack.shift();\n                        } else {\n                            this.next = \"\";\n                        }\n                        return \"string.end\";\n                    },\n                    \n                    regex : /\\]=*\\]/,\n                    next  : \"start\"\n                }, {\n                    defaultToken : \"string\"\n                }\n            ]\n        },\n        {\n            token : \"string\",           // \" string\n            regex : '\"(?:[^\\\\\\\\]|\\\\\\\\.)*?\"'\n        }, {\n            token : \"string\",           // ' string\n            regex : \"'(?:[^\\\\\\\\]|\\\\\\\\.)*?'\"\n        }, {\n            token : \"constant.numeric\", // float\n            regex : floatNumber\n        }, {\n            token : \"constant.numeric\", // integer\n            regex : integer + \"\\\\b\"\n        }, {\n            token : keywordMapper,\n            regex : \"[a-zA-Z_$][a-zA-Z0-9_$]*\\\\b\"\n        }, {\n            token : \"keyword.operator\",\n            regex : \"\\\\+|\\\\-|\\\\*|\\\\/|%|\\\\#|\\\\^|~|<|>|<=|=>|==|~=|=|\\\\:|\\\\.\\\\.\\\\.|\\\\.\\\\.\"\n        }, {\n            token : \"paren.lparen\",\n            regex : \"[\\\\[\\\\(\\\\{]\"\n        }, {\n            token : \"paren.rparen\",\n            regex : \"[\\\\]\\\\)\\\\}]\"\n        }, {\n            token : \"text\",\n            regex : \"\\\\s+|\\\\w+\"\n        } ]\n    };\n    \n    this.normalizeRules();\n};\n\noop.inherits(LuaHighlightRules, TextHighlightRules);\n\nexports.LuaHighlightRules = LuaHighlightRules;\n","\"use strict\";\n\nvar Range = require(\"../range\").Range;\n\nvar MatchingBraceOutdent = function() {};\n\n(function() {\n\n    this.checkOutdent = function(line, input) {\n        if (! /^\\s+$/.test(line))\n            return false;\n\n        return /^\\s*\\}/.test(input);\n    };\n\n    this.autoOutdent = function(doc, row) {\n        var line = doc.getLine(row);\n        var match = line.match(/^(\\s*\\})/);\n\n        if (!match) return 0;\n\n        var column = match[1].length;\n        var openBracePos = doc.findMatchingBracket({row: row, column: column});\n\n        if (!openBracePos || openBracePos.row == row) return 0;\n\n        var indent = this.$getIndent(doc.getLine(openBracePos.row));\n        doc.replace(new Range(row, 0, row, column-1), indent);\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n}).call(MatchingBraceOutdent.prototype);\n\nexports.MatchingBraceOutdent = MatchingBraceOutdent;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextMode = require(\"./text\").Mode;\nvar ScssHighlightRules = require(\"./scss_highlight_rules\").ScssHighlightRules;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\nvar CssBehaviour = require(\"./behaviour/css\").CssBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\nvar CssCompletions = require(\"./css_completions\").CssCompletions;\n\n\nvar Mode = function() {\n    this.HighlightRules = ScssHighlightRules;\n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CssBehaviour();\n    this.$completer = new CssCompletions();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, TextMode);\n\n(function() {\n   \n    this.lineCommentStart = \"//\";\n    this.blockComment = {start: \"/*\", end: \"*/\"};\n\n    this.getNextLineIndent = function(state, line, tab) {\n        var indent = this.$getIndent(line);\n\n        // ignore braces in comments\n        var tokens = this.getTokenizer().getLineTokens(line, state).tokens;\n        if (tokens.length && tokens[tokens.length-1].type == \"comment\") {\n            return indent;\n        }\n\n        var match = line.match(/^.*\\{\\s*$/);\n        if (match) {\n            indent += tab;\n        }\n\n        return indent;\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return this.$outdent.checkOutdent(line, input);\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n        this.$outdent.autoOutdent(doc, row);\n    };\n    \n    this.getCompletions = function(state, session, pos, prefix) {\n        return this.$completer.getCompletions(state, session, pos, prefix);\n    };\n\n\n    this.$id = \"ace/mode/scss\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar lang = require(\"../lib/lang\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CssHighlightRules = require(\"./css_highlight_rules\");\n\nvar ScssHighlightRules = function() {\n    \n    var properties = lang.arrayToMap(CssHighlightRules.supportType.split(\"|\"));\n\n    var functions = lang.arrayToMap(\n        (\"hsl|hsla|rgb|rgba|url|attr|counter|counters|abs|adjust_color|adjust_hue|\" +\n         \"alpha|join|blue|ceil|change_color|comparable|complement|darken|desaturate|\" + \n         \"floor|grayscale|green|hue|if|invert|join|length|lighten|lightness|mix|\" + \n         \"nth|opacify|opacity|percentage|quote|red|round|saturate|saturation|\" +\n         \"scale_color|transparentize|type_of|unit|unitless|unquote\").split(\"|\")\n    );\n\n    var constants = lang.arrayToMap(CssHighlightRules.supportConstant.split(\"|\"));\n\n    var colors = lang.arrayToMap(CssHighlightRules.supportConstantColor.split(\"|\"));\n    \n    var keywords = lang.arrayToMap(\n        (\"@mixin|@extend|@include|@import|@media|@debug|@warn|@if|@for|@each|@while|@else|@font-face|@-webkit-keyframes|if|and|!default|module|def|end|declare\").split(\"|\")\n    );\n    \n    var tags = lang.arrayToMap(\n        (\"a|abbr|acronym|address|applet|area|article|aside|audio|b|base|basefont|bdo|\" + \n         \"big|blockquote|body|br|button|canvas|caption|center|cite|code|col|colgroup|\" + \n         \"command|datalist|dd|del|details|dfn|dir|div|dl|dt|em|embed|fieldset|\" + \n         \"figcaption|figure|font|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|\" + \n         \"header|hgroup|hr|html|i|iframe|img|input|ins|keygen|kbd|label|legend|li|\" + \n         \"link|map|mark|menu|meta|meter|nav|noframes|noscript|object|ol|optgroup|\" + \n         \"option|output|p|param|pre|progress|q|rp|rt|ruby|s|samp|script|section|select|\" + \n         \"small|source|span|strike|strong|style|sub|summary|sup|table|tbody|td|\" + \n         \"textarea|tfoot|th|thead|time|title|tr|tt|u|ul|var|video|wbr|xmp\").split(\"|\")\n    );\n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    var numRe = \"\\\\-?(?:(?:[0-9]+)|(?:[0-9]*\\\\.[0-9]+))\";\n\n    // regexp must not have capturing parentheses. Use (?:) instead.\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"start\" : [\n            {\n                token : \"comment\",\n                regex : \"\\\\/\\\\/.*$\"\n            },\n            {\n                token : \"comment\", // multi line comment\n                regex : \"\\\\/\\\\*\",\n                next : \"comment\"\n            }, {\n                token : \"string\", // single line\n                regex : '[\"](?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?[\"]'\n            }, {\n                token : \"string\", // multi line string start\n                regex : '[\"].*\\\\\\\\$',\n                next : \"qqstring\"\n            }, {\n                token : \"string\", // single line\n                regex : \"['](?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?[']\"\n            }, {\n                token : \"string\", // multi line string start\n                regex : \"['].*\\\\\\\\$\",\n                next : \"qstring\"\n            }, {\n                token : \"constant.numeric\",\n                regex : numRe + \"(?:ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)\"\n            }, {\n                token : \"constant.numeric\", // hex6 color\n                regex : \"#[a-f0-9]{6}\"\n            }, {\n                token : \"constant.numeric\", // hex3 color\n                regex : \"#[a-f0-9]{3}\"\n            }, {\n                token : \"constant.numeric\",\n                regex : numRe\n            }, {\n                token : [\"support.function\", \"string\", \"support.function\"],\n                regex : \"(url\\\\()(.*)(\\\\))\"\n            }, {\n                token : function(value) {\n                    if (properties.hasOwnProperty(value.toLowerCase()))\n                        return \"support.type\";\n                    if (keywords.hasOwnProperty(value))\n                        return \"keyword\";\n                    else if (constants.hasOwnProperty(value))\n                        return \"constant.language\";\n                    else if (functions.hasOwnProperty(value))\n                        return \"support.function\";\n                    else if (colors.hasOwnProperty(value.toLowerCase()))\n                        return \"support.constant.color\";\n                    else if (tags.hasOwnProperty(value.toLowerCase()))\n                        return \"variable.language\";\n                    else\n                        return \"text\";\n                },\n                regex : \"\\\\-?[@a-z_][@a-z0-9_\\\\-]*\"\n            }, {\n                token : \"variable\",\n                regex : \"[a-z_\\\\-$][a-z0-9_\\\\-$]*\\\\b\"\n            }, {\n                token: \"variable.language\",\n                regex: \"#[a-z0-9-_]+\"\n            }, {\n                token: \"variable.language\",\n                regex: \"\\\\.[a-z0-9-_]+\"\n            }, {\n                token: \"variable.language\",\n                regex: \":[a-z0-9-_]+\"\n            }, {\n                token: \"constant\",\n                regex: \"[a-z0-9-_]+\"\n            }, {\n                token : \"keyword.operator\",\n                regex : \"<|>|<=|>=|==|!=|-|%|#|\\\\+|\\\\$|\\\\+|\\\\*\"\n            }, {\n                token : \"paren.lparen\",\n                regex : \"[[({]\"\n            }, {\n                token : \"paren.rparen\",\n                regex : \"[\\\\])}]\"\n            }, {\n                token : \"text\",\n                regex : \"\\\\s+\"\n            }, {\n                caseInsensitive: true\n            }\n        ],\n        \"comment\" : [\n            {\n                token : \"comment\", // closing comment\n                regex : \"\\\\*\\\\/\",\n                next : \"start\"\n            }, {\n                defaultToken : \"comment\"\n            }\n        ],\n        \"qqstring\" : [\n            {\n                token : \"string\",\n                regex : '(?:(?:\\\\\\\\.)|(?:[^\"\\\\\\\\]))*?\"',\n                next : \"start\"\n            }, {\n                token : \"string\",\n                regex : '.+'\n            }\n        ],\n        \"qstring\" : [\n            {\n                token : \"string\",\n                regex : \"(?:(?:\\\\\\\\.)|(?:[^'\\\\\\\\]))*?'\",\n                next : \"start\"\n            }, {\n                token : \"string\",\n                regex : '.+'\n            }\n        ]\n    };\n};\n\noop.inherits(ScssHighlightRules, TextHighlightRules);\n\nexports.ScssHighlightRules = ScssHighlightRules;\n","\"use strict\";\nvar config = require(\"../config\");\n\nvar Tokenizer = require(\"../tokenizer\").Tokenizer;\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar unicode = require(\"../unicode\");\nvar lang = require(\"../lib/lang\");\nvar TokenIterator = require(\"../token_iterator\").TokenIterator;\nvar Range = require(\"../range\").Range;\n\nvar Mode = function() {\n    this.HighlightRules = TextHighlightRules;\n};\n\n(function() {\n    this.$defaultBehaviour = new CstyleBehaviour();\n\n    this.tokenRe = new RegExp(\"^[\" + unicode.wordChars + \"\\\\$_]+\", \"g\");\n\n    this.nonTokenRe = new RegExp(\"^(?:[^\" + unicode.wordChars + \"\\\\$_]|\\\\s])+\", \"g\");\n\n    this.getTokenizer = function() {\n        if (!this.$tokenizer) {\n            this.$highlightRules = this.$highlightRules || new this.HighlightRules(this.$highlightRuleConfig);\n            this.$tokenizer = new Tokenizer(this.$highlightRules.getRules());\n        }\n        return this.$tokenizer;\n    };\n\n    this.lineCommentStart = \"\";\n    this.blockComment = \"\";\n\n    this.toggleCommentLines = function(state, session, startRow, endRow) {\n        var doc = session.doc;\n\n        var ignoreBlankLines = true;\n        var shouldRemove = true;\n        var minIndent = Infinity;\n        var tabSize = session.getTabSize();\n        var insertAtTabStop = false;\n\n        if (!this.lineCommentStart) {\n            if (!this.blockComment)\n                return false;\n            var lineCommentStart = this.blockComment.start;\n            var lineCommentEnd = this.blockComment.end;\n            var regexpStart = new RegExp(\"^(\\\\s*)(?:\" + lang.escapeRegExp(lineCommentStart) + \")\");\n            var regexpEnd = new RegExp(\"(?:\" + lang.escapeRegExp(lineCommentEnd) + \")\\\\s*$\");\n\n            var comment = function(line, i) {\n                if (testRemove(line, i))\n                    return;\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    doc.insertInLine({row: i, column: line.length}, lineCommentEnd);\n                    doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n\n            var uncomment = function(line, i) {\n                var m;\n                if (m = line.match(regexpEnd))\n                    doc.removeInLine(i, line.length - m[0].length, line.length);\n                if (m = line.match(regexpStart))\n                    doc.removeInLine(i, m[1].length, m[0].length);\n            };\n\n            var testRemove = function(line, row) {\n                if (regexpStart.test(line))\n                    return true;\n                var tokens = session.getTokens(row);\n                for (var i = 0; i < tokens.length; i++) {\n                    if (tokens[i].type === \"comment\")\n                        return true;\n                }\n            };\n        } else {\n            if (Array.isArray(this.lineCommentStart)) {\n                var regexpStart = this.lineCommentStart.map(lang.escapeRegExp).join(\"|\");\n                var lineCommentStart = this.lineCommentStart[0];\n            } else {\n                var regexpStart = lang.escapeRegExp(this.lineCommentStart);\n                var lineCommentStart = this.lineCommentStart;\n            }\n            regexpStart = new RegExp(\"^(\\\\s*)(?:\" + regexpStart + \") ?\");\n            \n            insertAtTabStop = session.getUseSoftTabs();\n\n            var uncomment = function(line, i) {\n                var m = line.match(regexpStart);\n                if (!m) return;\n                var start = m[1].length, end = m[0].length;\n                if (!shouldInsertSpace(line, start, end) && m[0][end - 1] == \" \")\n                    end--;\n                doc.removeInLine(i, start, end);\n            };\n            var commentWithSpace = lineCommentStart + \" \";\n            var comment = function(line, i) {\n                if (!ignoreBlankLines || /\\S/.test(line)) {\n                    if (shouldInsertSpace(line, minIndent, minIndent))\n                        doc.insertInLine({row: i, column: minIndent}, commentWithSpace);\n                    else\n                        doc.insertInLine({row: i, column: minIndent}, lineCommentStart);\n                }\n            };\n            var testRemove = function(line, i) {\n                return regexpStart.test(line);\n            };\n            \n            var shouldInsertSpace = function(line, before, after) {\n                var spaces = 0;\n                while (before-- && line.charAt(before) == \" \")\n                    spaces++;\n                if (spaces % tabSize != 0)\n                    return false;\n                var spaces = 0;\n                while (line.charAt(after++) == \" \")\n                    spaces++;\n                if (tabSize > 2)\n                    return spaces % tabSize != tabSize - 1;\n                else\n                    return spaces % tabSize == 0;\n            };\n        }\n\n        function iter(fun) {\n            for (var i = startRow; i <= endRow; i++)\n                fun(doc.getLine(i), i);\n        }\n\n\n        var minEmptyLength = Infinity;\n        iter(function(line, i) {\n            var indent = line.search(/\\S/);\n            if (indent !== -1) {\n                if (indent < minIndent)\n                    minIndent = indent;\n                if (shouldRemove && !testRemove(line, i))\n                    shouldRemove = false;\n            } else if (minEmptyLength > line.length) {\n                minEmptyLength = line.length;\n            }\n        });\n\n        if (minIndent == Infinity) {\n            minIndent = minEmptyLength;\n            ignoreBlankLines = false;\n            shouldRemove = false;\n        }\n\n        if (insertAtTabStop && minIndent % tabSize != 0)\n            minIndent = Math.floor(minIndent / tabSize) * tabSize;\n\n        iter(shouldRemove ? uncomment : comment);\n    };\n\n    this.toggleBlockComment = function(state, session, range, cursor) {\n        var comment = this.blockComment;\n        if (!comment)\n            return;\n        if (!comment.start && comment[0])\n            comment = comment[0];\n\n        var iterator = new TokenIterator(session, cursor.row, cursor.column);\n        var token = iterator.getCurrentToken();\n\n        var sel = session.selection;\n        var initialRange = session.selection.toOrientedRange();\n        var startRow, colDiff;\n\n        if (token && /comment/.test(token.type)) {\n            var startRange, endRange;\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.start);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    startRange = new Range(row, column, row, column + comment.start.length);\n                    break;\n                }\n                token = iterator.stepBackward();\n            }\n\n            var iterator = new TokenIterator(session, cursor.row, cursor.column);\n            var token = iterator.getCurrentToken();\n            while (token && /comment/.test(token.type)) {\n                var i = token.value.indexOf(comment.end);\n                if (i != -1) {\n                    var row = iterator.getCurrentTokenRow();\n                    var column = iterator.getCurrentTokenColumn() + i;\n                    endRange = new Range(row, column, row, column + comment.end.length);\n                    break;\n                }\n                token = iterator.stepForward();\n            }\n            if (endRange)\n                session.remove(endRange);\n            if (startRange) {\n                session.remove(startRange);\n                startRow = startRange.start.row;\n                colDiff = -comment.start.length;\n            }\n        } else {\n            colDiff = comment.start.length;\n            startRow = range.start.row;\n            session.insert(range.end, comment.end);\n            session.insert(range.start, comment.start);\n        }\n        // todo: selection should have ended up in the right place automatically!\n        if (initialRange.start.row == startRow)\n            initialRange.start.column += colDiff;\n        if (initialRange.end.row == startRow)\n            initialRange.end.column += colDiff;\n        session.selection.fromOrientedRange(initialRange);\n    };\n\n    this.getNextLineIndent = function(state, line, tab) {\n        return this.$getIndent(line);\n    };\n\n    this.checkOutdent = function(state, line, input) {\n        return false;\n    };\n\n    this.autoOutdent = function(state, doc, row) {\n    };\n\n    this.$getIndent = function(line) {\n        return line.match(/^\\s*/)[0];\n    };\n\n    this.createWorker = function(session) {\n        return null;\n    };\n\n    this.createModeDelegates = function (mapping) {\n        this.$embeds = [];\n        this.$modes = {};\n        for (var i in mapping) {\n            if (mapping[i]) {\n                var Mode = mapping[i];\n                var id = Mode.prototype.$id;\n                var mode = config.$modes[id];\n                if (!mode)\n                    config.$modes[id] = mode = new Mode();\n                if (!config.$modes[i])\n                    config.$modes[i] = mode;\n                this.$embeds.push(i);\n                this.$modes[i] = mode;\n            }\n        }\n\n        var delegations = [\"toggleBlockComment\", \"toggleCommentLines\", \"getNextLineIndent\", \n            \"checkOutdent\", \"autoOutdent\", \"transformAction\", \"getCompletions\"];\n\n        for (var i = 0; i < delegations.length; i++) {\n            (function(scope) {\n              var functionName = delegations[i];\n              var defaultHandler = scope[functionName];\n              scope[delegations[i]] = function() {\n                  return this.$delegator(functionName, arguments, defaultHandler);\n              };\n            }(this));\n        }\n    };\n\n    this.$delegator = function(method, args, defaultHandler) {\n        var state = args[0] || \"start\";\n        if (typeof state != \"string\") {\n            if (Array.isArray(state[2])) {\n                var language = state[2][state[2].length - 1];\n                var mode = this.$modes[language];\n                if (mode)\n                    return mode[method].apply(mode, [state[1]].concat([].slice.call(args, 1)));\n            }\n            state = state[0] || \"start\";\n        }\n            \n        for (var i = 0; i < this.$embeds.length; i++) {\n            if (!this.$modes[this.$embeds[i]]) continue;\n\n            var split = state.split(this.$embeds[i]);\n            if (!split[0] && split[1]) {\n                args[0] = split[1];\n                var mode = this.$modes[this.$embeds[i]];\n                return mode[method].apply(mode, args);\n            }\n        }\n        var ret = defaultHandler.apply(this, args);\n        return defaultHandler ? ret : undefined;\n    };\n\n    this.transformAction = function(state, action, editor, session, param) {\n        if (this.$behaviour) {\n            var behaviours = this.$behaviour.getBehaviours();\n            for (var key in behaviours) {\n                if (behaviours[key][action]) {\n                    var ret = behaviours[key][action].apply(this, arguments);\n                    if (ret) {\n                        return ret;\n                    }\n                }\n            }\n        }\n    };\n    \n    this.getKeywords = function(append) {\n        // this is for autocompletion to pick up regexp'ed keywords\n        if (!this.completionKeywords) {\n            var rules = this.$tokenizer.rules;\n            var completionKeywords = [];\n            for (var rule in rules) {\n                var ruleItr = rules[rule];\n                for (var r = 0, l = ruleItr.length; r < l; r++) {\n                    if (typeof ruleItr[r].token === \"string\") {\n                        if (/keyword|support|storage/.test(ruleItr[r].token))\n                            completionKeywords.push(ruleItr[r].regex);\n                    }\n                    else if (typeof ruleItr[r].token === \"object\") {\n                        for (var a = 0, aLength = ruleItr[r].token.length; a < aLength; a++) {    \n                            if (/keyword|support|storage/.test(ruleItr[r].token[a])) {\n                                // drop surrounding parens\n                                var rule = ruleItr[r].regex.match(/\\(.+?\\)/g)[a];\n                                completionKeywords.push(rule.substr(1, rule.length - 2));\n                            }\n                        }\n                    }\n                }\n            }\n            this.completionKeywords = completionKeywords;\n        }\n        // this is for highlighting embed rules, like HAML/Ruby or Obj-C/C\n        if (!append)\n            return this.$keywordList;\n        return completionKeywords.concat(this.$keywordList || []);\n    };\n    \n    this.$createKeywordList = function() {\n        if (!this.$highlightRules)\n            this.getTokenizer();\n        return this.$keywordList = this.$highlightRules.$keywordList || [];\n    };\n\n    this.getCompletions = function(state, session, pos, prefix) {\n        var keywords = this.$keywordList || this.$createKeywordList();\n        return keywords.map(function(word) {\n            return {\n                name: word,\n                value: word,\n                score: 0,\n                meta: \"keyword\"\n            };\n        });\n    };\n\n    this.$id = \"ace/mode/text\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","\"use strict\";\n\nvar lang = require(\"../lib/lang\");\n\nvar TextHighlightRules = function() {\n\n    // regexp must not have capturing parentheses\n    // regexps are ordered -> the first match is used\n\n    this.$rules = {\n        \"start\" : [{\n            token : \"empty_line\",\n            regex : '^$'\n        }, {\n            defaultToken : \"text\"\n        }]\n    };\n};\n\n(function() {\n\n    this.addRules = function(rules, prefix) {\n        if (!prefix) {\n            for (var key in rules)\n                this.$rules[key] = rules[key];\n            return;\n        }\n        for (var key in rules) {\n            var state = rules[key];\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                if (rule.next || rule.onMatch) {\n                    if (typeof rule.next == \"string\") {\n                        if (rule.next.indexOf(prefix) !== 0)\n                            rule.next = prefix + rule.next;\n                    }\n                    if (rule.nextState && rule.nextState.indexOf(prefix) !== 0)\n                        rule.nextState = prefix + rule.nextState;\n                }\n            }\n            this.$rules[prefix + key] = state;\n        }\n    };\n\n    this.getRules = function() {\n        return this.$rules;\n    };\n\n    this.embedRules = function (HighlightRules, prefix, escapeRules, states, append) {\n        var embedRules = typeof HighlightRules == \"function\"\n            ? new HighlightRules().getRules()\n            : HighlightRules;\n        if (states) {\n            for (var i = 0; i < states.length; i++)\n                states[i] = prefix + states[i];\n        } else {\n            states = [];\n            for (var key in embedRules)\n                states.push(prefix + key);\n        }\n\n        this.addRules(embedRules, prefix);\n\n        if (escapeRules) {\n            var addRules = Array.prototype[append ? \"push\" : \"unshift\"];\n            for (var i = 0; i < states.length; i++)\n                addRules.apply(this.$rules[states[i]], lang.deepCopy(escapeRules));\n        }\n\n        if (!this.$embeds)\n            this.$embeds = [];\n        this.$embeds.push(prefix);\n    };\n\n    this.getEmbeds = function() {\n        return this.$embeds;\n    };\n\n    var pushState = function(currentState, stack) {\n        if (currentState != \"start\" || stack.length)\n            stack.unshift(this.nextState, currentState);\n        return this.nextState;\n    };\n    var popState = function(currentState, stack) {\n        // if (stack[0] === currentState)\n        stack.shift();\n        return stack.shift() || \"start\";\n    };\n\n    this.normalizeRules = function() {\n        var id = 0;\n        var rules = this.$rules;\n        function processState(key) {\n            var state = rules[key];\n            state.processed = true;\n            for (var i = 0; i < state.length; i++) {\n                var rule = state[i];\n                var toInsert = null;\n                if (Array.isArray(rule)) {\n                    toInsert = rule;\n                    rule = {};\n                }\n                if (!rule.regex && rule.start) {\n                    rule.regex = rule.start;\n                    if (!rule.next)\n                        rule.next = [];\n                    rule.next.push({\n                        defaultToken: rule.token\n                    }, {\n                        token: rule.token + \".end\",\n                        regex: rule.end || rule.start,\n                        next: \"pop\"\n                    });\n                    rule.token = rule.token + \".start\";\n                    rule.push = true;\n                }\n                var next = rule.next || rule.push;\n                if (next && Array.isArray(next)) {\n                    var stateName = rule.stateName;\n                    if (!stateName)  {\n                        stateName = rule.token;\n                        if (typeof stateName != \"string\")\n                            stateName = stateName[0] || \"\";\n                        if (rules[stateName])\n                            stateName += id++;\n                    }\n                    rules[stateName] = next;\n                    rule.next = stateName;\n                    processState(stateName);\n                } else if (next == \"pop\") {\n                    rule.next = popState;\n                }\n\n                if (rule.push) {\n                    rule.nextState = rule.next || rule.push;\n                    rule.next = pushState;\n                    delete rule.push;\n                }\n\n                if (rule.rules) {\n                    for (var r in rule.rules) {\n                        if (rules[r]) {\n                            if (rules[r].push)\n                                rules[r].push.apply(rules[r], rule.rules[r]);\n                        } else {\n                            rules[r] = rule.rules[r];\n                        }\n                    }\n                }\n                var includeName = typeof rule == \"string\" ? rule : rule.include;\n                if (includeName) {\n                    if (Array.isArray(includeName))\n                        toInsert = includeName.map(function(x) { return rules[x]; });\n                    else\n                        toInsert = rules[includeName];\n                }\n\n                if (toInsert) {\n                    var args = [i, 1].concat(toInsert);\n                    if (rule.noEscape)\n                        args = args.filter(function(x) {return !x.next;});\n                    state.splice.apply(state, args);\n                    // skip included rules since they are already processed\n                    //i += args.length - 3;\n                    i--;\n                }\n                \n                if (rule.keywordMap) {\n                    rule.token = this.createKeywordMapper(\n                        rule.keywordMap, rule.defaultToken || \"text\", rule.caseInsensitive\n                    );\n                    delete rule.defaultToken;\n                }\n            }\n        }\n        Object.keys(rules).forEach(processState, this);\n    };\n\n    this.createKeywordMapper = function(map, defaultToken, ignoreCase, splitChar) {\n        var keywords = Object.create(null);\n        this.$keywordList = [];\n        Object.keys(map).forEach(function(className) {\n            var a = map[className];\n            var list = a.split(splitChar || \"|\");\n            for (var i = list.length; i--; ) {\n                var word = list[i];\n                this.$keywordList.push(word);\n                if (ignoreCase)\n                    word = word.toLowerCase(); \n                keywords[word] = className;\n            }\n        }, this);\n        map = null;\n        return ignoreCase\n            ? function(value) {return keywords[value.toLowerCase()] || defaultToken; }\n            : function(value) {return keywords[value] || defaultToken; };\n    };\n\n    this.getKeywords = function() {\n        return this.$keywords;\n    };\n\n}).call(TextHighlightRules.prototype);\n\nexports.TextHighlightRules = TextHighlightRules;\n","/*\n  THIS FILE WAS AUTOGENERATED BY mode.tmpl.js\n*/\n\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar tsMode = require(\"./typescript\").Mode;\n\nvar Mode = function() {\n    tsMode.call(this);\n    this.$highlightRuleConfig = {jsx: true};\n};\noop.inherits(Mode, tsMode);\n\n(function() {\n    this.$id = \"ace/mode/tsx\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","/*\n  THIS FILE WAS AUTOGENERATED BY mode.tmpl.js\n*/\n\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar jsMode = require(\"./javascript\").Mode;\nvar TypeScriptHighlightRules = require(\"./typescript_highlight_rules\").TypeScriptHighlightRules;\nvar CstyleBehaviour = require(\"./behaviour/cstyle\").CstyleBehaviour;\nvar CStyleFoldMode = require(\"./folding/cstyle\").FoldMode;\nvar MatchingBraceOutdent = require(\"./matching_brace_outdent\").MatchingBraceOutdent;\n\nvar Mode = function() {\n    this.HighlightRules = TypeScriptHighlightRules;\n    \n    this.$outdent = new MatchingBraceOutdent();\n    this.$behaviour = new CstyleBehaviour();\n    this.foldingRules = new CStyleFoldMode();\n};\noop.inherits(Mode, jsMode);\n\n(function() {\n    this.createWorker = function(session) {\n        return null;\n    };\n    this.$id = \"ace/mode/typescript\";\n}).call(Mode.prototype);\n\nexports.Mode = Mode;\n","/*\n  THIS FILE WAS AUTOGENERATED BY mode_highlight_rules.tmpl.js (UUID: 21e323af-f665-4161-96e7-5087d262557e) */\n\n\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar JavaScriptHighlightRules = require(\"./javascript_highlight_rules\").JavaScriptHighlightRules;\n\nvar TypeScriptHighlightRules = function (options) {\n\n    var tsRules = [\n        // Match stuff like: function name: return type)\n        {\n            token: [\"storage.type\", \"text\", \"entity.name.function.ts\"],\n            regex: \"(function)(\\\\s+)([a-zA-Z0-9\\$_\\u00a1-\\uffff][a-zA-Z0-9\\d\\$_\\u00a1-\\uffff]*)\"\n        },\n        {\n            token: \"keyword\",\n            regex: \"(?:\\\\b(constructor|declare|interface|as|AS|public|private|extends|export|super|readonly|module|namespace|abstract|implements)\\\\b)\"\n        },\n        {\n            token: [\"keyword\", \"storage.type.variable.ts\"],\n            regex: \"(class|type)(\\\\s+[a-zA-Z0-9_?.$][\\\\w?.$]*)\"\n         },\n        {\n            token: \"keyword\",\n            regex: \"\\\\b(?:super|export|import|keyof|infer)\\\\b\"\n        }, \n        {\n            token: [\"storage.type.variable.ts\"],\n            regex: \"(?:\\\\b(this\\\\.|string\\\\b|bool\\\\b|boolean\\\\b|number\\\\b|true\\\\b|false\\\\b|undefined\\\\b|any\\\\b|null\\\\b|(?:unique )?symbol\\\\b|object\\\\b|never\\\\b|enum\\\\b))\"\n        }\n    ];\n\n    var JSRules = new JavaScriptHighlightRules({jsx: (options && options.jsx) == true}).getRules();\n    \n    JSRules.no_regex = tsRules.concat(JSRules.no_regex);\n    this.$rules = JSRules;\n};\n\noop.inherits(TypeScriptHighlightRules, JavaScriptHighlightRules);\n\nexports.TypeScriptHighlightRules = TypeScriptHighlightRules;\n","\"use strict\";\n\nvar oop = require(\"../lib/oop\");\nvar TextHighlightRules = require(\"./text_highlight_rules\").TextHighlightRules;\n\nvar XmlHighlightRules = function(normalize) {\n    // http://www.w3.org/TR/REC-xml/#NT-NameChar\n    // NameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n    // NameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n    var tagRegex = \"[_:a-zA-Z\\xc0-\\uffff][-_:.a-zA-Z0-9\\xc0-\\uffff]*\";\n\n    this.$rules = {\n        start : [\n            {token : \"string.cdata.xml\", regex : \"<\\\\!\\\\[CDATA\\\\[\", next : \"cdata\"},\n            {\n                token : [\"punctuation.instruction.xml\", \"keyword.instruction.xml\"],\n                regex : \"(<\\\\?)(\" + tagRegex + \")\", next : \"processing_instruction\"\n            },\n            {token : \"comment.start.xml\", regex : \"<\\\\!--\", next : \"comment\"},\n            {\n                token : [\"xml-pe.doctype.xml\", \"xml-pe.doctype.xml\"],\n                regex : \"(<\\\\!)(DOCTYPE)(?=[\\\\s])\", next : \"doctype\", caseInsensitive: true\n            },\n            {include : \"tag\"},\n            {token : \"text.end-tag-open.xml\", regex: \"</\"},\n            {token : \"text.tag-open.xml\", regex: \"<\"},\n            {include : \"reference\"},\n            {defaultToken : \"text.xml\"}\n        ],\n\n        processing_instruction : [{\n            token : \"entity.other.attribute-name.decl-attribute-name.xml\",\n            regex : tagRegex\n        }, {\n            token : \"keyword.operator.decl-attribute-equals.xml\",\n            regex : \"=\"\n        }, {\n            include: \"whitespace\"\n        }, {\n            include: \"string\"\n        }, {\n            token : \"punctuation.xml-decl.xml\",\n            regex : \"\\\\?>\",\n            next : \"start\"\n        }],\n\n        doctype : [\n            {include : \"whitespace\"},\n            {include : \"string\"},\n            {token : \"xml-pe.doctype.xml\", regex : \">\", next : \"start\"},\n            {token : \"xml-pe.xml\", regex : \"[-_a-zA-Z0-9:]+\"},\n            {token : \"punctuation.int-subset\", regex : \"\\\\[\", push : \"int_subset\"}\n        ],\n\n        int_subset : [{\n            token : \"text.xml\",\n            regex : \"\\\\s+\"\n        }, {\n            token: \"punctuation.int-subset.xml\",\n            regex: \"]\",\n            next: \"pop\"\n        }, {\n            token : [\"punctuation.markup-decl.xml\", \"keyword.markup-decl.xml\"],\n            regex : \"(<\\\\!)(\" + tagRegex + \")\",\n            push : [{\n                token : \"text\",\n                regex : \"\\\\s+\"\n            },\n            {\n                token : \"punctuation.markup-decl.xml\",\n                regex : \">\",\n                next : \"pop\"\n            },\n            {include : \"string\"}]\n        }],\n\n        cdata : [\n            {token : \"string.cdata.xml\", regex : \"\\\\]\\\\]>\", next : \"start\"},\n            {token : \"text.xml\", regex : \"\\\\s+\"},\n            {token : \"text.xml\", regex : \"(?:[^\\\\]]|\\\\](?!\\\\]>))+\"}\n        ],\n\n        comment : [\n            {token : \"comment.end.xml\", regex : \"-->\", next : \"start\"},\n            {defaultToken : \"comment.xml\"}\n        ],\n\n        reference : [{\n            token : \"constant.language.escape.reference.xml\",\n            regex : \"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"\n        }],\n\n        attr_reference : [{\n            token : \"constant.language.escape.reference.attribute-value.xml\",\n            regex : \"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\\\.-]+;)\"\n        }],\n\n        tag : [{\n            token : [\"meta.tag.punctuation.tag-open.xml\", \"meta.tag.punctuation.end-tag-open.xml\", \"meta.tag.tag-name.xml\"],\n            regex : \"(?:(<)|(</))((?:\" + tagRegex + \":)?\" + tagRegex + \")\",\n            next: [\n                {include : \"attributes\"},\n                {token : \"meta.tag.punctuation.tag-close.xml\", regex : \"/?>\", next : \"start\"}\n            ]\n        }],\n\n        tag_whitespace : [\n            {token : \"text.tag-whitespace.xml\", regex : \"\\\\s+\"}\n        ],\n        // for doctype and processing instructions\n        whitespace : [\n            {token : \"text.whitespace.xml\", regex : \"\\\\s+\"}\n        ],\n\n        // for doctype and processing instructions\n        string: [{\n            token : \"string.xml\",\n            regex : \"'\",\n            push : [\n                {token : \"string.xml\", regex: \"'\", next: \"pop\"},\n                {defaultToken : \"string.xml\"}\n            ]\n        }, {\n            token : \"string.xml\",\n            regex : '\"',\n            push : [\n                {token : \"string.xml\", regex: '\"', next: \"pop\"},\n                {defaultToken : \"string.xml\"}\n            ]\n        }],\n\n        attributes: [{\n            token : \"entity.other.attribute-name.xml\",\n            regex : tagRegex\n        }, {\n            token : \"keyword.operator.attribute-equals.xml\",\n            regex : \"=\"\n        }, {\n            include: \"tag_whitespace\"\n        }, {\n            include: \"attribute_value\"\n        }],\n\n        attribute_value: [{\n            token : \"string.attribute-value.xml\",\n            regex : \"'\",\n            push : [\n                {token : \"string.attribute-value.xml\", regex: \"'\", next: \"pop\"},\n                {include : \"attr_reference\"},\n                {defaultToken : \"string.attribute-value.xml\"}\n            ]\n        }, {\n            token : \"string.attribute-value.xml\",\n            regex : '\"',\n            push : [\n                {token : \"string.attribute-value.xml\", regex: '\"', next: \"pop\"},\n                {include : \"attr_reference\"},\n                {defaultToken : \"string.attribute-value.xml\"}\n            ]\n        }]\n    };\n\n    if (this.constructor === XmlHighlightRules)\n        this.normalizeRules();\n};\n\n\n(function() {\n\n    this.embedTagRules = function(HighlightRules, prefix, tag){\n        this.$rules.tag.unshift({\n            token : [\"meta.tag.punctuation.tag-open.xml\", \"meta.tag.\" + tag + \".tag-name.xml\"],\n            regex : \"(<)(\" + tag + \"(?=\\\\s|>|$))\",\n            next: [\n                {include : \"attributes\"},\n                {token : \"meta.tag.punctuation.tag-close.xml\", regex : \"/?>\", next : prefix + \"start\"}\n            ]\n        });\n\n        this.$rules[tag + \"-end\"] = [\n            {include : \"attributes\"},\n            {token : \"meta.tag.punctuation.tag-close.xml\", regex : \"/?>\",  next: \"start\",\n                onMatch : function(value, currentState, stack) {\n                    stack.splice(0);\n                    return this.token;\n            }}\n        ];\n\n        this.embedRules(HighlightRules, prefix, [{\n            token: [\"meta.tag.punctuation.end-tag-open.xml\", \"meta.tag.\" + tag + \".tag-name.xml\"],\n            regex : \"(</)(\" + tag + \"(?=\\\\s|>|$))\",\n            next: tag + \"-end\"\n        }, {\n            token: \"string.cdata.xml\",\n            regex : \"<\\\\!\\\\[CDATA\\\\[\"\n        }, {\n            token: \"string.cdata.xml\",\n            regex : \"\\\\]\\\\]>\"\n        }]);\n    };\n\n}).call(TextHighlightRules.prototype);\n\noop.inherits(XmlHighlightRules, TextHighlightRules);\n\nexports.XmlHighlightRules = XmlHighlightRules;\n","\"use strict\";\nvar dom = require(\"../lib/dom\");\nvar oop = require(\"../lib/oop\");\nvar event = require(\"../lib/event\");\nvar Tooltip = require(\"../tooltip\").Tooltip;\n\nfunction GutterHandler(mouseHandler) {\n    var editor = mouseHandler.editor;\n    var gutter = editor.renderer.$gutterLayer;\n    var tooltip = new GutterTooltip(editor.container);\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousedown\", function(e) {\n        if (!editor.isFocused() || e.getButton() != 0)\n            return;\n        var gutterRegion = gutter.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\")\n            return;\n\n        var row = e.getDocumentPosition().row;\n        var selection = editor.session.selection;\n\n        if (e.getShiftKey())\n            selection.selectTo(row, 0);\n        else {\n            if (e.domEvent.detail == 2) {\n                editor.selectAll();\n                return e.preventDefault();\n            }\n            mouseHandler.$clickSelection = editor.selection.getLineRange(row);\n        }\n        mouseHandler.setState(\"selectByLines\");\n        mouseHandler.captureMouse(e);\n        return e.preventDefault();\n    });\n\n\n    var tooltipTimeout, mouseEvent, tooltipAnnotation;\n\n    function showTooltip() {\n        var row = mouseEvent.getDocumentPosition().row;\n        var annotation = gutter.$annotations[row];\n        if (!annotation)\n            return hideTooltip();\n\n        var maxRow = editor.session.getLength();\n        if (row == maxRow) {\n            var screenRow = editor.renderer.pixelToScreenCoordinates(0, mouseEvent.y).row;\n            var pos = mouseEvent.$pos;\n            if (screenRow > editor.session.documentToScreenRow(pos.row, pos.column))\n                return hideTooltip();\n        }\n\n        if (tooltipAnnotation == annotation)\n            return;\n        tooltipAnnotation = annotation.text.join(\"<br/>\");\n\n        tooltip.setHtml(tooltipAnnotation);\n\n        var annotationClassName = annotation.className;\n        if (annotationClassName) {\n            tooltip.setClassName(annotationClassName.trim());\n        }\n\n        tooltip.show();\n        editor._signal(\"showGutterTooltip\", tooltip);\n        editor.on(\"mousewheel\", hideTooltip);\n\n        if (mouseHandler.$tooltipFollowsMouse) {\n            moveTooltip(mouseEvent);\n        } else {\n            var gutterElement = mouseEvent.domEvent.target;\n            var rect = gutterElement.getBoundingClientRect();\n            var style = tooltip.getElement().style;\n            style.left = rect.right + \"px\";\n            style.top = rect.bottom + \"px\";\n        }\n    }\n\n    function hideTooltip() {\n        if (tooltipTimeout)\n            tooltipTimeout = clearTimeout(tooltipTimeout);\n        if (tooltipAnnotation) {\n            tooltip.hide();\n            tooltipAnnotation = null;\n            editor._signal(\"hideGutterTooltip\", tooltip);\n            editor.off(\"mousewheel\", hideTooltip);\n        }\n    }\n\n    function moveTooltip(e) {\n        tooltip.setPosition(e.x, e.y);\n    }\n\n    mouseHandler.editor.setDefaultHandler(\"guttermousemove\", function(e) {\n        var target = e.domEvent.target || e.domEvent.srcElement;\n        if (dom.hasCssClass(target, \"ace_fold-widget\"))\n            return hideTooltip();\n\n        if (tooltipAnnotation && mouseHandler.$tooltipFollowsMouse)\n            moveTooltip(e);\n\n        mouseEvent = e;\n        if (tooltipTimeout)\n            return;\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            if (mouseEvent && !mouseHandler.isMousePressed)\n                showTooltip();\n            else\n                hideTooltip();\n        }, 50);\n    });\n\n    event.addListener(editor.renderer.$gutter, \"mouseout\", function(e) {\n        mouseEvent = null;\n        if (!tooltipAnnotation || tooltipTimeout)\n            return;\n\n        tooltipTimeout = setTimeout(function() {\n            tooltipTimeout = null;\n            hideTooltip();\n        }, 50);\n    }, editor);\n    \n    editor.on(\"changeSession\", hideTooltip);\n}\n\nfunction GutterTooltip(parentNode) {\n    Tooltip.call(this, parentNode);\n}\n\noop.inherits(GutterTooltip, Tooltip);\n\n(function(){\n    this.setPosition = function(x, y) {\n        var windowWidth = window.innerWidth || document.documentElement.clientWidth;\n        var windowHeight = window.innerHeight || document.documentElement.clientHeight;\n        var width = this.getWidth();\n        var height = this.getHeight();\n        x += 15;\n        y += 15;\n        if (x + width > windowWidth) {\n            x -= (x + width) - windowWidth;\n        }\n        if (y + height > windowHeight) {\n            y -= 20 + height;\n        }\n        Tooltip.prototype.setPosition.call(this, x, y);\n    };\n\n}).call(GutterTooltip.prototype);\n\n\n\nexports.GutterHandler = GutterHandler;\n","\"use strict\";\n\nvar useragent = require(\"../lib/useragent\");\n\nvar DRAG_OFFSET = 0; // pixels\nvar SCROLL_COOLDOWN_T = 550; // milliseconds\n\nfunction DefaultHandlers(mouseHandler) {\n    mouseHandler.$clickSelection = null;\n\n    var editor = mouseHandler.editor;\n    editor.setDefaultHandler(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n    editor.setDefaultHandler(\"dblclick\", this.onDoubleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"tripleclick\", this.onTripleClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"quadclick\", this.onQuadClick.bind(mouseHandler));\n    editor.setDefaultHandler(\"mousewheel\", this.onMouseWheel.bind(mouseHandler));\n\n    var exports = [\"select\", \"startSelect\", \"selectEnd\", \"selectAllEnd\", \"selectByWordsEnd\",\n        \"selectByLinesEnd\", \"dragWait\", \"dragWaitEnd\", \"focusWait\"];\n\n    exports.forEach(function(x) {\n        mouseHandler[x] = this[x];\n    }, this);\n\n    mouseHandler.selectByLines = this.extendSelectionBy.bind(mouseHandler, \"getLineRange\");\n    mouseHandler.selectByWords = this.extendSelectionBy.bind(mouseHandler, \"getWordRange\");\n}\n\n(function() {\n\n    this.onMouseDown = function(ev) {\n        var inSelection = ev.inSelection();\n        var pos = ev.getDocumentPosition();\n        this.mousedownEvent = ev;\n        var editor = this.editor;\n\n        var button = ev.getButton();\n        if (button !== 0) {\n            var selectionRange = editor.getSelectionRange();\n            var selectionEmpty = selectionRange.isEmpty();\n            if (selectionEmpty || button == 1)\n                editor.selection.moveToPosition(pos);\n            // 2: contextmenu, 1: linux paste\n            if (button == 2) {\n                editor.textInput.onContextMenu(ev.domEvent);\n                if (!useragent.isMozilla)\n                    ev.preventDefault();\n            }\n            // stopping event here breaks contextmenu on ff mac\n            // not stoping breaks it on chrome mac\n            return;\n        }\n\n        this.mousedownEvent.time = Date.now();\n        // if this click caused the editor to be focused should not clear the\n        // selection\n        if (inSelection && !editor.isFocused()) {\n            editor.focus();\n            if (this.$focusTimeout && !this.$clickSelection && !editor.inMultiSelectMode) {\n                this.setState(\"focusWait\");\n                this.captureMouse(ev);\n                return;\n            }\n        }\n\n        this.captureMouse(ev);\n        this.startSelect(pos, ev.domEvent._clicks > 1);\n        return ev.preventDefault();\n    };\n\n    this.startSelect = function(pos, waitForClickSelection) {\n        pos = pos || this.editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var editor = this.editor;\n        if (!this.mousedownEvent) return;\n        // allow double/triple click handlers to change selection\n        if (this.mousedownEvent.getShiftKey())\n            editor.selection.selectToPosition(pos);\n        else if (!waitForClickSelection)\n            editor.selection.moveToPosition(pos);\n        if (!waitForClickSelection)\n            this.select();\n        if (editor.renderer.scroller.setCapture) {\n            editor.renderer.scroller.setCapture();\n        }\n        editor.setStyle(\"ace_selecting\");\n        this.setState(\"select\");\n    };\n\n    this.select = function() {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        if (this.$clickSelection) {\n            var cmp = this.$clickSelection.comparePoint(cursor);\n\n            if (cmp == -1) {\n                anchor = this.$clickSelection.end;\n            } else if (cmp == 1) {\n                anchor = this.$clickSelection.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.extendSelectionBy = function(unitName) {\n        var anchor, editor = this.editor;\n        var cursor = editor.renderer.screenToTextCoordinates(this.x, this.y);\n        var range = editor.selection[unitName](cursor.row, cursor.column);\n        if (this.$clickSelection) {\n            var cmpStart = this.$clickSelection.comparePoint(range.start);\n            var cmpEnd = this.$clickSelection.comparePoint(range.end);\n\n            if (cmpStart == -1 && cmpEnd <= 0) {\n                anchor = this.$clickSelection.end;\n                if (range.end.row != cursor.row || range.end.column != cursor.column)\n                    cursor = range.start;\n            } else if (cmpEnd == 1 && cmpStart >= 0) {\n                anchor = this.$clickSelection.start;\n                if (range.start.row != cursor.row || range.start.column != cursor.column)\n                    cursor = range.end;\n            } else if (cmpStart == -1 && cmpEnd == 1) {\n                cursor = range.end;\n                anchor = range.start;\n            } else {\n                var orientedRange = calcRangeOrientation(this.$clickSelection, cursor);\n                cursor = orientedRange.cursor;\n                anchor = orientedRange.anchor;\n            }\n            editor.selection.setSelectionAnchor(anchor.row, anchor.column);\n        }\n        editor.selection.selectToPosition(cursor);\n        editor.renderer.scrollCursorIntoView();\n    };\n\n    this.selectEnd =\n    this.selectAllEnd =\n    this.selectByWordsEnd =\n    this.selectByLinesEnd = function() {\n        this.$clickSelection = null;\n        this.editor.unsetStyle(\"ace_selecting\");\n        if (this.editor.renderer.scroller.releaseCapture) {\n            this.editor.renderer.scroller.releaseCapture();\n        }\n    };\n\n    this.focusWait = function() {\n        var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n        var time = Date.now();\n\n        if (distance > DRAG_OFFSET || time - this.mousedownEvent.time > this.$focusTimeout)\n            this.startSelect(this.mousedownEvent.getDocumentPosition());\n    };\n\n    this.onDoubleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n        var session = editor.session;\n\n        var range = session.getBracketRange(pos);\n        if (range) {\n            if (range.isEmpty()) {\n                range.start.column--;\n                range.end.column++;\n            }\n            this.setState(\"select\");\n        } else {\n            range = editor.selection.getWordRange(pos.row, pos.column);\n            this.setState(\"selectByWords\");\n        }\n        this.$clickSelection = range;\n        this.select();\n    };\n\n    this.onTripleClick = function(ev) {\n        var pos = ev.getDocumentPosition();\n        var editor = this.editor;\n\n        this.setState(\"selectByLines\");\n        var range = editor.getSelectionRange();\n        if (range.isMultiLine() && range.contains(pos.row, pos.column)) {\n            this.$clickSelection = editor.selection.getLineRange(range.start.row);\n            this.$clickSelection.end = editor.selection.getLineRange(range.end.row).end;\n        } else {\n            this.$clickSelection = editor.selection.getLineRange(pos.row);\n        }\n        this.select();\n    };\n\n    this.onQuadClick = function(ev) {\n        var editor = this.editor;\n\n        editor.selectAll();\n        this.$clickSelection = editor.getSelectionRange();\n        this.setState(\"selectAll\");\n    };\n\n    this.onMouseWheel = function(ev) {\n        if (ev.getAccelKey())\n            return;\n\n        // shift wheel to horizontal scroll\n        if (ev.getShiftKey() && ev.wheelY && !ev.wheelX) {\n            ev.wheelX = ev.wheelY;\n            ev.wheelY = 0;\n        }\n        \n        var editor = this.editor;\n        \n        if (!this.$lastScroll)\n            this.$lastScroll = { t: 0, vx: 0, vy: 0, allowed: 0 };\n        \n        var prevScroll = this.$lastScroll;\n        var t = ev.domEvent.timeStamp;\n        var dt = t - prevScroll.t;\n        var vx = dt ? ev.wheelX / dt : prevScroll.vx;\n        var vy = dt ? ev.wheelY / dt : prevScroll.vy;\n        \n        // touchbar keeps sending scroll events after touchend, if we do not stop these events,\n        // users can't scrol editor without scrolling the parent node\n        if (dt < SCROLL_COOLDOWN_T) {\n            vx = (vx + prevScroll.vx) / 2;\n            vy = (vy + prevScroll.vy) / 2;\n        }\n        \n        var direction = Math.abs(vx / vy);\n        \n        var canScroll = false;\n        if (direction >= 1 && editor.renderer.isScrollableBy(ev.wheelX * ev.speed, 0))\n            canScroll = true;\n        if (direction <= 1 && editor.renderer.isScrollableBy(0, ev.wheelY * ev.speed))\n            canScroll = true;\n            \n        if (canScroll) {\n            prevScroll.allowed = t;\n        } else if (t - prevScroll.allowed < SCROLL_COOLDOWN_T) {\n            var isSlower = Math.abs(vx) <= 1.5 * Math.abs(prevScroll.vx)\n                && Math.abs(vy) <= 1.5 * Math.abs(prevScroll.vy);\n            if (isSlower) {\n                canScroll = true;\n                prevScroll.allowed = t;\n            }\n            else {\n                prevScroll.allowed = 0;\n            }\n        }\n        \n        prevScroll.t = t;\n        prevScroll.vx = vx;\n        prevScroll.vy = vy;\n\n        if (canScroll) {\n            editor.renderer.scrollBy(ev.wheelX * ev.speed, ev.wheelY * ev.speed);\n            return ev.stop();\n        }\n    };\n\n}).call(DefaultHandlers.prototype);\n\nexports.DefaultHandlers = DefaultHandlers;\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nfunction calcRangeOrientation(range, cursor) {\n    if (range.start.row == range.end.row)\n        var cmp = 2 * cursor.column - range.start.column - range.end.column;\n    else if (range.start.row == range.end.row - 1 && !range.start.column && !range.end.column)\n        var cmp = cursor.column - 4;\n    else\n        var cmp = 2 * cursor.row - range.start.row - range.end.row;\n\n    if (cmp < 0)\n        return {cursor: range.start, anchor: range.end};\n    else\n        return {cursor: range.end, anchor: range.start};\n}\n","\"use strict\";\n\nvar dom = require(\"../lib/dom\");\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\n\nvar AUTOSCROLL_DELAY = 200;\nvar SCROLL_CURSOR_DELAY = 200;\nvar SCROLL_CURSOR_HYSTERESIS = 5;\n\nfunction DragdropHandler(mouseHandler) {\n\n    var editor = mouseHandler.editor;\n\n    var dragImage = dom.createElement(\"div\");\n    dragImage.style.cssText = \"top:-100px;position:absolute;z-index:2147483647;opacity:0.5\";\n    dragImage.textContent = \"\\xa0\";\n\n    var exports = [\"dragWait\", \"dragWaitEnd\", \"startDrag\", \"dragReadyEnd\", \"onMouseDrag\"];\n\n    exports.forEach(function(x) {\n        mouseHandler[x] = this[x];\n    }, this);\n    editor.on(\"mousedown\", this.onMouseDown.bind(mouseHandler));\n\n    var mouseTarget = editor.container;\n    var dragSelectionMarker, x, y;\n    var timerId, range;\n    var dragCursor, counter = 0;\n    var dragOperation;\n    var isInternal;\n    var autoScrollStartTime;\n    var cursorMovedTime;\n    var cursorPointOnCaretMoved;\n\n    this.onDragStart = function(e) {\n        // webkit workaround, see this.onMouseDown\n        if (this.cancelDrag || !mouseTarget.draggable) {\n            var self = this;\n            setTimeout(function(){\n                self.startSelect();\n                self.captureMouse(e);\n            }, 0);\n            return e.preventDefault();\n        }\n        range = editor.getSelectionRange();\n\n        var dataTransfer = e.dataTransfer;\n        dataTransfer.effectAllowed = editor.getReadOnly() ? \"copy\" : \"copyMove\";\n        editor.container.appendChild(dragImage);\n\n        dataTransfer.setDragImage && dataTransfer.setDragImage(dragImage, 0, 0);\n        setTimeout(function() {\n            editor.container.removeChild(dragImage);\n        });\n        // clear Opera garbage\n        dataTransfer.clearData();\n        dataTransfer.setData(\"Text\", editor.session.getTextRange());\n\n        isInternal = true;\n        this.setState(\"drag\");\n    };\n\n    this.onDragEnd = function(e) {\n        mouseTarget.draggable = false;\n        isInternal = false;\n        this.setState(null);\n        if (!editor.getReadOnly()) {\n            var dropEffect = e.dataTransfer.dropEffect;\n            if (!dragOperation && dropEffect == \"move\")\n                // text was dragged outside the editor\n                editor.session.remove(editor.getSelectionRange());\n            editor.$resetCursorStyle();\n        }\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n    };\n\n    this.onDragEnter = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        if (!dragSelectionMarker)\n            addDragMarker();\n        counter++;\n        // dataTransfer object does not save dropEffect across events on IE, so we store it in dragOperation\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragOver = function(e) {\n        if (editor.getReadOnly() || !canAccept(e.dataTransfer))\n            return;\n        x = e.clientX;\n        y = e.clientY;\n        // Opera doesn't trigger dragenter event on drag start\n        if (!dragSelectionMarker) {\n            addDragMarker();\n            counter++;\n        }\n        if (onMouseMoveTimer !== null)\n            onMouseMoveTimer = null;\n\n        e.dataTransfer.dropEffect = dragOperation = getDropEffect(e);\n        return event.preventDefault(e);\n    };\n\n    this.onDragLeave = function(e) {\n        counter--;\n        if (counter <= 0 && dragSelectionMarker) {\n            clearDragMarker();\n            dragOperation = null;\n            return event.preventDefault(e);\n        }\n    };\n\n    this.onDrop = function(e) {\n        if (!dragCursor)\n            return;\n        var dataTransfer = e.dataTransfer;\n        if (isInternal) {\n            switch (dragOperation) {\n                case \"move\":\n                    if (range.contains(dragCursor.row, dragCursor.column)) {\n                        // clear selection\n                        range = {\n                            start: dragCursor,\n                            end: dragCursor\n                        };\n                    } else {\n                        // move text\n                        range = editor.moveText(range, dragCursor);\n                    }\n                    break;\n                case \"copy\":\n                    // copy text\n                    range = editor.moveText(range, dragCursor, true);\n                    break;\n            }\n        } else {\n            var dropData = dataTransfer.getData('Text');\n            range = {\n                start: dragCursor,\n                end: editor.session.insert(dragCursor, dropData)\n            };\n            editor.focus();\n            dragOperation = null;\n        }\n        clearDragMarker();\n        return event.preventDefault(e);\n    };\n\n    event.addListener(mouseTarget, \"dragstart\", this.onDragStart.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragend\", this.onDragEnd.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragenter\", this.onDragEnter.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragover\", this.onDragOver.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"dragleave\", this.onDragLeave.bind(mouseHandler), editor);\n    event.addListener(mouseTarget, \"drop\", this.onDrop.bind(mouseHandler), editor);\n\n    function scrollCursorIntoView(cursor, prevCursor) {\n        var now = Date.now();\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        var hMovement = !prevCursor || cursor.column != prevCursor.column;\n        if (!cursorMovedTime || vMovement || hMovement) {\n            editor.moveCursorToPosition(cursor);\n            cursorMovedTime = now;\n            cursorPointOnCaretMoved = {x: x, y: y};\n        } else {\n            var distance = calcDistance(cursorPointOnCaretMoved.x, cursorPointOnCaretMoved.y, x, y);\n            if (distance > SCROLL_CURSOR_HYSTERESIS) {\n                cursorMovedTime = null;\n            } else if (now - cursorMovedTime >= SCROLL_CURSOR_DELAY) {\n                editor.renderer.scrollCursorIntoView();\n                cursorMovedTime = null;\n            }\n        }\n    }\n\n    function autoScroll(cursor, prevCursor) {\n        var now = Date.now();\n        var lineHeight = editor.renderer.layerConfig.lineHeight;\n        var characterWidth = editor.renderer.layerConfig.characterWidth;\n        var editorRect = editor.renderer.scroller.getBoundingClientRect();\n        var offsets = {\n           x: {\n               left: x - editorRect.left,\n               right: editorRect.right - x\n           },\n           y: {\n               top: y - editorRect.top,\n               bottom: editorRect.bottom - y\n           }\n        };\n        var nearestXOffset = Math.min(offsets.x.left, offsets.x.right);\n        var nearestYOffset = Math.min(offsets.y.top, offsets.y.bottom);\n        var scrollCursor = {row: cursor.row, column: cursor.column};\n        if (nearestXOffset / characterWidth <= 2) {\n            scrollCursor.column += (offsets.x.left < offsets.x.right ? -3 : +2);\n        }\n        if (nearestYOffset / lineHeight <= 1) {\n            scrollCursor.row += (offsets.y.top < offsets.y.bottom ? -1 : +1);\n        }\n        var vScroll = cursor.row != scrollCursor.row;\n        var hScroll = cursor.column != scrollCursor.column;\n        var vMovement = !prevCursor || cursor.row != prevCursor.row;\n        if (vScroll || (hScroll && !vMovement)) {\n            if (!autoScrollStartTime)\n                autoScrollStartTime = now;\n            else if (now - autoScrollStartTime >= AUTOSCROLL_DELAY)\n                editor.renderer.scrollCursorIntoView(scrollCursor);\n        } else {\n            autoScrollStartTime = null;\n        }\n    }\n\n    function onDragInterval() {\n        var prevCursor = dragCursor;\n        dragCursor = editor.renderer.screenToTextCoordinates(x, y);\n        scrollCursorIntoView(dragCursor, prevCursor);\n        autoScroll(dragCursor, prevCursor);\n    }\n\n    function addDragMarker() {\n        range = editor.selection.toOrientedRange();\n        dragSelectionMarker = editor.session.addMarker(range, \"ace_selection\", editor.getSelectionStyle());\n        editor.clearSelection();\n        if (editor.isFocused())\n            editor.renderer.$cursorLayer.setBlinking(false);\n        clearInterval(timerId);\n        onDragInterval();\n        timerId = setInterval(onDragInterval, 20);\n        counter = 0;\n        event.addListener(document, \"mousemove\", onMouseMove);\n    }\n\n    function clearDragMarker() {\n        clearInterval(timerId);\n        editor.session.removeMarker(dragSelectionMarker);\n        dragSelectionMarker = null;\n        editor.selection.fromOrientedRange(range);\n        if (editor.isFocused() && !isInternal)\n            editor.$resetCursorStyle();\n        range = null;\n        dragCursor = null;\n        counter = 0;\n        autoScrollStartTime = null;\n        cursorMovedTime = null;\n        event.removeListener(document, \"mousemove\", onMouseMove);\n    }\n\n    // sometimes other code on the page can stop dragleave event leaving editor stuck in the drag state\n    var onMouseMoveTimer = null;\n    function onMouseMove() {\n        if (onMouseMoveTimer == null) {\n            onMouseMoveTimer = setTimeout(function() {\n                if (onMouseMoveTimer != null && dragSelectionMarker)\n                    clearDragMarker();\n            }, 20);\n        }\n    }\n\n    function canAccept(dataTransfer) {\n        var types = dataTransfer.types;\n        return !types || Array.prototype.some.call(types, function(type) {\n            return type == 'text/plain' || type == 'Text';\n        });\n    }\n\n    function getDropEffect(e) {\n        var copyAllowed = ['copy', 'copymove', 'all', 'uninitialized'];\n        var moveAllowed = ['move', 'copymove', 'linkmove', 'all', 'uninitialized'];\n\n        var copyModifierState = useragent.isMac ? e.altKey : e.ctrlKey;\n\n        // IE throws error while dragging from another app\n        var effectAllowed = \"uninitialized\";\n        try {\n            effectAllowed = e.dataTransfer.effectAllowed.toLowerCase();\n        } catch (e) {}\n        var dropEffect = \"none\";\n\n        if (copyModifierState && copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n        else if (moveAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"move\";\n        else if (copyAllowed.indexOf(effectAllowed) >= 0)\n            dropEffect = \"copy\";\n\n        return dropEffect;\n    }\n}\n\n(function() {\n\n    this.dragWait = function() {\n        var interval = Date.now() - this.mousedownEvent.time;\n        if (interval > this.editor.getDragDelay())\n            this.startDrag();\n    };\n\n    this.dragWaitEnd = function() {\n        var target = this.editor.container;\n        target.draggable = false;\n        this.startSelect(this.mousedownEvent.getDocumentPosition());\n        this.selectEnd();\n    };\n\n    this.dragReadyEnd = function(e) {\n        this.editor.$resetCursorStyle();\n        this.editor.unsetStyle(\"ace_dragging\");\n        this.editor.renderer.setCursorStyle(\"\");\n        this.dragWaitEnd();\n    };\n\n    this.startDrag = function(){\n        this.cancelDrag = false;\n        var editor = this.editor;\n        var target = editor.container;\n        target.draggable = true;\n        editor.renderer.$cursorLayer.setBlinking(false);\n        editor.setStyle(\"ace_dragging\");\n        var cursorStyle = useragent.isWin ? \"default\" : \"move\";\n        editor.renderer.setCursorStyle(cursorStyle);\n        this.setState(\"dragReady\");\n    };\n\n    this.onMouseDrag = function(e) {\n        var target = this.editor.container;\n        if (useragent.isIE && this.state == \"dragReady\") {\n            // IE does not handle [draggable] attribute set after mousedown\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 3)\n                target.dragDrop();\n        }\n        if (this.state === \"dragWait\") {\n            var distance = calcDistance(this.mousedownEvent.x, this.mousedownEvent.y, this.x, this.y);\n            if (distance > 0) {\n                target.draggable = false;\n                this.startSelect(this.mousedownEvent.getDocumentPosition());\n            }\n        }\n    };\n\n    this.onMouseDown = function(e) {\n        if (!this.$dragEnabled)\n            return;\n        this.mousedownEvent = e;\n        var editor = this.editor;\n\n        var inSelection = e.inSelection();\n        var button = e.getButton();\n        var clickCount = e.domEvent.detail || 1;\n        if (clickCount === 1 && button === 0 && inSelection) {\n            if (e.editor.inMultiSelectMode && (e.getAccelKey() || e.getShiftKey()))\n                return;\n            this.mousedownEvent.time = Date.now();\n            var eventTarget = e.domEvent.target || e.domEvent.srcElement;\n            if (\"unselectable\" in eventTarget)\n                eventTarget.unselectable = \"on\";\n            if (editor.getDragDelay()) {\n                // https://code.google.com/p/chromium/issues/detail?id=286700\n                if (useragent.isWebKit) {\n                    this.cancelDrag = true;\n                    var mouseTarget = editor.container;\n                    mouseTarget.draggable = true;\n                }\n                this.setState(\"dragWait\");\n            } else {\n                this.startDrag();\n            }\n            this.captureMouse(e, this.onMouseDrag.bind(this));\n            // TODO: a better way to prevent default handler without preventing browser default action\n            e.defaultPrevented = true;\n        }\n    };\n\n}).call(DragdropHandler.prototype);\n\n\nfunction calcDistance(ax, ay, bx, by) {\n    return Math.sqrt(Math.pow(bx - ax, 2) + Math.pow(by - ay, 2));\n}\n\nexports.DragdropHandler = DragdropHandler;\n","\"use strict\";\nvar dom = require(\"../lib/dom\");\n\nfunction FoldHandler(editor) {\n\n    editor.on(\"click\", function(e) {\n        var position = e.getDocumentPosition();\n        var session = editor.session;\n\n        // If the user clicked on a fold, then expand it.\n        var fold = session.getFoldAt(position.row, position.column, 1);\n        if (fold) {\n            if (e.getAccelKey())\n                session.removeFold(fold);\n            else\n                session.expandFold(fold);\n\n            e.stop();\n        }\n        \n        var target = e.domEvent && e.domEvent.target;\n        if (target && dom.hasCssClass(target, \"ace_inline_button\")) {\n            if (dom.hasCssClass(target, \"ace_toggle_wrap\")) {\n                session.setOption(\"wrap\", !session.getUseWrapMode());\n                editor.renderer.scrollCursorIntoView();\n            }\n        }\n    });\n\n    editor.on(\"gutterclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            if (session.foldWidgets && session.foldWidgets[row])\n                editor.session.onFoldWidgetClick(row, e);\n            if (!editor.isFocused())\n                editor.focus();\n            e.stop();\n        }\n    });\n\n    editor.on(\"gutterdblclick\", function(e) {\n        var gutterRegion = editor.renderer.$gutterLayer.getRegion(e);\n\n        if (gutterRegion == \"foldWidgets\") {\n            var row = e.getDocumentPosition().row;\n            var session = editor.session;\n            var data = session.getParentFoldRangeData(row, true);\n            var range = data.range || data.firstRange;\n\n            if (range) {\n                row = range.start.row;\n                var fold = session.getFoldAt(row, session.getLine(row).length, 1);\n\n                if (fold) {\n                    session.removeFold(fold);\n                } else {\n                    session.addFold(\"...\", range);\n                    editor.renderer.scrollCursorIntoView({row: range.start.row, column: 0});\n                }\n            }\n            e.stop();\n        }\n    });\n}\n\nexports.FoldHandler = FoldHandler;\n","\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\n\n/*\n * Custom Ace mouse event\n */\nvar MouseEvent = exports.MouseEvent = function(domEvent, editor) {\n    this.domEvent = domEvent;\n    this.editor = editor;\n    \n    this.x = this.clientX = domEvent.clientX;\n    this.y = this.clientY = domEvent.clientY;\n\n    this.$pos = null;\n    this.$inSelection = null;\n    \n    this.propagationStopped = false;\n    this.defaultPrevented = false;\n};\n\n(function() {  \n    \n    this.stopPropagation = function() {\n        event.stopPropagation(this.domEvent);\n        this.propagationStopped = true;\n    };\n    \n    this.preventDefault = function() {\n        event.preventDefault(this.domEvent);\n        this.defaultPrevented = true;\n    };\n    \n    this.stop = function() {\n        this.stopPropagation();\n        this.preventDefault();\n    };\n\n    /*\n     * Get the document position below the mouse cursor\n     * \n     * @return {Object} 'row' and 'column' of the document position\n     */\n    this.getDocumentPosition = function() {\n        if (this.$pos)\n            return this.$pos;\n        \n        this.$pos = this.editor.renderer.screenToTextCoordinates(this.clientX, this.clientY);\n        return this.$pos;\n    };\n    \n    /*\n     * Check if the mouse cursor is inside of the text selection\n     * \n     * @return {Boolean} whether the mouse cursor is inside of the selection\n     */\n    this.inSelection = function() {\n        if (this.$inSelection !== null)\n            return this.$inSelection;\n            \n        var editor = this.editor;\n        \n\n        var selectionRange = editor.getSelectionRange();\n        if (selectionRange.isEmpty())\n            this.$inSelection = false;\n        else {\n            var pos = this.getDocumentPosition();\n            this.$inSelection = selectionRange.contains(pos.row, pos.column);\n        }\n\n        return this.$inSelection;\n    };\n    \n    /*\n     * Get the clicked mouse button\n     * \n     * @return {Number} 0 for left button, 1 for middle button, 2 for right button\n     */\n    this.getButton = function() {\n        return event.getButton(this.domEvent);\n    };\n    \n    /*\n     * @return {Boolean} whether the shift key was pressed when the event was emitted\n     */\n    this.getShiftKey = function() {\n        return this.domEvent.shiftKey;\n    };\n    \n    this.getAccelKey = useragent.isMac\n        ? function() { return this.domEvent.metaKey; }\n        : function() { return this.domEvent.ctrlKey; };\n    \n}).call(MouseEvent.prototype);\n","\"use strict\";\n\nvar event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\nvar DefaultHandlers = require(\"./default_handlers\").DefaultHandlers;\nvar DefaultGutterHandler = require(\"./default_gutter_handler\").GutterHandler;\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar DragdropHandler = require(\"./dragdrop_handler\").DragdropHandler;\nvar addTouchListeners = require(\"./touch_handler\").addTouchListeners;\nvar config = require(\"../config\");\n\nvar MouseHandler = function(editor) {\n    var _self = this;\n    this.editor = editor;\n\n    new DefaultHandlers(this);\n    new DefaultGutterHandler(this);\n    new DragdropHandler(this);\n\n    var focusEditor = function(e) {\n        // because we have to call event.preventDefault() any window on ie and iframes\n        // on other browsers do not get focus, so we have to call window.focus() here\n        var windowBlurred = !document.hasFocus || !document.hasFocus()\n            || !editor.isFocused() && document.activeElement == (editor.textInput && editor.textInput.getElement());\n        if (windowBlurred)\n            window.focus();\n        editor.focus();\n        // Without this editor is blurred after double click\n        setTimeout(function () {\n            if (!editor.isFocused()) editor.focus();\n        });\n    };\n\n    var mouseTarget = editor.renderer.getMouseEventTarget();\n    event.addListener(mouseTarget, \"click\", this.onMouseEvent.bind(this, \"click\"), editor);\n    event.addListener(mouseTarget, \"mousemove\", this.onMouseMove.bind(this, \"mousemove\"), editor);\n    event.addMultiMouseDownListener([\n        mouseTarget,\n        editor.renderer.scrollBarV && editor.renderer.scrollBarV.inner,\n        editor.renderer.scrollBarH && editor.renderer.scrollBarH.inner,\n        editor.textInput && editor.textInput.getElement()\n    ].filter(Boolean), [400, 300, 250], this, \"onMouseEvent\", editor);\n    event.addMouseWheelListener(editor.container, this.onMouseWheel.bind(this, \"mousewheel\"), editor);\n    addTouchListeners(editor.container, editor);\n\n    var gutterEl = editor.renderer.$gutter;\n    event.addListener(gutterEl, \"mousedown\", this.onMouseEvent.bind(this, \"guttermousedown\"), editor);\n    event.addListener(gutterEl, \"click\", this.onMouseEvent.bind(this, \"gutterclick\"), editor);\n    event.addListener(gutterEl, \"dblclick\", this.onMouseEvent.bind(this, \"gutterdblclick\"), editor);\n    event.addListener(gutterEl, \"mousemove\", this.onMouseEvent.bind(this, \"guttermousemove\"), editor);\n\n    event.addListener(mouseTarget, \"mousedown\", focusEditor, editor);\n    event.addListener(gutterEl, \"mousedown\", focusEditor, editor);\n    if (useragent.isIE && editor.renderer.scrollBarV) {\n        event.addListener(editor.renderer.scrollBarV.element, \"mousedown\", focusEditor, editor);\n        event.addListener(editor.renderer.scrollBarH.element, \"mousedown\", focusEditor, editor);\n    }\n\n    editor.on(\"mousemove\", function(e){\n        if (_self.state || _self.$dragDelay || !_self.$dragEnabled)\n            return;\n\n        var character = editor.renderer.screenToTextCoordinates(e.x, e.y);\n        var range = editor.session.selection.getRange();\n        var renderer = editor.renderer;\n\n        if (!range.isEmpty() && range.insideStart(character.row, character.column)) {\n            renderer.setCursorStyle(\"default\");\n        } else {\n            renderer.setCursorStyle(\"\");\n        }\n    }, editor);\n};\n\n(function() {\n    this.onMouseEvent = function(name, e) {\n        if (!this.editor.session) return;\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseMove = function(name, e) {\n        // optimization, because mousemove doesn't have a default handler.\n        var listeners = this.editor._eventRegistry && this.editor._eventRegistry.mousemove;\n        if (!listeners || !listeners.length)\n            return;\n\n        this.editor._emit(name, new MouseEvent(e, this.editor));\n    };\n\n    this.onMouseWheel = function(name, e) {\n        var mouseEvent = new MouseEvent(e, this.editor);\n        mouseEvent.speed = this.$scrollSpeed * 2;\n        mouseEvent.wheelX = e.wheelX;\n        mouseEvent.wheelY = e.wheelY;\n\n        this.editor._emit(name, mouseEvent);\n    };\n    \n    this.setState = function(state) {\n        this.state = state;\n    };\n\n    this.captureMouse = function(ev, mouseMoveHandler) {\n        this.x = ev.x;\n        this.y = ev.y;\n\n        this.isMousePressed = true;\n\n        // do not move textarea during selection\n        var editor = this.editor;\n        var renderer = this.editor.renderer;\n        renderer.$isMousePressed = true;\n\n        var self = this;\n        var onMouseMove = function(e) {\n            if (!e) return;\n            // if editor is loaded inside iframe, and mouseup event is outside\n            // we won't recieve it, so we cancel on first mousemove without button\n            if (useragent.isWebKit && !e.which && self.releaseMouse)\n                return self.releaseMouse();\n\n            self.x = e.clientX;\n            self.y = e.clientY;\n            mouseMoveHandler && mouseMoveHandler(e);\n            self.mouseEvent = new MouseEvent(e, self.editor);\n            self.$mouseMoved = true;\n        };\n\n        var onCaptureEnd = function(e) {\n            editor.off(\"beforeEndOperation\", onOperationEnd);\n            clearInterval(timerId);\n            if (editor.session) onCaptureInterval();\n            self[self.state + \"End\"] && self[self.state + \"End\"](e);\n            self.state = \"\";\n            self.isMousePressed = renderer.$isMousePressed = false;\n            if (renderer.$keepTextAreaAtCursor)\n                renderer.$moveTextAreaToCursor();\n            self.$onCaptureMouseMove = self.releaseMouse = null;\n            e && self.onMouseEvent(\"mouseup\", e);\n            editor.endOperation();\n        };\n\n        var onCaptureInterval = function() {\n            self[self.state] && self[self.state]();\n            self.$mouseMoved = false;\n        };\n\n        if (useragent.isOldIE && ev.domEvent.type == \"dblclick\") {\n            return setTimeout(function() {onCaptureEnd(ev);});\n        }\n\n        var onOperationEnd = function(e) {\n            if (!self.releaseMouse) return;\n            // some touchpads fire mouseup event after a slight delay, \n            // which can cause problems if user presses a keyboard shortcut quickly\n            if (editor.curOp.command.name && editor.curOp.selectionChanged) {\n                self[self.state + \"End\"] && self[self.state + \"End\"]();\n                self.state = \"\";\n                self.releaseMouse();\n            }\n        };\n\n        editor.on(\"beforeEndOperation\", onOperationEnd);\n        editor.startOperation({command: {name: \"mouse\"}});\n\n        self.$onCaptureMouseMove = onMouseMove;\n        self.releaseMouse = event.capture(this.editor.container, onMouseMove, onCaptureEnd);\n        var timerId = setInterval(onCaptureInterval, 20);\n    };\n    this.releaseMouse = null;\n    this.cancelContextMenu = function() {\n        var stop = function(e) {\n            if (e && e.domEvent && e.domEvent.type != \"contextmenu\")\n                return;\n            this.editor.off(\"nativecontextmenu\", stop);\n            if (e && e.domEvent)\n                event.stopEvent(e.domEvent);\n        }.bind(this);\n        setTimeout(stop, 10);\n        this.editor.on(\"nativecontextmenu\", stop);\n    };\n    this.destroy = function() {\n        if (this.releaseMouse) this.releaseMouse();\n    };\n}).call(MouseHandler.prototype);\n\nconfig.defineOptions(MouseHandler.prototype, \"mouseHandler\", {\n    scrollSpeed: {initialValue: 2},\n    dragDelay: {initialValue: (useragent.isMac ? 150 : 0)},\n    dragEnabled: {initialValue: true},\n    focusTimeout: {initialValue: 0},\n    tooltipFollowsMouse: {initialValue: true}\n});\n\n\nexports.MouseHandler = MouseHandler;\n","var event = require(\"../lib/event\");\nvar useragent = require(\"../lib/useragent\");\n\n// mouse\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\nfunction onMouseDown(e) {\n    var ev = e.domEvent;\n    var alt = ev.altKey;\n    var shift = ev.shiftKey;\n    var ctrl = ev.ctrlKey;\n    var accel = e.getAccelKey();\n    var button = e.getButton();\n    \n    if (ctrl && useragent.isMac)\n        button = ev.button;\n\n    if (e.editor.inMultiSelectMode && button == 2) {\n        e.editor.textInput.onContextMenu(e.domEvent);\n        return;\n    }\n    \n    if (!ctrl && !alt && !accel) {\n        if (button === 0 && e.editor.inMultiSelectMode)\n            e.editor.exitMultiSelectMode();\n        return;\n    }\n    \n    if (button !== 0)\n        return;\n\n    var editor = e.editor;\n    var selection = editor.selection;\n    var isMultiSelect = editor.inMultiSelectMode;\n    var pos = e.getDocumentPosition();\n    var cursor = selection.getCursor();\n    var inSelection = e.inSelection() || (selection.isEmpty() && isSamePoint(pos, cursor));\n\n    var mouseX = e.x, mouseY = e.y;\n    var onMouseSelection = function(e) {\n        mouseX = e.clientX;\n        mouseY = e.clientY;\n    };\n    \n    var session = editor.session;\n    var screenAnchor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n    var screenCursor = screenAnchor;\n    \n    var selectionMode;\n    if (editor.$mouseHandler.$enableJumpToDef) {\n        if (ctrl && alt || accel && alt)\n            selectionMode = shift ? \"block\" : \"add\";\n        else if (alt && editor.$blockSelectEnabled)\n            selectionMode = \"block\";\n    } else {\n        if (accel && !alt) {\n            selectionMode = \"add\";\n            if (!isMultiSelect && shift)\n                return;\n        } else if (alt && editor.$blockSelectEnabled) {\n            selectionMode = \"block\";\n        }\n    }\n    \n    if (selectionMode && useragent.isMac && ev.ctrlKey) {\n        editor.$mouseHandler.cancelContextMenu();\n    }\n\n    if (selectionMode == \"add\") {\n        if (!isMultiSelect && inSelection)\n            return; // dragging\n\n        if (!isMultiSelect) {\n            var range = selection.toOrientedRange();\n            editor.addSelectionMarker(range);\n        }\n\n        var oldRange = selection.rangeList.rangeAtPoint(pos);\n        \n        editor.inVirtualSelectionMode = true;\n        \n        if (shift) {\n            oldRange = null;\n            range = selection.ranges[0] || range;\n            editor.removeSelectionMarker(range);\n        }\n        editor.once(\"mouseup\", function() {\n            var tmpSel = selection.toOrientedRange();\n\n            if (oldRange && tmpSel.isEmpty() && isSamePoint(oldRange.cursor, tmpSel.cursor))\n                selection.substractPoint(tmpSel.cursor);\n            else {\n                if (shift) {\n                    selection.substractPoint(range.cursor);\n                } else if (range) {\n                    editor.removeSelectionMarker(range);\n                    selection.addRange(range);\n                }\n                selection.addRange(tmpSel);\n            }\n            editor.inVirtualSelectionMode = false;\n        });\n\n    } else if (selectionMode == \"block\") {\n        e.stop();\n        editor.inVirtualSelectionMode = true;        \n        var initialRange;\n        var rectSel = [];\n        var blockSelect = function() {\n            var newCursor = editor.renderer.pixelToScreenCoordinates(mouseX, mouseY);\n            var cursor = session.screenToDocumentPosition(newCursor.row, newCursor.column, newCursor.offsetX);\n\n            if (isSamePoint(screenCursor, newCursor) && isSamePoint(cursor, selection.lead))\n                return;\n            screenCursor = newCursor;\n            \n            editor.selection.moveToPosition(cursor);\n            editor.renderer.scrollCursorIntoView();\n\n            editor.removeSelectionMarkers(rectSel);\n            rectSel = selection.rectangularRangeBlock(screenCursor, screenAnchor);\n            if (editor.$mouseHandler.$clickSelection && rectSel.length == 1 && rectSel[0].isEmpty())\n                rectSel[0] = editor.$mouseHandler.$clickSelection.clone();\n            rectSel.forEach(editor.addSelectionMarker, editor);\n            editor.updateSelectionMarkers();\n        };\n        if (isMultiSelect && !accel) {\n            selection.toSingleRange();\n        } else if (!isMultiSelect && accel) {\n            initialRange = selection.toOrientedRange();\n            editor.addSelectionMarker(initialRange);\n        }\n        \n        if (shift)\n            screenAnchor = session.documentToScreenPosition(selection.lead);            \n        else\n            selection.moveToPosition(pos);\n        \n        screenCursor = {row: -1, column: -1};\n\n        var onMouseSelectionEnd = function(e) {\n            blockSelect();\n            clearInterval(timerId);\n            editor.removeSelectionMarkers(rectSel);\n            if (!rectSel.length)\n                rectSel = [selection.toOrientedRange()];\n            if (initialRange) {\n                editor.removeSelectionMarker(initialRange);\n                selection.toSingleRange(initialRange);\n            }\n            for (var i = 0; i < rectSel.length; i++)\n                selection.addRange(rectSel[i]);\n            editor.inVirtualSelectionMode = false;\n            editor.$mouseHandler.$clickSelection = null;\n        };\n\n        var onSelectionInterval = blockSelect;\n\n        event.capture(editor.container, onMouseSelection, onMouseSelectionEnd);\n        var timerId = setInterval(function() {onSelectionInterval();}, 20);\n\n        return e.preventDefault();\n    }\n}\n\n\nexports.onMouseDown = onMouseDown;\n","\"use strict\";\n\nvar MouseEvent = require(\"./mouse_event\").MouseEvent;\nvar event = require(\"../lib/event\");\nvar dom = require(\"../lib/dom\");\n\nexports.addTouchListeners = function(el, editor) {\n    var mode = \"scroll\";\n    var startX;\n    var startY;\n    var touchStartT;\n    var lastT;\n    var longTouchTimer;\n    var animationTimer;\n    var animationSteps = 0;\n    var pos;\n    var clickCount = 0;\n    var vX = 0;\n    var vY = 0;\n    var pressed;\n    var contextMenu;\n    \n    function createContextMenu() {\n        var clipboard = window.navigator && window.navigator.clipboard;\n        var isOpen = false;\n        var updateMenu = function() {\n            var selected = editor.getCopyText();\n            var hasUndo = editor.session.getUndoManager().hasUndo();\n            contextMenu.replaceChild(\n                dom.buildDom(isOpen ? [\"span\",\n                    !selected && [\"span\", { class: \"ace_mobile-button\", action: \"selectall\" }, \"Select All\"],\n                    selected && [\"span\", { class: \"ace_mobile-button\", action: \"copy\" }, \"Copy\"],\n                    selected && [\"span\", { class: \"ace_mobile-button\", action: \"cut\" }, \"Cut\"],\n                    clipboard && [\"span\", { class: \"ace_mobile-button\", action: \"paste\" }, \"Paste\"],\n                    hasUndo && [\"span\", { class: \"ace_mobile-button\", action: \"undo\" }, \"Undo\"],\n                    [\"span\", { class: \"ace_mobile-button\", action: \"find\" }, \"Find\"],\n                    [\"span\", { class: \"ace_mobile-button\", action: \"openCommandPallete\" }, \"Palette\"]\n                ] : [\"span\"]),\n                contextMenu.firstChild\n            );\n        };\n        var handleClick = function(e) {\n            var action = e.target.getAttribute(\"action\");\n\n            if (action == \"more\" || !isOpen) {\n                isOpen = !isOpen;\n                return updateMenu();\n            }\n            if (action == \"paste\") {\n                clipboard.readText().then(function (text) {\n                    editor.execCommand(action, text);\n                });\n            }\n            else if (action) {\n                if (action == \"cut\" || action == \"copy\") {\n                    if (clipboard)\n                        clipboard.writeText(editor.getCopyText());\n                    else\n                        document.execCommand(\"copy\");\n                }\n                editor.execCommand(action);\n            }\n            contextMenu.firstChild.style.display = \"none\";\n            isOpen = false;\n            if (action != \"openCommandPallete\")\n                editor.focus();\n        };\n        contextMenu = dom.buildDom([\"div\",\n            {\n                class: \"ace_mobile-menu\",\n                ontouchstart: function(e) {\n                    mode = \"menu\";\n                    e.stopPropagation();\n                    e.preventDefault();\n                    editor.textInput.focus();\n                },\n                ontouchend: function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    handleClick(e);\n                },\n                onclick: handleClick\n            },\n            [\"span\"],\n            [\"span\", { class: \"ace_mobile-button\", action: \"more\" }, \"...\"]\n        ], editor.container);\n    }\n    function showContextMenu() {\n        if (!contextMenu) createContextMenu();\n        var cursor = editor.selection.cursor;\n        var pagePos = editor.renderer.textToScreenCoordinates(cursor.row, cursor.column);\n        var leftOffset = editor.renderer.textToScreenCoordinates(0, 0).pageX;\n        var scrollLeft = editor.renderer.scrollLeft;\n        var rect = editor.container.getBoundingClientRect();\n        contextMenu.style.top = pagePos.pageY - rect.top - 3 + \"px\";\n        if (pagePos.pageX - rect.left < rect.width - 70) {\n            contextMenu.style.left = \"\";\n            contextMenu.style.right = \"10px\";\n        } else {\n            contextMenu.style.right = \"\";\n            contextMenu.style.left = leftOffset + scrollLeft - rect.left + \"px\";\n        }\n        contextMenu.style.display = \"\";\n        contextMenu.firstChild.style.display = \"none\";\n        editor.on(\"input\", hideContextMenu);\n    }\n    function hideContextMenu(e) {\n        if (contextMenu)\n            contextMenu.style.display = \"none\";\n        editor.off(\"input\", hideContextMenu);\n    }\n\n    function handleLongTap() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        var range = editor.selection.getRange();\n        var inSelection = range.contains(pos.row, pos.column);\n        if (range.isEmpty() || !inSelection) {\n            editor.selection.moveToPosition(pos);\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n        showContextMenu();\n    }\n    function switchToSelectionMode() {\n        longTouchTimer = null;\n        clearTimeout(longTouchTimer);\n        editor.selection.moveToPosition(pos);\n        var range = clickCount >= 2\n            ? editor.selection.getLineRange(pos.row)\n            : editor.session.getBracketRange(pos);\n        if (range && !range.isEmpty()) {\n            editor.selection.setRange(range);\n        } else {\n            editor.selection.selectWord();\n        }\n        mode = \"wait\";\n    }\n    event.addListener(el, \"contextmenu\", function(e) {\n        if (!pressed) return;\n        var textarea = editor.textInput.getElement();\n        textarea.focus();\n    }, editor);\n    event.addListener(el, \"touchstart\", function (e) {\n        var touches = e.touches;\n        if (longTouchTimer || touches.length > 1) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n            touchStartT = -1;\n            mode = \"zoom\";\n            return;\n        }\n        \n        pressed = editor.$mouseHandler.isMousePressed = true;\n        var h = editor.renderer.layerConfig.lineHeight;\n        var w = editor.renderer.layerConfig.lineHeight;\n        var t = e.timeStamp;\n        lastT = t;\n        var touchObj = touches[0];\n        var x = touchObj.clientX;\n        var y = touchObj.clientY;\n        // reset clickCount if the new touch is far from the old one\n        if (Math.abs(startX - x) + Math.abs(startY - y) > h)\n            touchStartT = -1;\n        \n        startX = e.clientX = x;\n        startY = e.clientY = y;\n        vX = vY = 0;\n        \n        var ev = new MouseEvent(e, editor);\n        pos = ev.getDocumentPosition();\n\n        if (t - touchStartT < 500 && touches.length == 1 && !animationSteps) {\n            clickCount++;\n            e.preventDefault();\n            e.button = 0;\n            switchToSelectionMode();\n        } else {\n            clickCount = 0;\n            var cursor = editor.selection.cursor;\n            var anchor = editor.selection.isEmpty() ? cursor : editor.selection.anchor;\n            \n            var cursorPos = editor.renderer.$cursorLayer.getPixelPosition(cursor, true);\n            var anchorPos = editor.renderer.$cursorLayer.getPixelPosition(anchor, true);\n            var rect = editor.renderer.scroller.getBoundingClientRect();\n            var offsetTop = editor.renderer.layerConfig.offset;\n            var offsetLeft = editor.renderer.scrollLeft;\n            var weightedDistance = function(x, y) {\n                x = x / w;\n                y = y / h - 0.75;\n                return x * x + y * y;\n            };\n            \n            if (e.clientX < rect.left) {\n                mode = \"zoom\";\n                return;\n            }\n            \n            var diff1 = weightedDistance(\n                e.clientX - rect.left - cursorPos.left + offsetLeft,\n                e.clientY - rect.top - cursorPos.top + offsetTop\n            );\n            var diff2 = weightedDistance(\n                e.clientX - rect.left - anchorPos.left + offsetLeft,\n                e.clientY - rect.top - anchorPos.top + offsetTop\n            );\n            if (diff1 < 3.5 && diff2 < 3.5)\n                mode = diff1 > diff2 ? \"cursor\" : \"anchor\";\n                \n            if (diff2 < 3.5)\n                mode = \"anchor\";\n            else if (diff1 < 3.5)\n                mode = \"cursor\";\n            else\n                mode = \"scroll\";\n            longTouchTimer = setTimeout(handleLongTap, 450);\n        }\n        touchStartT = t;\n    }, editor);\n\n    event.addListener(el, \"touchend\", function (e) {\n        pressed = editor.$mouseHandler.isMousePressed = false;\n        if (animationTimer) clearInterval(animationTimer);\n        if (mode == \"zoom\") {\n            mode = \"\";\n            animationSteps = 0;\n        } else if (longTouchTimer) {\n            editor.selection.moveToPosition(pos);\n            animationSteps = 0;\n            showContextMenu();\n        } else if (mode == \"scroll\") {\n            animate();\n            hideContextMenu();\n        } else {\n            showContextMenu();\n        }\n        clearTimeout(longTouchTimer);\n        longTouchTimer = null;\n    }, editor);\n    event.addListener(el, \"touchmove\", function (e) {\n        if (longTouchTimer) {\n            clearTimeout(longTouchTimer);\n            longTouchTimer = null;\n        }\n        var touches = e.touches;\n        if (touches.length > 1 || mode == \"zoom\") return;\n\n        var touchObj = touches[0];\n\n        var wheelX = startX - touchObj.clientX;\n        var wheelY = startY - touchObj.clientY;\n\n        if (mode == \"wait\") {\n            if (wheelX * wheelX + wheelY * wheelY > 4)\n                mode = \"cursor\";\n            else\n                return e.preventDefault();\n        }\n\n        startX = touchObj.clientX;\n        startY = touchObj.clientY;\n\n        e.clientX = touchObj.clientX;\n        e.clientY = touchObj.clientY;\n\n        var t = e.timeStamp;\n        var dt = t - lastT;\n        lastT = t;\n        if (mode == \"scroll\") {\n            var mouseEvent = new MouseEvent(e, editor);\n            mouseEvent.speed = 1;\n            mouseEvent.wheelX = wheelX;\n            mouseEvent.wheelY = wheelY;\n            if (10 * Math.abs(wheelX) < Math.abs(wheelY)) wheelX = 0;\n            if (10 * Math.abs(wheelY) < Math.abs(wheelX)) wheelY = 0;\n            if (dt != 0) {\n                vX = wheelX / dt;\n                vY = wheelY / dt;\n            }\n            editor._emit(\"mousewheel\", mouseEvent);\n            if (!mouseEvent.propagationStopped) {\n                vX = vY = 0;\n            }\n        }\n        else {\n            var ev = new MouseEvent(e, editor);\n            var pos = ev.getDocumentPosition();\n            if (mode == \"cursor\")\n                editor.selection.moveCursorToPosition(pos);\n            else if (mode == \"anchor\")\n                editor.selection.setSelectionAnchor(pos.row, pos.column);\n            editor.renderer.scrollCursorIntoView(pos);\n            e.preventDefault();\n        }\n    }, editor);\n\n    function animate() {\n        animationSteps += 60;\n        animationTimer = setInterval(function() {\n            if (animationSteps-- <= 0) {\n                clearInterval(animationTimer);\n                animationTimer = null;\n            }\n            if (Math.abs(vX) < 0.01) vX = 0;\n            if (Math.abs(vY) < 0.01) vY = 0;\n            if (animationSteps < 20) vX = 0.9 * vX;\n            if (animationSteps < 20) vY = 0.9 * vY;\n            var oldScrollTop = editor.session.getScrollTop();\n            editor.renderer.scrollBy(10 * vX, 10 * vY);\n            if (oldScrollTop == editor.session.getScrollTop())\n                animationSteps = 0;\n        }, 10);\n    }\n};\n","var RangeList = require(\"./range_list\").RangeList;\nvar Range = require(\"./range\").Range;\nvar Selection = require(\"./selection\").Selection;\nvar onMouseDown = require(\"./mouse/multi_select_handler\").onMouseDown;\nvar event = require(\"./lib/event\");\nvar lang = require(\"./lib/lang\");\nvar commands = require(\"./commands/multi_select_commands\");\nexports.commands = commands.defaultCommands.concat(commands.multiSelectCommands);\n\n// Todo: session.find or editor.findVolatile that returns range\nvar Search = require(\"./search\").Search;\nvar search = new Search();\n\nfunction find(session, needle, dir) {\n    search.$options.wrap = true;\n    search.$options.needle = needle;\n    search.$options.backwards = dir == -1;\n    return search.find(session);\n}\n\n// extend EditSession\nvar EditSession = require(\"./edit_session\").EditSession;\n(function() {\n    this.getSelectionMarkers = function() {\n        return this.$selectionMarkers;\n    };\n}).call(EditSession.prototype);\n\n// extend Selection\n(function() {\n    // list of ranges in reverse addition order\n    this.ranges = null;\n\n    // automatically sorted list of ranges\n    this.rangeList = null;\n\n    /** \n     * Adds a range to a selection by entering multiselect mode, if necessary.\n     * @param {Range} range The new range to add\n     * @param {Boolean} $blockChangeEvents Whether or not to block changing events\n     * @method Selection.addRange\n     **/\n    this.addRange = function(range, $blockChangeEvents) {\n        if (!range)\n            return;\n\n        if (!this.inMultiSelectMode && this.rangeCount === 0) {\n            var oldRange = this.toOrientedRange();\n            this.rangeList.add(oldRange);\n            this.rangeList.add(range);\n            if (this.rangeList.ranges.length != 2) {\n                this.rangeList.removeAll();\n                return $blockChangeEvents || this.fromOrientedRange(range);\n            }\n            this.rangeList.removeAll();\n            this.rangeList.add(oldRange);\n            this.$onAddRange(oldRange);\n        }\n\n        if (!range.cursor)\n            range.cursor = range.end;\n\n        var removed = this.rangeList.add(range);\n\n        this.$onAddRange(range);\n\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        if (this.rangeCount > 1 && !this.inMultiSelectMode) {\n            this._signal(\"multiSelect\");\n            this.inMultiSelectMode = true;\n            this.session.$undoSelect = false;\n            this.rangeList.attach(this.session);\n        }\n\n        return $blockChangeEvents || this.fromOrientedRange(range);\n    };\n\n    /**\n     * @method Selection.toSingleRange\n     **/\n    this.toSingleRange = function(range) {\n        range = range || this.ranges[0];\n        var removed = this.rangeList.removeAll();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n\n        range && this.fromOrientedRange(range);\n    };\n\n    /**\n     * Removes a Range containing pos (if it exists).\n     * @param {Range} pos The position to remove, as a `{row, column}` object\n     * @method Selection.substractPoint\n     **/\n    this.substractPoint = function(pos) {\n        var removed = this.rangeList.substractPoint(pos);\n        if (removed) {\n            this.$onRemoveRange(removed);\n            return removed[0];\n        }\n    };\n\n    /**\n     * Merges overlapping ranges ensuring consistency after changes\n     * @method Selection.mergeOverlappingRanges\n     **/\n    this.mergeOverlappingRanges = function() {\n        var removed = this.rangeList.merge();\n        if (removed.length)\n            this.$onRemoveRange(removed);\n    };\n\n    this.$onAddRange = function(range) {\n        this.rangeCount = this.rangeList.ranges.length;\n        this.ranges.unshift(range);\n        this._signal(\"addRange\", {range: range});\n    };\n\n    this.$onRemoveRange = function(removed) {\n        this.rangeCount = this.rangeList.ranges.length;\n        if (this.rangeCount == 1 && this.inMultiSelectMode) {\n            var lastRange = this.rangeList.ranges.pop();\n            removed.push(lastRange);\n            this.rangeCount = 0;\n        }\n\n        for (var i = removed.length; i--; ) {\n            var index = this.ranges.indexOf(removed[i]);\n            this.ranges.splice(index, 1);\n        }\n\n        this._signal(\"removeRange\", {ranges: removed});\n\n        if (this.rangeCount === 0 && this.inMultiSelectMode) {\n            this.inMultiSelectMode = false;\n            this._signal(\"singleSelect\");\n            this.session.$undoSelect = true;\n            this.rangeList.detach(this.session);\n        }\n\n        lastRange = lastRange || this.ranges[0];\n        if (lastRange && !lastRange.isEqual(this.getRange()))\n            this.fromOrientedRange(lastRange);\n    };\n\n    // adds multicursor support to selection\n    this.$initRangeList = function() {\n        if (this.rangeList)\n            return;\n\n        this.rangeList = new RangeList();\n        this.ranges = [];\n        this.rangeCount = 0;\n    };\n\n    /**\n     * Returns a concatenation of all the ranges.\n     * @returns {Range[]}\n     * @method Selection.getAllRanges\n     **/\n    this.getAllRanges = function() {\n        return this.rangeCount ? this.rangeList.ranges.concat() : [this.getRange()];\n    };\n\n    /**\n     * Splits all the ranges into lines.\n     * @method Selection.splitIntoLines\n     **/\n    this.splitIntoLines = function () {\n        var ranges = this.ranges.length ? this.ranges : [this.getRange()];\n        var newRanges = [];\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            var row = range.start.row;\n            var endRow = range.end.row;\n            if (row === endRow) {\n                newRanges.push(range.clone());\n            } else {\n                newRanges.push(new Range(row, range.start.column, row, this.session.getLine(row).length));\n                while (++row < endRow)\n                    newRanges.push(this.getLineRange(row, true));\n                newRanges.push(new Range(endRow, 0, endRow, range.end.column));\n            }\n            if (i == 0 && !this.isBackwards())\n                newRanges = newRanges.reverse();\n        }\n        this.toSingleRange();\n        for (var i = newRanges.length; i--;)\n            this.addRange(newRanges[i]);\n    };\n    \n    this.joinSelections = function () {\n        var ranges = this.rangeList.ranges;\n        var lastRange = ranges[ranges.length - 1];\n        var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n        this.toSingleRange();\n        this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n    };\n\n    /**\n     * @method Selection.toggleBlockSelection\n     **/\n    this.toggleBlockSelection = function () {\n        if (this.rangeCount > 1) {\n            var ranges = this.rangeList.ranges;\n            var lastRange = ranges[ranges.length - 1];\n            var range = Range.fromPoints(ranges[0].start, lastRange.end);\n\n            this.toSingleRange();\n            this.setSelectionRange(range, lastRange.cursor == lastRange.start);\n        } else {\n            var cursor = this.session.documentToScreenPosition(this.cursor);\n            var anchor = this.session.documentToScreenPosition(this.anchor);\n\n            var rectSel = this.rectangularRangeBlock(cursor, anchor);\n            rectSel.forEach(this.addRange, this);\n        }\n    };\n\n    /**\n     * \n     * Gets list of ranges composing rectangular block on the screen\n     * \n     * @param {Position} screenCursor The cursor to use\n     * @param {Position} screenAnchor The anchor to use\n     * @param {Boolean} includeEmptyLines If true, this includes ranges inside the block which are empty due to clipping\n     * @returns {Range}\n     * @method Selection.rectangularRangeBlock\n     **/\n    this.rectangularRangeBlock = function(screenCursor, screenAnchor, includeEmptyLines) {\n        var rectSel = [];\n\n        var xBackwards = screenCursor.column < screenAnchor.column;\n        if (xBackwards) {\n            var startColumn = screenCursor.column;\n            var endColumn = screenAnchor.column;\n            var startOffsetX = screenCursor.offsetX;\n            var endOffsetX = screenAnchor.offsetX;\n        } else {\n            var startColumn = screenAnchor.column;\n            var endColumn = screenCursor.column;\n            var startOffsetX = screenAnchor.offsetX;\n            var endOffsetX = screenCursor.offsetX;\n        }\n\n        var yBackwards = screenCursor.row < screenAnchor.row;\n        if (yBackwards) {\n            var startRow = screenCursor.row;\n            var endRow = screenAnchor.row;\n        } else {\n            var startRow = screenAnchor.row;\n            var endRow = screenCursor.row;\n        }\n\n        if (startColumn < 0)\n            startColumn = 0;\n        if (startRow < 0)\n            startRow = 0;\n\n        if (startRow == endRow)\n            includeEmptyLines = true;\n\n        var docEnd;\n        for (var row = startRow; row <= endRow; row++) {\n            var range = Range.fromPoints(\n                this.session.screenToDocumentPosition(row, startColumn, startOffsetX),\n                this.session.screenToDocumentPosition(row, endColumn, endOffsetX)\n            );\n            if (range.isEmpty()) {\n                if (docEnd && isSamePoint(range.end, docEnd))\n                    break;\n                docEnd = range.end;\n            }\n            range.cursor = xBackwards ? range.start : range.end;\n            rectSel.push(range);\n        }\n\n        if (yBackwards)\n            rectSel.reverse();\n\n        if (!includeEmptyLines) {\n            var end = rectSel.length - 1;\n            while (rectSel[end].isEmpty() && end > 0)\n                end--;\n            if (end > 0) {\n                var start = 0;\n                while (rectSel[start].isEmpty())\n                    start++;\n            }\n            for (var i = end; i >= start; i--) {\n                if (rectSel[i].isEmpty())\n                    rectSel.splice(i, 1);\n            }\n        }\n\n        return rectSel;\n    };\n}).call(Selection.prototype);\n\n// extend Editor\nvar Editor = require(\"./editor\").Editor;\n(function() {\n\n    /** \n     * \n     * Updates the cursor and marker layers.\n     * @method Editor.updateSelectionMarkers\n     *\n     **/\n    this.updateSelectionMarkers = function() {\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    /** \n     * Adds the selection and cursor.\n     * @param {Range} orientedRange A range containing a cursor\n     * @returns {Range}\n     * @method Editor.addSelectionMarker\n     **/\n    this.addSelectionMarker = function(orientedRange) {\n        if (!orientedRange.cursor)\n            orientedRange.cursor = orientedRange.end;\n\n        var style = this.getSelectionStyle();\n        orientedRange.marker = this.session.addMarker(orientedRange, \"ace_selection\", style);\n\n        this.session.$selectionMarkers.push(orientedRange);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n        return orientedRange;\n    };\n\n    /** \n     * Removes the selection marker.\n     * @param {Range} range The selection range added with [[Editor.addSelectionMarker `addSelectionMarker()`]].\n     * @method Editor.removeSelectionMarker\n     **/\n    this.removeSelectionMarker = function(range) {\n        if (!range.marker)\n            return;\n        this.session.removeMarker(range.marker);\n        var index = this.session.$selectionMarkers.indexOf(range);\n        if (index != -1)\n            this.session.$selectionMarkers.splice(index, 1);\n        this.session.selectionMarkerCount = this.session.$selectionMarkers.length;\n    };\n\n    this.removeSelectionMarkers = function(ranges) {\n        var markerList = this.session.$selectionMarkers;\n        for (var i = ranges.length; i--; ) {\n            var range = ranges[i];\n            if (!range.marker)\n                continue;\n            this.session.removeMarker(range.marker);\n            var index = markerList.indexOf(range);\n            if (index != -1)\n                markerList.splice(index, 1);\n        }\n        this.session.selectionMarkerCount = markerList.length;\n    };\n\n    this.$onAddRange = function(e) {\n        this.addSelectionMarker(e.range);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onRemoveRange = function(e) {\n        this.removeSelectionMarkers(e.ranges);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onMultiSelect = function(e) {\n        if (this.inMultiSelectMode)\n            return;\n        this.inMultiSelectMode = true;\n\n        this.setStyle(\"ace_multiselect\");\n        this.keyBinding.addKeyboardHandler(commands.keyboardHandler);\n        this.commands.setDefaultHandler(\"exec\", this.$onMultiSelectExec);\n\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n    };\n\n    this.$onSingleSelect = function(e) {\n        if (this.session.multiSelect.inVirtualMode)\n            return;\n        this.inMultiSelectMode = false;\n\n        this.unsetStyle(\"ace_multiselect\");\n        this.keyBinding.removeKeyboardHandler(commands.keyboardHandler);\n\n        this.commands.removeDefaultHandler(\"exec\", this.$onMultiSelectExec);\n        this.renderer.updateCursor();\n        this.renderer.updateBackMarkers();\n        this._emit(\"changeSelection\");\n    };\n\n    this.$onMultiSelectExec = function(e) {\n        var command = e.command;\n        var editor = e.editor;\n        if (!editor.multiSelect)\n            return;\n        if (!command.multiSelectAction) {\n            var result = command.exec(editor, e.args || {});\n            editor.multiSelect.addRange(editor.multiSelect.toOrientedRange());\n            editor.multiSelect.mergeOverlappingRanges();\n        } else if (command.multiSelectAction == \"forEach\") {\n            result = editor.forEachSelection(command, e.args);\n        } else if (command.multiSelectAction == \"forEachLine\") {\n            result = editor.forEachSelection(command, e.args, true);\n        } else if (command.multiSelectAction == \"single\") {\n            editor.exitMultiSelectMode();\n            result = command.exec(editor, e.args || {});\n        } else {\n            result = command.multiSelectAction(editor, e.args || {});\n        }\n        return result;\n    };\n\n    /** \n     * Executes a command for each selection range.\n     * @param {Object} cmd The command to execute\n     * @param {String} args Any arguments for the command\n     * @method Editor.forEachSelection\n     **/ \n    this.forEachSelection = function(cmd, args, options) {\n        if (this.inVirtualSelectionMode)\n            return;\n        var keepOrder = options && options.keepOrder;\n        var $byLines = options == true || options && options.$byLines;\n        var session = this.session;\n        var selection = this.selection;\n        var rangeList = selection.rangeList;\n        var ranges = (keepOrder ? selection : rangeList).ranges;\n        var result;\n        \n        if (!ranges.length)\n            return cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n        \n        var reg = selection._eventRegistry;\n        selection._eventRegistry = {};\n\n        var tmpSel = new Selection(session);\n        this.inVirtualSelectionMode = true;\n        for (var i = ranges.length; i--;) {\n            if ($byLines) {\n                while (i > 0 && ranges[i].start.row == ranges[i - 1].end.row)\n                    i--;\n            }\n            tmpSel.fromOrientedRange(ranges[i]);\n            tmpSel.index = i;\n            this.selection = session.selection = tmpSel;\n            var cmdResult = cmd.exec ? cmd.exec(this, args || {}) : cmd(this, args || {});\n            if (!result && cmdResult !== undefined)\n                result = cmdResult;\n            tmpSel.toOrientedRange(ranges[i]);\n        }\n        tmpSel.detach();\n\n        this.selection = session.selection = selection;\n        this.inVirtualSelectionMode = false;\n        selection._eventRegistry = reg;\n        selection.mergeOverlappingRanges();\n        if (selection.ranges[0])\n            selection.fromOrientedRange(selection.ranges[0]);\n        \n        var anim = this.renderer.$scrollAnimation;\n        this.onCursorChange();\n        this.onSelectionChange();\n        if (anim && anim.from == anim.to)\n            this.renderer.animateScrolling(anim.from);\n        \n        return result;\n    };\n\n    /** \n    * Removes all the selections except the last added one.\n    * @method Editor.exitMultiSelectMode\n    **/\n    this.exitMultiSelectMode = function() {\n        if (!this.inMultiSelectMode || this.inVirtualSelectionMode)\n            return;\n        this.multiSelect.toSingleRange();\n    };\n\n    this.getSelectedText = function() {\n        var text = \"\";\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var ranges = this.multiSelect.rangeList.ranges;\n            var buf = [];\n            for (var i = 0; i < ranges.length; i++) {\n                buf.push(this.session.getTextRange(ranges[i]));\n            }\n            var nl = this.session.getDocument().getNewLineCharacter();\n            text = buf.join(nl);\n            if (text.length == (buf.length - 1) * nl.length)\n                text = \"\";\n        } else if (!this.selection.isEmpty()) {\n            text = this.session.getTextRange(this.getSelectionRange());\n        }\n        return text;\n    };\n    \n    this.$checkMultiselectChange = function(e, anchor) {\n        if (this.inMultiSelectMode && !this.inVirtualSelectionMode) {\n            var range = this.multiSelect.ranges[0];\n            if (this.multiSelect.isEmpty() && anchor == this.multiSelect.anchor)\n                return;\n            var pos = anchor == this.multiSelect.anchor\n                ? range.cursor == range.start ? range.end : range.start\n                : range.cursor;\n            if (pos.row != anchor.row \n                || this.session.$clipPositionToDocument(pos.row, pos.column).column != anchor.column)\n                this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange());\n            else\n                this.multiSelect.mergeOverlappingRanges();\n        }\n    };\n\n    /**\n     * Finds and selects all the occurrences of `needle`.\n     * @param {String} The text to find\n     * @param {Object} The search options\n     * @param {Boolean} keeps\n     *\n     * @returns {Number} The cumulative count of all found matches \n     * @method Editor.findAll\n     **/\n    this.findAll = function(needle, options, additive) {\n        options = options || {};\n        options.needle = needle || options.needle;\n        if (options.needle == undefined) {\n            var range = this.selection.isEmpty()\n                ? this.selection.getWordRange()\n                : this.selection.getRange();\n            options.needle = this.session.getTextRange(range);\n        }    \n        this.$search.set(options);\n        \n        var ranges = this.$search.findAll(this.session);\n        if (!ranges.length)\n            return 0;\n\n        var selection = this.multiSelect;\n\n        if (!additive)\n            selection.toSingleRange(ranges[0]);\n\n        for (var i = ranges.length; i--; )\n            selection.addRange(ranges[i], true);\n\n        // keep old selection as primary if possible\n        if (range && selection.rangeList.rangeAtPoint(range.start))\n            selection.addRange(range, true);\n        \n        return ranges.length;\n    };\n\n    /**\n     * Adds a cursor above or below the active cursor.\n     * \n     * @param {Number} dir The direction of lines to select: -1 for up, 1 for down\n     * @param {Boolean} skip If `true`, removes the active selection range\n     *\n     * @method Editor.selectMoreLines \n     */\n    this.selectMoreLines = function(dir, skip) {\n        var range = this.selection.toOrientedRange();\n        var isBackwards = range.cursor == range.end;\n\n        var screenLead = this.session.documentToScreenPosition(range.cursor);\n        if (this.selection.$desiredColumn)\n            screenLead.column = this.selection.$desiredColumn;\n\n        var lead = this.session.screenToDocumentPosition(screenLead.row + dir, screenLead.column);\n\n        if (!range.isEmpty()) {\n            var screenAnchor = this.session.documentToScreenPosition(isBackwards ? range.end : range.start);\n            var anchor = this.session.screenToDocumentPosition(screenAnchor.row + dir, screenAnchor.column);\n        } else {\n            var anchor = lead;\n        }\n\n        if (isBackwards) {\n            var newRange = Range.fromPoints(lead, anchor);\n            newRange.cursor = newRange.start;\n        } else {\n            var newRange = Range.fromPoints(anchor, lead);\n            newRange.cursor = newRange.end;\n        }\n\n        newRange.desiredColumn = screenLead.column;\n        if (!this.selection.inMultiSelectMode) {\n            this.selection.addRange(range);\n        } else {\n            if (skip)\n                var toRemove = range.cursor;\n        }\n\n        this.selection.addRange(newRange);\n        if (toRemove)\n            this.selection.substractPoint(toRemove);\n    };\n\n    /** \n     * Transposes the selected ranges.\n     * @param {Number} dir The direction to rotate selections\n     * @method Editor.transposeSelections\n     **/\n    this.transposeSelections = function(dir) {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var all = sel.ranges;\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            if (range.isEmpty()) {\n                var tmp = session.getWordRange(range.start.row, range.start.column);\n                range.start.row = tmp.start.row;\n                range.start.column = tmp.start.column;\n                range.end.row = tmp.end.row;\n                range.end.column = tmp.end.column;\n            }\n        }\n        sel.mergeOverlappingRanges();\n\n        var words = [];\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            words.unshift(session.getTextRange(range));\n        }\n\n        if (dir < 0)\n            words.unshift(words.pop());\n        else\n            words.push(words.shift());\n\n        for (var i = all.length; i--; ) {\n            var range = all[i];\n            var tmp = range.clone();\n            session.replace(range, words[i]);\n            range.start.row = tmp.start.row;\n            range.start.column = tmp.start.column;\n        }\n        sel.fromOrientedRange(sel.ranges[0]);\n    };\n\n    /** \n     * Finds the next occurrence of text in an active selection and adds it to the selections.\n     * @param {Number} dir The direction of lines to select: -1 for up, 1 for down\n     * @param {Boolean} skip If `true`, removes the active selection range\n     * @method Editor.selectMore\n     **/\n    this.selectMore = function(dir, skip, stopAtFirst) {\n        var session = this.session;\n        var sel = session.multiSelect;\n\n        var range = sel.toOrientedRange();\n        if (range.isEmpty()) {\n            range = session.getWordRange(range.start.row, range.start.column);\n            range.cursor = dir == -1 ? range.start : range.end;\n            this.multiSelect.addRange(range);\n            if (stopAtFirst)\n                return;\n        }\n        var needle = session.getTextRange(range);\n\n        var newRange = find(session, needle, dir);\n        if (newRange) {\n            newRange.cursor = dir == -1 ? newRange.start : newRange.end;\n            this.session.unfold(newRange);\n            this.multiSelect.addRange(newRange);\n            this.renderer.scrollCursorIntoView(null, 0.5);\n        }\n        if (skip)\n            this.multiSelect.substractPoint(range.cursor);\n    };\n\n    /** \n     * Aligns the cursors or selected text.\n     * @method Editor.alignCursors\n     **/\n    this.alignCursors = function() {\n        var session = this.session;\n        var sel = session.multiSelect;\n        var ranges = sel.ranges;\n        // filter out ranges on same row\n        var row = -1;\n        var sameRowRanges = ranges.filter(function(r) {\n            if (r.cursor.row == row)\n                return true;\n            row = r.cursor.row;\n        });\n        \n        if (!ranges.length || sameRowRanges.length == ranges.length - 1) {\n            var range = this.selection.getRange();\n            var fr = range.start.row, lr = range.end.row;\n            var guessRange = fr == lr;\n            if (guessRange) {\n                var max = this.session.getLength();\n                var line;\n                do {\n                    line = this.session.getLine(lr);\n                } while (/[=:]/.test(line) && ++lr < max);\n                do {\n                    line = this.session.getLine(fr);\n                } while (/[=:]/.test(line) && --fr > 0);\n                \n                if (fr < 0) fr = 0;\n                if (lr >= max) lr = max - 1;\n            }\n            var lines = this.session.removeFullLines(fr, lr);\n            lines = this.$reAlignText(lines, guessRange);\n            this.session.insert({row: fr, column: 0}, lines.join(\"\\n\") + \"\\n\");\n            if (!guessRange) {\n                range.start.column = 0;\n                range.end.column = lines[lines.length - 1].length;\n            }\n            this.selection.setRange(range);\n        } else {\n            sameRowRanges.forEach(function(r) {\n                sel.substractPoint(r.cursor);\n            });\n\n            var maxCol = 0;\n            var minSpace = Infinity;\n            var spaceOffsets = ranges.map(function(r) {\n                var p = r.cursor;\n                var line = session.getLine(p.row);\n                var spaceOffset = line.substr(p.column).search(/\\S/g);\n                if (spaceOffset == -1)\n                    spaceOffset = 0;\n\n                if (p.column > maxCol)\n                    maxCol = p.column;\n                if (spaceOffset < minSpace)\n                    minSpace = spaceOffset;\n                return spaceOffset;\n            });\n            ranges.forEach(function(r, i) {\n                var p = r.cursor;\n                var l = maxCol - p.column;\n                var d = spaceOffsets[i] - minSpace;\n                if (l > d)\n                    session.insert(p, lang.stringRepeat(\" \", l - d));\n                else\n                    session.remove(new Range(p.row, p.column, p.row, p.column - l + d));\n\n                r.start.column = r.end.column = maxCol;\n                r.start.row = r.end.row = p.row;\n                r.cursor = r.end;\n            });\n            sel.fromOrientedRange(ranges[0]);\n            this.renderer.updateCursor();\n            this.renderer.updateBackMarkers();\n        }\n    };\n\n    this.$reAlignText = function(lines, forceLeft) {\n        var isLeftAligned = true, isRightAligned = true;\n        var startW, textW, endW;\n\n        return lines.map(function(line) {\n            var m = line.match(/(\\s*)(.*?)(\\s*)([=:].*)/);\n            if (!m)\n                return [line];\n\n            if (startW == null) {\n                startW = m[1].length;\n                textW = m[2].length;\n                endW = m[3].length;\n                return m;\n            }\n\n            if (startW + textW + endW != m[1].length + m[2].length + m[3].length)\n                isRightAligned = false;\n            if (startW != m[1].length)\n                isLeftAligned = false;\n\n            if (startW > m[1].length)\n                startW = m[1].length;\n            if (textW < m[2].length)\n                textW = m[2].length;\n            if (endW > m[3].length)\n                endW = m[3].length;\n\n            return m;\n        }).map(forceLeft ? alignLeft :\n            isLeftAligned ? isRightAligned ? alignRight : alignLeft : unAlign);\n\n        function spaces(n) {\n            return lang.stringRepeat(\" \", n);\n        }\n\n        function alignLeft(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(textW - m[2].length + endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function alignRight(m) {\n            return !m[2] ? m[0] : spaces(startW + textW - m[2].length) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n        function unAlign(m) {\n            return !m[2] ? m[0] : spaces(startW) + m[2]\n                + spaces(endW)\n                + m[4].replace(/^([=:])\\s+/, \"$1 \");\n        }\n    };\n}).call(Editor.prototype);\n\n\nfunction isSamePoint(p1, p2) {\n    return p1.row == p2.row && p1.column == p2.column;\n}\n\n// patch\n// adds multicursor support to a session\nexports.onSessionChange = function(e) {\n    var session = e.session;\n    if (session && !session.multiSelect) {\n        session.$selectionMarkers = [];\n        session.selection.$initRangeList();\n        session.multiSelect = session.selection;\n    }\n    this.multiSelect = session && session.multiSelect;\n\n    var oldSession = e.oldSession;\n    if (oldSession) {\n        oldSession.multiSelect.off(\"addRange\", this.$onAddRange);\n        oldSession.multiSelect.off(\"removeRange\", this.$onRemoveRange);\n        oldSession.multiSelect.off(\"multiSelect\", this.$onMultiSelect);\n        oldSession.multiSelect.off(\"singleSelect\", this.$onSingleSelect);\n        oldSession.multiSelect.lead.off(\"change\", this.$checkMultiselectChange);\n        oldSession.multiSelect.anchor.off(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session) {\n        session.multiSelect.on(\"addRange\", this.$onAddRange);\n        session.multiSelect.on(\"removeRange\", this.$onRemoveRange);\n        session.multiSelect.on(\"multiSelect\", this.$onMultiSelect);\n        session.multiSelect.on(\"singleSelect\", this.$onSingleSelect);\n        session.multiSelect.lead.on(\"change\", this.$checkMultiselectChange);\n        session.multiSelect.anchor.on(\"change\", this.$checkMultiselectChange);\n    }\n\n    if (session && this.inMultiSelectMode != session.selection.inMultiSelectMode) {\n        if (session.selection.inMultiSelectMode)\n            this.$onMultiSelect();\n        else\n            this.$onSingleSelect();\n    }\n};\n\n// MultiSelect(editor)\n// adds multiple selection support to the editor\n// (note: should be called only once for each editor instance)\nfunction MultiSelect(editor) {\n    if (editor.$multiselectOnSessionChange)\n        return;\n    editor.$onAddRange = editor.$onAddRange.bind(editor);\n    editor.$onRemoveRange = editor.$onRemoveRange.bind(editor);\n    editor.$onMultiSelect = editor.$onMultiSelect.bind(editor);\n    editor.$onSingleSelect = editor.$onSingleSelect.bind(editor);\n    editor.$multiselectOnSessionChange = exports.onSessionChange.bind(editor);\n    editor.$checkMultiselectChange = editor.$checkMultiselectChange.bind(editor);\n\n    editor.$multiselectOnSessionChange(editor);\n    editor.on(\"changeSession\", editor.$multiselectOnSessionChange);\n\n    editor.on(\"mousedown\", onMouseDown);\n    editor.commands.addCommands(commands.defaultCommands);\n\n    addAltCursorListeners(editor);\n}\n\nfunction addAltCursorListeners(editor){\n    if (!editor.textInput) return;\n    var el = editor.textInput.getElement();\n    var altCursor = false;\n    event.addListener(el, \"keydown\", function(e) {\n        var altDown = e.keyCode == 18 && !(e.ctrlKey || e.shiftKey || e.metaKey);\n        if (editor.$blockSelectEnabled && altDown) {\n            if (!altCursor) {\n                editor.renderer.setMouseCursor(\"crosshair\");\n                altCursor = true;\n            }\n        } else if (altCursor) {\n            reset();\n        }\n    }, editor);\n\n    event.addListener(el, \"keyup\", reset, editor);\n    event.addListener(el, \"blur\", reset, editor);\n    function reset(e) {\n        if (altCursor) {\n            editor.renderer.setMouseCursor(\"\");\n            altCursor = false;\n            // TODO disable menu popping up\n            // e && e.preventDefault()\n        }\n    }\n}\n\nexports.MultiSelect = MultiSelect;\n\n\nrequire(\"./config\").defineOptions(Editor.prototype, \"editor\", {\n    enableMultiselect: {\n        set: function(val) {\n            MultiSelect(this);\n            if (val) {\n                this.on(\"changeSession\", this.$multiselectOnSessionChange);\n                this.on(\"mousedown\", onMouseDown);\n            } else {\n                this.off(\"changeSession\", this.$multiselectOnSessionChange);\n                this.off(\"mousedown\", onMouseDown);\n            }\n        },\n        value: true\n    },\n    enableBlockSelect: {\n        set: function(val) {\n            this.$blockSelectEnabled = val;\n        },\n        value: true\n    }\n});\n","\"use strict\";\n\nvar Range = require(\"./range\").Range;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar oop = require(\"./lib/oop\");\n\n/**\n * @class PlaceHolder\n *\n **/\n\n/**\n * - session (Document): The document to associate with the anchor\n * - length (Number): The starting row position\n * - pos (Number): The starting column position\n * - others (String):\n * - mainClass (String):\n * - othersClass (String):\n * \n * @constructor\n **/\n\nvar PlaceHolder = function(session, length, pos, others, mainClass, othersClass) {\n    var _self = this;\n    this.length = length;\n    this.session = session;\n    this.doc = session.getDocument();\n    this.mainClass = mainClass;\n    this.othersClass = othersClass;\n    this.$onUpdate = this.onUpdate.bind(this);\n    this.doc.on(\"change\", this.$onUpdate, true);\n    this.$others = others;\n    \n    this.$onCursorChange = function() {\n        setTimeout(function() {\n            _self.onCursorChange();\n        });\n    };\n    \n    this.$pos = pos;\n    // Used for reset\n    var undoStack = session.getUndoManager().$undoStack || session.getUndoManager().$undostack || {length: -1};\n    this.$undoStackDepth = undoStack.length;\n    this.setup();\n\n    session.selection.on(\"changeCursor\", this.$onCursorChange);\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * PlaceHolder.setup()\n     *\n     * TODO\n     *\n     **/\n    this.setup = function() {\n        var _self = this;\n        var doc = this.doc;\n        var session = this.session;\n        \n        this.selectionBefore = session.selection.toJSON();\n        if (session.selection.inMultiSelectMode)\n            session.selection.toSingleRange();\n\n        this.pos = doc.createAnchor(this.$pos.row, this.$pos.column);\n        var pos = this.pos;\n        pos.$insertRight = true;\n        pos.detach();\n        pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column + this.length), this.mainClass, null, false);\n        this.others = [];\n        this.$others.forEach(function(other) {\n            var anchor = doc.createAnchor(other.row, other.column);\n            anchor.$insertRight = true;\n            anchor.detach();\n            _self.others.push(anchor);\n        });\n        session.setUndoSelect(false);\n    };\n    \n    /**\n     * PlaceHolder.showOtherMarkers()\n     *\n     * TODO\n     *\n     **/\n    this.showOtherMarkers = function() {\n        if (this.othersActive) return;\n        var session = this.session;\n        var _self = this;\n        this.othersActive = true;\n        this.others.forEach(function(anchor) {\n            anchor.markerId = session.addMarker(new Range(anchor.row, anchor.column, anchor.row, anchor.column+_self.length), _self.othersClass, null, false);\n        });\n    };\n    \n    /**\n     * PlaceHolder.hideOtherMarkers()\n     *\n     * Hides all over markers in the [[EditSession `EditSession`]] that are not the currently selected one.\n     *\n     **/\n    this.hideOtherMarkers = function() {\n        if (!this.othersActive) return;\n        this.othersActive = false;\n        for (var i = 0; i < this.others.length; i++) {\n            this.session.removeMarker(this.others[i].markerId);\n        }\n    };\n\n    /**\n     * PlaceHolder@onUpdate(e)\n     * \n     * Emitted when the place holder updates.\n     *\n     **/\n    this.onUpdate = function(delta) {\n        if (this.$updating)\n            return this.updateAnchors(delta);\n            \n        var range = delta;\n        if (range.start.row !== range.end.row) return;\n        if (range.start.row !== this.pos.row) return;\n        this.$updating = true;\n        var lengthDiff = delta.action === \"insert\" ? range.end.column - range.start.column : range.start.column - range.end.column;\n        var inMainRange = range.start.column >= this.pos.column && range.start.column <= this.pos.column + this.length + 1;\n        var distanceFromStart = range.start.column - this.pos.column;\n        \n        this.updateAnchors(delta);\n        \n        if (inMainRange)\n            this.length += lengthDiff;\n\n        if (inMainRange && !this.session.$fromUndo) {\n            if (delta.action === 'insert') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.insertMergedLines(newPos, delta.lines);\n                }\n            } else if (delta.action === 'remove') {\n                for (var i = this.others.length - 1; i >= 0; i--) {\n                    var otherPos = this.others[i];\n                    var newPos = {row: otherPos.row, column: otherPos.column + distanceFromStart};\n                    this.doc.remove(new Range(newPos.row, newPos.column, newPos.row, newPos.column - lengthDiff));\n                }\n            }\n        }\n        \n        this.$updating = false;\n        this.updateMarkers();\n    };\n    \n    this.updateAnchors = function(delta) {\n        this.pos.onChange(delta);\n        for (var i = this.others.length; i--;)\n            this.others[i].onChange(delta);\n        this.updateMarkers();\n    };\n    \n    this.updateMarkers = function() {\n        if (this.$updating)\n            return;\n        var _self = this;\n        var session = this.session;\n        var updateMarker = function(pos, className) {\n            session.removeMarker(pos.markerId);\n            pos.markerId = session.addMarker(new Range(pos.row, pos.column, pos.row, pos.column+_self.length), className, null, false);\n        };\n        updateMarker(this.pos, this.mainClass);\n        for (var i = this.others.length; i--;)\n            updateMarker(this.others[i], this.othersClass);\n    };\n    \n    /**\n     * PlaceHolder@onCursorChange(e)\n     * \n     * Emitted when the cursor changes.\n     *\n     **/\n\n    this.onCursorChange = function(event) {\n        if (this.$updating || !this.session) return;\n        var pos = this.session.selection.getCursor();\n        if (pos.row === this.pos.row && pos.column >= this.pos.column && pos.column <= this.pos.column + this.length) {\n            this.showOtherMarkers();\n            this._emit(\"cursorEnter\", event);\n        } else {\n            this.hideOtherMarkers();\n            this._emit(\"cursorLeave\", event);\n        }\n    };\n    \n    /**\n     * PlaceHolder.detach()\n     * \n     * TODO\n     *\n     **/    \n    this.detach = function() {\n        this.session.removeMarker(this.pos && this.pos.markerId);\n        this.hideOtherMarkers();\n        this.doc.off(\"change\", this.$onUpdate);\n        this.session.selection.off(\"changeCursor\", this.$onCursorChange);\n        this.session.setUndoSelect(true);\n        this.session = null;\n    };\n    \n    /**\n     * PlaceHolder.cancel()\n     * \n     * TODO\n     *\n     **/\n    this.cancel = function() {\n        if (this.$undoStackDepth === -1)\n            return;\n        var undoManager = this.session.getUndoManager();\n        var undosRequired = (undoManager.$undoStack || undoManager.$undostack).length - this.$undoStackDepth;\n        for (var i = 0; i < undosRequired; i++) {\n            undoManager.undo(this.session, true);\n        }\n        if (this.selectionBefore)\n            this.session.selection.fromJSON(this.selectionBefore);\n    };\n}).call(PlaceHolder.prototype);\n\n\nexports.PlaceHolder = PlaceHolder;\n","\"use strict\";\nvar comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n/**\n * This object is used in various places to indicate a region within the editor. To better visualize how this works, imagine a rectangle. Each quadrant of the rectangle is analogous to a range, as ranges contain a starting row and starting column, and an ending row, and ending column.\n * @class Range\n **/\n\n/**\n * Creates a new `Range` object with the given starting and ending rows and columns.\n * @param {Number} startRow The starting row\n * @param {Number} startColumn The starting column\n * @param {Number} endRow The ending row\n * @param {Number} endColumn The ending column\n * @constructor\n **/\nvar Range = function(startRow, startColumn, endRow, endColumn) {\n    this.start = {\n        row: startRow,\n        column: startColumn\n    };\n\n    this.end = {\n        row: endRow,\n        column: endColumn\n    };\n};\n\n(function() {\n    /**\n     * Returns `true` if and only if the starting row and column, and ending row and column, are equivalent to those given by `range`.\n     * @param {Range} range A range to check against\n     * @return {Boolean}\n     **/\n    this.isEqual = function(range) {\n        return this.start.row === range.start.row &&\n            this.end.row === range.end.row &&\n            this.start.column === range.start.column &&\n            this.end.column === range.end.column;\n    };\n\n    /**\n     * Returns a string containing the range's row and column information, given like this:\n     * ```\n     *    [start.row/start.column] -> [end.row/end.column]\n     * ```\n     * @return {String}\n     **/\n    this.toString = function() {\n        return (\"Range: [\" + this.start.row + \"/\" + this.start.column +\n            \"] -> [\" + this.end.row + \"/\" + this.end.column + \"]\");\n    };\n\n    /**\n     * Returns `true` if the `row` and `column` provided are within the given range. This can better be expressed as returning `true` if:\n     * ```javascript\n     *    this.start.row <= row <= this.end.row &&\n     *    this.start.column <= column <= this.end.column\n     * ```\n     * @param {Number} row A row to check for\n     * @param {Number} column A column to check for\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n\n    this.contains = function(row, column) {\n        return this.compare(row, column) == 0;\n    };\n\n    /**\n     * Compares `this` range (A) with another range (B).\n     * @param {Range} range A range to compare with\n     * @related [[Range.compare]]\n     * @returns {Number} This method returns one of the following numbers:\n     * * `-2`: (B) is in front of (A), and doesn't intersect with (A)\n     * * `-1`: (B) begins before (A) but ends inside of (A)\n     * * `0`: (B) is completely inside of (A) OR (A) is completely inside of (B)\n     * * `+1`: (B) begins inside of (A) but ends outside of (A)\n     * * `+2`: (B) is after (A) and doesn't intersect with (A)\n     * * `42`: FTW state: (B) ends in (A) but starts outside of (A)\n     **/\n    this.compareRange = function(range) {\n        var cmp,\n            end = range.end,\n            start = range.start;\n\n        cmp = this.compare(end.row, end.column);\n        if (cmp == 1) {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == 1) {\n                return 2;\n            } else if (cmp == 0) {\n                return 1;\n            } else {\n                return 0;\n            }\n        } else if (cmp == -1) {\n            return -2;\n        } else {\n            cmp = this.compare(start.row, start.column);\n            if (cmp == -1) {\n                return -1;\n            } else if (cmp == 1) {\n                return 42;\n            } else {\n                return 0;\n            }\n        }\n    };\n\n    /**\n     * Compares the row and column of `p` with the starting and ending [[Point]]'s of the calling range (by calling [[Range.compare]]).\n     * @param {Ace.Point} p A point to compare with\n     * @related [[Range.compare]]\n     * @returns {Number}\n     **/\n    this.comparePoint = function(p) {\n        return this.compare(p.row, p.column);\n    };\n\n    /**\n     * Checks the start and end [[Point]]'s of `range` and compares them to the calling range. Returns `true` if the `range` is contained within the caller's range.\n     * @param {Range} range A range to compare with\n     * @returns {Boolean}\n     * @related [[Range.comparePoint]]\n     **/\n    this.containsRange = function(range) {\n        return this.comparePoint(range.start) == 0 && this.comparePoint(range.end) == 0;\n    };\n\n    /**\n     * Returns `true` if passed in `range` intersects with the one calling this method.\n     * @param {Range} range A range to compare with\n     * @returns {Boolean}\n     **/\n    this.intersects = function(range) {\n        var cmp = this.compareRange(range);\n        return (cmp == -1 || cmp == 0 || cmp == 1);\n    };\n\n    /**\n     * Returns `true` if the caller's ending row is the same as `row`, and if the caller's ending column is the same as `column`.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     **/\n    this.isEnd = function(row, column) {\n        return this.end.row == row && this.end.column == column;\n    };\n\n    /**\n     * Returns `true` if the caller's starting row is the same as `row`, and if the caller's starting column is the same as `column`.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     **/\n    this.isStart = function(row, column) {\n        return this.start.row == row && this.start.column == column;\n    };\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number|Ace.Point} row A row to set\n     * @param {Number} column A column to set\n     *\n     **/\n    this.setStart = function(row, column) {\n        if (typeof row == \"object\") {\n            this.start.column = row.column;\n            this.start.row = row.row;\n        } else {\n            this.start.row = row;\n            this.start.column = column;\n        }\n    };\n\n    /**\n     * Sets the starting row and column for the range.\n     * @param {Number|Ace.Point} row A row to set\n     * @param {Number} column A column to set\n     *\n     **/\n    this.setEnd = function(row, column) {\n        if (typeof row == \"object\") {\n            this.end.column = row.column;\n            this.end.row = row.row;\n        } else {\n            this.end.row = row;\n            this.end.column = column;\n        }\n    };\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n    this.inside = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column) || this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's starting [[Point]].\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     **/\n    this.insideStart = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isEnd(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n     * Returns `true` if the `row` and `column` are within the given range's ending [[Point]].\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Boolean}\n     * @related [[Range.compare]]\n     *\n     **/\n    this.insideEnd = function(row, column) {\n        if (this.compare(row, column) == 0) {\n            if (this.isStart(row, column)) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if `row` is greater than the calling range\n     * * `-1` if `row` is less then the calling range\n     * * `0` otherwise\n     *\n     * If the starting row of the calling range is equal to `row`, and:\n     * * `column` is greater than or equal to the calling range's starting column, this returns `0`\n     * * Otherwise, it returns -1\n     *\n     * If the ending row of the calling range is equal to `row`, and:\n     * * `column` is less than or equal to the calling range's ending column, this returns `0`\n     * * Otherwise, it returns 1\n     **/\n    this.compare = function(row, column) {\n        if (!this.isMultiLine()) {\n            if (row === this.start.row) {\n                return column < this.start.column ? -1 : (column > this.end.column ? 1 : 0);\n            }\n        }\n\n        if (row < this.start.row)\n            return -1;\n\n        if (row > this.end.row)\n            return 1;\n\n        if (this.start.row === row)\n            return column >= this.start.column ? 0 : -1;\n\n        if (this.end.row === row)\n            return column <= this.end.column ? 0 : 1;\n\n        return 0;\n    };\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `-1` if calling range's starting column and calling range's starting row are equal `row` and `column`\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     **/\n    this.compareStart = function(row, column) {\n        if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n\n    /**\n     * Compares the `row` and `column` with the starting and ending [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if calling range's ending column and calling range's ending row are equal `row` and `column`.\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     */\n    this.compareEnd = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n\n    /**\n     * Compares the `row` and `column` with the start and end [[Point]]'s of the calling range.\n     * @param {Number} row A row to compare with\n     * @param {Number} column A column to compare with\n     * @returns {Number} This method returns one of the following numbers:\n     * * `1` if the ending row of the calling range is equal to `row`, and the ending column of the calling range is equal to `column`\n     * * `-1` if the starting row of the calling range is equal to `row`, and the starting column of the calling range is equal to `column`\n     * * Otherwise, it returns the value after calling [[Range.compare `compare()`]].\n     **/\n    this.compareInside = function(row, column) {\n        if (this.end.row == row && this.end.column == column) {\n            return 1;\n        } else if (this.start.row == row && this.start.column == column) {\n            return -1;\n        } else {\n            return this.compare(row, column);\n        }\n    };\n\n    /**\n     * Returns the part of the current `Range` that occurs within the boundaries of `firstRow` and `lastRow` as a new `Range` object.\n     * @param {Number} firstRow The starting row\n     * @param {Number} lastRow The ending row\n     * @returns {Range}\n    **/\n    this.clipRows = function(firstRow, lastRow) {\n        if (this.end.row > lastRow)\n            var end = {row: lastRow + 1, column: 0};\n        else if (this.end.row < firstRow)\n            var end = {row: firstRow, column: 0};\n\n        if (this.start.row > lastRow)\n            var start = {row: lastRow + 1, column: 0};\n        else if (this.start.row < firstRow)\n            var start = {row: firstRow, column: 0};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    /**\n     * Changes the `row` and `column` for the calling range for both the starting and ending [[Point]]'s.\n     * @param {Number} row A new row to extend to\n     * @param {Number} column A new column to extend to\n     * @returns {Range} The original range with the new row\n    **/\n    this.extend = function(row, column) {\n        var cmp = this.compare(row, column);\n\n        if (cmp == 0)\n            return this;\n        else if (cmp == -1)\n            var start = {row: row, column: column};\n        else\n            var end = {row: row, column: column};\n\n        return Range.fromPoints(start || this.start, end || this.end);\n    };\n\n    /**\n     * Returns `true` if the calling range is empty (starting [[Point]] == ending [[Point]]).\n     * @returns {Boolean}\n     **/\n    this.isEmpty = function() {\n        return (this.start.row === this.end.row && this.start.column === this.end.column);\n    };\n\n    /**\n     * Returns `true` if the range spans across multiple lines.\n     * @returns {Boolean}\n    **/\n    this.isMultiLine = function() {\n        return (this.start.row !== this.end.row);\n    };\n\n    /**\n     * Returns a duplicate of the calling range.\n     * @returns {Range}\n    **/\n    this.clone = function() {\n        return Range.fromPoints(this.start, this.end);\n    };\n\n    /**\n     * Returns a range containing the starting and ending rows of the original range, but with a column value of `0`.\n     * @returns {Range}\n    **/\n    this.collapseRows = function() {\n        if (this.end.column == 0)\n            return new Range(this.start.row, 0, Math.max(this.start.row, this.end.row-1), 0);\n        else\n            return new Range(this.start.row, 0, this.end.row, 0);\n    };\n\n    /**\n     * Given the current `Range`, this function converts those starting and ending [[Point]]'s into screen positions, and then returns a new `Range` object.\n     * @param {EditSession} session The `EditSession` to retrieve coordinates from\n     * @returns {Range}\n    **/\n    this.toScreenRange = function(session) {\n        var screenPosStart = session.documentToScreenPosition(this.start);\n        var screenPosEnd = session.documentToScreenPosition(this.end);\n\n        return new Range(\n            screenPosStart.row, screenPosStart.column,\n            screenPosEnd.row, screenPosEnd.column\n        );\n    };\n\n    /**\n     * Shift the calling range by `row` and `column` values.\n     * @param {Number} row\n     * @param {Number} column\n     * @experimental\n     */\n    this.moveBy = function(row, column) {\n        this.start.row += row;\n        this.start.column += column;\n        this.end.row += row;\n        this.end.column += column;\n    };\n\n}).call(Range.prototype);\n\n/**\n * Creates and returns a new `Range` based on the `start` [[Point]] and `end` [[Point]] of the given parameters.\n * @param {Point} start A starting point to use\n * @param {Point} end An ending point to use\n * @returns {Range}\n**/\nRange.fromPoints = function(start, end) {\n    return new Range(start.row, start.column, end.row, end.column);\n};\nRange.comparePoints = comparePoints;\n\n/**\n * Compares `p1` and `p2` [[Point]]'s, useful for sorting\n * @param {Ace.Point} p1\n * @param {Ace.Point} p2\n * @returns {Number}\n */\nRange.comparePoints = function(p1, p2) {\n    return p1.row - p2.row || p1.column - p2.column;\n};\n\n\nexports.Range = Range;\n","\"use strict\";\nvar Range = require(\"./range\").Range;\nvar comparePoints = Range.comparePoints;\n\nvar RangeList = function() {\n    this.ranges = [];\n    this.$bias = 1;\n};\n\n(function() {\n    this.comparePoints = comparePoints;\n\n    this.pointIndex = function(pos, excludeEdges, startIndex) {\n        var list = this.ranges;\n\n        for (var i = startIndex || 0; i < list.length; i++) {\n            var range = list[i];\n            var cmpEnd = comparePoints(pos, range.end);\n            if (cmpEnd > 0)\n                continue;\n            var cmpStart = comparePoints(pos, range.start);\n            if (cmpEnd === 0)\n                return excludeEdges && cmpStart !== 0 ? -i-2 : i;\n            if (cmpStart > 0 || (cmpStart === 0 && !excludeEdges))\n                return i;\n\n            return -i-1;\n        }\n        return -i - 1;\n    };\n\n    this.add = function(range) {\n        var excludeEdges = !range.isEmpty();\n        var startIndex = this.pointIndex(range.start, excludeEdges);\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n\n        var endIndex = this.pointIndex(range.end, excludeEdges, startIndex);\n\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n        else\n            endIndex++;\n        return this.ranges.splice(startIndex, endIndex - startIndex, range);\n    };\n\n    this.addList = function(list) {\n        var removed = [];\n        for (var i = list.length; i--; ) {\n            removed.push.apply(removed, this.add(list[i]));\n        }\n        return removed;\n    };\n\n    this.substractPoint = function(pos) {\n        var i = this.pointIndex(pos);\n\n        if (i >= 0)\n            return this.ranges.splice(i, 1);\n    };\n\n    // merge overlapping ranges\n    this.merge = function() {\n        var removed = [];\n        var list = this.ranges;\n        \n        list = list.sort(function(a, b) {\n            return comparePoints(a.start, b.start);\n        });\n        \n        var next = list[0], range;\n        for (var i = 1; i < list.length; i++) {\n            range = next;\n            next = list[i];\n            var cmp = comparePoints(range.end, next.start);\n            if (cmp < 0)\n                continue;\n\n            if (cmp == 0 && !range.isEmpty() && !next.isEmpty())\n                continue;\n\n            if (comparePoints(range.end, next.end) < 0) {\n                range.end.row = next.end.row;\n                range.end.column = next.end.column;\n            }\n\n            list.splice(i, 1);\n            removed.push(next);\n            next = range;\n            i--;\n        }\n        \n        this.ranges = list;\n\n        return removed;\n    };\n\n    this.contains = function(row, column) {\n        return this.pointIndex({row: row, column: column}) >= 0;\n    };\n\n    this.containsPoint = function(pos) {\n        return this.pointIndex(pos) >= 0;\n    };\n\n    this.rangeAtPoint = function(pos) {\n        var i = this.pointIndex(pos);\n        if (i >= 0)\n            return this.ranges[i];\n    };\n\n\n    this.clipRows = function(startRow, endRow) {\n        var list = this.ranges;\n        if (list[0].start.row > endRow || list[list.length - 1].start.row < startRow)\n            return [];\n\n        var startIndex = this.pointIndex({row: startRow, column: 0});\n        if (startIndex < 0)\n            startIndex = -startIndex - 1;\n        var endIndex = this.pointIndex({row: endRow, column: 0}, startIndex);\n        if (endIndex < 0)\n            endIndex = -endIndex - 1;\n\n        var clipped = [];\n        for (var i = startIndex; i < endIndex; i++) {\n            clipped.push(list[i]);\n        }\n        return clipped;\n    };\n\n    this.removeAll = function() {\n        return this.ranges.splice(0, this.ranges.length);\n    };\n\n    this.attach = function(session) {\n        if (this.session)\n            this.detach();\n\n        this.session = session;\n        this.onChange = this.$onChange.bind(this);\n\n        this.session.on('change', this.onChange);\n    };\n\n    this.detach = function() {\n        if (!this.session)\n            return;\n        this.session.removeListener('change', this.onChange);\n        this.session = null;\n    };\n\n    this.$onChange = function(delta) {\n        var start = delta.start;\n        var end = delta.end;\n        var startRow = start.row;\n        var endRow = end.row;\n        var ranges = this.ranges;\n        for (var i = 0, n = ranges.length; i < n; i++) {\n            var r = ranges[i];\n            if (r.end.row >= startRow)\n                break;\n        }\n        \n        if (delta.action == \"insert\") {\n            var lineDif = endRow - startRow;\n            var colDiff = -start.column + end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                if (r.start.row > startRow)\n                    break;\n    \n                if (r.start.row == startRow && r.start.column >= start.column) {\n                    if (r.start.column == start.column && this.$bias <= 0) {\n                        // do nothing\n                    } else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                if (r.end.row == startRow && r.end.column >= start.column) {\n                    if (r.end.column == start.column && this.$bias < 0) {\n                        continue;\n                    }\n                    // special handling for the case when two ranges share an edge\n                    if (r.end.column == start.column && colDiff > 0 && i < n - 1) {\n                        if (r.end.column > r.start.column && r.end.column == ranges[i+1].start.column)\n                            r.end.column -= colDiff;\n                    }\n                    r.end.column += colDiff;\n                    r.end.row += lineDif;\n                }\n            }\n        } else {\n            var lineDif = startRow - endRow;\n            var colDiff = start.column - end.column;\n            for (; i < n; i++) {\n                var r = ranges[i];\n                \n                if (r.start.row > endRow)\n                    break;\n                    \n                if (r.end.row < endRow\n                    && (\n                        startRow < r.end.row \n                        || startRow == r.end.row && start.column < r.end.column\n                    )\n                ) {\n                    r.end.row = startRow;\n                    r.end.column = start.column;\n                }\n                else if (r.end.row == endRow) {\n                    if (r.end.column <= end.column) {\n                        if (lineDif || r.end.column > start.column) {\n                            r.end.column = start.column;\n                            r.end.row = start.row;\n                        }\n                    }\n                    else {\n                        r.end.column += colDiff;\n                        r.end.row += lineDif;\n                    }\n                }\n                else if (r.end.row > endRow) {\n                    r.end.row += lineDif;\n                }\n                \n                if (r.start.row < endRow\n                    && (\n                        startRow < r.start.row \n                        || startRow == r.start.row && start.column < r.start.column\n                    )\n                ) {\n                    r.start.row = startRow;\n                    r.start.column = start.column;\n                }\n                else if (r.start.row == endRow) {\n                    if (r.start.column <= end.column) {\n                        if (lineDif || r.start.column > start.column) {\n                            r.start.column = start.column;\n                            r.start.row = start.row;\n                        }\n                    }\n                    else {\n                        r.start.column += colDiff;\n                        r.start.row += lineDif;\n                    }\n                }\n                else if (r.start.row > endRow) {\n                    r.start.row += lineDif;\n                }\n            }\n        }\n\n        if (lineDif != 0 && i < n) {\n            for (; i < n; i++) {\n                var r = ranges[i];\n                r.start.row += lineDif;\n                r.end.row += lineDif;\n            }\n        }\n    };\n\n}).call(RangeList.prototype);\n\nexports.RangeList = RangeList;\n","\"use strict\";\n\nvar event = require(\"./lib/event\");\n\n/** \n *\n *\n * Batches changes (that force something to be redrawn) in the background.\n * @class RenderLoop\n **/\n\n\nvar RenderLoop = function(onRender, win) {\n    this.onRender = onRender;\n    this.pending = false;\n    this.changes = 0;\n    this.$recursionLimit = 2;\n    this.window = win || window;\n    var _self = this;\n    this._flush = function(ts) {\n        _self.pending = false;\n        var changes = _self.changes;\n\n        if (changes) {\n            event.blockIdle(100);\n            _self.changes = 0;\n            _self.onRender(changes);\n        }\n        \n        if (_self.changes) {\n            if (_self.$recursionLimit-- < 0) return;\n            _self.schedule();\n        } else {\n            _self.$recursionLimit = 2;\n        }\n    };\n};\n\n(function() {\n\n    this.schedule = function(change) {\n        this.changes = this.changes | change;\n        if (this.changes && !this.pending) {\n            event.nextFrame(this._flush);\n            this.pending = true;\n        }\n    };\n\n    this.clear = function(change) {\n        var changes = this.changes;\n        this.changes = 0;\n        return changes;\n    };\n\n}).call(RenderLoop.prototype);\n\nexports.RenderLoop = RenderLoop;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n// on ie maximal element height is smaller than what we get from 4-5K line document\n// so scrollbar doesn't work, as a workaround we do not set height higher than MAX_SCROLL_H\n// and rescale scrolltop\nvar MAX_SCROLL_H = 0x8000;\n\n/**\n * An abstract class representing a native scrollbar control.\n * @class ScrollBar\n **/\n\n/**\n * Creates a new `ScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n *\n * @constructor\n **/\nvar ScrollBar = function(parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_scrollbar ace_scrollbar\" + this.classSuffix;\n\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"ace_scrollbar-inner\";\n    // on safari scrollbar is not shown for empty elements\n    this.inner.textContent = \"\\xa0\";\n    this.element.appendChild(this.inner);\n\n    parent.appendChild(this.element);\n\n    this.setVisible(false);\n    this.skipEvent = false;\n\n    event.addListener(this.element, \"scroll\", this.onScroll.bind(this));\n    event.addListener(this.element, \"mousedown\", event.preventDefault);\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n\n    this.setVisible = function(isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n}).call(ScrollBar.prototype);\n\n/**\n * Represents a vertical scroll bar.\n * @class VScrollBar\n **/\n\n/**\n * Creates a new `VScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n * @param {Object} renderer An editor renderer\n *\n * @constructor\n **/\nvar VScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n\n    // in OSX lion the scrollbars appear to have no width. In this case resize the\n    // element to show the scrollbar but still pretend that the scrollbar has a width\n    // of 0px\n    // in Firefox 6+ scrollbar is hidden if element has the same width as scrollbar\n    // make element a little bit wider to retain scrollbar when page is zoomed \n    renderer.$scrollbarWidth = \n    this.width = dom.scrollbarWidth(parent.ownerDocument);\n    this.inner.style.width =\n    this.element.style.width = (this.width || 15) + 5 + \"px\";\n    this.$minWidth = 0;\n};\n\noop.inherits(VScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-v';\n\n    /**\n     * Emitted when the scroll bar, well, scrolls.\n     * @event scroll\n     * @param {Object} e Contains one property, `\"data\"`, which indicates the current scroll top position\n     **/\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollTop = this.element.scrollTop;\n            if (this.coeff != 1) {\n                var h = this.element.clientHeight / this.scrollHeight;\n                this.scrollTop = this.scrollTop * (1 - h) / (this.coeff - h);\n            }\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n        this.skipEvent = false;\n    };\n\n    /**\n     * Returns the width of the scroll bar.\n     * @returns {Number}\n     **/\n    this.getWidth = function() {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n\n    /**\n     * Sets the height of the scroll bar, in pixels.\n     * @param {Number} height The new height\n     **/\n    this.setHeight = function(height) {\n        this.element.style.height = height + \"px\";\n    };\n\n    /**\n     * Sets the inner height of the scroll bar, in pixels.\n     * @param {Number} height The new inner height\n     * @deprecated Use setScrollHeight instead\n     **/\n    this.setInnerHeight = \n    /**\n     * Sets the scroll height of the scroll bar, in pixels.\n     * @param {Number} height The new scroll height\n     **/\n    this.setScrollHeight = function(height) {\n        this.scrollHeight = height;\n        if (height > MAX_SCROLL_H) {\n            this.coeff = MAX_SCROLL_H / height;\n            height = MAX_SCROLL_H;\n        } else if (this.coeff != 1) {\n            this.coeff = 1;\n        }\n        this.inner.style.height = height + \"px\";\n    };\n\n    /**\n     * Sets the scroll top of the scroll bar.\n     * @param {Number} scrollTop The new scroll top\n     **/\n    this.setScrollTop = function(scrollTop) {\n        // on chrome 17+ for small zoom levels after calling this function\n        // this.element.scrollTop != scrollTop which makes page to scroll up.\n        if (this.scrollTop != scrollTop) {\n            this.skipEvent = true;\n            this.scrollTop = scrollTop;\n            this.element.scrollTop = scrollTop * this.coeff;\n        }\n    };\n\n}).call(VScrollBar.prototype);\n\n/**\n * Represents a horisontal scroll bar.\n * @class HScrollBar\n **/\n\n/**\n * Creates a new `HScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n * @param {Object} renderer An editor renderer\n *\n * @constructor\n **/\nvar HScrollBar = function(parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n\n    // in OSX lion the scrollbars appear to have no width. In this case resize the\n    // element to show the scrollbar but still pretend that the scrollbar has a width\n    // of 0px\n    // in Firefox 6+ scrollbar is hidden if element has the same width as scrollbar\n    // make element a little bit wider to retain scrollbar when page is zoomed \n    this.height = renderer.$scrollbarWidth;\n    this.inner.style.height =\n    this.element.style.height = (this.height || 15) + 5 + \"px\";\n};\n\noop.inherits(HScrollBar, ScrollBar);\n\n(function() {\n\n    this.classSuffix = '-h';\n\n    /**\n     * Emitted when the scroll bar, well, scrolls.\n     * @event scroll\n     * @param {Object} e Contains one property, `\"data\"`, which indicates the current scroll left position\n     **/\n    this.onScroll = function() {\n        if (!this.skipEvent) {\n            this.scrollLeft = this.element.scrollLeft;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n        this.skipEvent = false;\n    };\n\n    /**\n     * Returns the height of the scroll bar.\n     * @returns {Number}\n     **/\n    this.getHeight = function() {\n        return this.isVisible ? this.height : 0;\n    };\n\n    /**\n     * Sets the width of the scroll bar, in pixels.\n     * @param {Number} width The new width\n     **/\n    this.setWidth = function(width) {\n        this.element.style.width = width + \"px\";\n    };\n\n    /**\n     * Sets the inner width of the scroll bar, in pixels.\n     * @param {Number} width The new inner width\n     * @deprecated Use setScrollWidth instead\n     **/\n    this.setInnerWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n\n    /**\n     * Sets the scroll width of the scroll bar, in pixels.\n     * @param {Number} width The new scroll width\n     **/\n    this.setScrollWidth = function(width) {\n        this.inner.style.width = width + \"px\";\n    };\n\n    /**\n     * Sets the scroll left of the scroll bar.\n     * @param {Number} scrollLeft The new scroll left\n     **/\n    this.setScrollLeft = function(scrollLeft) {\n        // on chrome 17+ for small zoom levels after calling this function\n        // this.element.scrollTop != scrollTop which makes page to scroll up.\n        if (this.scrollLeft != scrollLeft) {\n            this.skipEvent = true;\n            this.scrollLeft = this.element.scrollLeft = scrollLeft;\n        }\n    };\n\n}).call(HScrollBar.prototype);\n\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar event = require(\"./lib/event\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\n\ndom.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{\n  position: absolute;\n  background: rgba(128, 128, 128, 0.6);\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  border: 1px solid #bbb;\n  border-radius: 2px;\n  z-index: 8;\n}\n.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {\n  position: absolute;\n  z-index: 6;\n  background: none;\n  overflow: hidden!important;\n}\n.ace_editor>.ace_sb-v {\n  z-index: 6;\n  right: 0;\n  top: 0;\n  width: 12px;\n}\n.ace_editor>.ace_sb-v div {\n  z-index: 8;\n  right: 0;\n  width: 100%;\n}\n.ace_editor>.ace_sb-h {\n  bottom: 0;\n  left: 0;\n  height: 12px;\n}\n.ace_editor>.ace_sb-h div {\n  bottom: 0;\n  height: 100%;\n}\n.ace_editor>.ace_sb_grabbed {\n  z-index: 8;\n  background: #000;\n}`, \"ace_scrollbar.css\", false);\n\n/**\n * An abstract class representing a native scrollbar control.\n * @class ScrollBar\n **/\n\n/**\n * Creates a new `ScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n *\n * @constructor\n **/\n\nvar ScrollBar = function (parent) {\n    this.element = dom.createElement(\"div\");\n    this.element.className = \"ace_sb\" + this.classSuffix;\n    this.inner = dom.createElement(\"div\");\n    this.inner.className = \"\";\n    this.element.appendChild(this.inner);\n    this.VScrollWidth = 12;\n    this.HScrollHeight = 12;\n\n    parent.appendChild(this.element);\n    this.setVisible(false);\n    this.skipEvent = false;\n\n    event.addMultiMouseDownListener(this.element, [500, 300, 300], this, \"onMouseDown\");\n};\n\n(function () {\n    oop.implement(this, EventEmitter);\n\n    this.setVisible = function (isVisible) {\n        this.element.style.display = isVisible ? \"\" : \"none\";\n        this.isVisible = isVisible;\n        this.coeff = 1;\n    };\n\n\n}).call(ScrollBar.prototype);\n\n/**\n * Represents a vertical scroll bar.\n * @class VScrollBar\n **/\n\n/**\n * Creates a new `VScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n * @param {Object} renderer An editor renderer\n *\n * @constructor\n **/\n\nvar VScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollTop = 0;\n    this.scrollHeight = 0;\n    this.parent = parent;\n    this.width = this.VScrollWidth;\n    this.renderer = renderer;\n    this.inner.style.width = this.element.style.width = (this.width || 15) + \"px\";\n    this.$minWidth = 0;\n};\n\noop.inherits(VScrollBar, ScrollBar);\n\n(function () {\n    this.classSuffix = '-v';\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Emitted when the scroll thumb dragged or scrollbar canvas clicked.\n     **/\n    this.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\") return;\n\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageY = e.clientY;\n\n            var onMouseMove = function (e) {\n                mousePageY = e.clientY;\n            };\n\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startY = e.clientY;\n            var startTop = this.thumbTop;\n\n            var onScrollInterval = function () {\n                if (mousePageY === undefined) return;\n                var scrollTop = self.scrollTopFromThumbTop(startTop + mousePageY - startY);\n                if (scrollTop === self.scrollTop) return;\n                self._emit(\"scroll\", {data: scrollTop});\n            };\n\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n        var top = e.clientY - this.element.getBoundingClientRect().top - this.thumbHeight / 2;\n        this._emit(\"scroll\", {data: this.scrollTopFromThumbTop(top)});\n        return event.preventDefault(e);\n    };\n\n    this.getHeight = function () {\n        return this.height;\n    };\n\n    /**\n     * Returns new top for scroll thumb\n     * @param {Number}thumbTop\n     * @returns {Number}\n     **/\n    this.scrollTopFromThumbTop = function (thumbTop) {\n        var scrollTop = thumbTop * (this.pageHeight - this.viewHeight) / (this.slideHeight - this.thumbHeight);\n        scrollTop = scrollTop >> 0;\n        if (scrollTop < 0) {\n            scrollTop = 0;\n        }\n        else if (scrollTop > this.pageHeight - this.viewHeight) {\n            scrollTop = this.pageHeight - this.viewHeight;\n        }\n        return scrollTop;\n    };\n\n    /**\n     * Returns the width of the scroll bar.\n     * @returns {Number}\n     **/\n    this.getWidth = function () {\n        return Math.max(this.isVisible ? this.width : 0, this.$minWidth || 0);\n    };\n\n    /**\n     * Sets the height of the scroll bar, in pixels.\n     * @param {Number} height The new height\n     **/\n    this.setHeight = function (height) {\n        this.height = Math.max(0, height);\n        this.slideHeight = this.height;\n        this.viewHeight = this.height;\n\n        this.setScrollHeight(this.pageHeight, true);\n    };\n\n    /**\n     * Sets the inner and scroll height of the scroll bar, in pixels.\n     * @param {Number} height The new inner height\n     *\n     * @param {boolean} force Forcely update height\n     **/\n    this.setInnerHeight = this.setScrollHeight = function (height, force) {\n        if (this.pageHeight === height && !force) return;\n        this.pageHeight = height;\n        this.thumbHeight = this.slideHeight * this.viewHeight / this.pageHeight;\n\n        if (this.thumbHeight > this.slideHeight) this.thumbHeight = this.slideHeight;\n        if (this.thumbHeight < 15) this.thumbHeight = 15;\n\n        this.inner.style.height = this.thumbHeight + \"px\";\n\n        if (this.scrollTop > (this.pageHeight - this.viewHeight)) {\n            this.scrollTop = (this.pageHeight - this.viewHeight);\n            if (this.scrollTop < 0) this.scrollTop = 0;\n            this._emit(\"scroll\", {data: this.scrollTop});\n        }\n    };\n\n    /**\n     * Sets the scroll top of the scroll bar.\n     * @param {Number} scrollTop The new scroll top\n     **/\n    this.setScrollTop = function (scrollTop) {\n        this.scrollTop = scrollTop;\n        if (scrollTop < 0) scrollTop = 0;\n        this.thumbTop = scrollTop * (this.slideHeight - this.thumbHeight) / (this.pageHeight - this.viewHeight);\n        this.inner.style.top = this.thumbTop + \"px\";\n    };\n\n}).call(VScrollBar.prototype);\n\n/**\n * Represents a horizontal scroll bar.\n * @class HScrollBar\n **/\n\n/**\n * Creates a new `HScrollBar`. `parent` is the owner of the scroll bar.\n * @param {Element} parent A DOM element\n * @param {Object} renderer An editor renderer\n *\n * @constructor\n **/\nvar HScrollBar = function (parent, renderer) {\n    ScrollBar.call(this, parent);\n    this.scrollLeft = 0;\n    this.scrollWidth = 0;\n    this.height = this.HScrollHeight;\n    this.inner.style.height = this.element.style.height = (this.height || 12) + \"px\";\n    this.renderer = renderer;\n};\n\noop.inherits(HScrollBar, ScrollBar);\n\n(function () {\n\n    this.classSuffix = '-h';\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Emitted when the scroll thumb dragged or scrollbar canvas clicked.\n     **/\n    this.onMouseDown = function (eType, e) {\n        if (eType !== \"mousedown\") return;\n\n        if (event.getButton(e) !== 0 || e.detail === 2) {\n            return;\n        }\n\n\n        if (e.target === this.inner) {\n            var self = this;\n            var mousePageX = e.clientX;\n\n            var onMouseMove = function (e) {\n                mousePageX = e.clientX;\n            };\n\n            var onMouseUp = function () {\n                clearInterval(timerId);\n            };\n            var startX = e.clientX;\n            var startLeft = this.thumbLeft;\n\n            var onScrollInterval = function () {\n                if (mousePageX === undefined) return;\n                var scrollLeft = self.scrollLeftFromThumbLeft(startLeft + mousePageX - startX);\n                if (scrollLeft === self.scrollLeft) return;\n                self._emit(\"scroll\", {data: scrollLeft});\n            };\n\n            event.capture(this.inner, onMouseMove, onMouseUp);\n            var timerId = setInterval(onScrollInterval, 20);\n            return event.preventDefault(e);\n        }\n\n        var left = e.clientX - this.element.getBoundingClientRect().left - this.thumbWidth / 2;\n        this._emit(\"scroll\", {data: this.scrollLeftFromThumbLeft(left)});\n        return event.preventDefault(e);\n    };\n\n    /**\n     * Returns the height of the scroll bar.\n     * @returns {Number}\n     **/\n    this.getHeight = function () {\n        return this.isVisible ? this.height : 0;\n    };\n\n    /**\n     * Returns new left for scroll thumb\n     * @param {Number} thumbLeft\n     * @returns {Number}\n     **/\n    this.scrollLeftFromThumbLeft = function (thumbLeft) {\n        var scrollLeft = thumbLeft * (this.pageWidth - this.viewWidth) / (this.slideWidth - this.thumbWidth);\n        scrollLeft = scrollLeft >> 0;\n        if (scrollLeft < 0) {\n            scrollLeft = 0;\n        }\n        else if (scrollLeft > this.pageWidth - this.viewWidth) {\n            scrollLeft = this.pageWidth - this.viewWidth;\n        }\n        return scrollLeft;\n    };\n\n    /**\n     * Sets the width of the scroll bar, in pixels.\n     * @param {Number} width The new width\n     **/\n    this.setWidth = function (width) {\n        this.width = Math.max(0, width);\n        this.element.style.width = this.width + \"px\";\n        this.slideWidth = this.width;\n        this.viewWidth = this.width;\n\n        this.setScrollWidth(this.pageWidth, true);\n    };\n\n    /**\n     * Sets the inner and scroll width of the scroll bar, in pixels.\n     * @param {Number} width The new inner width\n     * @param {boolean} force Forcely update width\n     **/\n    this.setInnerWidth = this.setScrollWidth = function (width, force) {\n        if (this.pageWidth === width && !force) return;\n        this.pageWidth = width;\n        this.thumbWidth = this.slideWidth * this.viewWidth / this.pageWidth;\n\n        if (this.thumbWidth > this.slideWidth) this.thumbWidth = this.slideWidth;\n        if (this.thumbWidth < 15) this.thumbWidth = 15;\n        this.inner.style.width = this.thumbWidth + \"px\";\n\n        if (this.scrollLeft > (this.pageWidth - this.viewWidth)) {\n            this.scrollLeft = (this.pageWidth - this.viewWidth);\n            if (this.scrollLeft < 0) this.scrollLeft = 0;\n            this._emit(\"scroll\", {data: this.scrollLeft});\n        }\n    };\n\n    /**\n     * Sets the scroll left of the scroll bar.\n     * @param {Number} scrollLeft The new scroll left\n     **/\n    this.setScrollLeft = function (scrollLeft) {\n        this.scrollLeft = scrollLeft;\n        if (scrollLeft < 0) scrollLeft = 0;\n        this.thumbLeft = scrollLeft * (this.slideWidth - this.thumbWidth) / (this.pageWidth - this.viewWidth);\n        this.inner.style.left = (this.thumbLeft) + \"px\";\n    };\n\n}).call(HScrollBar.prototype);\n\nexports.ScrollBar = VScrollBar; // backward compatibility\nexports.ScrollBarV = VScrollBar; // backward compatibility\nexports.ScrollBarH = HScrollBar; // backward compatibility\n\nexports.VScrollBar = VScrollBar;\nexports.HScrollBar = HScrollBar;\n","\"use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\n\n/**\n * @class Search\n *\n * A class designed to handle all sorts of text searches within a [[Document `Document`]].\n *\n **/\n\n/**\n * \n *\n * Creates a new `Search` object. The following search options are available:\n *\n * - `needle`: The string or regular expression you're looking for\n * - `backwards`: Whether to search backwards from where cursor currently is. Defaults to `false`.\n * - `wrap`: Whether to wrap the search back to the beginning when it hits the end. Defaults to `false`.\n * - `caseSensitive`: Whether the search ought to be case-sensitive. Defaults to `false`.\n * - `wholeWord`: Whether the search matches only on whole words. Defaults to `false`.\n * - `range`: The [[Range]] to search within. Set this to `null` for the whole document\n * - `regExp`: Whether the search is a regular expression or not. Defaults to `false`.\n * - `start`: The starting [[Range]] or cursor position to begin the search\n * - `skipCurrent`: Whether or not to include the current line in the search. Default to `false`.\n * \n * @constructor\n **/\n\nvar Search = function() {\n    this.$options = {};\n};\n\n(function() {\n    /**\n     * Sets the search options via the `options` parameter.\n     * @param {Object} options An object containing all the new search properties\n     *\n     * \n     * @returns {Search}\n     * @chainable\n    **/\n    this.set = function(options) {\n        oop.mixin(this.$options, options);\n        return this;\n    };\n\n    /**\n     * [Returns an object containing all the search options.]{: #Search.getOptions}\n     * @returns {Object}\n    **/\n    this.getOptions = function() {\n        return lang.copyObject(this.$options);\n    };\n    \n    /**\n     * Sets the search options via the `options` parameter.\n     * @param {Object} An object containing all the search propertie\n     * @related Search.set\n    **/\n    this.setOptions = function(options) {\n        this.$options = options;\n    };\n    /**\n     * Searches for `options.needle`. If found, this method returns the [[Range `Range`]] where the text first occurs. If `options.backwards` is `true`, the search goes backwards in the session.\n     * @param {EditSession} session The session to search with\n     *\n     * \n     * @returns {Range}\n    **/\n    this.find = function(session) {\n        var options = this.$options;\n        var iterator = this.$matchIterator(session, options);\n        if (!iterator)\n            return false;\n\n        var firstRange = null;\n        iterator.forEach(function(sr, sc, er, ec) {\n            firstRange = new Range(sr, sc, er, ec);\n            if (sc == ec && options.start && options.start.start\n                && options.skipCurrent != false && firstRange.isEqual(options.start)\n            ) {\n                firstRange = null;\n                return false;\n            }\n            \n            return true;\n        });\n\n        return firstRange;\n    };\n\n    /**\n     * Searches for all occurrances `options.needle`. If found, this method returns an array of [[Range `Range`s]] where the text first occurs. If `options.backwards` is `true`, the search goes backwards in the session.\n     * @param {EditSession} session The session to search with\n     *\n     * \n     * @returns {[Range]}\n    **/\n    this.findAll = function(session) {\n        var options = this.$options;\n        if (!options.needle)\n            return [];\n        this.$assembleRegExp(options);\n\n        var range = options.range;\n        var lines = range\n            ? session.getLines(range.start.row, range.end.row)\n            : session.doc.getAllLines();\n\n        var ranges = [];\n        var re = options.re;\n        if (options.$isMultiLine) {\n            var len = re.length;\n            var maxRow = lines.length - len;\n            var prevRange;\n            outer: for (var row = re.offset || 0; row <= maxRow; row++) {\n                for (var j = 0; j < len; j++)\n                    if (lines[row + j].search(re[j]) == -1)\n                        continue outer;\n                \n                var startLine = lines[row];\n                var line = lines[row + len - 1];\n                var startIndex = startLine.length - startLine.match(re[0])[0].length;\n                var endIndex = line.match(re[len - 1])[0].length;\n                \n                if (prevRange && prevRange.end.row === row &&\n                    prevRange.end.column > startIndex\n                ) {\n                    continue;\n                }\n                ranges.push(prevRange = new Range(\n                    row, startIndex, row + len - 1, endIndex\n                ));\n                if (len > 2)\n                    row = row + len - 2;\n            }\n        } else {\n            for (var i = 0; i < lines.length; i++) {\n                var matches = lang.getMatchOffsets(lines[i], re);\n                for (var j = 0; j < matches.length; j++) {\n                    var match = matches[j];\n                    ranges.push(new Range(i, match.offset, i, match.offset + match.length));\n                }\n            }\n        }\n\n        if (range) {\n            var startColumn = range.start.column;\n            var endColumn = range.end.column;\n            var i = 0, j = ranges.length - 1;\n            while (i < j && ranges[i].start.column < startColumn && ranges[i].start.row == 0)\n                i++;\n\n            var endRow = range.end.row - range.start.row;\n            while (i < j && ranges[j].end.column > endColumn && ranges[j].end.row == endRow)\n                j--;\n            \n            ranges = ranges.slice(i, j + 1);\n            for (i = 0, j = ranges.length; i < j; i++) {\n                ranges[i].start.row += range.start.row;\n                ranges[i].end.row += range.start.row;\n            }\n        }\n\n        return ranges;\n    };\n\n    /**\n     * Searches for `options.needle` in `input`, and, if found, replaces it with `replacement`.\n     * @param {String} input The text to search in\n     * @param {String} replacement The replacing text\n     * + (String): If `options.regExp` is `true`, this function returns `input` with the replacement already made. Otherwise, this function just returns `replacement`.<br/>\n     * If `options.needle` was not found, this function returns `null`.\n     *\n     * \n     * @returns {String}\n    **/\n    this.replace = function(input, replacement) {\n        var options = this.$options;\n\n        var re = this.$assembleRegExp(options);\n        if (options.$isMultiLine)\n            return replacement;\n\n        if (!re)\n            return;\n\n        var match = re.exec(input);\n        if (!match || match[0].length != input.length)\n            return null;\n        \n        replacement = input.replace(re, replacement);\n        if (options.preserveCase) {\n            replacement = replacement.split(\"\");\n            for (var i = Math.min(input.length, input.length); i--; ) {\n                var ch = input[i];\n                if (ch && ch.toLowerCase() != ch)\n                    replacement[i] = replacement[i].toUpperCase();\n                else\n                    replacement[i] = replacement[i].toLowerCase();\n            }\n            replacement = replacement.join(\"\");\n        }\n        \n        return replacement;\n    };\n\n    this.$assembleRegExp = function(options, $disableFakeMultiline) {\n        if (options.needle instanceof RegExp)\n            return options.re = options.needle;\n\n        var needle = options.needle;\n\n        if (!options.needle)\n            return options.re = false;\n\n        if (!options.regExp)\n            needle = lang.escapeRegExp(needle);\n\n        if (options.wholeWord)\n            needle = addWordBoundary(needle, options);\n\n        var modifier = options.caseSensitive ? \"gm\" : \"gmi\";\n\n        options.$isMultiLine = !$disableFakeMultiline && /[\\n\\r]/.test(needle);\n        if (options.$isMultiLine)\n            return options.re = this.$assembleMultilineRegExp(needle, modifier);\n\n        try {\n            var re = new RegExp(needle, modifier);\n        } catch(e) {\n            re = false;\n        }\n        return options.re = re;\n    };\n\n    this.$assembleMultilineRegExp = function(needle, modifier) {\n        var parts = needle.replace(/\\r\\n|\\r|\\n/g, \"$\\n^\").split(\"\\n\");\n        var re = [];\n        for (var i = 0; i < parts.length; i++) try {\n            re.push(new RegExp(parts[i], modifier));\n        } catch(e) {\n            return false;\n        }\n        return re;\n    };\n\n    this.$matchIterator = function(session, options) {\n        var re = this.$assembleRegExp(options);\n        if (!re)\n            return false;\n        var backwards = options.backwards == true;\n        var skipCurrent = options.skipCurrent != false;\n\n        var range = options.range;\n        var start = options.start;\n        if (!start)\n            start = range ? range[backwards ? \"end\" : \"start\"] : session.selection.getRange();\n         \n        if (start.start)\n            start = start[skipCurrent != backwards ? \"end\" : \"start\"];\n\n        var firstRow = range ? range.start.row : 0;\n        var lastRow = range ? range.end.row : session.getLength() - 1;\n        \n        if (backwards) {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row--; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = lastRow, firstRow = start.row; row >= firstRow; row--)\n                    if (forEachInLine(row, Number.MAX_VALUE, callback))\n                        return;\n            };\n        }\n        else {\n            var forEach = function(callback) {\n                var row = start.row;\n                if (forEachInLine(row, start.column, callback))\n                    return;\n                for (row = row + 1; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n                if (options.wrap == false)\n                    return;\n                for (row = firstRow, lastRow = start.row; row <= lastRow; row++)\n                    if (forEachInLine(row, 0, callback))\n                        return;\n            };\n        }\n        \n        if (options.$isMultiLine) {\n            var len = re.length;\n            var forEachInLine = function(row, offset, callback) {\n                var startRow = backwards ? row - len + 1 : row;\n                if (startRow < 0 || startRow + len > session.getLength()) return;\n                var line = session.getLine(startRow);\n                var startIndex = line.search(re[0]);\n                if (!backwards && startIndex < offset || startIndex === -1) return;\n                for (var i = 1; i < len; i++) {\n                    line = session.getLine(startRow + i);\n                    if (line.search(re[i]) == -1)\n                        return;\n                }\n                var endIndex = line.match(re[len - 1])[0].length;\n                if (backwards && endIndex > offset) return;\n                if (callback(startRow, startIndex, startRow + len - 1, endIndex))\n                    return true;\n            };\n        }\n        else if (backwards) {\n            var forEachInLine = function(row, endIndex, callback) {\n                var line = session.getLine(row);\n                var matches = [];\n                var m, last = 0;\n                re.lastIndex = 0;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (!length) {\n                        if (last >= line.length) break;\n                        re.lastIndex = last += 1;\n                    }\n                    if (m.index + length > endIndex)\n                        break;\n                    matches.push(m.index, length);\n                }\n                for (var i = matches.length - 1; i >= 0; i -= 2) {\n                    var column = matches[i - 1];\n                    var length = matches[i];\n                    if (callback(row, column, row, column + length))\n                        return true;\n                }\n            };\n        }\n        else {\n            var forEachInLine = function(row, startIndex, callback) {\n                var line = session.getLine(row);\n                var last;\n                var m;\n                re.lastIndex = startIndex;\n                while((m = re.exec(line))) {\n                    var length = m[0].length;\n                    last = m.index;\n                    if (callback(row, last, row,last + length))\n                        return true;\n                    if (!length) {\n                        re.lastIndex = last += 1;\n                        if (last >= line.length) return false;\n                    }\n                }\n            };\n        }\n        return {forEach: forEach};\n    };\n\n}).call(Search.prototype);\n\nfunction addWordBoundary(needle, options) {\n    function wordBoundary(c) {\n        if (/\\w/.test(c) || options.regExp) return \"\\\\b\";\n        return \"\";\n    }\n    return wordBoundary(needle[0]) + needle\n        + wordBoundary(needle[needle.length - 1]);\n}\n\nexports.Search = Search;\n","\"use strict\";\n\nvar lang = require(\"./lib/lang\");\nvar oop = require(\"./lib/oop\");\nvar Range = require(\"./range\").Range;\n\nvar SearchHighlight = function(regExp, clazz, type) {\n    this.setRegexp(regExp);\n    this.clazz = clazz;\n    this.type = type || \"text\";\n};\n\n(function() {\n    // needed to prevent long lines from freezing the browser\n    this.MAX_RANGES = 500;\n    \n    this.setRegexp = function(regExp) {\n        if (this.regExp+\"\" == regExp+\"\")\n            return;\n        this.regExp = regExp;\n        this.cache = [];\n    };\n\n    this.update = function(html, markerLayer, session, config) {\n        if (!this.regExp)\n            return;\n        var start = config.firstRow, end = config.lastRow;\n        var renderedMarkerRanges = {};\n\n        for (var i = start; i <= end; i++) {\n            var ranges = this.cache[i];\n            if (ranges == null) {\n                ranges = lang.getMatchOffsets(session.getLine(i), this.regExp);\n                if (ranges.length > this.MAX_RANGES)\n                    ranges = ranges.slice(0, this.MAX_RANGES);\n                ranges = ranges.map(function(match) {\n                    return new Range(i, match.offset, i, match.offset + match.length);\n                });\n                this.cache[i] = ranges.length ? ranges : \"\";\n            }\n\n            for (var j = ranges.length; j --; ) {\n                var rangeToAddMarkerTo = ranges[j].toScreenRange(session);\n                var rangeAsString = rangeToAddMarkerTo.toString();\n                if (renderedMarkerRanges[rangeAsString]) continue;\n\n                renderedMarkerRanges[rangeAsString] = true;\n                markerLayer.drawSingleLineMarker(\n                    html, rangeToAddMarkerTo, this.clazz, config);\n            }\n        }\n    };\n\n}).call(SearchHighlight.prototype);\n\nexports.SearchHighlight = SearchHighlight;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar lang = require(\"./lib/lang\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar Range = require(\"./range\").Range;\n\n/**\n * Contains the cursor position and the text selection of an edit session.\n *\n * The row/columns used in the selection are in document coordinates representing the coordinates as they appear in the document before applying soft wrap and folding.\n * @class Selection\n **/\n\n\n/**\n * Emitted when the cursor position changes.\n * @event changeCursor\n *\n **/\n/**\n * Emitted when the cursor selection changes.\n * \n *  @event changeSelection\n **/\n/**\n * Creates a new `Selection` object.\n * @param {EditSession} session The session to use\n * \n * @constructor\n **/\nvar Selection = function(session) {\n    this.session = session;\n    this.doc = session.getDocument();\n\n    this.clearSelection();\n    this.cursor = this.lead = this.doc.createAnchor(0, 0);\n    this.anchor = this.doc.createAnchor(0, 0);\n    this.$silent = false;\n\n    var self = this;\n    this.cursor.on(\"change\", function(e) {\n        self.$cursorChanged = true;\n        if (!self.$silent)\n            self._emit(\"changeCursor\");\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n        if (!self.$keepDesiredColumnOnChange && e.old.column != e.value.column)\n            self.$desiredColumn = null;\n    });\n\n    this.anchor.on(\"change\", function() {\n        self.$anchorChanged = true;\n        if (!self.$isEmpty && !self.$silent)\n            self._emit(\"changeSelection\");\n    });\n};\n\n(function() {\n\n    oop.implement(this, EventEmitter);\n\n    /**\n     * Returns `true` if the selection is empty.\n     * @returns {Boolean}\n     **/\n    this.isEmpty = function() {\n        return this.$isEmpty || (\n            this.anchor.row == this.lead.row &&\n            this.anchor.column == this.lead.column\n        );\n    };\n\n    /**\n     * Returns `true` if the selection is a multi-line.\n     * @returns {Boolean}\n     **/\n    this.isMultiLine = function() {\n        return !this.$isEmpty && this.anchor.row != this.cursor.row;\n    };\n\n    /**\n     * Returns an object containing the `row` and `column` current position of the cursor.\n     * @returns {Object}\n     **/\n    this.getCursor = function() {\n        return this.lead.getPosition();\n    };\n\n    /**\n     * Sets the row and column position of the anchor. This function also emits the `'changeSelection'` event.\n     * @param {Number} row The new row\n     * @param {Number} column The new column\n     *\n     **/\n    this.setSelectionAnchor = function(row, column) {\n        this.$isEmpty = false;\n        this.anchor.setPosition(row, column);\n    };\n\n    /**\n     * Returns an object containing the `row` and `column` of the calling selection anchor.\n     *\n     * @returns {Object}\n     * @related Anchor.getPosition\n     **/\n    this.getAnchor = \n    this.getSelectionAnchor = function() {\n        if (this.$isEmpty)\n            return this.getSelectionLead();\n        \n        return this.anchor.getPosition();\n    };\n\n    /**\n     * Returns an object containing the `row` and `column` of the calling selection lead.\n     * @returns {Object}\n     **/\n    this.getSelectionLead = function() {\n        return this.lead.getPosition();\n    };\n\n    /**\n     * Returns `true` if the selection is going backwards in the document.\n     * @returns {Boolean}\n     **/\n    this.isBackwards = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n        return (anchor.row > lead.row || (anchor.row == lead.row && anchor.column > lead.column));\n    };\n\n    /**\n     * [Returns the [[Range]] for the selected text.]{: #Selection.getRange}\n     * @returns {Range}\n     **/\n    this.getRange = function() {\n        var anchor = this.anchor;\n        var lead = this.lead;\n\n        if (this.$isEmpty)\n            return Range.fromPoints(lead, lead);\n\n        return this.isBackwards()\n            ? Range.fromPoints(lead, anchor)\n            : Range.fromPoints(anchor, lead);\n    };\n\n    /**\n     * [Empties the selection (by de-selecting it). This function also emits the `'changeSelection'` event.]{: #Selection.clearSelection}\n     **/\n    this.clearSelection = function() {\n        if (!this.$isEmpty) {\n            this.$isEmpty = true;\n            this._emit(\"changeSelection\");\n        }\n    };\n\n    /**\n     * Selects all the text in the document.\n     **/\n    this.selectAll = function() {\n        this.$setSelection(0, 0, Number.MAX_VALUE, Number.MAX_VALUE);\n    };\n\n    /**\n     * Sets the selection to the provided range.\n     * @param {Range} range The range of text to select\n     * @param {Boolean} reverse Indicates if the range should go backwards (`true`) or not\n     *\n     * @method setSelectionRange\n     * @alias setRange\n     **/\n    this.setRange =\n    this.setSelectionRange = function(range, reverse) {\n        var start = reverse ? range.end : range.start;\n        var end = reverse ? range.start : range.end;\n        this.$setSelection(start.row, start.column, end.row, end.column);\n    };\n\n    this.$setSelection = function(anchorRow, anchorColumn, cursorRow, cursorColumn) {\n        if (this.$silent)\n            return;\n        var wasEmpty = this.$isEmpty;\n        var wasMultiselect = this.inMultiSelectMode;\n        this.$silent = true;\n        this.$cursorChanged = this.$anchorChanged = false;\n        this.anchor.setPosition(anchorRow, anchorColumn);\n        this.cursor.setPosition(cursorRow, cursorColumn);\n        this.$isEmpty = !Range.comparePoints(this.anchor, this.cursor);\n        this.$silent = false;\n        if (this.$cursorChanged)\n            this._emit(\"changeCursor\");\n        if (this.$cursorChanged || this.$anchorChanged || wasEmpty != this.$isEmpty || wasMultiselect)\n            this._emit(\"changeSelection\");\n    };\n\n    this.$moveSelection = function(mover) {\n        var lead = this.lead;\n        if (this.$isEmpty)\n            this.setSelectionAnchor(lead.row, lead.column);\n\n        mover.call(this);\n    };\n\n    /**\n     * Moves the selection cursor to the indicated row and column.\n     * @param {Number} row The row to select to\n     * @param {Number} column The column to select to\n     **/\n    this.selectTo = function(row, column) {\n        this.$moveSelection(function() {\n            this.moveCursorTo(row, column);\n        });\n    };\n\n    /**\n     * Moves the selection cursor to the row and column indicated by `pos`.\n     * @param {Object} pos An object containing the row and column\n     **/\n    this.selectToPosition = function(pos) {\n        this.$moveSelection(function() {\n            this.moveCursorToPosition(pos);\n        });\n    };\n\n    /**\n     * Moves the selection cursor to the indicated row and column.\n     * @param {Number} row The row to select to\n     * @param {Number} column The column to select to\n     *\n     **/\n    this.moveTo = function(row, column) {\n        this.clearSelection();\n        this.moveCursorTo(row, column);\n    };\n\n    /**\n     * Moves the selection cursor to the row and column indicated by `pos`.\n     * @param {Object} pos An object containing the row and column\n     **/\n    this.moveToPosition = function(pos) {\n        this.clearSelection();\n        this.moveCursorToPosition(pos);\n    };\n\n\n    /**\n     * Moves the selection up one row.\n     **/\n    this.selectUp = function() {\n        this.$moveSelection(this.moveCursorUp);\n    };\n\n    /**\n     * Moves the selection down one row.\n     **/\n    this.selectDown = function() {\n        this.$moveSelection(this.moveCursorDown);\n    };\n\n    /**\n     * Moves the selection right one column.\n     **/\n    this.selectRight = function() {\n        this.$moveSelection(this.moveCursorRight);\n    };\n\n    /**\n     * Moves the selection left one column.\n     **/\n    this.selectLeft = function() {\n        this.$moveSelection(this.moveCursorLeft);\n    };\n\n    /**\n     * Moves the selection to the beginning of the current line.\n     **/\n    this.selectLineStart = function() {\n        this.$moveSelection(this.moveCursorLineStart);\n    };\n\n    /**\n     * Moves the selection to the end of the current line.\n     **/\n    this.selectLineEnd = function() {\n        this.$moveSelection(this.moveCursorLineEnd);\n    };\n\n    /**\n     * Moves the selection to the end of the file.\n     **/\n    this.selectFileEnd = function() {\n        this.$moveSelection(this.moveCursorFileEnd);\n    };\n\n    /**\n     * Moves the selection to the start of the file.\n     **/\n    this.selectFileStart = function() {\n        this.$moveSelection(this.moveCursorFileStart);\n    };\n\n    /**\n     * Moves the selection to the first word on the right.\n     **/\n    this.selectWordRight = function() {\n        this.$moveSelection(this.moveCursorWordRight);\n    };\n\n    /**\n     * Moves the selection to the first word on the left.\n     **/\n    this.selectWordLeft = function() {\n        this.$moveSelection(this.moveCursorWordLeft);\n    };\n\n    /**\n     * Moves the selection to highlight the entire word.\n     * @related EditSession.getWordRange\n     **/\n    this.getWordRange = function(row, column) {\n        if (typeof column == \"undefined\") {\n            var cursor = row || this.lead;\n            row = cursor.row;\n            column = cursor.column;\n        }\n        return this.session.getWordRange(row, column);\n    };\n\n    /**\n     * Selects an entire word boundary.\n     **/\n    this.selectWord = function() {\n        this.setSelectionRange(this.getWordRange());\n    };\n\n    /**\n     * Selects a word, including its right whitespace.\n     * @related EditSession.getAWordRange\n     **/\n    this.selectAWord = function() {\n        var cursor = this.getCursor();\n        var range = this.session.getAWordRange(cursor.row, cursor.column);\n        this.setSelectionRange(range);\n    };\n\n    this.getLineRange = function(row, excludeLastChar) {\n        var rowStart = typeof row == \"number\" ? row : this.lead.row;\n        var rowEnd;\n\n        var foldLine = this.session.getFoldLine(rowStart);\n        if (foldLine) {\n            rowStart = foldLine.start.row;\n            rowEnd = foldLine.end.row;\n        } else {\n            rowEnd = rowStart;\n        }\n        if (excludeLastChar === true)\n            return new Range(rowStart, 0, rowEnd, this.session.getLine(rowEnd).length);\n        else\n            return new Range(rowStart, 0, rowEnd + 1, 0);\n    };\n\n    /**\n     * Selects the entire line.\n     **/\n    this.selectLine = function() {\n        this.setSelectionRange(this.getLineRange());\n    };\n\n    /**\n     * Moves the cursor up one row.\n     **/\n    this.moveCursorUp = function() {\n        this.moveCursorBy(-1, 0);\n    };\n\n    /**\n     * Moves the cursor down one row.\n     **/\n    this.moveCursorDown = function() {\n        this.moveCursorBy(1, 0);\n    };\n\n    /**\n     *\n     * Returns `true` if moving the character next to the cursor in the specified direction is a soft tab.\n     * @param {Object} cursor the current cursor position\n     * @param {Number} tabSize the tab size\n     * @param {Number} direction 1 for right, -1 for left\n     */\n    this.wouldMoveIntoSoftTab = function(cursor, tabSize, direction) {\n        var start = cursor.column;\n        var end = cursor.column + tabSize;\n\n        if (direction < 0) {\n            start = cursor.column - tabSize;\n            end = cursor.column;\n        }\n        return this.session.isTabStop(cursor) && this.doc.getLine(cursor.row).slice(start, end).split(\" \").length-1 == tabSize;\n    };\n\n    /**\n     * Moves the cursor left one column.\n     **/\n    this.moveCursorLeft = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n        } else if (cursor.column === 0) {\n            // cursor is a line (start\n            if (cursor.row > 0) {\n                this.moveCursorTo(cursor.row - 1, this.doc.getLine(cursor.row - 1).length);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, -1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, -tabSize);\n            } else {\n                this.moveCursorBy(0, -1);\n            }\n        }\n    };\n\n    /**\n     * Moves the cursor right one column.\n     **/\n    this.moveCursorRight = function() {\n        var cursor = this.lead.getPosition(),\n            fold;\n        if (fold = this.session.getFoldAt(cursor.row, cursor.column, 1)) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n        }\n        else if (this.lead.column == this.doc.getLine(this.lead.row).length) {\n            if (this.lead.row < this.doc.getLength() - 1) {\n                this.moveCursorTo(this.lead.row + 1, 0);\n            }\n        }\n        else {\n            var tabSize = this.session.getTabSize();\n            var cursor = this.lead;\n            if (this.wouldMoveIntoSoftTab(cursor, tabSize, 1) && !this.session.getNavigateWithinSoftTabs()) {\n                this.moveCursorBy(0, tabSize);\n            } else {\n                this.moveCursorBy(0, 1);\n            }\n        }\n    };\n\n    /**\n     * Moves the cursor to the start of the line.\n     **/\n    this.moveCursorLineStart = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var screenRow = this.session.documentToScreenRow(row, column);\n\n        // Determ the doc-position of the first character at the screen line.\n        var firstColumnPosition = this.session.screenToDocumentPosition(screenRow, 0);\n\n        // Determ the line\n        var beforeCursor = this.session.getDisplayLine(\n            row, null, firstColumnPosition.row,\n            firstColumnPosition.column\n        );\n\n        var leadingSpace = beforeCursor.match(/^\\s*/);\n        // TODO find better way for emacs mode to override selection behaviors\n        if (leadingSpace[0].length != column && !this.session.$useEmacsStyleLineStart)\n            firstColumnPosition.column += leadingSpace[0].length;\n        this.moveCursorToPosition(firstColumnPosition);\n    };\n\n    /**\n     * Moves the cursor to the end of the line.\n     **/\n    this.moveCursorLineEnd = function() {\n        var lead = this.lead;\n        var lineEnd = this.session.getDocumentLastRowColumnPosition(lead.row, lead.column);\n        if (this.lead.column == lineEnd.column) {\n            var line = this.session.getLine(lineEnd.row);\n            if (lineEnd.column == line.length) {\n                var textEnd = line.search(/\\s+$/);\n                if (textEnd > 0)\n                    lineEnd.column = textEnd;\n            }\n        }\n\n        this.moveCursorTo(lineEnd.row, lineEnd.column);\n    };\n\n    /**\n     * Moves the cursor to the end of the file.\n     **/\n    this.moveCursorFileEnd = function() {\n        var row = this.doc.getLength() - 1;\n        var column = this.doc.getLine(row).length;\n        this.moveCursorTo(row, column);\n    };\n\n    /**\n     * Moves the cursor to the start of the file.\n     **/\n    this.moveCursorFileStart = function() {\n        this.moveCursorTo(0, 0);\n    };\n\n    /**\n     * Moves the cursor to the word on the right.\n     **/\n    this.moveCursorLongWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n\n        // skip folds\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            this.moveCursorTo(fold.end.row, fold.end.column);\n            return;\n        }\n\n        // first skip space\n        if (this.session.nonTokenRe.exec(rightOfCursor)) {\n            column += this.session.nonTokenRe.lastIndex;\n            this.session.nonTokenRe.lastIndex = 0;\n            rightOfCursor = line.substring(column);\n        }\n\n        // if at line end proceed with next line\n        if (column >= line.length) {\n            this.moveCursorTo(row, line.length);\n            this.moveCursorRight();\n            if (row < this.doc.getLength() - 1)\n                this.moveCursorWordRight();\n            return;\n        }\n\n        // advance to the end of the next token\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            column += this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n\n    /**\n    *\n    * Moves the cursor to the word on the left.\n    **/\n    this.moveCursorLongWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        // skip folds\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1)) {\n            this.moveCursorTo(fold.start.row, fold.start.column);\n            return;\n        }\n\n        var str = this.session.getFoldStringAt(row, column, -1);\n        if (str == null) {\n            str = this.doc.getLine(row).substring(0, column);\n        }\n\n        var leftOfCursor = lang.stringReverse(str);\n        this.session.nonTokenRe.lastIndex = 0;\n        this.session.tokenRe.lastIndex = 0;\n\n        // skip whitespace\n        if (this.session.nonTokenRe.exec(leftOfCursor)) {\n            column -= this.session.nonTokenRe.lastIndex;\n            leftOfCursor = leftOfCursor.slice(this.session.nonTokenRe.lastIndex);\n            this.session.nonTokenRe.lastIndex = 0;\n        }\n\n        // if at begin of the line proceed in line above\n        if (column <= 0) {\n            this.moveCursorTo(row, 0);\n            this.moveCursorLeft();\n            if (row > 0)\n                this.moveCursorWordLeft();\n            return;\n        }\n\n        // move to the begin of the word\n        if (this.session.tokenRe.exec(leftOfCursor)) {\n            column -= this.session.tokenRe.lastIndex;\n            this.session.tokenRe.lastIndex = 0;\n        }\n\n        this.moveCursorTo(row, column);\n    };\n\n    this.$shortWordEndIndex = function(rightOfCursor) {\n        var index = 0, ch;\n        var whitespaceRe = /\\s/;\n        var tokenRe = this.session.tokenRe;\n\n        tokenRe.lastIndex = 0;\n        if (this.session.tokenRe.exec(rightOfCursor)) {\n            index = this.session.tokenRe.lastIndex;\n        } else {\n            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                index ++;\n\n            if (index < 1) {\n                tokenRe.lastIndex = 0;\n                 while ((ch = rightOfCursor[index]) && !tokenRe.test(ch)) {\n                    tokenRe.lastIndex = 0;\n                    index ++;\n                    if (whitespaceRe.test(ch)) {\n                        if (index > 2) {\n                            index--;\n                            break;\n                        } else {\n                            while ((ch = rightOfCursor[index]) && whitespaceRe.test(ch))\n                                index ++;\n                            if (index > 2)\n                                break;\n                        }\n                    }\n                }\n            }\n        }\n        tokenRe.lastIndex = 0;\n\n        return index;\n    };\n\n    this.moveCursorShortWordRight = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n        var line = this.doc.getLine(row);\n        var rightOfCursor = line.substring(column);\n\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold)\n            return this.moveCursorTo(fold.end.row, fold.end.column);\n\n        if (column == line.length) {\n            var l = this.doc.getLength();\n            do {\n                row++;\n                rightOfCursor = this.doc.getLine(row);\n            } while (row < l && /^\\s*$/.test(rightOfCursor));\n\n            if (!/^\\s+/.test(rightOfCursor))\n                rightOfCursor = \"\";\n            column = 0;\n        }\n\n        var index = this.$shortWordEndIndex(rightOfCursor);\n\n        this.moveCursorTo(row, column + index);\n    };\n\n    this.moveCursorShortWordLeft = function() {\n        var row = this.lead.row;\n        var column = this.lead.column;\n\n        var fold;\n        if (fold = this.session.getFoldAt(row, column, -1))\n            return this.moveCursorTo(fold.start.row, fold.start.column);\n\n        var line = this.session.getLine(row).substring(0, column);\n        if (column === 0) {\n            do {\n                row--;\n                line = this.doc.getLine(row);\n            } while (row > 0 && /^\\s*$/.test(line));\n\n            column = line.length;\n            if (!/\\s+$/.test(line))\n                line = \"\";\n        }\n\n        var leftOfCursor = lang.stringReverse(line);\n        var index = this.$shortWordEndIndex(leftOfCursor);\n\n        return this.moveCursorTo(row, column - index);\n    };\n\n    this.moveCursorWordRight = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordRight();\n        else\n            this.moveCursorShortWordRight();\n    };\n\n    this.moveCursorWordLeft = function() {\n        if (this.session.$selectLongWords)\n            this.moveCursorLongWordLeft();\n        else\n            this.moveCursorShortWordLeft();\n    };\n\n    /**\n     * Moves the cursor to position indicated by the parameters. Negative numbers move the cursor backwards in the document.\n     * @param {Number} rows The number of rows to move by\n     * @param {Number} chars The number of characters to move by\n     *\n     * @related EditSession.documentToScreenPosition\n     **/\n    this.moveCursorBy = function(rows, chars) {\n        var screenPos = this.session.documentToScreenPosition(\n            this.lead.row,\n            this.lead.column\n        );\n\n        var offsetX;\n\n        if (chars === 0) {\n            if (rows !== 0) {\n                if (this.session.$bidiHandler.isBidiRow(screenPos.row, this.lead.row)) {\n                    offsetX = this.session.$bidiHandler.getPosLeft(screenPos.column);\n                    screenPos.column = Math.round(offsetX / this.session.$bidiHandler.charWidths[0]);\n                } else {\n                    offsetX = screenPos.column * this.session.$bidiHandler.charWidths[0];\n                }\n            }\n\n            if (this.$desiredColumn)\n                screenPos.column = this.$desiredColumn;\n            else\n                this.$desiredColumn = screenPos.column;\n        }\n        \n        if (rows != 0 && this.session.lineWidgets && this.session.lineWidgets[this.lead.row]) {\n            var widget = this.session.lineWidgets[this.lead.row];\n            if (rows < 0)\n                rows -= widget.rowsAbove || 0;\n            else if (rows > 0)\n                rows += widget.rowCount - (widget.rowsAbove || 0);\n        }\n        \n        var docPos = this.session.screenToDocumentPosition(screenPos.row + rows, screenPos.column, offsetX);\n        \n        if (rows !== 0 && chars === 0 && docPos.row === this.lead.row && docPos.column === this.lead.column) {\n            \n        }\n\n        // move the cursor and update the desired column\n        this.moveCursorTo(docPos.row, docPos.column + chars, chars === 0);\n    };\n\n    /**\n     * Moves the selection to the position indicated by its `row` and `column`.\n     * @param {Object} position The position to move to\n     **/\n    this.moveCursorToPosition = function(position) {\n        this.moveCursorTo(position.row, position.column);\n    };\n\n    /**\n     * Moves the cursor to the row and column provided. [If `preventUpdateDesiredColumn` is `true`, then the cursor stays in the same column position as its original point.]{: #preventUpdateBoolDesc}\n     * @param {Number} row The row to move to\n     * @param {Number} column The column to move to\n     * @param {Boolean} keepDesiredColumn [If `true`, the cursor move does not respect the previous column]{: #preventUpdateBool}\n     *\n     **/\n    this.moveCursorTo = function(row, column, keepDesiredColumn) {\n        // Ensure the row/column is not inside of a fold.\n        var fold = this.session.getFoldAt(row, column, 1);\n        if (fold) {\n            row = fold.start.row;\n            column = fold.start.column;\n        }\n\n        this.$keepDesiredColumnOnChange = true;\n        var line = this.session.getLine(row);\n        // do not allow putting cursor in the middle of surrogate pairs\n        if (/[\\uDC00-\\uDFFF]/.test(line.charAt(column)) && line.charAt(column - 1)) {\n            if (this.lead.row == row && this.lead.column == column + 1)\n                column = column - 1;\n            else\n                column = column + 1;\n        }\n        this.lead.setPosition(row, column);\n        this.$keepDesiredColumnOnChange = false;\n\n        if (!keepDesiredColumn)\n            this.$desiredColumn = null;\n    };\n\n    /**\n     * Moves the cursor to the screen position indicated by row and column. {:preventUpdateBoolDesc}\n     * @param {Number} row The row to move to\n     * @param {Number} column The column to move to\n     * @param {Boolean} keepDesiredColumn {:preventUpdateBool}\n     *\n     **/\n    this.moveCursorToScreen = function(row, column, keepDesiredColumn) {\n        var pos = this.session.screenToDocumentPosition(row, column);\n        this.moveCursorTo(pos.row, pos.column, keepDesiredColumn);\n    };\n\n    // remove listeners from document\n    this.detach = function() {\n        this.lead.detach();\n        this.anchor.detach();\n    };\n\n    this.fromOrientedRange = function(range) {\n        this.setSelectionRange(range, range.cursor == range.start);\n        this.$desiredColumn = range.desiredColumn || this.$desiredColumn;\n    };\n\n    this.toOrientedRange = function(range) {\n        var r = this.getRange();\n        if (range) {\n            range.start.column = r.start.column;\n            range.start.row = r.start.row;\n            range.end.column = r.end.column;\n            range.end.row = r.end.row;\n        } else {\n            range = r;\n        }\n\n        range.cursor = this.isBackwards() ? range.start : range.end;\n        range.desiredColumn = this.$desiredColumn;\n        return range;\n    };\n\n    /**\n     * Saves the current cursor position and calls `func` that can change the cursor\n     * postion. The result is the range of the starting and eventual cursor position.\n     * Will reset the cursor position.\n     * @param {Function} The callback that should change the cursor position\n     * @returns {Range}\n     *\n     **/\n    this.getRangeOfMovements = function(func) {\n        var start = this.getCursor();\n        try {\n            func(this);\n            var end = this.getCursor();\n            return Range.fromPoints(start, end);\n        } catch(e) {\n            return Range.fromPoints(start, start);\n        } finally {\n            this.moveCursorToPosition(start);\n        }\n    };\n\n    this.toJSON = function() {\n        if (this.rangeCount) {\n            var data = this.ranges.map(function(r) {\n                var r1 = r.clone();\n                r1.isBackwards = r.cursor == r.start;\n                return r1;\n            });\n        } else {\n            var data = this.getRange();\n            data.isBackwards = this.isBackwards();\n        }\n        return data;\n    };\n\n    this.fromJSON = function(data) {\n        if (data.start == undefined) {\n            if (this.rangeList && data.length > 1) {\n                this.toSingleRange(data[0]);\n                for (var i = data.length; i--; ) {\n                    var r = Range.fromPoints(data[i].start, data[i].end);\n                    if (data[i].isBackwards)\n                        r.cursor = r.start;\n                    this.addRange(r, true);\n                }\n                return;\n            } else {\n                data = data[0];\n            }\n        }\n        if (this.rangeList)\n            this.toSingleRange(data);\n        this.setSelectionRange(data, data.isBackwards);\n    };\n\n    this.isEqual = function(data) {\n        if ((data.length || this.rangeCount) && data.length != this.rangeCount)\n            return false;\n        if (!data.length || !this.ranges)\n            return this.getRange().isEqual(data);\n\n        for (var i = this.ranges.length; i--; ) {\n            if (!this.ranges[i].isEqual(data[i]))\n                return false;\n        }\n        return true;\n    };\n\n}).call(Selection.prototype);\n\nexports.Selection = Selection;\n","\"use strict\";\nvar dom = require(\"./lib/dom\");\nvar oop = require(\"./lib/oop\");\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar lang = require(\"./lib/lang\");\nvar Range = require(\"./range\").Range;\nvar RangeList = require(\"./range_list\").RangeList;\nvar HashHandler = require(\"./keyboard/hash_handler\").HashHandler;\nvar Tokenizer = require(\"./tokenizer\").Tokenizer;\nvar clipboard = require(\"./clipboard\");\n\nvar VARIABLES = {\n    CURRENT_WORD: function(editor) {\n        return editor.session.getTextRange(editor.session.getWordRange());\n    },\n    SELECTION: function(editor, name, indentation) {\n        var text = editor.session.getTextRange();\n        if (indentation)\n            return text.replace(/\\n\\r?([ \\t]*\\S)/g, \"\\n\" + indentation + \"$1\");\n        return text;\n    },\n    CURRENT_LINE: function(editor) {\n        return editor.session.getLine(editor.getCursorPosition().row);\n    },\n    PREV_LINE: function(editor) {\n        return editor.session.getLine(editor.getCursorPosition().row - 1);\n    },\n    LINE_INDEX: function(editor) {\n        return editor.getCursorPosition().row;\n    },\n    LINE_NUMBER: function(editor) {\n        return editor.getCursorPosition().row + 1;\n    },\n    SOFT_TABS: function(editor) {\n        return editor.session.getUseSoftTabs() ? \"YES\" : \"NO\";\n    },\n    TAB_SIZE: function(editor) {\n        return editor.session.getTabSize();\n    },\n    CLIPBOARD: function(editor) {\n        return clipboard.getText && clipboard.getText();\n    },\n    // filenames\n    FILENAME: function(editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0];\n    },\n    FILENAME_BASE: function(editor) {\n        return /[^/\\\\]*$/.exec(this.FILEPATH(editor))[0].replace(/\\.[^.]*$/, \"\");\n    },\n    DIRECTORY: function(editor) {\n        return this.FILEPATH(editor).replace(/[^/\\\\]*$/, \"\");\n    },\n    FILEPATH: function(editor) { return \"/not implemented.txt\"; },\n    WORKSPACE_NAME: function() { return \"Unknown\"; },\n    FULLNAME: function() { return \"Unknown\"; },\n    // comments\n    BLOCK_COMMENT_START: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.start || \"\";\n    },\n    BLOCK_COMMENT_END: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.blockComment && mode.blockComment.end || \"\";\n    },\n    LINE_COMMENT: function(editor) {\n        var mode = editor.session.$mode || {};\n        return mode.lineCommentStart || \"\";\n    },\n    // dates\n    CURRENT_YEAR: date.bind(null, {year: \"numeric\"}),\n    CURRENT_YEAR_SHORT: date.bind(null, {year: \"2-digit\"}),\n    CURRENT_MONTH: date.bind(null, {month: \"numeric\"}),\n    CURRENT_MONTH_NAME: date.bind(null, {month: \"long\"}),\n    CURRENT_MONTH_NAME_SHORT: date.bind(null, {month: \"short\"}),\n    CURRENT_DATE: date.bind(null, {day: \"2-digit\"}),\n    CURRENT_DAY_NAME: date.bind(null, {weekday: \"long\"}),\n    CURRENT_DAY_NAME_SHORT: date.bind(null, {weekday: \"short\"}),\n    CURRENT_HOUR: date.bind(null, {hour: \"2-digit\", hour12: false}),\n    CURRENT_MINUTE: date.bind(null, {minute: \"2-digit\"}),\n    CURRENT_SECOND: date.bind(null, {second: \"2-digit\"})\n};\n\nVARIABLES.SELECTED_TEXT = VARIABLES.SELECTION;\n\nfunction date(dateFormat) {\n    var str = new Date().toLocaleString(\"en-us\", dateFormat);\n    return str.length == 1 ? \"0\" + str : str;\n}\n\nvar SnippetManager = function() {\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n};\n\n(function() {\n    oop.implement(this, EventEmitter);\n    \n    this.getTokenizer = function() {\n        return SnippetManager.$tokenizer || this.createTokenizer();\n    };\n    \n    this.createTokenizer = function() {\n        function TabstopToken(str) {\n            str = str.substr(1);\n            if (/^\\d+$/.test(str))\n                return [{tabstopId: parseInt(str, 10)}];\n            return [{text: str}];\n        }\n        function escape(ch) {\n            return \"(?:[^\\\\\\\\\" + ch + \"]|\\\\\\\\.)\";\n        }\n        var formatMatcher = {\n            regex: \"/(\" + escape(\"/\") + \"+)/\", \n            onMatch: function(val, state, stack) {\n                var ts = stack[0];\n                ts.fmtString = true;\n                ts.guard = val.slice(1, -1);\n                ts.flag = \"\";\n                return \"\";\n            },\n            next: \"formatString\"\n        };\n        \n        SnippetManager.$tokenizer = new Tokenizer({\n            start: [\n                {regex: /\\\\./, onMatch: function(val, state, stack) {\n                    var ch = val[1];\n                    if (ch == \"}\" && stack.length) {\n                        val = ch;\n                    } else if (\"`$\\\\\".indexOf(ch) != -1) {\n                        val = ch;\n                    }\n                    return [val];\n                }},\n                {regex: /}/, onMatch: function(val, state, stack) {\n                    return [stack.length ? stack.shift() : val];\n                }},\n                {regex: /\\$(?:\\d+|\\w+)/, onMatch: TabstopToken},\n                {regex: /\\$\\{[\\dA-Z_a-z]+/, onMatch: function(str, state, stack) {\n                    var t = TabstopToken(str.substr(1));\n                    stack.unshift(t[0]);\n                    return t;\n                }, next: \"snippetVar\"},\n                {regex: /\\n/, token: \"newline\", merge: false}\n            ],\n            snippetVar: [\n                {regex: \"\\\\|\" + escape(\"\\\\|\") + \"*\\\\|\", onMatch: function(val, state, stack) {\n                    var choices = val.slice(1, -1).replace(/\\\\[,|\\\\]|,/g, function(operator) {\n                        return operator.length == 2 ? operator[1] : \"\\x00\";\n                    }).split(\"\\x00\").map(function(value){\n                        return {value: value};\n                    });\n                    stack[0].choices = choices;\n                    return [choices[0]];\n                }, next: \"start\"},\n                formatMatcher,\n                {regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"start\"}\n            ],\n            formatString: [\n                {regex: /:/, onMatch: function(val, state, stack) {\n                    if (stack.length && stack[0].expectElse) {\n                        stack[0].expectElse = false;\n                        stack[0].ifEnd = {elseEnd: stack[0]};\n                        return [stack[0].ifEnd];\n                    }\n                    return \":\";\n                }},\n                {regex: /\\\\./, onMatch: function(val, state, stack) {\n                    var ch = val[1];\n                    if (ch == \"}\" && stack.length)\n                        val = ch;\n                    else if (\"`$\\\\\".indexOf(ch) != -1)\n                        val = ch;\n                    else if (ch == \"n\")\n                        val = \"\\n\";\n                    else if (ch == \"t\")\n                        val = \"\\t\";\n                    else if (\"ulULE\".indexOf(ch) != -1)\n                        val = {changeCase: ch, local: ch > \"a\"};\n                    return [val];\n                }},\n                {regex: \"/\\\\w*}\", onMatch: function(val, state, stack) {\n                    var next = stack.shift();\n                    if (next)\n                        next.flag = val.slice(1, -1);\n                    this.next = next && next.tabstopId ? \"start\" : \"\";\n                    return [next || val];\n                }, next: \"start\"},\n                {regex: /\\$(?:\\d+|\\w+)/, onMatch: function(val, state, stack) {\n                    return [{text: val.slice(1)}];\n                }},\n                {regex: /\\${\\w+/, onMatch: function(val, state, stack) {\n                    var token = {text: val.slice(2)};\n                    stack.unshift(token);\n                    return [token];\n                }, next: \"formatStringVar\"},\n                {regex: /\\n/, token: \"newline\", merge: false},\n                {regex: /}/, onMatch: function(val, state, stack) {\n                    var next = stack.shift();\n                    this.next = next && next.tabstopId ? \"start\" : \"\";\n                    return [next || val];\n                }, next: \"start\"}\n            ],\n            formatStringVar: [\n                {regex: /:\\/\\w+}/, onMatch: function(val, state, stack) {\n                    var ts = stack[0];\n                    ts.formatFunction = val.slice(2, -1);\n                    return [stack.shift()];\n                }, next: \"formatString\"},\n                formatMatcher,\n                {regex: /:[\\?\\-+]?/, onMatch: function(val, state, stack) {\n                    if (val[1] == \"+\")\n                        stack[0].ifEnd = stack[0];\n                    if (val[1] == \"?\")\n                        stack[0].expectElse = true;\n                }, next: \"formatString\"},\n                {regex: \"([^:}\\\\\\\\]|\\\\\\\\.)*:?\", token: \"\", next: \"formatString\"}\n            ]\n        });\n        return SnippetManager.$tokenizer;\n    };\n\n    this.tokenizeTmSnippet = function(str, startState) {\n        return this.getTokenizer().getLineTokens(str, startState).tokens.map(function(x) {\n            return x.value || x;\n        });\n    };\n    \n    this.getVariableValue = function(editor, name, indentation) {\n        if (/^\\d+$/.test(name))\n            return (this.variables.__ || {})[name] || \"\";\n        if (/^[A-Z]\\d+$/.test(name))\n            return (this.variables[name[0] + \"__\"] || {})[name.substr(1)] || \"\";\n        \n        name = name.replace(/^TM_/, \"\");\n        if (!this.variables.hasOwnProperty(name))\n            return \"\";\n        var value = this.variables[name];\n        if (typeof value == \"function\")\n            value = this.variables[name](editor, name, indentation);\n        return value == null ? \"\" : value;\n    };\n    \n    this.variables = VARIABLES;\n\n    // returns string formatted according to http://manual.macromates.com/en/regular_expressions#replacement_string_syntax_format_strings\n    this.tmStrFormat = function(str, ch, editor) {\n        if (!ch.fmt) return str;\n        var flag = ch.flag || \"\";\n        var re = ch.guard;\n        re = new RegExp(re, flag.replace(/[^gim]/g, \"\"));\n        var fmtTokens = typeof ch.fmt == \"string\" ? this.tokenizeTmSnippet(ch.fmt, \"formatString\") : ch.fmt;\n        var _self = this;\n        var formatted = str.replace(re, function() {\n            var oldArgs = _self.variables.__;\n            _self.variables.__ = [].slice.call(arguments);\n            var fmtParts = _self.resolveVariables(fmtTokens, editor);\n            var gChangeCase = \"E\";\n            for (var i  = 0; i < fmtParts.length; i++) {\n                var ch = fmtParts[i];\n                if (typeof ch == \"object\") {\n                    fmtParts[i] = \"\";\n                    if (ch.changeCase && ch.local) {\n                        var next = fmtParts[i + 1];\n                        if (next && typeof next == \"string\") {\n                            if (ch.changeCase == \"u\")\n                                fmtParts[i] = next[0].toUpperCase();\n                            else\n                                fmtParts[i] = next[0].toLowerCase();\n                            fmtParts[i + 1] = next.substr(1);\n                        }\n                    } else if (ch.changeCase) {\n                        gChangeCase = ch.changeCase;\n                    }\n                } else if (gChangeCase == \"U\") {\n                    fmtParts[i] = ch.toUpperCase();\n                } else if (gChangeCase == \"L\") {\n                    fmtParts[i] = ch.toLowerCase();\n                }\n            }\n            _self.variables.__ = oldArgs;\n            return fmtParts.join(\"\");\n        });\n        return formatted;\n    };\n    \n    this.tmFormatFunction = function(str, ch, editor) {\n        if (ch.formatFunction == \"upcase\")\n            return str.toUpperCase();\n        if (ch.formatFunction == \"downcase\")\n            return str.toLowerCase();\n        return str;\n    };\n\n    this.resolveVariables = function(snippet, editor) {\n        var result = [];\n        var indentation = \"\";\n        var afterNewLine = true;\n        for (var i = 0; i < snippet.length; i++) {\n            var ch = snippet[i];\n            if (typeof ch == \"string\") {\n                result.push(ch);\n                if (ch == \"\\n\") {\n                    afterNewLine = true;\n                    indentation = \"\";\n                }\n                else if (afterNewLine) {\n                    indentation = /^\\t*/.exec(ch)[0];\n                    afterNewLine = /\\S/.test(ch);\n                }\n                continue;\n            }\n            if (!ch)  continue;\n            afterNewLine = false;\n            \n            if (ch.fmtString) {\n                var j = snippet.indexOf(ch, i + 1);\n                if (j == -1) j = snippet.length;\n                ch.fmt = snippet.slice(i + 1, j);\n                i = j;\n            }\n            \n            if (ch.text) {\n                var value = this.getVariableValue(editor, ch.text, indentation) + \"\";\n                if (ch.fmtString)\n                    value = this.tmStrFormat(value, ch, editor);\n                if (ch.formatFunction)\n                    value = this.tmFormatFunction(value, ch, editor);\n                \n                if (value && !ch.ifEnd) {\n                    result.push(value);\n                    gotoNext(ch);\n                } else if (!value && ch.ifEnd) {\n                    gotoNext(ch.ifEnd);\n                }\n            } else if (ch.elseEnd) {\n                gotoNext(ch.elseEnd);\n            } else if (ch.tabstopId != null) {\n                result.push(ch);\n            } else if (ch.changeCase != null) {\n                result.push(ch);\n            }\n        }\n        function gotoNext(ch) {\n            var i1 = snippet.indexOf(ch, i + 1);\n            if (i1 != -1)\n                i = i1;\n        }\n        return result;\n    };\n\n    this.insertSnippetForSelection = function(editor, snippetText, replaceRange) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var tabString = editor.session.getTabString();\n        var indentString = line.match(/^\\s*/)[0];\n        \n        if (cursor.column < indentString.length)\n            indentString = indentString.slice(0, cursor.column);\n\n        snippetText = snippetText.replace(/\\r/g, \"\");\n        var tokens = this.tokenizeTmSnippet(snippetText);\n        tokens = this.resolveVariables(tokens, editor);\n        // indent\n        tokens = tokens.map(function(x) {\n            if (x == \"\\n\")\n                return x + indentString;\n            if (typeof x == \"string\")\n                return x.replace(/\\t/g, tabString);\n            return x;\n        });\n        // tabstop values\n        var tabstops = [];\n        tokens.forEach(function(p, i) {\n            if (typeof p != \"object\")\n                return;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            if (!ts) {\n                ts = tabstops[id] = [];\n                ts.index = id;\n                ts.value = \"\";\n                ts.parents = {};\n            }\n            if (ts.indexOf(p) !== -1)\n                return;\n            if (p.choices && !ts.choices)\n                ts.choices = p.choices;\n            ts.push(p);\n            var i1 = tokens.indexOf(p, i + 1);\n            if (i1 === -1)\n                return;\n\n            var value = tokens.slice(i + 1, i1);\n            var isNested = value.some(function(t) {return typeof t === \"object\";});\n            if (isNested && !ts.value) {\n                ts.value = value;\n            } else if (value.length && (!ts.value || typeof ts.value !== \"string\")) {\n                ts.value = value.join(\"\");\n            }\n        });\n\n        // expand tabstop values\n        tabstops.forEach(function(ts) {ts.length = 0;});\n        var expanding = {};\n        function copyValue(val) {\n            var copy = [];\n            for (var i = 0; i < val.length; i++) {\n                var p = val[i];\n                if (typeof p == \"object\") {\n                    if (expanding[p.tabstopId])\n                        continue;\n                    var j = val.lastIndexOf(p, i - 1);\n                    p = copy[j] || {tabstopId: p.tabstopId};\n                }\n                copy[i] = p;\n            }\n            return copy;\n        }\n        for (var i = 0; i < tokens.length; i++) {\n            var p = tokens[i];\n            if (typeof p != \"object\")\n                continue;\n            var id = p.tabstopId;\n            var ts = tabstops[id];\n            var i1 = tokens.indexOf(p, i + 1);\n            if (expanding[id]) {\n                // if reached closing bracket clear expanding state\n                if (expanding[id] === p) {\n                    delete expanding[id];\n                    Object.keys(expanding).forEach(function(parentId) {\n                        ts.parents[parentId] = true;\n                    });\n                }\n                // otherwise just ignore recursive tabstop\n                continue;\n            }\n            expanding[id] = p;\n            var value = ts.value;\n            if (typeof value !== \"string\")\n                value = copyValue(value);\n            else if (p.fmt)\n                value = this.tmStrFormat(value, p, editor);\n            tokens.splice.apply(tokens, [i + 1, Math.max(0, i1 - i)].concat(value, p));\n\n            if (ts.indexOf(p) === -1)\n                ts.push(p);\n        }\n        \n        // convert to plain text\n        var row = 0, column = 0;\n        var text = \"\";\n        tokens.forEach(function(t) {\n            if (typeof t === \"string\") {\n                var lines = t.split(\"\\n\");\n                if (lines.length > 1){\n                    column = lines[lines.length - 1].length;\n                    row += lines.length - 1;\n                } else\n                    column += t.length;\n                text += t;\n            } else if (t) {\n                if (!t.start)\n                    t.start = {row: row, column: column};\n                else\n                    t.end = {row: row, column: column};\n            }\n        });\n        var range = editor.getSelectionRange();\n        if (replaceRange && replaceRange.compareRange(range) === 0) {\n            range = replaceRange;\n        }\n        var end = editor.session.replace(range, text);\n\n        var tabstopManager = new TabstopManager(editor);\n        var selectionId = editor.inVirtualSelectionMode && editor.selection.index;\n        tabstopManager.addTabstops(tabstops, range.start, end, selectionId);\n    };\n    \n    this.insertSnippet = function(editor, snippetText, replaceRange) {\n        var self = this;\n        if (editor.inVirtualSelectionMode)\n            return self.insertSnippetForSelection(editor, snippetText, replaceRange);\n        \n        editor.forEachSelection(function() {\n            self.insertSnippetForSelection(editor, snippetText, replaceRange);\n        }, null, {keepOrder: true});\n        \n        if (editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n    };\n\n    this.$getScope = function(editor) {\n        var scope = editor.session.$mode.$id || \"\";\n        scope = scope.split(\"/\").pop();\n        if (scope === \"html\" || scope === \"php\") {\n            // PHP is actually HTML\n            if (scope === \"php\" && !editor.session.$mode.inlinePhp) \n                scope = \"html\";\n            var c = editor.getCursorPosition();\n            var state = editor.session.getState(c.row);\n            if (typeof state === \"object\") {\n                state = state[0];\n            }\n            if (state.substring) {\n                if (state.substring(0, 3) == \"js-\")\n                    scope = \"javascript\";\n                else if (state.substring(0, 4) == \"css-\")\n                    scope = \"css\";\n                else if (state.substring(0, 4) == \"php-\")\n                    scope = \"php\";\n            }\n        }\n        \n        return scope;\n    };\n\n    this.getActiveScopes = function(editor) {\n        var scope = this.$getScope(editor);\n        var scopes = [scope];\n        var snippetMap = this.snippetMap;\n        if (snippetMap[scope] && snippetMap[scope].includeScopes) {\n            scopes.push.apply(scopes, snippetMap[scope].includeScopes);\n        }\n        scopes.push(\"_\");\n        return scopes;\n    };\n\n    this.expandWithTab = function(editor, options) {\n        var self = this;\n        var result = editor.forEachSelection(function() {\n            return self.expandSnippetForSelection(editor, options);\n        }, null, {keepOrder: true});\n        if (result && editor.tabstopManager)\n            editor.tabstopManager.tabNext();\n        return result;\n    };\n    \n    this.expandSnippetForSelection = function(editor, options) {\n        var cursor = editor.getCursorPosition();\n        var line = editor.session.getLine(cursor.row);\n        var before = line.substring(0, cursor.column);\n        var after = line.substr(cursor.column);\n\n        var snippetMap = this.snippetMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function(scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = this.findMatchingSnippet(snippets, before, after);\n            return !!snippet;\n        }, this);\n        if (!snippet)\n            return false;\n        if (options && options.dryRun)\n            return true;\n        editor.session.doc.removeInLine(cursor.row,\n            cursor.column - snippet.replaceBefore.length,\n            cursor.column + snippet.replaceAfter.length\n        );\n\n        this.variables.M__ = snippet.matchBefore;\n        this.variables.T__ = snippet.matchAfter;\n        this.insertSnippetForSelection(editor, snippet.content);\n\n        this.variables.M__ = this.variables.T__ = null;\n        return true;\n    };\n\n    this.findMatchingSnippet = function(snippetList, before, after) {\n        for (var i = snippetList.length; i--;) {\n            var s = snippetList[i];\n            if (s.startRe && !s.startRe.test(before))\n                continue;\n            if (s.endRe && !s.endRe.test(after))\n                continue;\n            if (!s.startRe && !s.endRe)\n                continue;\n\n            s.matchBefore = s.startRe ? s.startRe.exec(before) : [\"\"];\n            s.matchAfter = s.endRe ? s.endRe.exec(after) : [\"\"];\n            s.replaceBefore = s.triggerRe ? s.triggerRe.exec(before)[0] : \"\";\n            s.replaceAfter = s.endTriggerRe ? s.endTriggerRe.exec(after)[0] : \"\";\n            return s;\n        }\n    };\n\n    this.snippetMap = {};\n    this.snippetNameMap = {};\n    this.register = function(snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n        var self = this;\n        \n        if (!snippets) \n            snippets = [];\n        \n        function wrapRegexp(src) {\n            if (src && !/^\\^?\\(.*\\)\\$?$|^\\\\b$/.test(src))\n                src = \"(?:\" + src + \")\";\n\n            return src || \"\";\n        }\n        function guardedRegexp(re, guard, opening) {\n            re = wrapRegexp(re);\n            guard = wrapRegexp(guard);\n            if (opening) {\n                re = guard + re;\n                if (re && re[re.length - 1] != \"$\")\n                    re = re + \"$\";\n            } else {\n                re = re + guard;\n                if (re && re[0] != \"^\")\n                    re = \"^\" + re;\n            }\n            return new RegExp(re);\n        }\n\n        function addSnippet(s) {\n            if (!s.scope)\n                s.scope = scope || \"_\";\n            scope = s.scope;\n            if (!snippetMap[scope]) {\n                snippetMap[scope] = [];\n                snippetNameMap[scope] = {};\n            }\n\n            var map = snippetNameMap[scope];\n            if (s.name) {\n                var old = map[s.name];\n                if (old)\n                    self.unregister(old);\n                map[s.name] = s;\n            }\n            snippetMap[scope].push(s);\n\n            if (s.prefix)\n                s.tabTrigger = s.prefix;\n\n            if (!s.content && s.body)\n                s.content = Array.isArray(s.body) ? s.body.join(\"\\n\") : s.body;\n\n            if (s.tabTrigger && !s.trigger) {\n                if (!s.guard && /^\\w/.test(s.tabTrigger))\n                    s.guard = \"\\\\b\";\n                s.trigger = lang.escapeRegExp(s.tabTrigger);\n            }\n            \n            if (!s.trigger && !s.guard && !s.endTrigger && !s.endGuard)\n                return;\n            \n            s.startRe = guardedRegexp(s.trigger, s.guard, true);\n            s.triggerRe = new RegExp(s.trigger);\n\n            s.endRe = guardedRegexp(s.endTrigger, s.endGuard, true);\n            s.endTriggerRe = new RegExp(s.endTrigger);\n        }\n\n        if (Array.isArray(snippets)) {\n            snippets.forEach(addSnippet);\n        } else {\n            Object.keys(snippets).forEach(function(key) {\n                addSnippet(snippets[key]);\n            });\n        }\n        \n        this._signal(\"registerSnippets\", {scope: scope});\n    };\n    this.unregister = function(snippets, scope) {\n        var snippetMap = this.snippetMap;\n        var snippetNameMap = this.snippetNameMap;\n\n        function removeSnippet(s) {\n            var nameMap = snippetNameMap[s.scope||scope];\n            if (nameMap && nameMap[s.name]) {\n                delete nameMap[s.name];\n                var map = snippetMap[s.scope||scope];\n                var i = map && map.indexOf(s);\n                if (i >= 0)\n                    map.splice(i, 1);\n            }\n        }\n        if (snippets.content)\n            removeSnippet(snippets);\n        else if (Array.isArray(snippets))\n            snippets.forEach(removeSnippet);\n    };\n    this.parseSnippetFile = function(str) {\n        str = str.replace(/\\r/g, \"\");\n        var list = [], snippet = {};\n        var re = /^#.*|^({[\\s\\S]*})\\s*$|^(\\S+) (.*)$|^((?:\\n*\\t.*)+)/gm;\n        var m;\n        while (m = re.exec(str)) {\n            if (m[1]) {\n                try {\n                    snippet = JSON.parse(m[1]);\n                    list.push(snippet);\n                } catch (e) {}\n            } if (m[4]) {\n                snippet.content = m[4].replace(/^\\t/gm, \"\");\n                list.push(snippet);\n                snippet = {};\n            } else {\n                var key = m[2], val = m[3];\n                if (key == \"regex\") {\n                    var guardRe = /\\/((?:[^\\/\\\\]|\\\\.)*)|$/g;\n                    snippet.guard = guardRe.exec(val)[1];\n                    snippet.trigger = guardRe.exec(val)[1];\n                    snippet.endTrigger = guardRe.exec(val)[1];\n                    snippet.endGuard = guardRe.exec(val)[1];\n                } else if (key == \"snippet\") {\n                    snippet.tabTrigger = val.match(/^\\S*/)[0];\n                    if (!snippet.name)\n                        snippet.name = val;\n                } else if (key) {\n                    snippet[key] = val;\n                }\n            }\n        }\n        return list;\n    };\n    this.getSnippetByName = function(name, editor) {\n        var snippetMap = this.snippetNameMap;\n        var snippet;\n        this.getActiveScopes(editor).some(function(scope) {\n            var snippets = snippetMap[scope];\n            if (snippets)\n                snippet = snippets[name];\n            return !!snippet;\n        }, this);\n        return snippet;\n    };\n\n}).call(SnippetManager.prototype);\n\n\nvar TabstopManager = function(editor) {\n    if (editor.tabstopManager)\n        return editor.tabstopManager;\n    editor.tabstopManager = this;\n    this.$onChange = this.onChange.bind(this);\n    this.$onChangeSelection = lang.delayedCall(this.onChangeSelection.bind(this)).schedule;\n    this.$onChangeSession = this.onChangeSession.bind(this);\n    this.$onAfterExec = this.onAfterExec.bind(this);\n    this.attach(editor);\n};\n(function() {\n    this.attach = function(editor) {\n        this.index = 0;\n        this.ranges = [];\n        this.tabstops = [];\n        this.$openTabstops = null;\n        this.selectedTabstop = null;\n\n        this.editor = editor;\n        this.editor.on(\"change\", this.$onChange);\n        this.editor.on(\"changeSelection\", this.$onChangeSelection);\n        this.editor.on(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.on(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n    };\n    this.detach = function() {\n        this.tabstops.forEach(this.removeTabstopMarkers, this);\n        this.ranges = null;\n        this.tabstops = null;\n        this.selectedTabstop = null;\n        this.editor.removeListener(\"change\", this.$onChange);\n        this.editor.removeListener(\"changeSelection\", this.$onChangeSelection);\n        this.editor.removeListener(\"changeSession\", this.$onChangeSession);\n        this.editor.commands.removeListener(\"afterExec\", this.$onAfterExec);\n        this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler);\n        this.editor.tabstopManager = null;\n        this.editor = null;\n    };\n\n    this.onChange = function(delta) {\n        var isRemove = delta.action[0] == \"r\";\n        var selectedTabstop = this.selectedTabstop || {};\n        var parents = selectedTabstop.parents || {};\n        var tabstops = (this.tabstops || []).slice();\n        for (var i = 0; i < tabstops.length; i++) {\n            var ts = tabstops[i];\n            var active = ts == selectedTabstop || parents[ts.index];\n            ts.rangeList.$bias = active ? 0 : 1;\n            \n            if (delta.action == \"remove\" && ts !== selectedTabstop) {\n                var parentActive = ts.parents && ts.parents[selectedTabstop.index];\n                var startIndex = ts.rangeList.pointIndex(delta.start, parentActive);\n                startIndex = startIndex < 0 ? -startIndex - 1 : startIndex + 1;\n                var endIndex = ts.rangeList.pointIndex(delta.end, parentActive);\n                endIndex = endIndex < 0 ? -endIndex - 1 : endIndex - 1;\n                var toRemove = ts.rangeList.ranges.slice(startIndex, endIndex);\n                for (var j = 0; j < toRemove.length; j++)\n                    this.removeRange(toRemove[j]);\n            }\n            ts.rangeList.$onChange(delta);\n        }\n        var session = this.editor.session;\n        if (!this.$inChange && isRemove && session.getLength() == 1 && !session.getValue())\n            this.detach();\n    };\n    this.updateLinkedFields = function() {\n        var ts = this.selectedTabstop;\n        if (!ts || !ts.hasLinkedRanges || !ts.firstNonLinked)\n            return;\n        this.$inChange = true;\n        var session = this.editor.session;\n        var text = session.getTextRange(ts.firstNonLinked);\n        for (var i = 0; i < ts.length; i++) {\n            var range = ts[i];\n            if (!range.linked)\n                continue;\n            var original = range.original;\n            var fmt = exports.snippetManager.tmStrFormat(text, original, this.editor);\n            session.replace(range, fmt);\n        }\n        this.$inChange = false;\n    };\n    this.onAfterExec = function(e) {\n        if (e.command && !e.command.readOnly)\n            this.updateLinkedFields();\n    };\n    this.onChangeSelection = function() {\n        if (!this.editor)\n            return;\n        var lead = this.editor.selection.lead;\n        var anchor = this.editor.selection.anchor;\n        var isEmpty = this.editor.selection.isEmpty();\n        for (var i = 0; i < this.ranges.length; i++) {\n            if (this.ranges[i].linked)\n                continue;\n            var containsLead = this.ranges[i].contains(lead.row, lead.column);\n            var containsAnchor = isEmpty || this.ranges[i].contains(anchor.row, anchor.column);\n            if (containsLead && containsAnchor)\n                return;\n        }\n        this.detach();\n    };\n    this.onChangeSession = function() {\n        this.detach();\n    };\n    this.tabNext = function(dir) {\n        var max = this.tabstops.length;\n        var index = this.index + (dir || 1);\n        index = Math.min(Math.max(index, 1), max);\n        if (index == max)\n            index = 0;\n        this.selectTabstop(index);\n        if (index === 0)\n            this.detach();\n    };\n    this.selectTabstop = function(index) {\n        this.$openTabstops = null;\n        var ts = this.tabstops[this.index];\n        if (ts)\n            this.addTabstopMarkers(ts);\n        this.index = index;\n        ts = this.tabstops[this.index];\n        if (!ts || !ts.length)\n            return;\n        \n        this.selectedTabstop = ts;\n        var range = ts.firstNonLinked || ts;\n        if (ts.choices) range.cursor = range.start;\n        if (!this.editor.inVirtualSelectionMode) {\n            var sel = this.editor.multiSelect;\n            sel.toSingleRange(range);\n            for (var i = 0; i < ts.length; i++) {\n                if (ts.hasLinkedRanges && ts[i].linked)\n                    continue;\n                sel.addRange(ts[i].clone(), true);\n            }\n        } else {\n            this.editor.selection.fromOrientedRange(range);\n        }\n        \n        this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler);\n        if (this.selectedTabstop && this.selectedTabstop.choices)\n            this.editor.execCommand(\"startAutocomplete\", {matches: this.selectedTabstop.choices});\n    };\n    this.addTabstops = function(tabstops, start, end) {\n        var useLink = this.useLink || !this.editor.getOption(\"enableMultiselect\");\n        \n        if (!this.$openTabstops)\n            this.$openTabstops = [];\n        // add final tabstop if missing\n        if (!tabstops[0]) {\n            var p = Range.fromPoints(end, end);\n            moveRelative(p.start, start);\n            moveRelative(p.end, start);\n            tabstops[0] = [p];\n            tabstops[0].index = 0;\n        }\n\n        var i = this.index;\n        var arg = [i + 1, 0];\n        var ranges = this.ranges;\n        tabstops.forEach(function(ts, index) {\n            var dest = this.$openTabstops[index] || ts;\n            \n            for (var i = 0; i < ts.length; i++) {\n                var p = ts[i];\n                var range = Range.fromPoints(p.start, p.end || p.start);\n                movePoint(range.start, start);\n                movePoint(range.end, start);\n                range.original = p;\n                range.tabstop = dest;\n                ranges.push(range);\n                if (dest != ts)\n                    dest.unshift(range);\n                else\n                    dest[i] = range;\n                if (p.fmtString || (dest.firstNonLinked && useLink)) {\n                    range.linked = true;\n                    dest.hasLinkedRanges = true;\n                } else if (!dest.firstNonLinked)\n                    dest.firstNonLinked = range;\n            }\n            if (!dest.firstNonLinked)\n                dest.hasLinkedRanges = false;\n            if (dest === ts) {\n                arg.push(dest);\n                this.$openTabstops[index] = dest;\n            }\n            this.addTabstopMarkers(dest);\n            dest.rangeList = dest.rangeList || new RangeList();\n            dest.rangeList.$bias = 0;\n            dest.rangeList.addList(dest);\n        }, this);\n        \n        if (arg.length > 2) {\n            // when adding new snippet inside existing one, make sure 0 tabstop is at the end\n            if (this.tabstops.length)\n                arg.push(arg.splice(2, 1)[0]);\n            this.tabstops.splice.apply(this.tabstops, arg);\n        }\n    };\n\n    this.addTabstopMarkers = function(ts) {\n        var session = this.editor.session;\n        ts.forEach(function(range) {\n            if  (!range.markerId)\n                range.markerId = session.addMarker(range, \"ace_snippet-marker\", \"text\");\n        });\n    };\n    this.removeTabstopMarkers = function(ts) {\n        var session = this.editor.session;\n        ts.forEach(function(range) {\n            session.removeMarker(range.markerId);\n            range.markerId = null;\n        });\n    };\n    this.removeRange = function(range) {\n        var i = range.tabstop.indexOf(range);\n        if (i != -1) range.tabstop.splice(i, 1);\n        i = this.ranges.indexOf(range);\n        if (i != -1) this.ranges.splice(i, 1);\n        i = range.tabstop.rangeList.ranges.indexOf(range);\n        if (i != -1) range.tabstop.splice(i, 1);\n        this.editor.session.removeMarker(range.markerId);\n        if (!range.tabstop.length) {\n            i = this.tabstops.indexOf(range.tabstop);\n            if (i != -1)\n                this.tabstops.splice(i, 1);\n            if (!this.tabstops.length)\n                this.detach();\n        }\n    };\n\n    this.keyboardHandler = new HashHandler();\n    this.keyboardHandler.bindKeys({\n        \"Tab\": function(editor) {\n            if (exports.snippetManager && exports.snippetManager.expandWithTab(editor))\n                return;\n            editor.tabstopManager.tabNext(1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Shift-Tab\": function(editor) {\n            editor.tabstopManager.tabNext(-1);\n            editor.renderer.scrollCursorIntoView();\n        },\n        \"Esc\": function(editor) {\n            editor.tabstopManager.detach();\n        }\n    });\n}).call(TabstopManager.prototype);\n\n\n\nvar movePoint = function(point, diff) {\n    if (point.row == 0)\n        point.column += diff.column;\n    point.row += diff.row;\n};\n\nvar moveRelative = function(point, start) {\n    if (point.row == start.row)\n        point.column -= start.column;\n    point.row -= start.row;\n};\n\n\ndom.importCssString(`\n.ace_snippet-marker {\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    background: rgba(194, 193, 208, 0.09);\n    border: 1px dotted rgba(211, 208, 235, 0.62);\n    position: absolute;\n}`, \"snippets.css\", false);\n\nexports.snippetManager = new SnippetManager();\n\n\nvar Editor = require(\"./editor\").Editor;\n(function() {\n    this.insertSnippet = function(content, options) {\n        return exports.snippetManager.insertSnippet(this, content, options);\n    };\n    this.expandSnippet = function(options) {\n        return exports.snippetManager.expandWithTab(this, options);\n    };\n}).call(Editor.prototype);\n","module.exports = `.ace-tm .ace_gutter {\n  background: #f0f0f0;\n  color: #333;\n}\n\n.ace-tm .ace_print-margin {\n  width: 1px;\n  background: #e8e8e8;\n}\n\n.ace-tm .ace_fold {\n    background-color: #6B72E6;\n}\n\n.ace-tm {\n  background-color: #FFFFFF;\n  color: black;\n}\n\n.ace-tm .ace_cursor {\n  color: black;\n}\n        \n.ace-tm .ace_invisible {\n  color: rgb(191, 191, 191);\n}\n\n.ace-tm .ace_storage,\n.ace-tm .ace_keyword {\n  color: blue;\n}\n\n.ace-tm .ace_constant {\n  color: rgb(197, 6, 11);\n}\n\n.ace-tm .ace_constant.ace_buildin {\n  color: rgb(88, 72, 246);\n}\n\n.ace-tm .ace_constant.ace_language {\n  color: rgb(88, 92, 246);\n}\n\n.ace-tm .ace_constant.ace_library {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_invalid {\n  background-color: rgba(255, 0, 0, 0.1);\n  color: red;\n}\n\n.ace-tm .ace_support.ace_function {\n  color: rgb(60, 76, 114);\n}\n\n.ace-tm .ace_support.ace_constant {\n  color: rgb(6, 150, 14);\n}\n\n.ace-tm .ace_support.ace_type,\n.ace-tm .ace_support.ace_class {\n  color: rgb(109, 121, 222);\n}\n\n.ace-tm .ace_keyword.ace_operator {\n  color: rgb(104, 118, 135);\n}\n\n.ace-tm .ace_string {\n  color: rgb(3, 106, 7);\n}\n\n.ace-tm .ace_comment {\n  color: rgb(76, 136, 107);\n}\n\n.ace-tm .ace_comment.ace_doc {\n  color: rgb(0, 102, 255);\n}\n\n.ace-tm .ace_comment.ace_doc.ace_tag {\n  color: rgb(128, 159, 191);\n}\n\n.ace-tm .ace_constant.ace_numeric {\n  color: rgb(0, 0, 205);\n}\n\n.ace-tm .ace_variable {\n  color: rgb(49, 132, 149);\n}\n\n.ace-tm .ace_xml-pe {\n  color: rgb(104, 104, 91);\n}\n\n.ace-tm .ace_entity.ace_name.ace_function {\n  color: #0000A2;\n}\n\n\n.ace-tm .ace_heading {\n  color: rgb(12, 7, 255);\n}\n\n.ace-tm .ace_list {\n  color:rgb(185, 6, 144);\n}\n\n.ace-tm .ace_meta.ace_tag {\n  color:rgb(0, 22, 142);\n}\n\n.ace-tm .ace_string.ace_regex {\n  color: rgb(255, 0, 0)\n}\n\n.ace-tm .ace_marker-layer .ace_selection {\n  background: rgb(181, 213, 255);\n}\n.ace-tm.ace_multiselect .ace_selection.ace_start {\n  box-shadow: 0 0 3px 0px white;\n}\n.ace-tm .ace_marker-layer .ace_step {\n  background: rgb(252, 255, 0);\n}\n\n.ace-tm .ace_marker-layer .ace_stack {\n  background: rgb(164, 229, 101);\n}\n\n.ace-tm .ace_marker-layer .ace_bracket {\n  margin: -1px 0 0 -1px;\n  border: 1px solid rgb(192, 192, 192);\n}\n\n.ace-tm .ace_marker-layer .ace_active-line {\n  background: rgba(0, 0, 0, 0.07);\n}\n\n.ace-tm .ace_gutter-active-line {\n    background-color : #dcdcdc;\n}\n\n.ace-tm .ace_marker-layer .ace_selected-word {\n  background: rgb(250, 250, 255);\n  border: 1px solid rgb(200, 200, 250);\n}\n\n.ace-tm .ace_indent-guide {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==\") right repeat-y;\n}\n\n.ace-tm .ace_indent-guide-active {\n  background: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC\") right repeat-y;\n}\n`;\n","\"use strict\";\n\nexports.isDark = false;\nexports.cssClass = \"ace-tm\";\nexports.cssText = require(\"./textmate.css\");\nexports.$id = \"ace/theme/textmate\";\n\nvar dom = require(\"../lib/dom\");\ndom.importCssString(exports.cssText, exports.cssClass, false);\n","\"use strict\";\n\nvar Range = require(\"./range\").Range;\n\n/**\n * \n *\n * This class provides an essay way to treat the document as a stream of tokens, and provides methods to iterate over these tokens.\n * @class TokenIterator\n **/\n\n/**\n * Creates a new token iterator object. The inital token index is set to the provided row and column coordinates.\n * @param {EditSession} session The session to associate with\n * @param {Number} initialRow The row to start the tokenizing at\n * @param {Number} initialColumn The column to start the tokenizing at\n *\n * @constructor\n **/\nvar TokenIterator = function(session, initialRow, initialColumn) {\n    this.$session = session;\n    this.$row = initialRow;\n    this.$rowTokens = session.getTokens(initialRow);\n\n    var token = session.getTokenAt(initialRow, initialColumn);\n    this.$tokenIndex = token ? token.index : -1;\n};\n\n(function() {\n   \n    /**\n     * Moves iterator position to the start of previous token.\n     * @returns {Token|null}\n     **/ \n    this.stepBackward = function() {\n        this.$tokenIndex -= 1;\n        \n        while (this.$tokenIndex < 0) {\n            this.$row -= 1;\n            if (this.$row < 0) {\n                this.$row = 0;\n                return null;\n            }\n                \n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = this.$rowTokens.length - 1;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };\n\n    /**\n     * Moves iterator position to the start of next token.\n     * @returns {Token|null}\n     **/   \n    this.stepForward = function() {\n        this.$tokenIndex += 1;\n        var rowCount;\n        while (this.$tokenIndex >= this.$rowTokens.length) {\n            this.$row += 1;\n            if (!rowCount)\n                rowCount = this.$session.getLength();\n            if (this.$row >= rowCount) {\n                this.$row = rowCount - 1;\n                return null;\n            }\n\n            this.$rowTokens = this.$session.getTokens(this.$row);\n            this.$tokenIndex = 0;\n        }\n            \n        return this.$rowTokens[this.$tokenIndex];\n    };\n \n    /**\n     * \n     * Returns current token.\n     * @returns {Token}\n     **/      \n    this.getCurrentToken = function () {\n        return this.$rowTokens[this.$tokenIndex];\n    };\n\n    /**\n     * \n     * Returns the current row.\n     * @returns {Number}\n     **/      \n    this.getCurrentTokenRow = function () {\n        return this.$row;\n    };\n\n    /**\n     * \n     * Returns the current column.\n     * @returns {Number}\n     **/     \n    this.getCurrentTokenColumn = function() {\n        var rowTokens = this.$rowTokens;\n        var tokenIndex = this.$tokenIndex;\n        \n        // If a column was cached by EditSession.getTokenAt, then use it\n        var column = rowTokens[tokenIndex].start;\n        if (column !== undefined)\n            return column;\n            \n        column = 0;\n        while (tokenIndex > 0) {\n            tokenIndex -= 1;\n            column += rowTokens[tokenIndex].value.length;\n        }\n        \n        return column;  \n    };\n\n    /**\n     * Return the current token position.\n     * @returns {Position}\n     */\n    this.getCurrentTokenPosition = function() {\n        return {row: this.$row, column: this.getCurrentTokenColumn()};\n    };\n    \n    /**\n     * Return the current token range.\n     * @returns {Range}\n     */\n    this.getCurrentTokenRange = function() {\n        var token = this.$rowTokens[this.$tokenIndex];\n        var column = this.getCurrentTokenColumn();\n        return new Range(this.$row, column, this.$row, column + token.value.length);\n    };\n    \n}).call(TokenIterator.prototype);\n\nexports.TokenIterator = TokenIterator;\n","\"use strict\";\n\nvar config = require(\"./config\");\n// tokenizing lines longer than this makes editor very slow\nvar MAX_TOKEN_COUNT = 2000;\n/**\n * This class takes a set of highlighting rules, and creates a tokenizer out of them. For more information, see [the wiki on extending highlighters](https://github.com/ajaxorg/ace/wiki/Creating-or-Extending-an-Edit-Mode#wiki-extendingTheHighlighter).\n * @class Tokenizer\n **/\n\n/**\n * Constructs a new tokenizer based on the given rules and flags.\n * @param {Object} rules The highlighting rules\n *\n * @constructor\n **/\nvar Tokenizer = function(rules) {\n    this.states = rules;\n\n    this.regExps = {};\n    this.matchMappings = {};\n    for (var key in this.states) {\n        var state = this.states[key];\n        var ruleRegExps = [];\n        var matchTotal = 0;\n        var mapping = this.matchMappings[key] = {defaultToken: \"text\"};\n        var flag = \"g\";\n\n        var splitterRurles = [];\n        for (var i = 0; i < state.length; i++) {\n            var rule = state[i];\n            if (rule.defaultToken)\n                mapping.defaultToken = rule.defaultToken;\n            if (rule.caseInsensitive && flag.indexOf(\"i\") === -1)\n                flag += \"i\";\n            if (rule.unicode && flag.indexOf(\"u\") === -1)\n                flag += \"u\";\n            if (rule.regex == null)\n                continue;\n\n            if (rule.regex instanceof RegExp)\n                rule.regex = rule.regex.toString().slice(1, -1);\n\n            // Count number of matching groups. 2 extra groups from the full match\n            // And the catch-all on the end (used to force a match);\n            var adjustedregex = rule.regex;\n            var matchcount = new RegExp(\"(?:(\" + adjustedregex + \")|(.))\").exec(\"a\").length - 2;\n            if (Array.isArray(rule.token)) {\n                if (rule.token.length == 1 || matchcount == 1) {\n                    rule.token = rule.token[0];\n                } else if (matchcount - 1 != rule.token.length) {\n                    this.reportError(\"number of classes and regexp groups doesn't match\", { \n                        rule: rule,\n                        groupCount: matchcount - 1\n                    });\n                    rule.token = rule.token[0];\n                } else {\n                    rule.tokenArray = rule.token;\n                    rule.token = null;\n                    rule.onMatch = this.$arrayTokens;\n                }\n            } else if (typeof rule.token == \"function\" && !rule.onMatch) {\n                if (matchcount > 1)\n                    rule.onMatch = this.$applyToken;\n                else\n                    rule.onMatch = rule.token;\n            }\n\n            if (matchcount > 1) {\n                if (/\\\\\\d/.test(rule.regex)) {\n                    // Replace any backreferences and offset appropriately.\n                    adjustedregex = rule.regex.replace(/\\\\([0-9]+)/g, function(match, digit) {\n                        return \"\\\\\" + (parseInt(digit, 10) + matchTotal + 1);\n                    });\n                } else {\n                    matchcount = 1;\n                    adjustedregex = this.removeCapturingGroups(rule.regex);\n                }\n                if (!rule.splitRegex && typeof rule.token != \"string\")\n                    splitterRurles.push(rule); // flag will be known only at the very end\n            }\n\n            mapping[matchTotal] = i;\n            matchTotal += matchcount;\n\n            ruleRegExps.push(adjustedregex);\n\n            // makes property access faster\n            if (!rule.onMatch)\n                rule.onMatch = null;\n        }\n        \n        if (!ruleRegExps.length) {\n            mapping[0] = 0;\n            ruleRegExps.push(\"$\");\n        }\n        \n        splitterRurles.forEach(function(rule) {\n            rule.splitRegex = this.createSplitterRegexp(rule.regex, flag);\n        }, this);\n\n        this.regExps[key] = new RegExp(\"(\" + ruleRegExps.join(\")|(\") + \")|($)\", flag);\n    }\n};\n\n(function() {\n    this.$setMaxTokenCount = function(m) {\n        MAX_TOKEN_COUNT = m | 0;\n    };\n    \n    this.$applyToken = function(str) {\n        var values = this.splitRegex.exec(str).slice(1);\n        var types = this.token.apply(this, values);\n\n        // required for compatibility with old modes\n        if (typeof types === \"string\")\n            return [{type: types, value: str}];\n\n        var tokens = [];\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i]\n                };\n        }\n        return tokens;\n    };\n\n    this.$arrayTokens = function(str) {\n        if (!str)\n            return [];\n        var values = this.splitRegex.exec(str);\n        if (!values)\n            return \"text\";\n        var tokens = [];\n        var types = this.tokenArray;\n        for (var i = 0, l = types.length; i < l; i++) {\n            if (values[i + 1])\n                tokens[tokens.length] = {\n                    type: types[i],\n                    value: values[i + 1]\n                };\n        }\n        return tokens;\n    };\n\n    this.removeCapturingGroups = function(src) {\n        var r = src.replace(\n            /\\\\.|\\[(?:\\\\.|[^\\\\\\]])*|\\(\\?[:=!<]|(\\()/g,\n            function(x, y) {return y ? \"(?:\" : x;}\n        );\n        return r;\n    };\n\n    this.createSplitterRegexp = function(src, flag) {\n        if (src.indexOf(\"(?=\") != -1) {\n            var stack = 0;\n            var inChClass = false;\n            var lastCapture = {};\n            src.replace(/(\\\\.)|(\\((?:\\?[=!])?)|(\\))|([\\[\\]])/g, function(\n                m, esc, parenOpen, parenClose, square, index\n            ) {\n                if (inChClass) {\n                    inChClass = square != \"]\";\n                } else if (square) {\n                    inChClass = true;\n                } else if (parenClose) {\n                    if (stack == lastCapture.stack) {\n                        lastCapture.end = index+1;\n                        lastCapture.stack = -1;\n                    }\n                    stack--;\n                } else if (parenOpen) {\n                    stack++;\n                    if (parenOpen.length != 1) {\n                        lastCapture.stack = stack;\n                        lastCapture.start = index;\n                    }\n                }\n                return m;\n            });\n\n            if (lastCapture.end != null && /^\\)*$/.test(src.substr(lastCapture.end)))\n                src = src.substring(0, lastCapture.start) + src.substr(lastCapture.end);\n        }\n        \n        // this is needed for regexps that can match in multiple ways\n        if (src.charAt(0) != \"^\") src = \"^\" + src;\n        if (src.charAt(src.length - 1) != \"$\") src += \"$\";\n        \n        return new RegExp(src, (flag||\"\").replace(\"g\", \"\"));\n    };\n\n    /**\n     * Returns an object containing two properties: `tokens`, which contains all the tokens; and `state`, the current state.\n     * @returns {Object}\n     **/\n    this.getLineTokens = function(line, startState) {\n        if (startState && typeof startState != \"string\") {\n            var stack = startState.slice(0);\n            startState = stack[0];\n            if (startState === \"#tmp\") {\n                stack.shift();\n                startState = stack.shift();\n            }\n        } else\n            var stack = [];\n\n        var currentState = startState || \"start\";\n        var state = this.states[currentState];\n        if (!state) {\n            currentState = \"start\";\n            state = this.states[currentState];\n        }\n        var mapping = this.matchMappings[currentState];\n        var re = this.regExps[currentState];\n        re.lastIndex = 0;\n\n        var match, tokens = [];\n        var lastIndex = 0;\n        var matchAttempts = 0;\n\n        var token = {type: null, value: \"\"};\n\n        while (match = re.exec(line)) {\n            var type = mapping.defaultToken;\n            var rule = null;\n            var value = match[0];\n            var index = re.lastIndex;\n\n            if (index - value.length > lastIndex) {\n                var skipped = line.substring(lastIndex, index - value.length);\n                if (token.type == type) {\n                    token.value += skipped;\n                } else {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: type, value: skipped};\n                }\n            }\n\n            for (var i = 0; i < match.length-2; i++) {\n                if (match[i + 1] === undefined)\n                    continue;\n\n                rule = state[mapping[i]];\n\n                if (rule.onMatch)\n                    type = rule.onMatch(value, currentState, stack, line);\n                else\n                    type = rule.token;\n\n                if (rule.next) {\n                    if (typeof rule.next == \"string\") {\n                        currentState = rule.next;\n                    } else {\n                        currentState = rule.next(currentState, stack);\n                    }\n                    \n                    state = this.states[currentState];\n                    if (!state) {\n                        this.reportError(\"state doesn't exist\", currentState);\n                        currentState = \"start\";\n                        state = this.states[currentState];\n                    }\n                    mapping = this.matchMappings[currentState];\n                    lastIndex = index;\n                    re = this.regExps[currentState];\n                    re.lastIndex = index;\n                }\n                if (rule.consumeLineEnd)\n                    lastIndex = index;\n                break;\n            }\n\n            if (value) {\n                if (typeof type === \"string\") {\n                    if ((!rule || rule.merge !== false) && token.type === type) {\n                        token.value += value;\n                    } else {\n                        if (token.type)\n                            tokens.push(token);\n                        token = {type: type, value: value};\n                    }\n                } else if (type) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {type: null, value: \"\"};\n                    for (var i = 0; i < type.length; i++)\n                        tokens.push(type[i]);\n                }\n            }\n\n            if (lastIndex == line.length)\n                break;\n\n            lastIndex = index;\n\n            if (matchAttempts++ > MAX_TOKEN_COUNT) {\n                if (matchAttempts > 2 * line.length) {\n                    this.reportError(\"infinite loop with in ace tokenizer\", {\n                        startState: startState,\n                        line: line\n                    });\n                }\n                // chrome doens't show contents of text nodes with very long text\n                while (lastIndex < line.length) {\n                    if (token.type)\n                        tokens.push(token);\n                    token = {\n                        value: line.substring(lastIndex, lastIndex += 500),\n                        type: \"overflow\"\n                    };\n                }\n                currentState = \"start\";\n                stack = [];\n                break;\n            }\n        }\n\n        if (token.type)\n            tokens.push(token);\n        \n        if (stack.length > 1) {\n            if (stack[0] !== currentState)\n                stack.unshift(\"#tmp\", currentState);\n        }\n        return {\n            tokens : tokens,\n            state : stack.length ? stack : currentState\n        };\n    };\n    \n    this.reportError = config.reportError;\n    \n}).call(Tokenizer.prototype);\n\nexports.Tokenizer = Tokenizer;\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\n\nvar CLASSNAME = \"ace_tooltip\";\n\n/**\n * @class Tooltip\n **/\n\n/**\n * @param {Element} parentNode\n *\n * @constructor\n **/\nfunction Tooltip (parentNode) {\n    this.isOpen = false;\n    this.$element = null;\n    this.$parentNode = parentNode;\n}\n\n(function() {\n    this.$init = function() {\n        this.$element = dom.createElement(\"div\");\n        this.$element.className = CLASSNAME;\n        this.$element.style.display = \"none\";\n        this.$parentNode.appendChild(this.$element);\n        return this.$element;\n    };\n\n    /**\n     * @returns {Element}\n     **/\n    this.getElement = function() {\n        return this.$element || this.$init();\n    };\n\n    /**\n     * @param {String} text\n     **/\n    this.setText = function(text) {\n        this.getElement().textContent = text;\n    };\n\n    /**\n     * @param {String} html\n     **/\n    this.setHtml = function(html) {\n        this.getElement().innerHTML = html;\n    };\n\n    /**\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    this.setPosition = function(x, y) {\n        this.getElement().style.left = x + \"px\";\n        this.getElement().style.top = y + \"px\";\n    };\n\n    /**\n     * @param {String} className\n     **/\n    this.setClassName = function(className) {\n        dom.addCssClass(this.getElement(), className);\n    };\n\n    /**\n     * @param {String} text\n     * @param {Number} x\n     * @param {Number} y\n     **/\n    this.show = function(text, x, y) {\n        if (text != null)\n            this.setText(text);\n        if (x != null && y != null)\n            this.setPosition(x, y);\n        if (!this.isOpen) {\n            this.getElement().style.display = \"block\";\n            this.isOpen = true;\n        }\n    };\n\n    this.hide = function() {\n        if (this.isOpen) {\n            this.getElement().style.display = \"none\";\n            this.getElement().className = CLASSNAME;\n            this.isOpen = false;\n        }\n    };\n\n    /**\n     * @returns {Number}\n     **/\n    this.getHeight = function() {\n        return this.getElement().offsetHeight;\n    };\n\n    /**\n     * @returns {Number}\n     **/\n    this.getWidth = function() {\n        return this.getElement().offsetWidth;\n    };\n    \n    this.destroy = function() {\n        this.isOpen = false;\n        if (this.$element && this.$element.parentNode) {\n            this.$element.parentNode.removeChild(this.$element);\n        }\n    };\n\n}).call(Tooltip.prototype);\n\nexports.Tooltip = Tooltip;\n","\"use strict\";\n\n/**\n * This object maintains the undo stack for an [[EditSession `EditSession`]].\n * @class UndoManager\n **/\n\n/**\n * Resets the current undo state and creates a new `UndoManager`.\n * \n * @constructor\n **/\nvar UndoManager = function() {\n    this.$maxRev = 0;\n    this.$fromUndo = false;\n    this.$undoDepth = Infinity;\n    this.reset();\n};\n\n(function() {\n    \n    this.addSession = function(session) {\n        this.$session = session;\n    };\n    /**\n     * Provides a means for implementing your own undo manager. `options` has one property, `args`, an [[Array `Array`]], with two elements:\n     *\n     * - `args[0]` is an array of deltas\n     * - `args[1]` is the document to associate with\n     *\n     * @param {Object} options Contains additional properties\n     *\n     **/\n    this.add = function(delta, allowMerge, session) {\n        if (this.$fromUndo) return;\n        if (delta == this.$lastDelta) return;\n        if (!this.$keepRedoStack) this.$redoStack.length = 0;\n        if (allowMerge === false || !this.lastDeltas) {\n            this.lastDeltas = [];\n            var undoStackLength = this.$undoStack.length;\n            if (undoStackLength > this.$undoDepth - 1) {\n                this.$undoStack.splice(0, undoStackLength - this.$undoDepth + 1);\n            }\n            this.$undoStack.push(this.lastDeltas);\n            delta.id = this.$rev = ++this.$maxRev;\n        }\n        if (delta.action == \"remove\" || delta.action == \"insert\")\n            this.$lastDelta = delta;\n        this.lastDeltas.push(delta);\n    };\n    \n    this.addSelection = function(selection, rev) {\n        this.selections.push({\n            value: selection,\n            rev: rev || this.$rev\n        });\n    };\n    \n    this.startNewGroup = function() {\n        this.lastDeltas = null;\n        return this.$rev;\n    };\n    \n    this.markIgnored = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id <= from)\n                break;\n            if (delta.id < to)\n                delta.ignore = true;\n        }\n        this.lastDeltas = null;\n    };\n    \n    this.getSelection = function(rev, after) {\n        var stack = this.selections;\n        for (var i = stack.length; i--;) {\n            var selection = stack[i];\n            if (selection.rev < rev) {\n                if (after)\n                    selection = stack[i + 1];\n                return selection;\n            }\n        }\n    };\n    \n    this.getRevision = function() {\n        return this.$rev;\n    };\n    \n    this.getDeltas = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        var stack = this.$undoStack;\n        var end = null, start = 0;\n        for (var i = stack.length; i--;) {\n            var delta = stack[i][0];\n            if (delta.id < to && !end)\n                end = i+1;\n            if (delta.id <= from) {\n                start = i + 1;\n                break;\n            }\n        }\n        return stack.slice(start, end);\n    };\n    \n    this.getChangedRanges = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        \n    };\n    \n    this.getChangedLines = function(from, to) {\n        if (to == null) to = this.$rev + 1;\n        \n    };\n\n    /**\n     * [Perform an undo operation on the document, reverting the last change.]{: #UndoManager.undo}\n     * @param {Boolean} dontSelect {:dontSelect}\n     *\n     * @returns {Range} The range of the undo.\n     **/\n    this.undo = function(session, dontSelect) {\n        this.lastDeltas = null;\n        var stack = this.$undoStack;\n        \n        if (!rearrangeUndoStack(stack, stack.length))\n            return;\n        \n        if (!session)\n            session = this.$session;\n        \n        if (this.$redoStackBaseRev !== this.$rev && this.$redoStack.length)\n            this.$redoStack = [];\n        \n        this.$fromUndo = true;\n        \n        var deltaSet = stack.pop();\n        var undoSelectionRange = null;\n        if (deltaSet) {\n            undoSelectionRange = session.undoChanges(deltaSet, dontSelect);\n            this.$redoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        \n        this.$fromUndo = false;\n\n        return undoSelectionRange;\n    };\n    \n    /**\n     * [Perform a redo operation on the document, reimplementing the last change.]{: #UndoManager.redo}\n     * @param {Boolean} dontSelect {:dontSelect}\n     *\n     **/\n    this.redo = function(session, dontSelect) {\n        this.lastDeltas = null;\n        \n        if (!session)\n            session = this.$session;\n        \n        this.$fromUndo = true;\n        if (this.$redoStackBaseRev != this.$rev) {\n            var diff = this.getDeltas(this.$redoStackBaseRev, this.$rev + 1);\n            rebaseRedoStack(this.$redoStack, diff);\n            this.$redoStackBaseRev = this.$rev;\n            this.$redoStack.forEach(function(x) {\n                x[0].id = ++this.$maxRev;\n            }, this);\n        }\n        var deltaSet = this.$redoStack.pop();\n        var redoSelectionRange = null;\n        \n        if (deltaSet) {\n            redoSelectionRange = session.redoChanges(deltaSet, dontSelect);\n            this.$undoStack.push(deltaSet);\n            this.$syncRev();\n        }\n        this.$fromUndo = false;\n        \n        return redoSelectionRange;\n    };\n    \n    this.$syncRev = function() {\n        var stack = this.$undoStack;\n        var nextDelta = stack[stack.length - 1];\n        var id = nextDelta && nextDelta[0].id || 0;\n        this.$redoStackBaseRev = id;\n        this.$rev = id;\n    };\n\n    /**\n     * Destroys the stack of undo and redo redo operations.\n     **/\n    this.reset = function() {\n        this.lastDeltas = null;\n        this.$lastDelta = null;\n        this.$undoStack = [];\n        this.$redoStack = [];\n        this.$rev = 0;\n        this.mark = 0;\n        this.$redoStackBaseRev = this.$rev;\n        this.selections = [];\n    };\n\n    \n    /**\n     * Returns `true` if there are undo operations left to perform.\n     * @returns {Boolean}\n     **/\n    this.canUndo = function() {\n        return this.$undoStack.length > 0;\n    };\n\n    /**\n     * Returns `true` if there are redo operations left to perform.\n     * @returns {Boolean}\n     **/\n    this.canRedo = function() {\n        return this.$redoStack.length > 0;\n    };\n    \n    /**\n     * Marks the current status clean\n     **/\n    this.bookmark = function(rev) {\n        if (rev == undefined)\n            rev = this.$rev;\n        this.mark = rev;\n    };\n\n    /**\n     * Returns if the current status is clean\n     * @returns {Boolean}\n     **/\n    this.isAtBookmark = function() {\n        return this.$rev === this.mark;\n    };\n    \n    this.toJSON = function() {\n        \n    };\n    \n    this.fromJSON = function() {\n        \n    };\n    \n    this.hasUndo = this.canUndo;\n    this.hasRedo = this.canRedo;\n    this.isClean = this.isAtBookmark;\n    this.markClean = this.bookmark;\n    \n    this.$prettyPrint = function(delta) {\n        if (delta) return stringifyDelta(delta);\n        return stringifyDelta(this.$undoStack) + \"\\n---\\n\" + stringifyDelta(this.$redoStack);\n    };\n}).call(UndoManager.prototype);\n\nfunction rearrangeUndoStack(stack, pos) {\n    for (var i = pos; i--; ) {\n        var deltaSet = stack[i];\n        if (deltaSet && !deltaSet[0].ignore) {\n            while(i < pos - 1) {\n                var swapped = swapGroups(stack[i], stack[i + 1]);\n                stack[i] = swapped[0];\n                stack[i + 1] = swapped[1];\n                i++;\n            }\n            return true;\n        }\n    }\n}\n\nvar Range = require(\"./range\").Range;\nvar cmp = Range.comparePoints;\nvar comparePoints = Range.comparePoints;\n\nfunction $updateMarkers(delta) {\n    var isInsert = delta.action == \"insert\";\n    var start = delta.start;\n    var end = delta.end;\n    var rowShift = (end.row - start.row) * (isInsert ? 1 : -1);\n    var colShift = (end.column - start.column) * (isInsert ? 1 : -1);\n    if (isInsert) end = start;\n\n    for (var i in this.marks) {\n        var point = this.marks[i];\n        var cmp = comparePoints(point, start);\n        if (cmp < 0) {\n            continue; // delta starts after the range\n        }\n        if (cmp === 0) {\n            if (isInsert) {\n                if (point.bias == 1) {\n                    cmp = 1;\n                }\n                else {\n                    point.bias == -1;\n                    continue;\n                }\n            }\n        }\n        var cmp2 = isInsert ? cmp : comparePoints(point, end);\n        if (cmp2 > 0) {\n            point.row += rowShift;\n            point.column += point.row == end.row ? colShift : 0;\n            continue;\n        }\n        if (!isInsert && cmp2 <= 0) {\n            point.row = start.row;\n            point.column = start.column;\n            if (cmp2 === 0)\n                point.bias = 1;\n        }\n    }\n}\n\n\n\nfunction clonePos(pos) {\n    return {row: pos.row,column: pos.column};\n}\nfunction cloneDelta(d) {\n    return {\n        start: clonePos(d.start),\n        end: clonePos(d.end),\n        action: d.action,\n        lines: d.lines.slice()\n    };\n}\nfunction stringifyDelta(d) {\n    d = d || this;\n    if (Array.isArray(d)) {\n        return d.map(stringifyDelta).join(\"\\n\");\n    }\n    var type = \"\";\n    if (d.action) {\n        type = d.action == \"insert\" ? \"+\" : \"-\";\n        type += \"[\" + d.lines + \"]\";\n    } else if (d.value) {\n        if (Array.isArray(d.value)) {\n            type = d.value.map(stringifyRange).join(\"\\n\");\n        } else {\n            type = stringifyRange(d.value);\n        }\n    }\n    if (d.start) {\n        type += stringifyRange(d);\n    }\n    if (d.id || d.rev) {\n        type += \"\\t(\" + (d.id || d.rev) + \")\";\n    }\n    return type;\n}\nfunction stringifyRange(r) {\n    return r.start.row + \":\" + r.start.column \n        + \"=>\" + r.end.row + \":\" + r.end.column;\n}\n/*\n * i i  d1  d2\n *      |/  |/  d2.s >= d1.e shift(d2, d1, -1)\n *              d2.s <= d1.s shift(d1, d2, +1)\n *       d1.s < d2.s < d1.e // can split\n * \n * i r  d1  d2\n *      |/  |\\  d2.s >= d1.e shift(d2, d1, -1)\n *              d2.e <= d1.s shift(d1, d2, -1)\n *       else // can't swap\n * \n * r i  d1  d2\n *      |\\  |/  d2.s >= d1.s shift(d2, d1, +1)\n *              d2.s <= d1.s shift(d1, d2, +1)\n *       // no else\n * \n * r r  d1  d2\n *      |\\  |\\  d2.s >= d1.s shift(d2, d1, +1)\n *              d2.e <= d1.s shift(d1, d2, -1)\n *       d2.s < d1.s < d2.e // can split\n */\n\nfunction swap(d1, d2) {\n    var i1 = d1.action == \"insert\";\n    var i2 = d2.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d2.start, d1.end) >= 0) {\n            shift(d2, d1, -1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.start, d1.start) <= 0) {\n            shift(d1, d2, +1);\n        } else {\n            return null;\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(d2.start, d1.start) >= 0) {\n            shift(d2, d1, +1);\n        } else if (cmp(d2.end, d1.start) <= 0) {\n            shift(d1, d2, -1);\n        } else {\n            return null;\n        }\n    }\n    return [d2, d1];\n}\nfunction swapGroups(ds1, ds2) {\n    for (var i = ds1.length; i--; ) {\n        for (var j = 0; j < ds2.length; j++) {\n            if (!swap(ds1[i], ds2[j])) {\n                // rollback, we have to undo ds2 first\n                while (i < ds1.length) {\n                    while (j--) {\n                        swap(ds2[j], ds1[i]);\n                    }\n                    j = ds2.length;\n                    i++;\n                }                \n                return [ds1, ds2];\n            }\n        }\n    }\n    ds1.selectionBefore = ds2.selectionBefore = \n    ds1.selectionAfter = ds2.selectionAfter = null;\n    return [ds2, ds1];\n}\n\n/*\n      d2          xform(d1, c1) = [d2, c2]\n    o<---o        xform(c1, d1) = [c2, d2]\n c2 |    | d1     \n    o<---o\n      c1\n*/\nfunction xform(d1, c1) {\n    var i1 = d1.action == \"insert\";\n    var i2 = c1.action == \"insert\";\n    \n    if (i1 && i2) {\n        if (cmp(d1.start, c1.start) < 0) {\n            shift(c1, d1, 1);\n        } else {\n            shift(d1, c1, 1);\n        }\n    } else if (i1 && !i2) {\n        if (cmp(d1.start, c1.end) >= 0) {\n            shift(d1, c1, -1);\n        } else if (cmp(d1.start, c1.start) <= 0) {\n            shift(c1, d1, +1);\n        } else {\n            shift(d1, Range.fromPoints(c1.start, d1.start), -1);\n            shift(c1, d1, +1);\n        }\n    } else if (!i1 && i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.start, d1.start) <= 0) {\n            shift(d1, c1, +1);\n        } else {\n            shift(c1, Range.fromPoints(d1.start, c1.start), -1);\n            shift(d1, c1, +1);\n        }\n    } else if (!i1 && !i2) {\n        if (cmp(c1.start, d1.end) >= 0) {\n            shift(c1, d1, -1);\n        } else if (cmp(c1.end, d1.start) <= 0) {\n            shift(d1, c1, -1);\n        } else {\n            var before, after;\n            if (cmp(d1.start, c1.start) < 0) {\n                before = d1;\n                d1 = splitDelta(d1, c1.start);\n            }\n            if (cmp(d1.end, c1.end) > 0) {\n                after = splitDelta(d1, c1.end);\n            }\n\n            shiftPos(c1.end, d1.start, d1.end, -1);\n            if (after && !before) {\n                d1.lines = after.lines;\n                d1.start = after.start;\n                d1.end = after.end;\n                after = d1;\n            }\n\n            return [c1, before, after].filter(Boolean);\n        }\n    }\n    return [c1, d1];\n}\n    \nfunction shift(d1, d2, dir) {\n    shiftPos(d1.start, d2.start, d2.end, dir);\n    shiftPos(d1.end, d2.start, d2.end, dir);\n}\nfunction shiftPos(pos, start, end, dir) {\n    if (pos.row == (dir == 1 ? start : end).row) {\n        pos.column += dir * (end.column - start.column);\n    }\n    pos.row += dir * (end.row - start.row);\n}\nfunction splitDelta(c, pos) {\n    var lines = c.lines;\n    var end = c.end;\n    c.end = clonePos(pos);    \n    var rowsBefore = c.end.row - c.start.row;\n    var otherLines = lines.splice(rowsBefore, lines.length);\n    \n    var col = rowsBefore ? pos.column : pos.column - c.start.column;\n    lines.push(otherLines[0].substring(0, col));\n    otherLines[0] = otherLines[0].substr(col)   ; \n    var rest = {\n        start: clonePos(pos),\n        end: end,\n        lines: otherLines,\n        action: c.action\n    };\n    return rest;\n}\n\nfunction moveDeltasByOne(redoStack, d) {\n    d = cloneDelta(d);\n    for (var j = redoStack.length; j--;) {\n        var deltaSet = redoStack[j];\n        for (var i = 0; i < deltaSet.length; i++) {\n            var x = deltaSet[i];\n            var xformed = xform(x, d);\n            d = xformed[0];\n            if (xformed.length != 2) {\n                if (xformed[2]) {\n                    deltaSet.splice(i + 1, 1, xformed[1], xformed[2]);\n                    i++;\n                } else if (!xformed[1]) {\n                    deltaSet.splice(i, 1);\n                    i--;\n                }\n            }\n        }\n        if (!deltaSet.length) {\n            redoStack.splice(j, 1); \n        }\n    }\n    return redoStack;\n}\nfunction rebaseRedoStack(redoStack, deltaSets) {\n    for (var i = 0; i < deltaSets.length; i++) {\n        var deltas = deltaSets[i];\n        for (var j = 0; j < deltas.length; j++) {\n            moveDeltasByOne(redoStack, deltas[j]);\n        }\n    }\n}\n\nexports.UndoManager = UndoManager;\n","\"use strict\";\n\n// generated by tool/unicode.js\nvar wordChars = [48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2];\n\nvar code = 0;\nvar str = [];\nfor (var i = 0; i < wordChars.length; i += 2) {\n    str.push(code += wordChars[i]);\n    if (wordChars[i + 1])\n        str.push(45, code += wordChars[i + 1]);\n}\n\nexports.wordChars = String.fromCharCode.apply(null, str);\n","\"use strict\";\n\nvar oop = require(\"./lib/oop\");\nvar dom = require(\"./lib/dom\");\nvar config = require(\"./config\");\nvar GutterLayer = require(\"./layer/gutter\").Gutter;\nvar MarkerLayer = require(\"./layer/marker\").Marker;\nvar TextLayer = require(\"./layer/text\").Text;\nvar CursorLayer = require(\"./layer/cursor\").Cursor;\nvar HScrollBar = require(\"./scrollbar\").HScrollBar;\nvar VScrollBar = require(\"./scrollbar\").VScrollBar;\nvar HScrollBarCustom = require(\"./scrollbar_custom\").HScrollBar;\nvar VScrollBarCustom = require(\"./scrollbar_custom\").VScrollBar;\nvar RenderLoop = require(\"./renderloop\").RenderLoop;\nvar FontMetrics = require(\"./layer/font_metrics\").FontMetrics;\nvar EventEmitter = require(\"./lib/event_emitter\").EventEmitter;\nvar editorCss = require(\"./css/editor.css\");\nvar Decorator = require(\"./layer/decorators\").Decorator;\n\nvar useragent = require(\"./lib/useragent\");\nvar HIDE_TEXTAREA = useragent.isIE;\n\ndom.importCssString(editorCss, \"ace_editor.css\", false);\n\n/**\n * The class that is responsible for drawing everything you see on the screen!\n * @related editor.renderer \n * @class VirtualRenderer\n **/\n\n/**\n * Constructs a new `VirtualRenderer` within the `container` specified, applying the given `theme`.\n * @param {Element} container The root element of the editor\n * @param {String} theme The starting theme\n *\n * @constructor\n **/\n\nvar VirtualRenderer = function(container, theme) {\n    var _self = this;\n\n    this.container = container || dom.createElement(\"div\");\n\n    dom.addCssClass(this.container, \"ace_editor\");\n    if (dom.HI_DPI) dom.addCssClass(this.container, \"ace_hidpi\");\n\n    this.setTheme(theme);\n    if (config.get(\"useStrictCSP\") == null) \n        config.set(\"useStrictCSP\", false);\n\n    this.$gutter = dom.createElement(\"div\");\n    this.$gutter.className = \"ace_gutter\";\n    this.container.appendChild(this.$gutter);\n    this.$gutter.setAttribute(\"aria-hidden\", true);\n\n    this.scroller = dom.createElement(\"div\");\n    this.scroller.className = \"ace_scroller\";\n    \n    this.container.appendChild(this.scroller);\n\n    this.content = dom.createElement(\"div\");\n    this.content.className = \"ace_content\";\n    this.scroller.appendChild(this.content);\n\n    this.$gutterLayer = new GutterLayer(this.$gutter);\n    this.$gutterLayer.on(\"changeGutterWidth\", this.onGutterResize.bind(this));\n\n    this.$markerBack = new MarkerLayer(this.content);\n\n    var textLayer = this.$textLayer = new TextLayer(this.content);\n    this.canvas = textLayer.element;\n\n    this.$markerFront = new MarkerLayer(this.content);\n\n    this.$cursorLayer = new CursorLayer(this.content);\n\n    // Indicates whether the horizontal scrollbar is visible\n    this.$horizScroll = false;\n    this.$vScroll = false;\n\n    this.scrollBar = \n    this.scrollBarV = new VScrollBar(this.container, this);\n    this.scrollBarH = new HScrollBar(this.container, this);\n    this.scrollBarV.on(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n    });\n    this.scrollBarH.on(\"scroll\", function(e) {\n        if (!_self.$scrollAnimation)\n            _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n    });\n\n    this.scrollTop = 0;\n    this.scrollLeft = 0;\n\n    this.cursorPos = {\n        row : 0,\n        column : 0\n    };\n\n    this.$fontMetrics = new FontMetrics(this.container, this.$textLayer.MAX_CHUNK_LENGTH);\n    this.$textLayer.$setFontMetrics(this.$fontMetrics);\n    this.$textLayer.on(\"changeCharacterSize\", function(e) {\n        _self.updateCharacterSize();\n        _self.onResize(true, _self.gutterWidth, _self.$size.width, _self.$size.height);\n        _self._signal(\"changeCharacterSize\", e);\n    });\n\n    this.$size = {\n        width: 0,\n        height: 0,\n        scrollerHeight: 0,\n        scrollerWidth: 0,\n        $dirty: true\n    };\n\n    this.layerConfig = {\n        width : 1,\n        padding : 0,\n        firstRow : 0,\n        firstRowScreen: 0,\n        lastRow : 0,\n        lineHeight : 0,\n        characterWidth : 0,\n        minHeight : 1,\n        maxHeight : 1,\n        offset : 0,\n        height : 1,\n        gutterOffset: 1\n    };\n    \n    this.scrollMargin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    \n    this.margin = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0,\n        v: 0,\n        h: 0\n    };\n    \n    this.$keepTextAreaAtCursor = !useragent.isIOS;\n\n    this.$loop = new RenderLoop(\n        this.$renderChanges.bind(this),\n        this.container.ownerDocument.defaultView\n    );\n    this.$loop.schedule(this.CHANGE_FULL);\n\n    this.updateCharacterSize();\n    this.setPadding(4);\n    config.resetOptions(this);\n    config._signal(\"renderer\", this);\n};\n\n(function() {\n\n    this.CHANGE_CURSOR = 1;\n    this.CHANGE_MARKER = 2;\n    this.CHANGE_GUTTER = 4;\n    this.CHANGE_SCROLL = 8;\n    this.CHANGE_LINES = 16;\n    this.CHANGE_TEXT = 32;\n    this.CHANGE_SIZE = 64;\n    this.CHANGE_MARKER_BACK = 128;\n    this.CHANGE_MARKER_FRONT = 256;\n    this.CHANGE_FULL = 512;\n    this.CHANGE_H_SCROLL = 1024;\n\n    // this.$logChanges = function(changes) {\n    //     var a = \"\"\n    //     if (changes & this.CHANGE_CURSOR) a += \" cursor\";\n    //     if (changes & this.CHANGE_MARKER) a += \" marker\";\n    //     if (changes & this.CHANGE_GUTTER) a += \" gutter\";\n    //     if (changes & this.CHANGE_SCROLL) a += \" scroll\";\n    //     if (changes & this.CHANGE_LINES) a += \" lines\";\n    //     if (changes & this.CHANGE_TEXT) a += \" text\";\n    //     if (changes & this.CHANGE_SIZE) a += \" size\";\n    //     if (changes & this.CHANGE_MARKER_BACK) a += \" marker_back\";\n    //     if (changes & this.CHANGE_MARKER_FRONT) a += \" marker_front\";\n    //     if (changes & this.CHANGE_FULL) a += \" full\";\n    //     if (changes & this.CHANGE_H_SCROLL) a += \" h_scroll\";\n    //     console.log(a.trim())\n    // };\n\n    oop.implement(this, EventEmitter);\n\n    this.updateCharacterSize = function() {\n        if (this.$textLayer.allowBoldFonts != this.$allowBoldFonts) {\n            this.$allowBoldFonts = this.$textLayer.allowBoldFonts;\n            this.setStyle(\"ace_nobold\", !this.$allowBoldFonts);\n        }\n\n        this.layerConfig.characterWidth =\n        this.characterWidth = this.$textLayer.getCharacterWidth();\n        this.layerConfig.lineHeight =\n        this.lineHeight = this.$textLayer.getLineHeight();\n        this.$updatePrintMargin();\n        // set explicit line height to avoid normal resolving to different values based on text\n        dom.setStyle(this.scroller.style, \"line-height\", this.lineHeight + \"px\");\n    };\n\n    /**\n     *\n     * Associates the renderer with an [[EditSession `EditSession`]].\n     **/\n    this.setSession = function(session) {\n        if (this.session)\n            this.session.doc.off(\"changeNewLineMode\", this.onChangeNewLineMode);\n            \n        this.session = session;\n        if (session && this.scrollMargin.top && session.getScrollTop() <= 0)\n            session.setScrollTop(-this.scrollMargin.top);\n\n        this.$cursorLayer.setSession(session);\n        this.$markerBack.setSession(session);\n        this.$markerFront.setSession(session);\n        this.$gutterLayer.setSession(session);\n        this.$textLayer.setSession(session);\n        if (!session)\n            return;\n        \n        this.$loop.schedule(this.CHANGE_FULL);\n        this.session.$setFontMetrics(this.$fontMetrics);\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        \n        this.onChangeNewLineMode = this.onChangeNewLineMode.bind(this);\n        this.onChangeNewLineMode();\n        this.session.doc.on(\"changeNewLineMode\", this.onChangeNewLineMode);\n    };\n\n    /**\n     * Triggers a partial update of the text, from the range given by the two parameters.\n     * @param {Number} firstRow The first row to update\n     * @param {Number} lastRow The last row to update\n     *\n     **/\n    this.updateLines = function(firstRow, lastRow, force) {\n        if (lastRow === undefined)\n            lastRow = Infinity;\n\n        if (!this.$changedLines) {\n            this.$changedLines = {\n                firstRow: firstRow,\n                lastRow: lastRow\n            };\n        }\n        else {\n            if (this.$changedLines.firstRow > firstRow)\n                this.$changedLines.firstRow = firstRow;\n\n            if (this.$changedLines.lastRow < lastRow)\n                this.$changedLines.lastRow = lastRow;\n        }\n\n        // If the change happened offscreen above us then it's possible\n        // that a new line wrap will affect the position of the lines on our\n        // screen so they need redrawn.\n        // TODO: better solution is to not change scroll position when text is changed outside of visible area\n        if (this.$changedLines.lastRow < this.layerConfig.firstRow) {\n            if (force)\n                this.$changedLines.lastRow = this.layerConfig.lastRow;\n            else\n                return;\n        }\n        if (this.$changedLines.firstRow > this.layerConfig.lastRow)\n            return;\n        this.$loop.schedule(this.CHANGE_LINES);\n    };\n\n    this.onChangeNewLineMode = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n        this.$textLayer.$updateEolChar();\n        this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR);\n    };\n    \n    this.onChangeTabSize = function() {\n        this.$loop.schedule(this.CHANGE_TEXT | this.CHANGE_MARKER);\n        this.$textLayer.onChangeTabSize();\n    };\n\n    /**\n     * Triggers a full update of the text, for all the rows.\n     **/\n    this.updateText = function() {\n        this.$loop.schedule(this.CHANGE_TEXT);\n    };\n\n    /**\n     * Triggers a full update of all the layers, for all the rows.\n     * @param {Boolean} force If `true`, forces the changes through\n     *\n     **/\n    this.updateFull = function(force) {\n        if (force)\n            this.$renderChanges(this.CHANGE_FULL, true);\n        else\n            this.$loop.schedule(this.CHANGE_FULL);\n    };\n\n    /**\n     * Updates the font size.\n     **/\n    this.updateFontSize = function() {\n        this.$textLayer.checkForSizeChanges();\n    };\n\n    this.$changes = 0;\n    this.$updateSizeAsync = function() {\n        if (this.$loop.pending)\n            this.$size.$dirty = true;\n        else\n            this.onResize();\n    };\n    /**\n     * [Triggers a resize of the editor.]{: #VirtualRenderer.onResize}\n     * @param {Boolean} force If `true`, recomputes the size, even if the height and width haven't changed\n     * @param {Number} gutterWidth The width of the gutter in pixels\n     * @param {Number} width The width of the editor in pixels\n     * @param {Number} height The hiehgt of the editor, in pixels\n     *\n     **/\n    this.onResize = function(force, gutterWidth, width, height) {\n        if (this.resizing > 2)\n            return;\n        else if (this.resizing > 0)\n            this.resizing++;\n        else\n            this.resizing = force ? 1 : 0;\n        // `|| el.scrollHeight` is required for outosizing editors on ie\n        // where elements with clientHeight = 0 alsoe have clientWidth = 0\n        var el = this.container;\n        if (!height)\n            height = el.clientHeight || el.scrollHeight;\n        if (!width)\n            width = el.clientWidth || el.scrollWidth;\n        var changes = this.$updateCachedSize(force, gutterWidth, width, height);\n\n        \n        if (!this.$size.scrollerHeight || (!width && !height))\n            return this.resizing = 0;\n\n        if (force)\n            this.$gutterLayer.$padding = null;\n\n        if (force)\n            this.$renderChanges(changes | this.$changes, true);\n        else\n            this.$loop.schedule(changes | this.$changes);\n\n        if (this.resizing)\n            this.resizing = 0;\n        // reset cached values on scrollbars, needs to be removed when switching to non-native scrollbars\n        // see https://github.com/ajaxorg/ace/issues/2195\n        this.scrollBarH.scrollLeft = this.scrollBarV.scrollTop = null;\n        if (this.$customScrollbar) {\n            this.$updateCustomScrollbar(true);\n        }\n    };\n    \n    this.$updateCachedSize = function(force, gutterWidth, width, height) {\n        height -= (this.$extraHeight || 0);\n        var changes = 0;\n        var size = this.$size;\n        var oldSize = {\n            width: size.width,\n            height: size.height,\n            scrollerHeight: size.scrollerHeight,\n            scrollerWidth: size.scrollerWidth\n        };\n        if (height && (force || size.height != height)) {\n            size.height = height;\n            changes |= this.CHANGE_SIZE;\n\n            size.scrollerHeight = size.height;\n            if (this.$horizScroll)\n                size.scrollerHeight -= this.scrollBarH.getHeight();\n                \n            this.scrollBarV.setHeight(size.scrollerHeight);\n            this.scrollBarV.element.style.bottom = this.scrollBarH.getHeight() + \"px\";\n\n            changes = changes | this.CHANGE_SCROLL;\n        }\n\n        if (width && (force || size.width != width)) {\n            changes |= this.CHANGE_SIZE;\n            size.width = width;\n            \n            if (gutterWidth == null)\n                gutterWidth = this.$showGutter ? this.$gutter.offsetWidth : 0;\n            \n            this.gutterWidth = gutterWidth;\n            \n            dom.setStyle(this.scrollBarH.element.style, \"left\", gutterWidth + \"px\");\n            dom.setStyle(this.scroller.style, \"left\", gutterWidth + this.margin.left + \"px\");\n            size.scrollerWidth = Math.max(0, width - gutterWidth - this.scrollBarV.getWidth() - this.margin.h);\n            dom.setStyle(this.$gutter.style, \"left\", this.margin.left + \"px\");\n            \n            var right = this.scrollBarV.getWidth() + \"px\";\n            dom.setStyle(this.scrollBarH.element.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"right\", right);\n            dom.setStyle(this.scroller.style, \"bottom\", this.scrollBarH.getHeight());\n                \n            this.scrollBarH.setWidth(size.scrollerWidth);\n\n            if (this.session && this.session.getUseWrapMode() && this.adjustWrapLimit() || force) {\n                changes |= this.CHANGE_FULL;\n            }\n        }\n        \n        size.$dirty = !width || !height;\n\n        if (changes)\n            this._signal(\"resize\", oldSize);\n\n        return changes;\n    };\n\n    this.onGutterResize = function(width) {\n        var gutterWidth = this.$showGutter ? width : 0;\n        if (gutterWidth != this.gutterWidth)\n            this.$changes |= this.$updateCachedSize(true, gutterWidth, this.$size.width, this.$size.height);\n\n        if (this.session.getUseWrapMode() && this.adjustWrapLimit()) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else if (this.$size.$dirty) {\n            this.$loop.schedule(this.CHANGE_FULL);\n        } else {\n            this.$computeLayerConfig();\n        }\n    };\n\n    /**\n     * Adjusts the wrap limit, which is the number of characters that can fit within the width of the edit area on screen.\n     **/\n    this.adjustWrapLimit = function() {\n        var availableWidth = this.$size.scrollerWidth - this.$padding * 2;\n        var limit = Math.floor(availableWidth / this.characterWidth);\n        return this.session.adjustWrapLimit(limit, this.$showPrintMargin && this.$printMarginColumn);\n    };\n\n    /**\n     * Identifies whether you want to have an animated scroll or not.\n     * @param {Boolean} shouldAnimate Set to `true` to show animated scrolls\n     *\n     **/\n    this.setAnimatedScroll = function(shouldAnimate){\n        this.setOption(\"animatedScroll\", shouldAnimate);\n    };\n\n    /**\n     * Returns whether an animated scroll happens or not.\n     * @returns {Boolean}\n     **/\n    this.getAnimatedScroll = function() {\n        return this.$animatedScroll;\n    };\n\n    /**\n     * Identifies whether you want to show invisible characters or not.\n     * @param {Boolean} showInvisibles Set to `true` to show invisibles\n     *\n     **/\n    this.setShowInvisibles = function(showInvisibles) {\n        this.setOption(\"showInvisibles\", showInvisibles);\n        this.session.$bidiHandler.setShowInvisibles(showInvisibles);\n    };\n\n    /**\n     * Returns whether invisible characters are being shown or not.\n     * @returns {Boolean}\n     **/\n    this.getShowInvisibles = function() {\n        return this.getOption(\"showInvisibles\");\n    };\n    this.getDisplayIndentGuides = function() {\n        return this.getOption(\"displayIndentGuides\");\n    };\n\n    this.setDisplayIndentGuides = function(display) {\n        this.setOption(\"displayIndentGuides\", display);\n    };\n\n    this.getHighlightIndentGuides = function() {\n        return this.getOption(\"highlightIndentGuides\");\n    };\n\n    this.setHighlightIndentGuides = function(highlight) {\n        this.setOption(\"highlightIndentGuides\", highlight);\n    };\n\n    /**\n     * Identifies whether you want to show the print margin or not.\n     * @param {Boolean} showPrintMargin Set to `true` to show the print margin\n     *\n     **/\n    this.setShowPrintMargin = function(showPrintMargin) {\n        this.setOption(\"showPrintMargin\", showPrintMargin);\n    };\n\n    /**\n     * Returns whether the print margin is being shown or not.\n     * @returns {Boolean}\n     **/\n    this.getShowPrintMargin = function() {\n        return this.getOption(\"showPrintMargin\");\n    };\n    /**\n     * Identifies whether you want to show the print margin column or not.\n     * @param {Boolean} showPrintMargin Set to `true` to show the print margin column\n     *\n     **/\n    this.setPrintMarginColumn = function(showPrintMargin) {\n        this.setOption(\"printMarginColumn\", showPrintMargin);\n    };\n\n    /**\n     * Returns whether the print margin column is being shown or not.\n     * @returns {Boolean}\n     **/\n    this.getPrintMarginColumn = function() {\n        return this.getOption(\"printMarginColumn\");\n    };\n\n    /**\n     * Returns `true` if the gutter is being shown.\n     * @returns {Boolean}\n     **/\n    this.getShowGutter = function(){\n        return this.getOption(\"showGutter\");\n    };\n\n    /**\n     * Identifies whether you want to show the gutter or not.\n     * @param {Boolean} show Set to `true` to show the gutter\n     *\n     **/\n    this.setShowGutter = function(show){\n        return this.setOption(\"showGutter\", show);\n    };\n\n    this.getFadeFoldWidgets = function(){\n        return this.getOption(\"fadeFoldWidgets\");\n    };\n\n    this.setFadeFoldWidgets = function(show) {\n        this.setOption(\"fadeFoldWidgets\", show);\n    };\n\n    this.setHighlightGutterLine = function(shouldHighlight) {\n        this.setOption(\"highlightGutterLine\", shouldHighlight);\n    };\n\n    this.getHighlightGutterLine = function() {\n        return this.getOption(\"highlightGutterLine\");\n    };\n\n    this.$updatePrintMargin = function() {\n        if (!this.$showPrintMargin && !this.$printMarginEl)\n            return;\n\n        if (!this.$printMarginEl) {\n            var containerEl = dom.createElement(\"div\");\n            containerEl.className = \"ace_layer ace_print-margin-layer\";\n            this.$printMarginEl = dom.createElement(\"div\");\n            this.$printMarginEl.className = \"ace_print-margin\";\n            containerEl.appendChild(this.$printMarginEl);\n            this.content.insertBefore(containerEl, this.content.firstChild);\n        }\n\n        var style = this.$printMarginEl.style;\n        style.left = Math.round(this.characterWidth * this.$printMarginColumn + this.$padding) + \"px\";\n        style.visibility = this.$showPrintMargin ? \"visible\" : \"hidden\";\n        \n        if (this.session && this.session.$wrap == -1)\n            this.adjustWrapLimit();\n    };\n\n    /**\n     *\n     * Returns the root element containing this renderer.\n     * @returns {Element}\n     **/\n    this.getContainerElement = function() {\n        return this.container;\n    };\n\n    /**\n     *\n     * Returns the element that the mouse events are attached to\n     * @returns {Element}\n     **/\n    this.getMouseEventTarget = function() {\n        return this.scroller;\n    };\n\n    /**\n     *\n     * Returns the element to which the hidden text area is added.\n     * @returns {Element}\n     **/\n    this.getTextAreaContainer = function() {\n        return this.container;\n    };\n\n    // move text input over the cursor\n    // this is required for IME\n    this.$moveTextAreaToCursor = function() {\n        if (this.$isMousePressed) return;\n        var style = this.textarea.style;\n        var composition = this.$composition;\n        if (!this.$keepTextAreaAtCursor && !composition) {\n            dom.translate(this.textarea, -100, 0);\n            return;\n        }\n        var pixelPos = this.$cursorLayer.$pixelPos;\n        if (!pixelPos)\n            return;\n        if (composition && composition.markerRange)\n            pixelPos = this.$cursorLayer.getPixelPosition(composition.markerRange.start, true);\n        \n        var config = this.layerConfig;\n        var posTop = pixelPos.top;\n        var posLeft = pixelPos.left;\n        posTop -= config.offset;\n\n        var h = composition && composition.useTextareaForIME ? this.lineHeight : HIDE_TEXTAREA ? 0 : 1;\n        if (posTop < 0 || posTop > config.height - h) {\n            dom.translate(this.textarea, 0, 0);\n            return;\n        }\n\n        var w = 1;\n        var maxTop = this.$size.height - h;\n        if (!composition) {\n            posTop += this.lineHeight;\n        }\n        else {\n            if (composition.useTextareaForIME) {\n                var val = this.textarea.value;\n                w = this.characterWidth * (this.session.$getStringScreenWidth(val)[0]);\n            }\n            else {\n                posTop += this.lineHeight + 2;\n            }\n        }\n        \n        posLeft -= this.scrollLeft;\n        if (posLeft > this.$size.scrollerWidth - w)\n            posLeft = this.$size.scrollerWidth - w;\n\n        posLeft += this.gutterWidth + this.margin.left;\n\n        dom.setStyle(style, \"height\", h + \"px\");\n        dom.setStyle(style, \"width\", w + \"px\");\n        dom.translate(this.textarea, Math.min(posLeft, this.$size.scrollerWidth - w), Math.min(posTop, maxTop));\n    };\n\n    /**\n     * [Returns the index of the first visible row.]{: #VirtualRenderer.getFirstVisibleRow}\n     * @returns {Number}\n     **/\n    this.getFirstVisibleRow = function() {\n        return this.layerConfig.firstRow;\n    };\n\n    /**\n     *\n     * Returns the index of the first fully visible row. \"Fully\" here means that the characters in the row are not truncated; that the top and the bottom of the row are on the screen.\n     * @returns {Number}\n     **/\n    this.getFirstFullyVisibleRow = function() {\n        return this.layerConfig.firstRow + (this.layerConfig.offset === 0 ? 0 : 1);\n    };\n\n    /**\n     *\n     * Returns the index of the last fully visible row. \"Fully\" here means that the characters in the row are not truncated; that the top and the bottom of the row are on the screen.\n     * @returns {Number}\n     **/\n    this.getLastFullyVisibleRow = function() {\n        var config = this.layerConfig;\n        var lastRow = config.lastRow;\n        var top = this.session.documentToScreenRow(lastRow, 0) * config.lineHeight;\n        if (top - this.session.getScrollTop() > config.height - config.lineHeight)\n            return lastRow - 1;\n        return lastRow;\n    };\n\n    /**\n     *\n     * [Returns the index of the last visible row.]{: #VirtualRenderer.getLastVisibleRow}\n     * @returns {Number}\n     **/\n    this.getLastVisibleRow = function() {\n        return this.layerConfig.lastRow;\n    };\n\n    this.$padding = null;\n\n    /**\n     * Sets the padding for all the layers.\n     * @param {Number} padding A new padding value (in pixels)\n     *\n     **/\n    this.setPadding = function(padding) {\n        this.$padding = padding;\n        this.$textLayer.setPadding(padding);\n        this.$cursorLayer.setPadding(padding);\n        this.$markerFront.setPadding(padding);\n        this.$markerBack.setPadding(padding);\n        this.$loop.schedule(this.CHANGE_FULL);\n        this.$updatePrintMargin();\n    };\n    \n    this.setScrollMargin = function(top, bottom, left, right) {\n        var sm = this.scrollMargin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        if (sm.top && this.scrollTop <= 0 && this.session)\n            this.session.setScrollTop(-sm.top);\n        this.updateFull();\n    };\n    \n    this.setMargin = function(top, bottom, left, right) {\n        var sm = this.margin;\n        sm.top = top|0;\n        sm.bottom = bottom|0;\n        sm.right = right|0;\n        sm.left = left|0;\n        sm.v = sm.top + sm.bottom;\n        sm.h = sm.left + sm.right;\n        this.$updateCachedSize(true, this.gutterWidth, this.$size.width, this.$size.height);\n        this.updateFull();\n    };\n\n    /**\n     * Returns whether the horizontal scrollbar is set to be always visible.\n     * @returns {Boolean}\n     **/\n    this.getHScrollBarAlwaysVisible = function() {\n        return this.$hScrollBarAlwaysVisible;\n    };\n\n    /**\n     * Identifies whether you want to show the horizontal scrollbar or not.\n     * @param {Boolean} alwaysVisible Set to `true` to make the horizontal scroll bar visible\n     **/\n    this.setHScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"hScrollBarAlwaysVisible\", alwaysVisible);\n    };\n    /**\n     * Returns whether the horizontal scrollbar is set to be always visible.\n     * @returns {Boolean}\n     **/\n    this.getVScrollBarAlwaysVisible = function() {\n        return this.$vScrollBarAlwaysVisible;\n    };\n\n    /**\n     * Identifies whether you want to show the horizontal scrollbar or not.\n     * @param {Boolean} alwaysVisible Set to `true` to make the horizontal scroll bar visible\n     **/\n    this.setVScrollBarAlwaysVisible = function(alwaysVisible) {\n        this.setOption(\"vScrollBarAlwaysVisible\", alwaysVisible);\n    };\n\n    this.$updateScrollBarV = function() {\n        var scrollHeight = this.layerConfig.maxHeight;\n        var scrollerHeight = this.$size.scrollerHeight;\n        if (!this.$maxLines && this.$scrollPastEnd) {\n            scrollHeight -= (scrollerHeight - this.lineHeight) * this.$scrollPastEnd;\n            if (this.scrollTop > scrollHeight - scrollerHeight) {\n                scrollHeight = this.scrollTop + scrollerHeight;\n                this.scrollBarV.scrollTop = null;\n            }\n        }\n        this.scrollBarV.setScrollHeight(scrollHeight + this.scrollMargin.v);\n        this.scrollBarV.setScrollTop(this.scrollTop + this.scrollMargin.top);\n    };\n    this.$updateScrollBarH = function() {\n        this.scrollBarH.setScrollWidth(this.layerConfig.width + 2 * this.$padding + this.scrollMargin.h);\n        this.scrollBarH.setScrollLeft(this.scrollLeft + this.scrollMargin.left);\n    };\n    \n    this.$frozen = false;\n    this.freeze = function() {\n        this.$frozen = true;\n    };\n    \n    this.unfreeze = function() {\n        this.$frozen = false;\n    };\n\n    this.$renderChanges = function(changes, force) {\n        if (this.$changes) {\n            changes |= this.$changes;\n            this.$changes = 0;\n        }\n        if ((!this.session || !this.container.offsetWidth || this.$frozen) || (!changes && !force)) {\n            this.$changes |= changes;\n            return; \n        } \n        if (this.$size.$dirty) {\n            this.$changes |= changes;\n            return this.onResize(true);\n        }\n        if (!this.lineHeight) {\n            this.$textLayer.checkForSizeChanges();\n        }\n        // this.$logChanges(changes);\n        \n        this._signal(\"beforeRender\", changes);\n        \n        if (this.session && this.session.$bidiHandler)\n            this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);\n\n        var config = this.layerConfig;\n        // text, scrolling and resize changes can cause the view port size to change\n        if (changes & this.CHANGE_FULL ||\n            changes & this.CHANGE_SIZE ||\n            changes & this.CHANGE_TEXT ||\n            changes & this.CHANGE_LINES ||\n            changes & this.CHANGE_SCROLL ||\n            changes & this.CHANGE_H_SCROLL\n        ) {\n            changes |= this.$computeLayerConfig() | this.$loop.clear();\n            // If a change is made offscreen and wrapMode is on, then the onscreen\n            // lines may have been pushed down. If so, the first screen row will not\n            // have changed, but the first actual row will. In that case, adjust \n            // scrollTop so that the cursor and onscreen content stays in the same place.\n            // TODO: find a better way to handle this, that works non wrapped case and doesn't compute layerConfig twice\n            if (config.firstRow != this.layerConfig.firstRow && config.firstRowScreen == this.layerConfig.firstRowScreen) {\n                var st = this.scrollTop + (config.firstRow - this.layerConfig.firstRow) * this.lineHeight;\n                if (st > 0) {\n                    // this check is needed as a workaround for the documentToScreenRow returning -1 if document.length == 0\n                    this.scrollTop = st;\n                    changes = changes | this.CHANGE_SCROLL;\n                    changes |= this.$computeLayerConfig() | this.$loop.clear();\n                }\n            }\n            config = this.layerConfig;\n            // update scrollbar first to not lose scroll position when gutter calls resize\n            this.$updateScrollBarV();\n            if (changes & this.CHANGE_H_SCROLL)\n                this.$updateScrollBarH();\n            \n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            \n            var width = config.width + 2 * this.$padding + \"px\";\n            var height = config.minHeight + \"px\";\n            \n            dom.setStyle(this.content.style, \"width\", width);\n            dom.setStyle(this.content.style, \"height\", height);\n        }\n        \n        // horizontal scrolling\n        if (changes & this.CHANGE_H_SCROLL) {\n            dom.translate(this.content, -this.scrollLeft, -config.offset);\n            this.scroller.className = this.scrollLeft <= 0 ? \"ace_scroller\" : \"ace_scroller ace_scroll-left\";\n        }\n\n        // full\n        if (changes & this.CHANGE_FULL) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n\n        // scrolling\n        if (changes & this.CHANGE_SCROLL) {\n            this.$changedLines = null;\n            if (changes & this.CHANGE_TEXT || changes & this.CHANGE_LINES)\n                this.$textLayer.update(config);\n            else\n                this.$textLayer.scrollLines(config);\n\n            if (this.$showGutter) {\n                if (changes & this.CHANGE_GUTTER || changes & this.CHANGE_LINES)\n                    this.$gutterLayer.update(config);\n                else\n                    this.$gutterLayer.scrollLines(config);\n            }\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n            this.$markerBack.update(config);\n            this.$markerFront.update(config);\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n            this._signal(\"afterRender\", changes);\n            return;\n        }\n\n        if (changes & this.CHANGE_TEXT) {\n            this.$changedLines = null;\n            this.$textLayer.update(config);\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_LINES) {\n            if (this.$updateLines() || (changes & this.CHANGE_GUTTER) && this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_TEXT || changes & this.CHANGE_GUTTER) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n        else if (changes & this.CHANGE_CURSOR) {\n            if (this.$highlightGutterLine)\n                this.$gutterLayer.updateLineHighlight(config);\n            if (this.$customScrollbar) {\n                this.$scrollDecorator.$updateDecorators(config);\n            }\n        }\n\n        if (changes & this.CHANGE_CURSOR) {\n            this.$cursorLayer.update(config);\n            this.$moveTextAreaToCursor();\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_FRONT)) {\n            this.$markerFront.update(config);\n        }\n\n        if (changes & (this.CHANGE_MARKER | this.CHANGE_MARKER_BACK)) {\n            this.$markerBack.update(config);\n        }\n\n        this._signal(\"afterRender\", changes);\n    };\n\n    \n    this.$autosize = function() {\n        var height = this.session.getScreenLength() * this.lineHeight;\n        var maxHeight = this.$maxLines * this.lineHeight;\n        var desiredHeight = Math.min(maxHeight, \n            Math.max((this.$minLines || 1) * this.lineHeight, height)\n        ) + this.scrollMargin.v + (this.$extraHeight || 0);\n        if (this.$horizScroll)\n            desiredHeight += this.scrollBarH.getHeight();\n        if (this.$maxPixelHeight && desiredHeight > this.$maxPixelHeight)\n            desiredHeight = this.$maxPixelHeight;\n        \n        var hideScrollbars = desiredHeight <= 2 * this.lineHeight;\n        var vScroll = !hideScrollbars && height > maxHeight;\n        \n        if (desiredHeight != this.desiredHeight ||\n            this.$size.height != this.desiredHeight || vScroll != this.$vScroll) {\n            if (vScroll != this.$vScroll) {\n                this.$vScroll = vScroll;\n                this.scrollBarV.setVisible(vScroll);\n            }\n            \n            var w = this.container.clientWidth;\n            this.container.style.height = desiredHeight + \"px\";\n            this.$updateCachedSize(true, this.$gutterWidth, w, desiredHeight);\n            // this.$loop.changes = 0;\n            this.desiredHeight = desiredHeight;\n            \n            this._signal(\"autosize\");\n        }\n    };\n    \n    this.$computeLayerConfig = function() {\n        var session = this.session;\n        var size = this.$size;\n        \n        var hideScrollbars = size.height <= 2 * this.lineHeight;\n        var screenLines = this.session.getScreenLength();\n        var maxHeight = screenLines * this.lineHeight;\n\n        var longestLine = this.$getLongestLine();\n        \n        var horizScroll = !hideScrollbars && (this.$hScrollBarAlwaysVisible ||\n            size.scrollerWidth - longestLine - 2 * this.$padding < 0);\n\n        var hScrollChanged = this.$horizScroll !== horizScroll;\n        if (hScrollChanged) {\n            this.$horizScroll = horizScroll;\n            this.scrollBarH.setVisible(horizScroll);\n        }\n        var vScrollBefore = this.$vScroll; // autosize can change vscroll value in which case we need to update longestLine\n        // autoresize only after updating hscroll to include scrollbar height in desired height\n        if (this.$maxLines && this.lineHeight > 1)\n            this.$autosize();\n\n        var minHeight = size.scrollerHeight + this.lineHeight;\n        \n        var scrollPastEnd = !this.$maxLines && this.$scrollPastEnd\n            ? (size.scrollerHeight - this.lineHeight) * this.$scrollPastEnd\n            : 0;\n        maxHeight += scrollPastEnd;\n        \n        var sm = this.scrollMargin;\n        this.session.setScrollTop(Math.max(-sm.top,\n            Math.min(this.scrollTop, maxHeight - size.scrollerHeight + sm.bottom)));\n\n        this.session.setScrollLeft(Math.max(-sm.left, Math.min(this.scrollLeft, \n            longestLine + 2 * this.$padding - size.scrollerWidth + sm.right)));\n        \n        var vScroll = !hideScrollbars && (this.$vScrollBarAlwaysVisible ||\n            size.scrollerHeight - maxHeight + scrollPastEnd < 0 || this.scrollTop > sm.top);\n        var vScrollChanged = vScrollBefore !== vScroll;\n        if (vScrollChanged) {\n            this.$vScroll = vScroll;\n            this.scrollBarV.setVisible(vScroll);\n        }\n\n        var offset = this.scrollTop % this.lineHeight;\n        var lineCount = Math.ceil(minHeight / this.lineHeight) - 1;\n        var firstRow = Math.max(0, Math.round((this.scrollTop - offset) / this.lineHeight));\n        var lastRow = firstRow + lineCount;\n\n        // Map lines on the screen to lines in the document.\n        var firstRowScreen, firstRowHeight;\n        var lineHeight = this.lineHeight;\n        firstRow = session.screenToDocumentRow(firstRow, 0);\n\n        // Check if firstRow is inside of a foldLine. If true, then use the first\n        // row of the foldLine.\n        var foldLine = session.getFoldLine(firstRow);\n        if (foldLine) {\n            firstRow = foldLine.start.row;\n        }\n\n        firstRowScreen = session.documentToScreenRow(firstRow, 0);\n        firstRowHeight = session.getRowLength(firstRow) * lineHeight;\n\n        lastRow = Math.min(session.screenToDocumentRow(lastRow, 0), session.getLength() - 1);\n        minHeight = size.scrollerHeight + session.getRowLength(lastRow) * lineHeight +\n                                                firstRowHeight;\n\n        offset = this.scrollTop - firstRowScreen * lineHeight;\n\n        var changes = 0;\n        if (this.layerConfig.width != longestLine || hScrollChanged) \n            changes = this.CHANGE_H_SCROLL;\n        // Horizontal scrollbar visibility may have changed, which changes\n        // the client height of the scroller\n        if (hScrollChanged || vScrollChanged) {\n            changes |= this.$updateCachedSize(true, this.gutterWidth, size.width, size.height);\n            this._signal(\"scrollbarVisibilityChanged\");\n            if (vScrollChanged)\n                longestLine = this.$getLongestLine();\n        }\n        \n        this.layerConfig = {\n            width : longestLine,\n            padding : this.$padding,\n            firstRow : firstRow,\n            firstRowScreen: firstRowScreen,\n            lastRow : lastRow,\n            lineHeight : lineHeight,\n            characterWidth : this.characterWidth,\n            minHeight : minHeight,\n            maxHeight : maxHeight,\n            offset : offset,\n            gutterOffset : lineHeight ? Math.max(0, Math.ceil((offset + size.height - size.scrollerHeight) / lineHeight)) : 0,\n            height : this.$size.scrollerHeight\n        };\n\n        if (this.session.$bidiHandler)\n            this.session.$bidiHandler.setContentWidth(longestLine - this.$padding);\n        // For debugging.\n        // console.log(JSON.stringify(this.layerConfig));\n\n        return changes;\n    };\n\n    this.$updateLines = function() {\n        if (!this.$changedLines) return;\n        var firstRow = this.$changedLines.firstRow;\n        var lastRow = this.$changedLines.lastRow;\n        this.$changedLines = null;\n\n        var layerConfig = this.layerConfig;\n\n        if (firstRow > layerConfig.lastRow + 1) { return; }\n        if (lastRow < layerConfig.firstRow) { return; }\n\n        // if the last row is unknown -> redraw everything\n        if (lastRow === Infinity) {\n            if (this.$showGutter)\n                this.$gutterLayer.update(layerConfig);\n            this.$textLayer.update(layerConfig);\n            return;\n        }\n\n        // else update only the changed rows\n        this.$textLayer.updateLines(layerConfig, firstRow, lastRow);\n        return true;\n    };\n\n    this.$getLongestLine = function() {\n        var charCount = this.session.getScreenWidth();\n        if (this.showInvisibles && !this.session.$useWrapMode)\n            charCount += 1;\n            \n        if (this.$textLayer && charCount > this.$textLayer.MAX_LINE_LENGTH)\n            charCount = this.$textLayer.MAX_LINE_LENGTH + 30;\n\n        return Math.max(this.$size.scrollerWidth - 2 * this.$padding, Math.round(charCount * this.characterWidth));\n    };\n\n    /**\n     * Schedules an update to all the front markers in the document.\n     **/\n    this.updateFrontMarkers = function() {\n        this.$markerFront.setMarkers(this.session.getMarkers(true));\n        this.$loop.schedule(this.CHANGE_MARKER_FRONT);\n    };\n\n    /**\n     *\n     * Schedules an update to all the back markers in the document.\n     **/\n    this.updateBackMarkers = function() {\n        this.$markerBack.setMarkers(this.session.getMarkers());\n        this.$loop.schedule(this.CHANGE_MARKER_BACK);\n    };\n\n    /**\n     *\n     * Deprecated; (moved to [[EditSession]])\n     * @deprecated\n     **/\n    this.addGutterDecoration = function(row, className){\n        this.$gutterLayer.addGutterDecoration(row, className);\n    };\n\n    /**\n     * Deprecated; (moved to [[EditSession]])\n     * @deprecated\n     **/\n    this.removeGutterDecoration = function(row, className){\n        this.$gutterLayer.removeGutterDecoration(row, className);\n    };\n\n    /**\n     *\n     * Redraw breakpoints.\n     **/\n    this.updateBreakpoints = function(rows) {\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n\n    /**\n     * Sets annotations for the gutter.\n     * @param {Annotation[]} annotations An array containing annotations\n     *\n     **/\n    this.setAnnotations = function(annotations) {\n        this.$gutterLayer.setAnnotations(annotations);\n        this.$loop.schedule(this.CHANGE_GUTTER);\n    };\n\n    /**\n     *\n     * Updates the cursor icon.\n     **/\n    this.updateCursor = function() {\n        this.$loop.schedule(this.CHANGE_CURSOR);\n    };\n\n    /**\n     *\n     * Hides the cursor icon.\n     **/\n    this.hideCursor = function() {\n        this.$cursorLayer.hideCursor();\n    };\n\n    /**\n     *\n     * Shows the cursor icon.\n     **/\n    this.showCursor = function() {\n        this.$cursorLayer.showCursor();\n    };\n\n    this.scrollSelectionIntoView = function(anchor, lead, offset) {\n        // first scroll anchor into view then scroll lead into view\n        this.scrollCursorIntoView(anchor, offset);\n        this.scrollCursorIntoView(lead, offset);\n    };\n\n    /**\n     *\n     * Scrolls the cursor into the first visibile area of the editor\n     **/\n    this.scrollCursorIntoView = function(cursor, offset, $viewMargin) {\n        // the editor is not visible\n        if (this.$size.scrollerHeight === 0)\n            return;\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n\n        var left = pos.left;\n        var top = pos.top;\n        \n        var topMargin = $viewMargin && $viewMargin.top || 0;\n        var bottomMargin = $viewMargin && $viewMargin.bottom || 0;\n\n        if (this.$scrollAnimation) {\n            this.$stopAnimation = true;\n        }\n        \n        var scrollTop = this.$scrollAnimation ? this.session.getScrollTop() : this.scrollTop;\n        \n        if (scrollTop + topMargin > top) {\n            if (offset && scrollTop + topMargin > top + this.lineHeight)\n                top -= offset * this.$size.scrollerHeight;\n            if (top === 0)\n                top = -this.scrollMargin.top;\n            this.session.setScrollTop(top);\n        } else if (scrollTop + this.$size.scrollerHeight - bottomMargin < top + this.lineHeight) {\n            if (offset && scrollTop + this.$size.scrollerHeight - bottomMargin < top -  this.lineHeight)\n                top += offset * this.$size.scrollerHeight;\n            this.session.setScrollTop(top + this.lineHeight + bottomMargin - this.$size.scrollerHeight);\n        }\n\n        var scrollLeft = this.scrollLeft;\n\n        if (scrollLeft > left) {\n            if (left < this.$padding + 2 * this.layerConfig.characterWidth)\n                left = -this.scrollMargin.left;\n            this.session.setScrollLeft(left);\n        } else if (scrollLeft + this.$size.scrollerWidth < left + this.characterWidth) {\n            this.session.setScrollLeft(Math.round(left + this.characterWidth - this.$size.scrollerWidth));\n        } else if (scrollLeft <= this.$padding && left - scrollLeft < this.characterWidth) {\n            this.session.setScrollLeft(0);\n        }\n    };\n\n    /**\n     * {:EditSession.getScrollTop}\n     * @related EditSession.getScrollTop\n     * @returns {Number}\n     **/\n    this.getScrollTop = function() {\n        return this.session.getScrollTop();\n    };\n\n    /**\n     * {:EditSession.getScrollLeft}\n     * @related EditSession.getScrollLeft\n     * @returns {Number}\n     **/\n    this.getScrollLeft = function() {\n        return this.session.getScrollLeft();\n    };\n\n    /**\n     * Returns the first visible row, regardless of whether it's fully visible or not.\n     * @returns {Number}\n     **/\n    this.getScrollTopRow = function() {\n        return this.scrollTop / this.lineHeight;\n    };\n\n    /**\n     * Returns the last visible row, regardless of whether it's fully visible or not.\n     * @returns {Number}\n     **/\n    this.getScrollBottomRow = function() {\n        return Math.max(0, Math.floor((this.scrollTop + this.$size.scrollerHeight) / this.lineHeight) - 1);\n    };\n\n    /**\n     * Gracefully scrolls from the top of the editor to the row indicated.\n     * @param {Number} row A row id\n     *\n     * @related EditSession.setScrollTop\n     **/\n    this.scrollToRow = function(row) {\n        this.session.setScrollTop(row * this.lineHeight);\n    };\n\n    this.alignCursor = function(cursor, alignment) {\n        if (typeof cursor == \"number\")\n            cursor = {row: cursor, column: 0};\n\n        var pos = this.$cursorLayer.getPixelPosition(cursor);\n        var h = this.$size.scrollerHeight - this.lineHeight;\n        var offset = pos.top - h * (alignment || 0);\n\n        this.session.setScrollTop(offset);\n        return offset;\n    };\n\n    this.STEPS = 8;\n    this.$calcSteps = function(fromValue, toValue){\n        var i = 0;\n        var l = this.STEPS;\n        var steps = [];\n\n        var func  = function(t, x_min, dx) {\n            return dx * (Math.pow(t - 1, 3) + 1) + x_min;\n        };\n\n        for (i = 0; i < l; ++i)\n            steps.push(func(i / this.STEPS, fromValue, toValue - fromValue));\n\n        return steps;\n    };\n\n    /**\n     * Gracefully scrolls the editor to the row indicated.\n     * @param {Number} line A line number\n     * @param {Boolean} center If `true`, centers the editor the to indicated line\n     * @param {Boolean} animate If `true` animates scrolling\n     * @param {Function} callback Function to be called after the animation has finished\n     *\n     **/\n    this.scrollToLine = function(line, center, animate, callback) {\n        var pos = this.$cursorLayer.getPixelPosition({row: line, column: 0});\n        var offset = pos.top;\n        if (center)\n            offset -= this.$size.scrollerHeight / 2;\n\n        var initialScroll = this.scrollTop;\n        this.session.setScrollTop(offset);\n        if (animate !== false)\n            this.animateScrolling(initialScroll, callback);\n    };\n\n    this.animateScrolling = function(fromValue, callback) {\n        var toValue = this.scrollTop;\n        if (!this.$animatedScroll)\n            return;\n        var _self = this;\n        \n        if (fromValue == toValue)\n            return;\n        \n        if (this.$scrollAnimation) {\n            var oldSteps = this.$scrollAnimation.steps;\n            if (oldSteps.length) {\n                fromValue = oldSteps[0];\n                if (fromValue == toValue)\n                    return;\n            }\n        }\n        \n        var steps = _self.$calcSteps(fromValue, toValue);\n        this.$scrollAnimation = {from: fromValue, to: toValue, steps: steps};\n\n        clearInterval(this.$timer);\n\n        _self.session.setScrollTop(steps.shift());\n        // trick session to think it's already scrolled to not loose toValue\n        _self.session.$scrollTop = toValue;\n        \n        function endAnimation() {\n            _self.$timer = clearInterval(_self.$timer);\n            _self.$scrollAnimation = null;\n            _self.$stopAnimation = false;\n            callback && callback();\n        }\n        \n        this.$timer = setInterval(function() {\n            if (_self.$stopAnimation) {\n                endAnimation();\n                return;\n            }\n\n            if (!_self.session) \n                return clearInterval(_self.$timer);\n            if (steps.length) {\n                _self.session.setScrollTop(steps.shift());\n                _self.session.$scrollTop = toValue;\n            } else if (toValue != null) {\n                _self.session.$scrollTop = -1;\n                _self.session.setScrollTop(toValue);\n                toValue = null;\n            } else {\n                // do this on separate step to not get spurious scroll event from scrollbar\n                endAnimation();\n            }\n        }, 10);\n    };\n\n    /**\n     * Scrolls the editor to the y pixel indicated.\n     * @param {Number} scrollTop The position to scroll to\n     *\n     * @returns {Number}\n     **/\n    this.scrollToY = function(scrollTop) {\n        // after calling scrollBar.setScrollTop\n        // scrollbar sends us event with same scrollTop. ignore it\n        if (this.scrollTop !== scrollTop) {\n            this.$loop.schedule(this.CHANGE_SCROLL);\n            this.scrollTop = scrollTop;\n        }\n    };\n\n    /**\n     * Scrolls the editor across the x-axis to the pixel indicated.\n     * @param {Number} scrollLeft The position to scroll to\n     *\n     * @returns {Number}\n     **/\n    this.scrollToX = function(scrollLeft) {\n        if (this.scrollLeft !== scrollLeft)\n            this.scrollLeft = scrollLeft;\n        this.$loop.schedule(this.CHANGE_H_SCROLL);\n    };\n\n    /**\n     * Scrolls the editor across both x- and y-axes.\n     * @param {Number} x The x value to scroll to\n     * @param {Number} y The y value to scroll to\n     **/\n    this.scrollTo = function(x, y) {\n        this.session.setScrollTop(y);\n        this.session.setScrollLeft(x);\n    };\n    \n    /**\n     * Scrolls the editor across both x- and y-axes.\n     * @param {Number} deltaX The x value to scroll by\n     * @param {Number} deltaY The y value to scroll by\n     **/\n    this.scrollBy = function(deltaX, deltaY) {\n        deltaY && this.session.setScrollTop(this.session.getScrollTop() + deltaY);\n        deltaX && this.session.setScrollLeft(this.session.getScrollLeft() + deltaX);\n    };\n\n    /**\n     * Returns `true` if you can still scroll by either parameter; in other words, you haven't reached the end of the file or line.\n     * @param {Number} deltaX The x value to scroll by\n     * @param {Number} deltaY The y value to scroll by\n     *\n     * @returns {Boolean}\n     **/\n    this.isScrollableBy = function(deltaX, deltaY) {\n        if (deltaY < 0 && this.session.getScrollTop() >= 1 - this.scrollMargin.top)\n           return true;\n        if (deltaY > 0 && this.session.getScrollTop() + this.$size.scrollerHeight\n            - this.layerConfig.maxHeight < -1 + this.scrollMargin.bottom)\n           return true;\n        if (deltaX < 0 && this.session.getScrollLeft() >= 1 - this.scrollMargin.left)\n            return true;\n        if (deltaX > 0 && this.session.getScrollLeft() + this.$size.scrollerWidth\n            - this.layerConfig.width < -1 + this.scrollMargin.right)\n           return true;\n    };\n\n    this.pixelToScreenCoordinates = function(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n        \n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        return {row: row, column: col, side: offset - col > 0 ? 1 : -1, offsetX:  offsetX};\n    };\n\n    this.screenToTextCoordinates = function(x, y) {\n        var canvasPos;\n        if (this.$hasCssTransforms) {\n            canvasPos = {top:0, left: 0};\n            var p = this.$fontMetrics.transformCoordinates([x, y]);\n            x = p[1] - this.gutterWidth - this.margin.left;\n            y = p[0];\n        } else {\n            canvasPos = this.scroller.getBoundingClientRect();\n        }\n\n        var offsetX = x + this.scrollLeft - canvasPos.left - this.$padding;\n        var offset = offsetX / this.characterWidth;\n        var col = this.$blockCursor ? Math.floor(offset) : Math.round(offset);\n\n        var row = Math.floor((y + this.scrollTop - canvasPos.top) / this.lineHeight);\n\n        return this.session.screenToDocumentPosition(row, Math.max(col, 0), offsetX);\n    };\n\n    /**\n     * Returns an object containing the `pageX` and `pageY` coordinates of the document position.\n     * @param {Number} row The document row position\n     * @param {Number} column The document column position\n     *\n     * @returns {Object}\n     **/\n    this.textToScreenCoordinates = function(row, column) {\n        var canvasPos = this.scroller.getBoundingClientRect();\n        var pos = this.session.documentToScreenPosition(row, column);\n\n        var x = this.$padding + (this.session.$bidiHandler.isBidiRow(pos.row, row)\n             ? this.session.$bidiHandler.getPosLeft(pos.column)\n             : Math.round(pos.column * this.characterWidth));\n        \n        var y = pos.row * this.lineHeight;\n\n        return {\n            pageX: canvasPos.left + x - this.scrollLeft,\n            pageY: canvasPos.top + y - this.scrollTop\n        };\n    };\n\n    /**\n     *\n     * Focuses the current container.\n     **/\n    this.visualizeFocus = function() {\n        dom.addCssClass(this.container, \"ace_focus\");\n    };\n\n    /**\n     *\n     * Blurs the current container.\n     **/\n    this.visualizeBlur = function() {\n        dom.removeCssClass(this.container, \"ace_focus\");\n    };\n\n    /**\n     * @param {Number} position\n     *\n     * @private\n     **/\n    this.showComposition = function(composition) {\n        this.$composition = composition;\n        if (!composition.cssText) {\n            composition.cssText = this.textarea.style.cssText;\n        }\n        if (composition.useTextareaForIME == undefined)\n            composition.useTextareaForIME = this.$useTextareaForIME;\n        \n        if (this.$useTextareaForIME) {\n            dom.addCssClass(this.textarea, \"ace_composition\");\n            this.textarea.style.cssText = \"\";\n            this.$moveTextAreaToCursor();\n            this.$cursorLayer.element.style.display = \"none\";\n        }\n        else {\n            composition.markerId = this.session.addMarker(composition.markerRange, \"ace_composition_marker\", \"text\");\n        }\n    };\n\n    /**\n     * @param {String} text A string of text to use\n     *\n     * Sets the inner text of the current composition to `text`.\n     **/\n    this.setCompositionText = function(text) {\n        var cursor = this.session.selection.cursor;\n        this.addToken(text, \"composition_placeholder\", cursor.row, cursor.column);\n        this.$moveTextAreaToCursor();\n    };\n\n    /**\n     *\n     * Hides the current composition.\n     **/\n    this.hideComposition = function() {\n        if (!this.$composition)\n            return;\n        \n        if (this.$composition.markerId)\n            this.session.removeMarker(this.$composition.markerId);\n\n        dom.removeCssClass(this.textarea, \"ace_composition\");\n        this.textarea.style.cssText = this.$composition.cssText;\n        var cursor = this.session.selection.cursor;\n        this.removeExtraToken(cursor.row, cursor.column);\n        this.$composition = null;\n        this.$cursorLayer.element.style.display = \"\";\n    };\n    \n    this.addToken = function(text, type, row, column) {\n        var session = this.session;\n        session.bgTokenizer.lines[row] = null;\n        var newToken = {type: type, value: text};\n        var tokens = session.getTokens(row);\n        if (column == null) {\n            tokens.push(newToken);\n        } else {\n            var l = 0;\n            for (var i =0; i < tokens.length; i++) {\n                var token = tokens[i];\n                l += token.value.length;\n                if (column <= l) {\n                    var diff = token.value.length - (l - column);\n                    var before = token.value.slice(0, diff);\n                    var after = token.value.slice(diff);\n    \n                    tokens.splice(i, 1, {type: token.type, value: before},  newToken,  {type: token.type, value: after});\n                    break;\n                }\n            }\n        }\n        this.updateLines(row, row);\n    };\n\n    this.removeExtraToken = function(row, column) {\n        this.updateLines(row, row);\n    };\n\n    /**\n     * [Sets a new theme for the editor. `theme` should exist, and be a directory path, like `ace/theme/textmate`.]{: #VirtualRenderer.setTheme}\n     * @param {String} theme The path to a theme\n     * @param {Function} cb optional callback\n     *\n     **/\n    this.setTheme = function(theme, cb) {\n        var _self = this;\n        this.$themeId = theme;\n        _self._dispatchEvent('themeChange',{theme:theme});\n\n        if (!theme || typeof theme == \"string\") {\n            var moduleName = theme || this.$options.theme.initialValue;\n            config.loadModule([\"theme\", moduleName], afterLoad);\n        } else {\n            afterLoad(theme);\n        }\n\n        function afterLoad(module) {\n            if (_self.$themeId != theme)\n                return cb && cb();\n            if (!module || !module.cssClass)\n                throw new Error(\"couldn't load module \" + theme + \" or it didn't call define\");\n            if (module.$id)\n                _self.$themeId = module.$id;\n            dom.importCssString(\n                module.cssText,\n                module.cssClass,\n                _self.container\n            );\n\n            if (_self.theme)\n                dom.removeCssClass(_self.container, _self.theme.cssClass);\n\n            var padding = \"padding\" in module ? module.padding \n                : \"padding\" in (_self.theme || {}) ? 4 : _self.$padding;\n            if (_self.$padding && padding != _self.$padding)\n                _self.setPadding(padding);\n                \n            // this is kept only for backwards compatibility\n            _self.$theme = module.cssClass;\n\n            _self.theme = module;\n            dom.addCssClass(_self.container, module.cssClass);\n            dom.setCssClass(_self.container, \"ace_dark\", module.isDark);\n\n            // force re-measure of the gutter width\n            if (_self.$size) {\n                _self.$size.width = 0;\n                _self.$updateSizeAsync();\n            }\n\n            _self._dispatchEvent('themeLoaded', {theme:module});\n            cb && cb();\n        }\n    };\n\n    /**\n     * [Returns the path of the current theme.]{: #VirtualRenderer.getTheme}\n     * @returns {String}\n     **/\n    this.getTheme = function() {\n        return this.$themeId;\n    };\n\n    // Methods allows to add / remove CSS classnames to the editor element.\n    // This feature can be used by plug-ins to provide a visual indication of\n    // a certain mode that editor is in.\n\n    /**\n     * [Adds a new class, `style`, to the editor.]{: #VirtualRenderer.setStyle}\n     * @param {String} style A class name\n     *\n     **/\n    this.setStyle = function(style, include) {\n        dom.setCssClass(this.container, style, include !== false);\n    };\n\n    /**\n     * [Removes the class `style` from the editor.]{: #VirtualRenderer.unsetStyle}\n     * @param {String} style A class name\n     *\n     **/\n    this.unsetStyle = function(style) {\n        dom.removeCssClass(this.container, style);\n    };\n    \n    this.setCursorStyle = function(style) {\n        dom.setStyle(this.scroller.style, \"cursor\", style);\n    };\n\n    /**\n     * @param {String} cursorStyle A css cursor style\n     *\n     **/\n    this.setMouseCursor = function(cursorStyle) {\n        dom.setStyle(this.scroller.style, \"cursor\", cursorStyle);\n    };\n    \n    this.attachToShadowRoot = function() {\n        dom.importCssString(editorCss, \"ace_editor.css\", this.container);\n    };\n\n    /**\n     * Destroys the text and cursor layers for this renderer.\n     **/\n    this.destroy = function() {\n        this.freeze();\n        this.$fontMetrics.destroy();\n        this.$cursorLayer.destroy();\n        this.removeAllListeners();\n        this.container.textContent = \"\";\n    };\n\n    this.$updateCustomScrollbar = function (val) {\n        var _self = this;\n        this.$horizScroll = this.$vScroll = null;\n        this.scrollBarV.element.remove();\n        this.scrollBarH.element.remove();\n        if (this.$scrollDecorator) {\n            delete this.$scrollDecorator;\n        }\n        if (val === true) {\n            this.scrollBarV = new VScrollBarCustom(this.container, this);\n            this.scrollBarH = new HScrollBarCustom(this.container, this);\n            this.scrollBarV.setHeight(this.$size.scrollerHeight);\n            this.scrollBarH.setWidth(this.$size.scrollerWidth);\n\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n            this.$scrollDecorator = new Decorator(this.scrollBarV, this);\n            this.$scrollDecorator.$updateDecorators();\n        }\n        else {\n            this.scrollBarV = new VScrollBar(this.container, this);\n            this.scrollBarH = new HScrollBar(this.container, this);\n            this.scrollBarV.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollTop(e.data - _self.scrollMargin.top);\n            });\n            this.scrollBarH.addEventListener(\"scroll\", function (e) {\n                if (!_self.$scrollAnimation) _self.session.setScrollLeft(e.data - _self.scrollMargin.left);\n            });\n        }\n    };\n\n}).call(VirtualRenderer.prototype);\n\n\nconfig.defineOptions(VirtualRenderer.prototype, \"renderer\", {\n    animatedScroll: {initialValue: false},\n    showInvisibles: {\n        set: function(value) {\n            if (this.$textLayer.setShowInvisibles(value))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: false\n    },\n    showPrintMargin: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: true\n    },\n    printMarginColumn: {\n        set: function() { this.$updatePrintMargin(); },\n        initialValue: 80\n    },\n    printMargin: {\n        set: function(val) {\n            if (typeof val == \"number\")\n                this.$printMarginColumn = val;\n            this.$showPrintMargin = !!val;\n            this.$updatePrintMargin();\n        },\n        get: function() {\n            return this.$showPrintMargin && this.$printMarginColumn; \n        }\n    },\n    showGutter: {\n        set: function(show){\n            this.$gutter.style.display = show ? \"block\" : \"none\";\n            this.$loop.schedule(this.CHANGE_FULL);\n            this.onGutterResize();\n        },\n        initialValue: true\n    },\n    fadeFoldWidgets: {\n        set: function(show) {\n            dom.setCssClass(this.$gutter, \"ace_fade-fold-widgets\", show);\n        },\n        initialValue: false\n    },\n    showFoldWidgets: {\n        set: function(show) {\n            this.$gutterLayer.setShowFoldWidgets(show);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    displayIndentGuides: {\n        set: function(show) {\n            if (this.$textLayer.setDisplayIndentGuides(show))\n                this.$loop.schedule(this.CHANGE_TEXT);\n        },\n        initialValue: true\n    },\n    highlightIndentGuides: {\n        set: function (show) {\n            if (this.$textLayer.setHighlightIndentGuides(show) == true) {\n                this.$textLayer.$highlightIndentGuide();\n            }\n            else {\n                this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells);\n            }\n        },\n        initialValue: true\n    },\n    highlightGutterLine: {\n        set: function(shouldHighlight) {\n            this.$gutterLayer.setHighlightGutterLine(shouldHighlight);\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        },\n        initialValue: true\n    },\n    hScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$hScrollBarAlwaysVisible || !this.$horizScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    vScrollBarAlwaysVisible: {\n        set: function(val) {\n            if (!this.$vScrollBarAlwaysVisible || !this.$vScroll)\n                this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: false\n    },\n    fontSize: {\n        set: function(size) {\n            if (typeof size == \"number\")\n                size = size + \"px\";\n            this.container.style.fontSize = size;\n            this.updateFontSize();\n        },\n        initialValue: 12\n    },\n    fontFamily: {\n        set: function(name) {\n            this.container.style.fontFamily = name;\n            this.updateFontSize();\n        }\n    },\n    maxLines: {\n        set: function(val) {\n            this.updateFull();\n        }\n    },\n    minLines: {\n        set: function(val) {\n            if (!(this.$minLines < 0x1ffffffffffff))\n                this.$minLines = 0;\n            this.updateFull();\n        }\n    },\n    maxPixelHeight: {\n        set: function(val) {\n            this.updateFull();\n        },\n        initialValue: 0\n    },\n    scrollPastEnd: {\n        set: function(val) {\n            val = +val || 0;\n            if (this.$scrollPastEnd == val)\n                return;\n            this.$scrollPastEnd = val;\n            this.$loop.schedule(this.CHANGE_SCROLL);\n        },\n        initialValue: 0,\n        handlesSet: true\n    },\n    fixedWidthGutter: {\n        set: function(val) {\n            this.$gutterLayer.$fixedWidth = !!val;\n            this.$loop.schedule(this.CHANGE_GUTTER);\n        }\n    },\n    customScrollbar: {\n        set: function(val) {\n            this.$updateCustomScrollbar(val);\n        },\n        initialValue: false\n    },\n    theme: {\n        set: function(val) { this.setTheme(val); },\n        get: function() { return this.$themeId || this.theme; },\n        initialValue: \"./theme/textmate\",\n        handlesSet: true\n    },\n    hasCssTransforms: {\n    },\n    useTextareaForIME: {\n        initialValue: !useragent.isMobile && !useragent.isIE\n    }\n});\n\nexports.VirtualRenderer = VirtualRenderer;\n","// not implemented\nexports.WorkerClient = function() {\n    this.attachToDocument = function() {};\n    this.on = function() {};\n    this.terminate = function() {};\n};\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 2126;\nmodule.exports = webpackEmptyContext;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ace_tooltip > p {\\n    margin: 0;\\n}\\n\\n.ace_tooltip > code, .ace_tooltip > * > code {\\n    font-style: italic;\\n    font-size: 11px;\\n}\", \"\",{\"version\":3,\"sources\":[\"webpack://./packages/ace-linters/css/linters.css\"],\"names\":[],\"mappings\":\"AAAA;IACI,SAAS;AACb;;AAEA;IACI,kBAAkB;IAClB,eAAe;AACnB\",\"sourcesContent\":[\".ace_tooltip > p {\\n    margin: 0;\\n}\\n\\n.ace_tooltip > code, .ace_tooltip > * > code {\\n    font-style: italic;\\n    font-size: 11px;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};",";/*! showdown v 2.1.0 - 21-04-2022 */\r\n(function(){\r\n/**\n * Created by Tivie on 13-07-2015.\n */\n\nfunction getDefaultOpts (simple) {\n  'use strict';\n\n  var defaultOptions = {\n    omitExtraWLInCodeBlocks: {\n      defaultValue: false,\n      describe: 'Omit the default extra whiteline added to code blocks',\n      type: 'boolean'\n    },\n    noHeaderId: {\n      defaultValue: false,\n      describe: 'Turn on/off generated header id',\n      type: 'boolean'\n    },\n    prefixHeaderId: {\n      defaultValue: false,\n      describe: 'Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic \\'section-\\' prefix',\n      type: 'string'\n    },\n    rawPrefixHeaderId: {\n      defaultValue: false,\n      describe: 'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the \" char is used in the prefix)',\n      type: 'boolean'\n    },\n    ghCompatibleHeaderId: {\n      defaultValue: false,\n      describe: 'Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)',\n      type: 'boolean'\n    },\n    rawHeaderId: {\n      defaultValue: false,\n      describe: 'Remove only spaces, \\' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids',\n      type: 'boolean'\n    },\n    headerLevelStart: {\n      defaultValue: false,\n      describe: 'The header blocks level start',\n      type: 'integer'\n    },\n    parseImgDimensions: {\n      defaultValue: false,\n      describe: 'Turn on/off image dimension parsing',\n      type: 'boolean'\n    },\n    simplifiedAutoLink: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM autolink style',\n      type: 'boolean'\n    },\n    excludeTrailingPunctuationFromURLs: {\n      defaultValue: false,\n      describe: 'Excludes trailing punctuation from links generated with autoLinking',\n      type: 'boolean'\n    },\n    literalMidWordUnderscores: {\n      defaultValue: false,\n      describe: 'Parse midword underscores as literal underscores',\n      type: 'boolean'\n    },\n    literalMidWordAsterisks: {\n      defaultValue: false,\n      describe: 'Parse midword asterisks as literal asterisks',\n      type: 'boolean'\n    },\n    strikethrough: {\n      defaultValue: false,\n      describe: 'Turn on/off strikethrough support',\n      type: 'boolean'\n    },\n    tables: {\n      defaultValue: false,\n      describe: 'Turn on/off tables support',\n      type: 'boolean'\n    },\n    tablesHeaderId: {\n      defaultValue: false,\n      describe: 'Add an id to table headers',\n      type: 'boolean'\n    },\n    ghCodeBlocks: {\n      defaultValue: true,\n      describe: 'Turn on/off GFM fenced code blocks support',\n      type: 'boolean'\n    },\n    tasklists: {\n      defaultValue: false,\n      describe: 'Turn on/off GFM tasklist support',\n      type: 'boolean'\n    },\n    smoothLivePreview: {\n      defaultValue: false,\n      describe: 'Prevents weird effects in live previews due to incomplete input',\n      type: 'boolean'\n    },\n    smartIndentationFix: {\n      defaultValue: false,\n      describe: 'Tries to smartly fix indentation in es6 strings',\n      type: 'boolean'\n    },\n    disableForced4SpacesIndentedSublists: {\n      defaultValue: false,\n      describe: 'Disables the requirement of indenting nested sublists by 4 spaces',\n      type: 'boolean'\n    },\n    simpleLineBreaks: {\n      defaultValue: false,\n      describe: 'Parses simple line breaks as <br> (GFM Style)',\n      type: 'boolean'\n    },\n    requireSpaceBeforeHeadingText: {\n      defaultValue: false,\n      describe: 'Makes adding a space between `#` and the header text mandatory (GFM Style)',\n      type: 'boolean'\n    },\n    ghMentions: {\n      defaultValue: false,\n      describe: 'Enables github @mentions',\n      type: 'boolean'\n    },\n    ghMentionsLink: {\n      defaultValue: 'https://github.com/{u}',\n      describe: 'Changes the link generated by @mentions. Only applies if ghMentions option is enabled.',\n      type: 'string'\n    },\n    encodeEmails: {\n      defaultValue: true,\n      describe: 'Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities',\n      type: 'boolean'\n    },\n    openLinksInNewWindow: {\n      defaultValue: false,\n      describe: 'Open all links in new windows',\n      type: 'boolean'\n    },\n    backslashEscapesHTMLTags: {\n      defaultValue: false,\n      describe: 'Support for HTML Tag escaping. ex: \\<div>foo\\</div>',\n      type: 'boolean'\n    },\n    emoji: {\n      defaultValue: false,\n      describe: 'Enable emoji support. Ex: `this is a :smile: emoji`',\n      type: 'boolean'\n    },\n    underline: {\n      defaultValue: false,\n      describe: 'Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`',\n      type: 'boolean'\n    },\n    ellipsis: {\n      defaultValue: true,\n      describe: 'Replaces three dots with the ellipsis unicode character',\n      type: 'boolean'\n    },\n    completeHTMLDocument: {\n      defaultValue: false,\n      describe: 'Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags',\n      type: 'boolean'\n    },\n    metadata: {\n      defaultValue: false,\n      describe: 'Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).',\n      type: 'boolean'\n    },\n    splitAdjacentBlockquotes: {\n      defaultValue: false,\n      describe: 'Split adjacent blockquote blocks',\n      type: 'boolean'\n    }\n  };\n  if (simple === false) {\n    return JSON.parse(JSON.stringify(defaultOptions));\n  }\n  var ret = {};\n  for (var opt in defaultOptions) {\n    if (defaultOptions.hasOwnProperty(opt)) {\n      ret[opt] = defaultOptions[opt].defaultValue;\n    }\n  }\n  return ret;\n}\n\nfunction allOptionsOn () {\n  'use strict';\n  var options = getDefaultOpts(true),\n      ret = {};\n  for (var opt in options) {\n    if (options.hasOwnProperty(opt)) {\n      ret[opt] = true;\n    }\n  }\n  return ret;\n}\n\r\n/**\n * Created by Tivie on 06-01-2015.\n */\n\n// Private properties\nvar showdown = {},\n    parsers = {},\n    extensions = {},\n    globalOptions = getDefaultOpts(true),\n    setFlavor = 'vanilla',\n    flavor = {\n      github: {\n        omitExtraWLInCodeBlocks:              true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        disableForced4SpacesIndentedSublists: true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghCompatibleHeaderId:                 true,\n        ghMentions:                           true,\n        backslashEscapesHTMLTags:             true,\n        emoji:                                true,\n        splitAdjacentBlockquotes:             true\n      },\n      original: {\n        noHeaderId:                           true,\n        ghCodeBlocks:                         false\n      },\n      ghost: {\n        omitExtraWLInCodeBlocks:              true,\n        parseImgDimensions:                   true,\n        simplifiedAutoLink:                   true,\n        excludeTrailingPunctuationFromURLs:   true,\n        literalMidWordUnderscores:            true,\n        strikethrough:                        true,\n        tables:                               true,\n        tablesHeaderId:                       true,\n        ghCodeBlocks:                         true,\n        tasklists:                            true,\n        smoothLivePreview:                    true,\n        simpleLineBreaks:                     true,\n        requireSpaceBeforeHeadingText:        true,\n        ghMentions:                           false,\n        encodeEmails:                         true\n      },\n      vanilla: getDefaultOpts(true),\n      allOn: allOptionsOn()\n    };\n\n/**\n * helper namespace\n * @type {{}}\n */\nshowdown.helper = {};\n\n/**\n * TODO LEGACY SUPPORT CODE\n * @type {{}}\n */\nshowdown.extensions = {};\n\n/**\n * Set a global option\n * @static\n * @param {string} key\n * @param {*} value\n * @returns {showdown}\n */\nshowdown.setOption = function (key, value) {\n  'use strict';\n  globalOptions[key] = value;\n  return this;\n};\n\n/**\n * Get a global option\n * @static\n * @param {string} key\n * @returns {*}\n */\nshowdown.getOption = function (key) {\n  'use strict';\n  return globalOptions[key];\n};\n\n/**\n * Get the global options\n * @static\n * @returns {{}}\n */\nshowdown.getOptions = function () {\n  'use strict';\n  return globalOptions;\n};\n\n/**\n * Reset global options to the default values\n * @static\n */\nshowdown.resetOptions = function () {\n  'use strict';\n  globalOptions = getDefaultOpts(true);\n};\n\n/**\n * Set the flavor showdown should use as default\n * @param {string} name\n */\nshowdown.setFlavor = function (name) {\n  'use strict';\n  if (!flavor.hasOwnProperty(name)) {\n    throw Error(name + ' flavor was not found');\n  }\n  showdown.resetOptions();\n  var preset = flavor[name];\n  setFlavor = name;\n  for (var option in preset) {\n    if (preset.hasOwnProperty(option)) {\n      globalOptions[option] = preset[option];\n    }\n  }\n};\n\n/**\n * Get the currently set flavor\n * @returns {string}\n */\nshowdown.getFlavor = function () {\n  'use strict';\n  return setFlavor;\n};\n\n/**\n * Get the options of a specified flavor. Returns undefined if the flavor was not found\n * @param {string} name Name of the flavor\n * @returns {{}|undefined}\n */\nshowdown.getFlavorOptions = function (name) {\n  'use strict';\n  if (flavor.hasOwnProperty(name)) {\n    return flavor[name];\n  }\n};\n\n/**\n * Get the default options\n * @static\n * @param {boolean} [simple=true]\n * @returns {{}}\n */\nshowdown.getDefaultOptions = function (simple) {\n  'use strict';\n  return getDefaultOpts(simple);\n};\n\n/**\n * Get or set a subParser\n *\n * subParser(name)       - Get a registered subParser\n * subParser(name, func) - Register a subParser\n * @static\n * @param {string} name\n * @param {function} [func]\n * @returns {*}\n */\nshowdown.subParser = function (name, func) {\n  'use strict';\n  if (showdown.helper.isString(name)) {\n    if (typeof func !== 'undefined') {\n      parsers[name] = func;\n    } else {\n      if (parsers.hasOwnProperty(name)) {\n        return parsers[name];\n      } else {\n        throw Error('SubParser named ' + name + ' not registered!');\n      }\n    }\n  }\n};\n\n/**\n * Gets or registers an extension\n * @static\n * @param {string} name\n * @param {object|object[]|function=} ext\n * @returns {*}\n */\nshowdown.extension = function (name, ext) {\n  'use strict';\n\n  if (!showdown.helper.isString(name)) {\n    throw Error('Extension \\'name\\' must be a string');\n  }\n\n  name = showdown.helper.stdExtName(name);\n\n  // Getter\n  if (showdown.helper.isUndefined(ext)) {\n    if (!extensions.hasOwnProperty(name)) {\n      throw Error('Extension named ' + name + ' is not registered!');\n    }\n    return extensions[name];\n\n    // Setter\n  } else {\n    // Expand extension if it's wrapped in a function\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    // Ensure extension is an array\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExtension = validate(ext, name);\n\n    if (validExtension.valid) {\n      extensions[name] = ext;\n    } else {\n      throw Error(validExtension.error);\n    }\n  }\n};\n\n/**\n * Gets all extensions registered\n * @returns {{}}\n */\nshowdown.getAllExtensions = function () {\n  'use strict';\n  return extensions;\n};\n\n/**\n * Remove an extension\n * @param {string} name\n */\nshowdown.removeExtension = function (name) {\n  'use strict';\n  delete extensions[name];\n};\n\n/**\n * Removes all extensions\n */\nshowdown.resetExtensions = function () {\n  'use strict';\n  extensions = {};\n};\n\n/**\n * Validate extension\n * @param {array} extension\n * @param {string} name\n * @returns {{valid: boolean, error: string}}\n */\nfunction validate (extension, name) {\n  'use strict';\n\n  var errMsg = (name) ? 'Error in ' + name + ' extension->' : 'Error in unnamed extension',\n      ret = {\n        valid: true,\n        error: ''\n      };\n\n  if (!showdown.helper.isArray(extension)) {\n    extension = [extension];\n  }\n\n  for (var i = 0; i < extension.length; ++i) {\n    var baseMsg = errMsg + ' sub-extension ' + i + ': ',\n        ext = extension[i];\n    if (typeof ext !== 'object') {\n      ret.valid = false;\n      ret.error = baseMsg + 'must be an object, but ' + typeof ext + ' given';\n      return ret;\n    }\n\n    if (!showdown.helper.isString(ext.type)) {\n      ret.valid = false;\n      ret.error = baseMsg + 'property \"type\" must be a string, but ' + typeof ext.type + ' given';\n      return ret;\n    }\n\n    var type = ext.type = ext.type.toLowerCase();\n\n    // normalize extension type\n    if (type === 'language') {\n      type = ext.type = 'lang';\n    }\n\n    if (type === 'html') {\n      type = ext.type = 'output';\n    }\n\n    if (type !== 'lang' && type !== 'output' && type !== 'listener') {\n      ret.valid = false;\n      ret.error = baseMsg + 'type ' + type + ' is not recognized. Valid values: \"lang/language\", \"output/html\" or \"listener\"';\n      return ret;\n    }\n\n    if (type === 'listener') {\n      if (showdown.helper.isUndefined(ext.listeners)) {\n        ret.valid = false;\n        ret.error = baseMsg + '. Extensions of type \"listener\" must have a property called \"listeners\"';\n        return ret;\n      }\n    } else {\n      if (showdown.helper.isUndefined(ext.filter) && showdown.helper.isUndefined(ext.regex)) {\n        ret.valid = false;\n        ret.error = baseMsg + type + ' extensions must define either a \"regex\" property or a \"filter\" method';\n        return ret;\n      }\n    }\n\n    if (ext.listeners) {\n      if (typeof ext.listeners !== 'object') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"listeners\" property must be an object but ' + typeof ext.listeners + ' given';\n        return ret;\n      }\n      for (var ln in ext.listeners) {\n        if (ext.listeners.hasOwnProperty(ln)) {\n          if (typeof ext.listeners[ln] !== 'function') {\n            ret.valid = false;\n            ret.error = baseMsg + '\"listeners\" property must be an hash of [event name]: [callback]. listeners.' + ln +\n              ' must be a function but ' + typeof ext.listeners[ln] + ' given';\n            return ret;\n          }\n        }\n      }\n    }\n\n    if (ext.filter) {\n      if (typeof ext.filter !== 'function') {\n        ret.valid = false;\n        ret.error = baseMsg + '\"filter\" must be a function, but ' + typeof ext.filter + ' given';\n        return ret;\n      }\n    } else if (ext.regex) {\n      if (showdown.helper.isString(ext.regex)) {\n        ext.regex = new RegExp(ext.regex, 'g');\n      }\n      if (!(ext.regex instanceof RegExp)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" property must either be a string or a RegExp object, but ' + typeof ext.regex + ' given';\n        return ret;\n      }\n      if (showdown.helper.isUndefined(ext.replace)) {\n        ret.valid = false;\n        ret.error = baseMsg + '\"regex\" extensions must implement a replace string or function';\n        return ret;\n      }\n    }\n  }\n  return ret;\n}\n\n/**\n * Validate extension\n * @param {object} ext\n * @returns {boolean}\n */\nshowdown.validateExtension = function (ext) {\n  'use strict';\n\n  var validateExtension = validate(ext, null);\n  if (!validateExtension.valid) {\n    console.warn(validateExtension.error);\n    return false;\n  }\n  return true;\n};\n\r\n/**\n * showdownjs helper functions\n */\n\nif (!showdown.hasOwnProperty('helper')) {\n  showdown.helper = {};\n}\n\n/**\n * Check if var is string\n * @static\n * @param {string} a\n * @returns {boolean}\n */\nshowdown.helper.isString = function (a) {\n  'use strict';\n  return (typeof a === 'string' || a instanceof String);\n};\n\n/**\n * Check if var is a function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isFunction = function (a) {\n  'use strict';\n  var getType = {};\n  return a && getType.toString.call(a) === '[object Function]';\n};\n\n/**\n * isArray helper function\n * @static\n * @param {*} a\n * @returns {boolean}\n */\nshowdown.helper.isArray = function (a) {\n  'use strict';\n  return Array.isArray(a);\n};\n\n/**\n * Check if value is undefined\n * @static\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n */\nshowdown.helper.isUndefined = function (value) {\n  'use strict';\n  return typeof value === 'undefined';\n};\n\n/**\n * ForEach helper function\n * Iterates over Arrays and Objects (own properties only)\n * @static\n * @param {*} obj\n * @param {function} callback Accepts 3 params: 1. value, 2. key, 3. the original array/object\n */\nshowdown.helper.forEach = function (obj, callback) {\n  'use strict';\n  // check if obj is defined\n  if (showdown.helper.isUndefined(obj)) {\n    throw new Error('obj param is required');\n  }\n\n  if (showdown.helper.isUndefined(callback)) {\n    throw new Error('callback param is required');\n  }\n\n  if (!showdown.helper.isFunction(callback)) {\n    throw new Error('callback param must be a function/closure');\n  }\n\n  if (typeof obj.forEach === 'function') {\n    obj.forEach(callback);\n  } else if (showdown.helper.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      callback(obj[i], i, obj);\n    }\n  } else if (typeof (obj) === 'object') {\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        callback(obj[prop], prop, obj);\n      }\n    }\n  } else {\n    throw new Error('obj does not seem to be an array or an iterable object');\n  }\n};\n\n/**\n * Standardidize extension name\n * @static\n * @param {string} s extension name\n * @returns {string}\n */\nshowdown.helper.stdExtName = function (s) {\n  'use strict';\n  return s.replace(/[_?*+\\/\\\\.^-]/g, '').replace(/\\s/g, '').toLowerCase();\n};\n\nfunction escapeCharactersCallback (wholeMatch, m1) {\n  'use strict';\n  var charCodeToEscape = m1.charCodeAt(0);\n  return '¨E' + charCodeToEscape + 'E';\n}\n\n/**\n * Callback used to escape characters when passing through String.replace\n * @static\n * @param {string} wholeMatch\n * @param {string} m1\n * @returns {string}\n */\nshowdown.helper.escapeCharactersCallback = escapeCharactersCallback;\n\n/**\n * Escape characters in a string\n * @static\n * @param {string} text\n * @param {string} charsToEscape\n * @param {boolean} afterBackslash\n * @returns {XML|string|void|*}\n */\nshowdown.helper.escapeCharacters = function (text, charsToEscape, afterBackslash) {\n  'use strict';\n  // First we have to escape the escape characters so that\n  // we can build a character class out of them\n  var regexString = '([' + charsToEscape.replace(/([\\[\\]\\\\])/g, '\\\\$1') + '])';\n\n  if (afterBackslash) {\n    regexString = '\\\\\\\\' + regexString;\n  }\n\n  var regex = new RegExp(regexString, 'g');\n  text = text.replace(regex, escapeCharactersCallback);\n\n  return text;\n};\n\n/**\n * Unescape HTML entities\n * @param txt\n * @returns {string}\n */\nshowdown.helper.unescapeHTMLEntities = function (txt) {\n  'use strict';\n\n  return txt\n    .replace(/&quot;/g, '\"')\n    .replace(/&lt;/g, '<')\n    .replace(/&gt;/g, '>')\n    .replace(/&amp;/g, '&');\n};\n\nvar rgxFindMatchPos = function (str, left, right, flags) {\n  'use strict';\n  var f = flags || '',\n      g = f.indexOf('g') > -1,\n      x = new RegExp(left + '|' + right, 'g' + f.replace(/g/g, '')),\n      l = new RegExp(left, f.replace(/g/g, '')),\n      pos = [],\n      t, s, m, start, end;\n\n  do {\n    t = 0;\n    while ((m = x.exec(str))) {\n      if (l.test(m[0])) {\n        if (!(t++)) {\n          s = x.lastIndex;\n          start = s - m[0].length;\n        }\n      } else if (t) {\n        if (!--t) {\n          end = m.index + m[0].length;\n          var obj = {\n            left: {start: start, end: s},\n            match: {start: s, end: m.index},\n            right: {start: m.index, end: end},\n            wholeMatch: {start: start, end: end}\n          };\n          pos.push(obj);\n          if (!g) {\n            return pos;\n          }\n        }\n      }\n    }\n  } while (t && (x.lastIndex = s));\n\n  return pos;\n};\n\n/**\n * matchRecursiveRegExp\n *\n * (c) 2007 Steven Levithan <stevenlevithan.com>\n * MIT License\n *\n * Accepts a string to search, a left and right format delimiter\n * as regex patterns, and optional regex flags. Returns an array\n * of matches, allowing nested instances of left/right delimiters.\n * Use the \"g\" flag to return all matches, otherwise only the\n * first is returned. Be careful to ensure that the left and\n * right format delimiters produce mutually exclusive matches.\n * Backreferences are not supported within the right delimiter\n * due to how it is internally combined with the left delimiter.\n * When matching strings whose format delimiters are unbalanced\n * to the left or right, the output is intentionally as a\n * conventional regex library with recursion support would\n * produce, e.g. \"<<x>\" and \"<x>>\" both produce [\"x\"] when using\n * \"<\" and \">\" as the delimiters (both strings contain a single,\n * balanced instance of \"<x>\").\n *\n * examples:\n * matchRecursiveRegExp(\"test\", \"\\\\(\", \"\\\\)\")\n * returns: []\n * matchRecursiveRegExp(\"<t<<e>><s>>t<>\", \"<\", \">\", \"g\")\n * returns: [\"t<<e>><s>\", \"\"]\n * matchRecursiveRegExp(\"<div id=\\\"x\\\">test</div>\", \"<div\\\\b[^>]*>\", \"</div>\", \"gi\")\n * returns: [\"test\"]\n */\nshowdown.helper.matchRecursiveRegExp = function (str, left, right, flags) {\n  'use strict';\n\n  var matchPos = rgxFindMatchPos (str, left, right, flags),\n      results = [];\n\n  for (var i = 0; i < matchPos.length; ++i) {\n    results.push([\n      str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n      str.slice(matchPos[i].match.start, matchPos[i].match.end),\n      str.slice(matchPos[i].left.start, matchPos[i].left.end),\n      str.slice(matchPos[i].right.start, matchPos[i].right.end)\n    ]);\n  }\n  return results;\n};\n\n/**\n *\n * @param {string} str\n * @param {string|function} replacement\n * @param {string} left\n * @param {string} right\n * @param {string} flags\n * @returns {string}\n */\nshowdown.helper.replaceRecursiveRegExp = function (str, replacement, left, right, flags) {\n  'use strict';\n\n  if (!showdown.helper.isFunction(replacement)) {\n    var repStr = replacement;\n    replacement = function () {\n      return repStr;\n    };\n  }\n\n  var matchPos = rgxFindMatchPos(str, left, right, flags),\n      finalStr = str,\n      lng = matchPos.length;\n\n  if (lng > 0) {\n    var bits = [];\n    if (matchPos[0].wholeMatch.start !== 0) {\n      bits.push(str.slice(0, matchPos[0].wholeMatch.start));\n    }\n    for (var i = 0; i < lng; ++i) {\n      bits.push(\n        replacement(\n          str.slice(matchPos[i].wholeMatch.start, matchPos[i].wholeMatch.end),\n          str.slice(matchPos[i].match.start, matchPos[i].match.end),\n          str.slice(matchPos[i].left.start, matchPos[i].left.end),\n          str.slice(matchPos[i].right.start, matchPos[i].right.end)\n        )\n      );\n      if (i < lng - 1) {\n        bits.push(str.slice(matchPos[i].wholeMatch.end, matchPos[i + 1].wholeMatch.start));\n      }\n    }\n    if (matchPos[lng - 1].wholeMatch.end < str.length) {\n      bits.push(str.slice(matchPos[lng - 1].wholeMatch.end));\n    }\n    finalStr = bits.join('');\n  }\n  return finalStr;\n};\n\n/**\n * Returns the index within the passed String object of the first occurrence of the specified regex,\n * starting the search at fromIndex. Returns -1 if the value is not found.\n *\n * @param {string} str string to search\n * @param {RegExp} regex Regular expression to search\n * @param {int} [fromIndex = 0] Index to start the search\n * @returns {Number}\n * @throws InvalidArgumentError\n */\nshowdown.helper.regexIndexOf = function (str, regex, fromIndex) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  if (regex instanceof RegExp === false) {\n    throw 'InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp';\n  }\n  var indexOf = str.substring(fromIndex || 0).search(regex);\n  return (indexOf >= 0) ? (indexOf + (fromIndex || 0)) : indexOf;\n};\n\n/**\n * Splits the passed string object at the defined index, and returns an array composed of the two substrings\n * @param {string} str string to split\n * @param {int} index index to split string at\n * @returns {[string,string]}\n * @throws InvalidArgumentError\n */\nshowdown.helper.splitAtIndex = function (str, index) {\n  'use strict';\n  if (!showdown.helper.isString(str)) {\n    throw 'InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string';\n  }\n  return [str.substring(0, index), str.substring(index)];\n};\n\n/**\n * Obfuscate an e-mail address through the use of Character Entities,\n * transforming ASCII characters into their equivalent decimal or hex entities.\n *\n * Since it has a random component, subsequent calls to this function produce different results\n *\n * @param {string} mail\n * @returns {string}\n */\nshowdown.helper.encodeEmailAddress = function (mail) {\n  'use strict';\n  var encode = [\n    function (ch) {\n      return '&#' + ch.charCodeAt(0) + ';';\n    },\n    function (ch) {\n      return '&#x' + ch.charCodeAt(0).toString(16) + ';';\n    },\n    function (ch) {\n      return ch;\n    }\n  ];\n\n  mail = mail.replace(/./g, function (ch) {\n    if (ch === '@') {\n      // this *must* be encoded. I insist.\n      ch = encode[Math.floor(Math.random() * 2)](ch);\n    } else {\n      var r = Math.random();\n      // roughly 10% raw, 45% hex, 45% dec\n      ch = (\n        r > 0.9 ? encode[2](ch) : r > 0.45 ? encode[1](ch) : encode[0](ch)\n      );\n    }\n    return ch;\n  });\n\n  return mail;\n};\n\n/**\n *\n * @param str\n * @param targetLength\n * @param padString\n * @returns {string}\n */\nshowdown.helper.padEnd = function padEnd (str, targetLength, padString) {\n  'use strict';\n  /*jshint bitwise: false*/\n  // eslint-disable-next-line space-infix-ops\n  targetLength = targetLength>>0; //floor if number or convert non-number to 0;\n  /*jshint bitwise: true*/\n  padString = String(padString || ' ');\n  if (str.length > targetLength) {\n    return String(str);\n  } else {\n    targetLength = targetLength - str.length;\n    if (targetLength > padString.length) {\n      padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\n    }\n    return String(str) + padString.slice(0,targetLength);\n  }\n};\n\n/**\n * POLYFILLS\n */\n// use this instead of builtin is undefined for IE8 compatibility\nif (typeof (console) === 'undefined') {\n  console = {\n    warn: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    log: function (msg) {\n      'use strict';\n      alert(msg);\n    },\n    error: function (msg) {\n      'use strict';\n      throw msg;\n    }\n  };\n}\n\n/**\n * Common regexes.\n * We declare some common regexes to improve performance\n */\nshowdown.helper.regexes = {\n  asteriskDashAndColon: /([*_:~])/g\n};\n\n/**\n * EMOJIS LIST\n */\nshowdown.helper.emojis = {\n  '+1':'\\ud83d\\udc4d',\n  '-1':'\\ud83d\\udc4e',\n  '100':'\\ud83d\\udcaf',\n  '1234':'\\ud83d\\udd22',\n  '1st_place_medal':'\\ud83e\\udd47',\n  '2nd_place_medal':'\\ud83e\\udd48',\n  '3rd_place_medal':'\\ud83e\\udd49',\n  '8ball':'\\ud83c\\udfb1',\n  'a':'\\ud83c\\udd70\\ufe0f',\n  'ab':'\\ud83c\\udd8e',\n  'abc':'\\ud83d\\udd24',\n  'abcd':'\\ud83d\\udd21',\n  'accept':'\\ud83c\\ude51',\n  'aerial_tramway':'\\ud83d\\udea1',\n  'airplane':'\\u2708\\ufe0f',\n  'alarm_clock':'\\u23f0',\n  'alembic':'\\u2697\\ufe0f',\n  'alien':'\\ud83d\\udc7d',\n  'ambulance':'\\ud83d\\ude91',\n  'amphora':'\\ud83c\\udffa',\n  'anchor':'\\u2693\\ufe0f',\n  'angel':'\\ud83d\\udc7c',\n  'anger':'\\ud83d\\udca2',\n  'angry':'\\ud83d\\ude20',\n  'anguished':'\\ud83d\\ude27',\n  'ant':'\\ud83d\\udc1c',\n  'apple':'\\ud83c\\udf4e',\n  'aquarius':'\\u2652\\ufe0f',\n  'aries':'\\u2648\\ufe0f',\n  'arrow_backward':'\\u25c0\\ufe0f',\n  'arrow_double_down':'\\u23ec',\n  'arrow_double_up':'\\u23eb',\n  'arrow_down':'\\u2b07\\ufe0f',\n  'arrow_down_small':'\\ud83d\\udd3d',\n  'arrow_forward':'\\u25b6\\ufe0f',\n  'arrow_heading_down':'\\u2935\\ufe0f',\n  'arrow_heading_up':'\\u2934\\ufe0f',\n  'arrow_left':'\\u2b05\\ufe0f',\n  'arrow_lower_left':'\\u2199\\ufe0f',\n  'arrow_lower_right':'\\u2198\\ufe0f',\n  'arrow_right':'\\u27a1\\ufe0f',\n  'arrow_right_hook':'\\u21aa\\ufe0f',\n  'arrow_up':'\\u2b06\\ufe0f',\n  'arrow_up_down':'\\u2195\\ufe0f',\n  'arrow_up_small':'\\ud83d\\udd3c',\n  'arrow_upper_left':'\\u2196\\ufe0f',\n  'arrow_upper_right':'\\u2197\\ufe0f',\n  'arrows_clockwise':'\\ud83d\\udd03',\n  'arrows_counterclockwise':'\\ud83d\\udd04',\n  'art':'\\ud83c\\udfa8',\n  'articulated_lorry':'\\ud83d\\ude9b',\n  'artificial_satellite':'\\ud83d\\udef0',\n  'astonished':'\\ud83d\\ude32',\n  'athletic_shoe':'\\ud83d\\udc5f',\n  'atm':'\\ud83c\\udfe7',\n  'atom_symbol':'\\u269b\\ufe0f',\n  'avocado':'\\ud83e\\udd51',\n  'b':'\\ud83c\\udd71\\ufe0f',\n  'baby':'\\ud83d\\udc76',\n  'baby_bottle':'\\ud83c\\udf7c',\n  'baby_chick':'\\ud83d\\udc24',\n  'baby_symbol':'\\ud83d\\udebc',\n  'back':'\\ud83d\\udd19',\n  'bacon':'\\ud83e\\udd53',\n  'badminton':'\\ud83c\\udff8',\n  'baggage_claim':'\\ud83d\\udec4',\n  'baguette_bread':'\\ud83e\\udd56',\n  'balance_scale':'\\u2696\\ufe0f',\n  'balloon':'\\ud83c\\udf88',\n  'ballot_box':'\\ud83d\\uddf3',\n  'ballot_box_with_check':'\\u2611\\ufe0f',\n  'bamboo':'\\ud83c\\udf8d',\n  'banana':'\\ud83c\\udf4c',\n  'bangbang':'\\u203c\\ufe0f',\n  'bank':'\\ud83c\\udfe6',\n  'bar_chart':'\\ud83d\\udcca',\n  'barber':'\\ud83d\\udc88',\n  'baseball':'\\u26be\\ufe0f',\n  'basketball':'\\ud83c\\udfc0',\n  'basketball_man':'\\u26f9\\ufe0f',\n  'basketball_woman':'\\u26f9\\ufe0f&zwj;\\u2640\\ufe0f',\n  'bat':'\\ud83e\\udd87',\n  'bath':'\\ud83d\\udec0',\n  'bathtub':'\\ud83d\\udec1',\n  'battery':'\\ud83d\\udd0b',\n  'beach_umbrella':'\\ud83c\\udfd6',\n  'bear':'\\ud83d\\udc3b',\n  'bed':'\\ud83d\\udecf',\n  'bee':'\\ud83d\\udc1d',\n  'beer':'\\ud83c\\udf7a',\n  'beers':'\\ud83c\\udf7b',\n  'beetle':'\\ud83d\\udc1e',\n  'beginner':'\\ud83d\\udd30',\n  'bell':'\\ud83d\\udd14',\n  'bellhop_bell':'\\ud83d\\udece',\n  'bento':'\\ud83c\\udf71',\n  'biking_man':'\\ud83d\\udeb4',\n  'bike':'\\ud83d\\udeb2',\n  'biking_woman':'\\ud83d\\udeb4&zwj;\\u2640\\ufe0f',\n  'bikini':'\\ud83d\\udc59',\n  'biohazard':'\\u2623\\ufe0f',\n  'bird':'\\ud83d\\udc26',\n  'birthday':'\\ud83c\\udf82',\n  'black_circle':'\\u26ab\\ufe0f',\n  'black_flag':'\\ud83c\\udff4',\n  'black_heart':'\\ud83d\\udda4',\n  'black_joker':'\\ud83c\\udccf',\n  'black_large_square':'\\u2b1b\\ufe0f',\n  'black_medium_small_square':'\\u25fe\\ufe0f',\n  'black_medium_square':'\\u25fc\\ufe0f',\n  'black_nib':'\\u2712\\ufe0f',\n  'black_small_square':'\\u25aa\\ufe0f',\n  'black_square_button':'\\ud83d\\udd32',\n  'blonde_man':'\\ud83d\\udc71',\n  'blonde_woman':'\\ud83d\\udc71&zwj;\\u2640\\ufe0f',\n  'blossom':'\\ud83c\\udf3c',\n  'blowfish':'\\ud83d\\udc21',\n  'blue_book':'\\ud83d\\udcd8',\n  'blue_car':'\\ud83d\\ude99',\n  'blue_heart':'\\ud83d\\udc99',\n  'blush':'\\ud83d\\ude0a',\n  'boar':'\\ud83d\\udc17',\n  'boat':'\\u26f5\\ufe0f',\n  'bomb':'\\ud83d\\udca3',\n  'book':'\\ud83d\\udcd6',\n  'bookmark':'\\ud83d\\udd16',\n  'bookmark_tabs':'\\ud83d\\udcd1',\n  'books':'\\ud83d\\udcda',\n  'boom':'\\ud83d\\udca5',\n  'boot':'\\ud83d\\udc62',\n  'bouquet':'\\ud83d\\udc90',\n  'bowing_man':'\\ud83d\\ude47',\n  'bow_and_arrow':'\\ud83c\\udff9',\n  'bowing_woman':'\\ud83d\\ude47&zwj;\\u2640\\ufe0f',\n  'bowling':'\\ud83c\\udfb3',\n  'boxing_glove':'\\ud83e\\udd4a',\n  'boy':'\\ud83d\\udc66',\n  'bread':'\\ud83c\\udf5e',\n  'bride_with_veil':'\\ud83d\\udc70',\n  'bridge_at_night':'\\ud83c\\udf09',\n  'briefcase':'\\ud83d\\udcbc',\n  'broken_heart':'\\ud83d\\udc94',\n  'bug':'\\ud83d\\udc1b',\n  'building_construction':'\\ud83c\\udfd7',\n  'bulb':'\\ud83d\\udca1',\n  'bullettrain_front':'\\ud83d\\ude85',\n  'bullettrain_side':'\\ud83d\\ude84',\n  'burrito':'\\ud83c\\udf2f',\n  'bus':'\\ud83d\\ude8c',\n  'business_suit_levitating':'\\ud83d\\udd74',\n  'busstop':'\\ud83d\\ude8f',\n  'bust_in_silhouette':'\\ud83d\\udc64',\n  'busts_in_silhouette':'\\ud83d\\udc65',\n  'butterfly':'\\ud83e\\udd8b',\n  'cactus':'\\ud83c\\udf35',\n  'cake':'\\ud83c\\udf70',\n  'calendar':'\\ud83d\\udcc6',\n  'call_me_hand':'\\ud83e\\udd19',\n  'calling':'\\ud83d\\udcf2',\n  'camel':'\\ud83d\\udc2b',\n  'camera':'\\ud83d\\udcf7',\n  'camera_flash':'\\ud83d\\udcf8',\n  'camping':'\\ud83c\\udfd5',\n  'cancer':'\\u264b\\ufe0f',\n  'candle':'\\ud83d\\udd6f',\n  'candy':'\\ud83c\\udf6c',\n  'canoe':'\\ud83d\\udef6',\n  'capital_abcd':'\\ud83d\\udd20',\n  'capricorn':'\\u2651\\ufe0f',\n  'car':'\\ud83d\\ude97',\n  'card_file_box':'\\ud83d\\uddc3',\n  'card_index':'\\ud83d\\udcc7',\n  'card_index_dividers':'\\ud83d\\uddc2',\n  'carousel_horse':'\\ud83c\\udfa0',\n  'carrot':'\\ud83e\\udd55',\n  'cat':'\\ud83d\\udc31',\n  'cat2':'\\ud83d\\udc08',\n  'cd':'\\ud83d\\udcbf',\n  'chains':'\\u26d3',\n  'champagne':'\\ud83c\\udf7e',\n  'chart':'\\ud83d\\udcb9',\n  'chart_with_downwards_trend':'\\ud83d\\udcc9',\n  'chart_with_upwards_trend':'\\ud83d\\udcc8',\n  'checkered_flag':'\\ud83c\\udfc1',\n  'cheese':'\\ud83e\\uddc0',\n  'cherries':'\\ud83c\\udf52',\n  'cherry_blossom':'\\ud83c\\udf38',\n  'chestnut':'\\ud83c\\udf30',\n  'chicken':'\\ud83d\\udc14',\n  'children_crossing':'\\ud83d\\udeb8',\n  'chipmunk':'\\ud83d\\udc3f',\n  'chocolate_bar':'\\ud83c\\udf6b',\n  'christmas_tree':'\\ud83c\\udf84',\n  'church':'\\u26ea\\ufe0f',\n  'cinema':'\\ud83c\\udfa6',\n  'circus_tent':'\\ud83c\\udfaa',\n  'city_sunrise':'\\ud83c\\udf07',\n  'city_sunset':'\\ud83c\\udf06',\n  'cityscape':'\\ud83c\\udfd9',\n  'cl':'\\ud83c\\udd91',\n  'clamp':'\\ud83d\\udddc',\n  'clap':'\\ud83d\\udc4f',\n  'clapper':'\\ud83c\\udfac',\n  'classical_building':'\\ud83c\\udfdb',\n  'clinking_glasses':'\\ud83e\\udd42',\n  'clipboard':'\\ud83d\\udccb',\n  'clock1':'\\ud83d\\udd50',\n  'clock10':'\\ud83d\\udd59',\n  'clock1030':'\\ud83d\\udd65',\n  'clock11':'\\ud83d\\udd5a',\n  'clock1130':'\\ud83d\\udd66',\n  'clock12':'\\ud83d\\udd5b',\n  'clock1230':'\\ud83d\\udd67',\n  'clock130':'\\ud83d\\udd5c',\n  'clock2':'\\ud83d\\udd51',\n  'clock230':'\\ud83d\\udd5d',\n  'clock3':'\\ud83d\\udd52',\n  'clock330':'\\ud83d\\udd5e',\n  'clock4':'\\ud83d\\udd53',\n  'clock430':'\\ud83d\\udd5f',\n  'clock5':'\\ud83d\\udd54',\n  'clock530':'\\ud83d\\udd60',\n  'clock6':'\\ud83d\\udd55',\n  'clock630':'\\ud83d\\udd61',\n  'clock7':'\\ud83d\\udd56',\n  'clock730':'\\ud83d\\udd62',\n  'clock8':'\\ud83d\\udd57',\n  'clock830':'\\ud83d\\udd63',\n  'clock9':'\\ud83d\\udd58',\n  'clock930':'\\ud83d\\udd64',\n  'closed_book':'\\ud83d\\udcd5',\n  'closed_lock_with_key':'\\ud83d\\udd10',\n  'closed_umbrella':'\\ud83c\\udf02',\n  'cloud':'\\u2601\\ufe0f',\n  'cloud_with_lightning':'\\ud83c\\udf29',\n  'cloud_with_lightning_and_rain':'\\u26c8',\n  'cloud_with_rain':'\\ud83c\\udf27',\n  'cloud_with_snow':'\\ud83c\\udf28',\n  'clown_face':'\\ud83e\\udd21',\n  'clubs':'\\u2663\\ufe0f',\n  'cocktail':'\\ud83c\\udf78',\n  'coffee':'\\u2615\\ufe0f',\n  'coffin':'\\u26b0\\ufe0f',\n  'cold_sweat':'\\ud83d\\ude30',\n  'comet':'\\u2604\\ufe0f',\n  'computer':'\\ud83d\\udcbb',\n  'computer_mouse':'\\ud83d\\uddb1',\n  'confetti_ball':'\\ud83c\\udf8a',\n  'confounded':'\\ud83d\\ude16',\n  'confused':'\\ud83d\\ude15',\n  'congratulations':'\\u3297\\ufe0f',\n  'construction':'\\ud83d\\udea7',\n  'construction_worker_man':'\\ud83d\\udc77',\n  'construction_worker_woman':'\\ud83d\\udc77&zwj;\\u2640\\ufe0f',\n  'control_knobs':'\\ud83c\\udf9b',\n  'convenience_store':'\\ud83c\\udfea',\n  'cookie':'\\ud83c\\udf6a',\n  'cool':'\\ud83c\\udd92',\n  'policeman':'\\ud83d\\udc6e',\n  'copyright':'\\u00a9\\ufe0f',\n  'corn':'\\ud83c\\udf3d',\n  'couch_and_lamp':'\\ud83d\\udecb',\n  'couple':'\\ud83d\\udc6b',\n  'couple_with_heart_woman_man':'\\ud83d\\udc91',\n  'couple_with_heart_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc68',\n  'couple_with_heart_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc69',\n  'couplekiss_man_man':'\\ud83d\\udc68&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc68',\n  'couplekiss_man_woman':'\\ud83d\\udc8f',\n  'couplekiss_woman_woman':'\\ud83d\\udc69&zwj;\\u2764\\ufe0f&zwj;\\ud83d\\udc8b&zwj;\\ud83d\\udc69',\n  'cow':'\\ud83d\\udc2e',\n  'cow2':'\\ud83d\\udc04',\n  'cowboy_hat_face':'\\ud83e\\udd20',\n  'crab':'\\ud83e\\udd80',\n  'crayon':'\\ud83d\\udd8d',\n  'credit_card':'\\ud83d\\udcb3',\n  'crescent_moon':'\\ud83c\\udf19',\n  'cricket':'\\ud83c\\udfcf',\n  'crocodile':'\\ud83d\\udc0a',\n  'croissant':'\\ud83e\\udd50',\n  'crossed_fingers':'\\ud83e\\udd1e',\n  'crossed_flags':'\\ud83c\\udf8c',\n  'crossed_swords':'\\u2694\\ufe0f',\n  'crown':'\\ud83d\\udc51',\n  'cry':'\\ud83d\\ude22',\n  'crying_cat_face':'\\ud83d\\ude3f',\n  'crystal_ball':'\\ud83d\\udd2e',\n  'cucumber':'\\ud83e\\udd52',\n  'cupid':'\\ud83d\\udc98',\n  'curly_loop':'\\u27b0',\n  'currency_exchange':'\\ud83d\\udcb1',\n  'curry':'\\ud83c\\udf5b',\n  'custard':'\\ud83c\\udf6e',\n  'customs':'\\ud83d\\udec3',\n  'cyclone':'\\ud83c\\udf00',\n  'dagger':'\\ud83d\\udde1',\n  'dancer':'\\ud83d\\udc83',\n  'dancing_women':'\\ud83d\\udc6f',\n  'dancing_men':'\\ud83d\\udc6f&zwj;\\u2642\\ufe0f',\n  'dango':'\\ud83c\\udf61',\n  'dark_sunglasses':'\\ud83d\\udd76',\n  'dart':'\\ud83c\\udfaf',\n  'dash':'\\ud83d\\udca8',\n  'date':'\\ud83d\\udcc5',\n  'deciduous_tree':'\\ud83c\\udf33',\n  'deer':'\\ud83e\\udd8c',\n  'department_store':'\\ud83c\\udfec',\n  'derelict_house':'\\ud83c\\udfda',\n  'desert':'\\ud83c\\udfdc',\n  'desert_island':'\\ud83c\\udfdd',\n  'desktop_computer':'\\ud83d\\udda5',\n  'male_detective':'\\ud83d\\udd75\\ufe0f',\n  'diamond_shape_with_a_dot_inside':'\\ud83d\\udca0',\n  'diamonds':'\\u2666\\ufe0f',\n  'disappointed':'\\ud83d\\ude1e',\n  'disappointed_relieved':'\\ud83d\\ude25',\n  'dizzy':'\\ud83d\\udcab',\n  'dizzy_face':'\\ud83d\\ude35',\n  'do_not_litter':'\\ud83d\\udeaf',\n  'dog':'\\ud83d\\udc36',\n  'dog2':'\\ud83d\\udc15',\n  'dollar':'\\ud83d\\udcb5',\n  'dolls':'\\ud83c\\udf8e',\n  'dolphin':'\\ud83d\\udc2c',\n  'door':'\\ud83d\\udeaa',\n  'doughnut':'\\ud83c\\udf69',\n  'dove':'\\ud83d\\udd4a',\n  'dragon':'\\ud83d\\udc09',\n  'dragon_face':'\\ud83d\\udc32',\n  'dress':'\\ud83d\\udc57',\n  'dromedary_camel':'\\ud83d\\udc2a',\n  'drooling_face':'\\ud83e\\udd24',\n  'droplet':'\\ud83d\\udca7',\n  'drum':'\\ud83e\\udd41',\n  'duck':'\\ud83e\\udd86',\n  'dvd':'\\ud83d\\udcc0',\n  'e-mail':'\\ud83d\\udce7',\n  'eagle':'\\ud83e\\udd85',\n  'ear':'\\ud83d\\udc42',\n  'ear_of_rice':'\\ud83c\\udf3e',\n  'earth_africa':'\\ud83c\\udf0d',\n  'earth_americas':'\\ud83c\\udf0e',\n  'earth_asia':'\\ud83c\\udf0f',\n  'egg':'\\ud83e\\udd5a',\n  'eggplant':'\\ud83c\\udf46',\n  'eight_pointed_black_star':'\\u2734\\ufe0f',\n  'eight_spoked_asterisk':'\\u2733\\ufe0f',\n  'electric_plug':'\\ud83d\\udd0c',\n  'elephant':'\\ud83d\\udc18',\n  'email':'\\u2709\\ufe0f',\n  'end':'\\ud83d\\udd1a',\n  'envelope_with_arrow':'\\ud83d\\udce9',\n  'euro':'\\ud83d\\udcb6',\n  'european_castle':'\\ud83c\\udff0',\n  'european_post_office':'\\ud83c\\udfe4',\n  'evergreen_tree':'\\ud83c\\udf32',\n  'exclamation':'\\u2757\\ufe0f',\n  'expressionless':'\\ud83d\\ude11',\n  'eye':'\\ud83d\\udc41',\n  'eye_speech_bubble':'\\ud83d\\udc41&zwj;\\ud83d\\udde8',\n  'eyeglasses':'\\ud83d\\udc53',\n  'eyes':'\\ud83d\\udc40',\n  'face_with_head_bandage':'\\ud83e\\udd15',\n  'face_with_thermometer':'\\ud83e\\udd12',\n  'fist_oncoming':'\\ud83d\\udc4a',\n  'factory':'\\ud83c\\udfed',\n  'fallen_leaf':'\\ud83c\\udf42',\n  'family_man_woman_boy':'\\ud83d\\udc6a',\n  'family_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_man_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66',\n  'family_man_man_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_man_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67',\n  'family_man_man_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_man_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc68&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_man_woman_boy_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_man_woman_girl_boy':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_man_woman_girl_girl':'\\ud83d\\udc68&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'family_woman_woman_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66',\n  'family_woman_woman_boy_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc66&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67',\n  'family_woman_woman_girl_boy':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc66',\n  'family_woman_woman_girl_girl':'\\ud83d\\udc69&zwj;\\ud83d\\udc69&zwj;\\ud83d\\udc67&zwj;\\ud83d\\udc67',\n  'fast_forward':'\\u23e9',\n  'fax':'\\ud83d\\udce0',\n  'fearful':'\\ud83d\\ude28',\n  'feet':'\\ud83d\\udc3e',\n  'female_detective':'\\ud83d\\udd75\\ufe0f&zwj;\\u2640\\ufe0f',\n  'ferris_wheel':'\\ud83c\\udfa1',\n  'ferry':'\\u26f4',\n  'field_hockey':'\\ud83c\\udfd1',\n  'file_cabinet':'\\ud83d\\uddc4',\n  'file_folder':'\\ud83d\\udcc1',\n  'film_projector':'\\ud83d\\udcfd',\n  'film_strip':'\\ud83c\\udf9e',\n  'fire':'\\ud83d\\udd25',\n  'fire_engine':'\\ud83d\\ude92',\n  'fireworks':'\\ud83c\\udf86',\n  'first_quarter_moon':'\\ud83c\\udf13',\n  'first_quarter_moon_with_face':'\\ud83c\\udf1b',\n  'fish':'\\ud83d\\udc1f',\n  'fish_cake':'\\ud83c\\udf65',\n  'fishing_pole_and_fish':'\\ud83c\\udfa3',\n  'fist_raised':'\\u270a',\n  'fist_left':'\\ud83e\\udd1b',\n  'fist_right':'\\ud83e\\udd1c',\n  'flags':'\\ud83c\\udf8f',\n  'flashlight':'\\ud83d\\udd26',\n  'fleur_de_lis':'\\u269c\\ufe0f',\n  'flight_arrival':'\\ud83d\\udeec',\n  'flight_departure':'\\ud83d\\udeeb',\n  'floppy_disk':'\\ud83d\\udcbe',\n  'flower_playing_cards':'\\ud83c\\udfb4',\n  'flushed':'\\ud83d\\ude33',\n  'fog':'\\ud83c\\udf2b',\n  'foggy':'\\ud83c\\udf01',\n  'football':'\\ud83c\\udfc8',\n  'footprints':'\\ud83d\\udc63',\n  'fork_and_knife':'\\ud83c\\udf74',\n  'fountain':'\\u26f2\\ufe0f',\n  'fountain_pen':'\\ud83d\\udd8b',\n  'four_leaf_clover':'\\ud83c\\udf40',\n  'fox_face':'\\ud83e\\udd8a',\n  'framed_picture':'\\ud83d\\uddbc',\n  'free':'\\ud83c\\udd93',\n  'fried_egg':'\\ud83c\\udf73',\n  'fried_shrimp':'\\ud83c\\udf64',\n  'fries':'\\ud83c\\udf5f',\n  'frog':'\\ud83d\\udc38',\n  'frowning':'\\ud83d\\ude26',\n  'frowning_face':'\\u2639\\ufe0f',\n  'frowning_man':'\\ud83d\\ude4d&zwj;\\u2642\\ufe0f',\n  'frowning_woman':'\\ud83d\\ude4d',\n  'middle_finger':'\\ud83d\\udd95',\n  'fuelpump':'\\u26fd\\ufe0f',\n  'full_moon':'\\ud83c\\udf15',\n  'full_moon_with_face':'\\ud83c\\udf1d',\n  'funeral_urn':'\\u26b1\\ufe0f',\n  'game_die':'\\ud83c\\udfb2',\n  'gear':'\\u2699\\ufe0f',\n  'gem':'\\ud83d\\udc8e',\n  'gemini':'\\u264a\\ufe0f',\n  'ghost':'\\ud83d\\udc7b',\n  'gift':'\\ud83c\\udf81',\n  'gift_heart':'\\ud83d\\udc9d',\n  'girl':'\\ud83d\\udc67',\n  'globe_with_meridians':'\\ud83c\\udf10',\n  'goal_net':'\\ud83e\\udd45',\n  'goat':'\\ud83d\\udc10',\n  'golf':'\\u26f3\\ufe0f',\n  'golfing_man':'\\ud83c\\udfcc\\ufe0f',\n  'golfing_woman':'\\ud83c\\udfcc\\ufe0f&zwj;\\u2640\\ufe0f',\n  'gorilla':'\\ud83e\\udd8d',\n  'grapes':'\\ud83c\\udf47',\n  'green_apple':'\\ud83c\\udf4f',\n  'green_book':'\\ud83d\\udcd7',\n  'green_heart':'\\ud83d\\udc9a',\n  'green_salad':'\\ud83e\\udd57',\n  'grey_exclamation':'\\u2755',\n  'grey_question':'\\u2754',\n  'grimacing':'\\ud83d\\ude2c',\n  'grin':'\\ud83d\\ude01',\n  'grinning':'\\ud83d\\ude00',\n  'guardsman':'\\ud83d\\udc82',\n  'guardswoman':'\\ud83d\\udc82&zwj;\\u2640\\ufe0f',\n  'guitar':'\\ud83c\\udfb8',\n  'gun':'\\ud83d\\udd2b',\n  'haircut_woman':'\\ud83d\\udc87',\n  'haircut_man':'\\ud83d\\udc87&zwj;\\u2642\\ufe0f',\n  'hamburger':'\\ud83c\\udf54',\n  'hammer':'\\ud83d\\udd28',\n  'hammer_and_pick':'\\u2692',\n  'hammer_and_wrench':'\\ud83d\\udee0',\n  'hamster':'\\ud83d\\udc39',\n  'hand':'\\u270b',\n  'handbag':'\\ud83d\\udc5c',\n  'handshake':'\\ud83e\\udd1d',\n  'hankey':'\\ud83d\\udca9',\n  'hatched_chick':'\\ud83d\\udc25',\n  'hatching_chick':'\\ud83d\\udc23',\n  'headphones':'\\ud83c\\udfa7',\n  'hear_no_evil':'\\ud83d\\ude49',\n  'heart':'\\u2764\\ufe0f',\n  'heart_decoration':'\\ud83d\\udc9f',\n  'heart_eyes':'\\ud83d\\ude0d',\n  'heart_eyes_cat':'\\ud83d\\ude3b',\n  'heartbeat':'\\ud83d\\udc93',\n  'heartpulse':'\\ud83d\\udc97',\n  'hearts':'\\u2665\\ufe0f',\n  'heavy_check_mark':'\\u2714\\ufe0f',\n  'heavy_division_sign':'\\u2797',\n  'heavy_dollar_sign':'\\ud83d\\udcb2',\n  'heavy_heart_exclamation':'\\u2763\\ufe0f',\n  'heavy_minus_sign':'\\u2796',\n  'heavy_multiplication_x':'\\u2716\\ufe0f',\n  'heavy_plus_sign':'\\u2795',\n  'helicopter':'\\ud83d\\ude81',\n  'herb':'\\ud83c\\udf3f',\n  'hibiscus':'\\ud83c\\udf3a',\n  'high_brightness':'\\ud83d\\udd06',\n  'high_heel':'\\ud83d\\udc60',\n  'hocho':'\\ud83d\\udd2a',\n  'hole':'\\ud83d\\udd73',\n  'honey_pot':'\\ud83c\\udf6f',\n  'horse':'\\ud83d\\udc34',\n  'horse_racing':'\\ud83c\\udfc7',\n  'hospital':'\\ud83c\\udfe5',\n  'hot_pepper':'\\ud83c\\udf36',\n  'hotdog':'\\ud83c\\udf2d',\n  'hotel':'\\ud83c\\udfe8',\n  'hotsprings':'\\u2668\\ufe0f',\n  'hourglass':'\\u231b\\ufe0f',\n  'hourglass_flowing_sand':'\\u23f3',\n  'house':'\\ud83c\\udfe0',\n  'house_with_garden':'\\ud83c\\udfe1',\n  'houses':'\\ud83c\\udfd8',\n  'hugs':'\\ud83e\\udd17',\n  'hushed':'\\ud83d\\ude2f',\n  'ice_cream':'\\ud83c\\udf68',\n  'ice_hockey':'\\ud83c\\udfd2',\n  'ice_skate':'\\u26f8',\n  'icecream':'\\ud83c\\udf66',\n  'id':'\\ud83c\\udd94',\n  'ideograph_advantage':'\\ud83c\\ude50',\n  'imp':'\\ud83d\\udc7f',\n  'inbox_tray':'\\ud83d\\udce5',\n  'incoming_envelope':'\\ud83d\\udce8',\n  'tipping_hand_woman':'\\ud83d\\udc81',\n  'information_source':'\\u2139\\ufe0f',\n  'innocent':'\\ud83d\\ude07',\n  'interrobang':'\\u2049\\ufe0f',\n  'iphone':'\\ud83d\\udcf1',\n  'izakaya_lantern':'\\ud83c\\udfee',\n  'jack_o_lantern':'\\ud83c\\udf83',\n  'japan':'\\ud83d\\uddfe',\n  'japanese_castle':'\\ud83c\\udfef',\n  'japanese_goblin':'\\ud83d\\udc7a',\n  'japanese_ogre':'\\ud83d\\udc79',\n  'jeans':'\\ud83d\\udc56',\n  'joy':'\\ud83d\\ude02',\n  'joy_cat':'\\ud83d\\ude39',\n  'joystick':'\\ud83d\\udd79',\n  'kaaba':'\\ud83d\\udd4b',\n  'key':'\\ud83d\\udd11',\n  'keyboard':'\\u2328\\ufe0f',\n  'keycap_ten':'\\ud83d\\udd1f',\n  'kick_scooter':'\\ud83d\\udef4',\n  'kimono':'\\ud83d\\udc58',\n  'kiss':'\\ud83d\\udc8b',\n  'kissing':'\\ud83d\\ude17',\n  'kissing_cat':'\\ud83d\\ude3d',\n  'kissing_closed_eyes':'\\ud83d\\ude1a',\n  'kissing_heart':'\\ud83d\\ude18',\n  'kissing_smiling_eyes':'\\ud83d\\ude19',\n  'kiwi_fruit':'\\ud83e\\udd5d',\n  'koala':'\\ud83d\\udc28',\n  'koko':'\\ud83c\\ude01',\n  'label':'\\ud83c\\udff7',\n  'large_blue_circle':'\\ud83d\\udd35',\n  'large_blue_diamond':'\\ud83d\\udd37',\n  'large_orange_diamond':'\\ud83d\\udd36',\n  'last_quarter_moon':'\\ud83c\\udf17',\n  'last_quarter_moon_with_face':'\\ud83c\\udf1c',\n  'latin_cross':'\\u271d\\ufe0f',\n  'laughing':'\\ud83d\\ude06',\n  'leaves':'\\ud83c\\udf43',\n  'ledger':'\\ud83d\\udcd2',\n  'left_luggage':'\\ud83d\\udec5',\n  'left_right_arrow':'\\u2194\\ufe0f',\n  'leftwards_arrow_with_hook':'\\u21a9\\ufe0f',\n  'lemon':'\\ud83c\\udf4b',\n  'leo':'\\u264c\\ufe0f',\n  'leopard':'\\ud83d\\udc06',\n  'level_slider':'\\ud83c\\udf9a',\n  'libra':'\\u264e\\ufe0f',\n  'light_rail':'\\ud83d\\ude88',\n  'link':'\\ud83d\\udd17',\n  'lion':'\\ud83e\\udd81',\n  'lips':'\\ud83d\\udc44',\n  'lipstick':'\\ud83d\\udc84',\n  'lizard':'\\ud83e\\udd8e',\n  'lock':'\\ud83d\\udd12',\n  'lock_with_ink_pen':'\\ud83d\\udd0f',\n  'lollipop':'\\ud83c\\udf6d',\n  'loop':'\\u27bf',\n  'loud_sound':'\\ud83d\\udd0a',\n  'loudspeaker':'\\ud83d\\udce2',\n  'love_hotel':'\\ud83c\\udfe9',\n  'love_letter':'\\ud83d\\udc8c',\n  'low_brightness':'\\ud83d\\udd05',\n  'lying_face':'\\ud83e\\udd25',\n  'm':'\\u24c2\\ufe0f',\n  'mag':'\\ud83d\\udd0d',\n  'mag_right':'\\ud83d\\udd0e',\n  'mahjong':'\\ud83c\\udc04\\ufe0f',\n  'mailbox':'\\ud83d\\udceb',\n  'mailbox_closed':'\\ud83d\\udcea',\n  'mailbox_with_mail':'\\ud83d\\udcec',\n  'mailbox_with_no_mail':'\\ud83d\\udced',\n  'man':'\\ud83d\\udc68',\n  'man_artist':'\\ud83d\\udc68&zwj;\\ud83c\\udfa8',\n  'man_astronaut':'\\ud83d\\udc68&zwj;\\ud83d\\ude80',\n  'man_cartwheeling':'\\ud83e\\udd38&zwj;\\u2642\\ufe0f',\n  'man_cook':'\\ud83d\\udc68&zwj;\\ud83c\\udf73',\n  'man_dancing':'\\ud83d\\udd7a',\n  'man_facepalming':'\\ud83e\\udd26&zwj;\\u2642\\ufe0f',\n  'man_factory_worker':'\\ud83d\\udc68&zwj;\\ud83c\\udfed',\n  'man_farmer':'\\ud83d\\udc68&zwj;\\ud83c\\udf3e',\n  'man_firefighter':'\\ud83d\\udc68&zwj;\\ud83d\\ude92',\n  'man_health_worker':'\\ud83d\\udc68&zwj;\\u2695\\ufe0f',\n  'man_in_tuxedo':'\\ud83e\\udd35',\n  'man_judge':'\\ud83d\\udc68&zwj;\\u2696\\ufe0f',\n  'man_juggling':'\\ud83e\\udd39&zwj;\\u2642\\ufe0f',\n  'man_mechanic':'\\ud83d\\udc68&zwj;\\ud83d\\udd27',\n  'man_office_worker':'\\ud83d\\udc68&zwj;\\ud83d\\udcbc',\n  'man_pilot':'\\ud83d\\udc68&zwj;\\u2708\\ufe0f',\n  'man_playing_handball':'\\ud83e\\udd3e&zwj;\\u2642\\ufe0f',\n  'man_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2642\\ufe0f',\n  'man_scientist':'\\ud83d\\udc68&zwj;\\ud83d\\udd2c',\n  'man_shrugging':'\\ud83e\\udd37&zwj;\\u2642\\ufe0f',\n  'man_singer':'\\ud83d\\udc68&zwj;\\ud83c\\udfa4',\n  'man_student':'\\ud83d\\udc68&zwj;\\ud83c\\udf93',\n  'man_teacher':'\\ud83d\\udc68&zwj;\\ud83c\\udfeb',\n  'man_technologist':'\\ud83d\\udc68&zwj;\\ud83d\\udcbb',\n  'man_with_gua_pi_mao':'\\ud83d\\udc72',\n  'man_with_turban':'\\ud83d\\udc73',\n  'tangerine':'\\ud83c\\udf4a',\n  'mans_shoe':'\\ud83d\\udc5e',\n  'mantelpiece_clock':'\\ud83d\\udd70',\n  'maple_leaf':'\\ud83c\\udf41',\n  'martial_arts_uniform':'\\ud83e\\udd4b',\n  'mask':'\\ud83d\\ude37',\n  'massage_woman':'\\ud83d\\udc86',\n  'massage_man':'\\ud83d\\udc86&zwj;\\u2642\\ufe0f',\n  'meat_on_bone':'\\ud83c\\udf56',\n  'medal_military':'\\ud83c\\udf96',\n  'medal_sports':'\\ud83c\\udfc5',\n  'mega':'\\ud83d\\udce3',\n  'melon':'\\ud83c\\udf48',\n  'memo':'\\ud83d\\udcdd',\n  'men_wrestling':'\\ud83e\\udd3c&zwj;\\u2642\\ufe0f',\n  'menorah':'\\ud83d\\udd4e',\n  'mens':'\\ud83d\\udeb9',\n  'metal':'\\ud83e\\udd18',\n  'metro':'\\ud83d\\ude87',\n  'microphone':'\\ud83c\\udfa4',\n  'microscope':'\\ud83d\\udd2c',\n  'milk_glass':'\\ud83e\\udd5b',\n  'milky_way':'\\ud83c\\udf0c',\n  'minibus':'\\ud83d\\ude90',\n  'minidisc':'\\ud83d\\udcbd',\n  'mobile_phone_off':'\\ud83d\\udcf4',\n  'money_mouth_face':'\\ud83e\\udd11',\n  'money_with_wings':'\\ud83d\\udcb8',\n  'moneybag':'\\ud83d\\udcb0',\n  'monkey':'\\ud83d\\udc12',\n  'monkey_face':'\\ud83d\\udc35',\n  'monorail':'\\ud83d\\ude9d',\n  'moon':'\\ud83c\\udf14',\n  'mortar_board':'\\ud83c\\udf93',\n  'mosque':'\\ud83d\\udd4c',\n  'motor_boat':'\\ud83d\\udee5',\n  'motor_scooter':'\\ud83d\\udef5',\n  'motorcycle':'\\ud83c\\udfcd',\n  'motorway':'\\ud83d\\udee3',\n  'mount_fuji':'\\ud83d\\uddfb',\n  'mountain':'\\u26f0',\n  'mountain_biking_man':'\\ud83d\\udeb5',\n  'mountain_biking_woman':'\\ud83d\\udeb5&zwj;\\u2640\\ufe0f',\n  'mountain_cableway':'\\ud83d\\udea0',\n  'mountain_railway':'\\ud83d\\ude9e',\n  'mountain_snow':'\\ud83c\\udfd4',\n  'mouse':'\\ud83d\\udc2d',\n  'mouse2':'\\ud83d\\udc01',\n  'movie_camera':'\\ud83c\\udfa5',\n  'moyai':'\\ud83d\\uddff',\n  'mrs_claus':'\\ud83e\\udd36',\n  'muscle':'\\ud83d\\udcaa',\n  'mushroom':'\\ud83c\\udf44',\n  'musical_keyboard':'\\ud83c\\udfb9',\n  'musical_note':'\\ud83c\\udfb5',\n  'musical_score':'\\ud83c\\udfbc',\n  'mute':'\\ud83d\\udd07',\n  'nail_care':'\\ud83d\\udc85',\n  'name_badge':'\\ud83d\\udcdb',\n  'national_park':'\\ud83c\\udfde',\n  'nauseated_face':'\\ud83e\\udd22',\n  'necktie':'\\ud83d\\udc54',\n  'negative_squared_cross_mark':'\\u274e',\n  'nerd_face':'\\ud83e\\udd13',\n  'neutral_face':'\\ud83d\\ude10',\n  'new':'\\ud83c\\udd95',\n  'new_moon':'\\ud83c\\udf11',\n  'new_moon_with_face':'\\ud83c\\udf1a',\n  'newspaper':'\\ud83d\\udcf0',\n  'newspaper_roll':'\\ud83d\\uddde',\n  'next_track_button':'\\u23ed',\n  'ng':'\\ud83c\\udd96',\n  'no_good_man':'\\ud83d\\ude45&zwj;\\u2642\\ufe0f',\n  'no_good_woman':'\\ud83d\\ude45',\n  'night_with_stars':'\\ud83c\\udf03',\n  'no_bell':'\\ud83d\\udd15',\n  'no_bicycles':'\\ud83d\\udeb3',\n  'no_entry':'\\u26d4\\ufe0f',\n  'no_entry_sign':'\\ud83d\\udeab',\n  'no_mobile_phones':'\\ud83d\\udcf5',\n  'no_mouth':'\\ud83d\\ude36',\n  'no_pedestrians':'\\ud83d\\udeb7',\n  'no_smoking':'\\ud83d\\udead',\n  'non-potable_water':'\\ud83d\\udeb1',\n  'nose':'\\ud83d\\udc43',\n  'notebook':'\\ud83d\\udcd3',\n  'notebook_with_decorative_cover':'\\ud83d\\udcd4',\n  'notes':'\\ud83c\\udfb6',\n  'nut_and_bolt':'\\ud83d\\udd29',\n  'o':'\\u2b55\\ufe0f',\n  'o2':'\\ud83c\\udd7e\\ufe0f',\n  'ocean':'\\ud83c\\udf0a',\n  'octopus':'\\ud83d\\udc19',\n  'oden':'\\ud83c\\udf62',\n  'office':'\\ud83c\\udfe2',\n  'oil_drum':'\\ud83d\\udee2',\n  'ok':'\\ud83c\\udd97',\n  'ok_hand':'\\ud83d\\udc4c',\n  'ok_man':'\\ud83d\\ude46&zwj;\\u2642\\ufe0f',\n  'ok_woman':'\\ud83d\\ude46',\n  'old_key':'\\ud83d\\udddd',\n  'older_man':'\\ud83d\\udc74',\n  'older_woman':'\\ud83d\\udc75',\n  'om':'\\ud83d\\udd49',\n  'on':'\\ud83d\\udd1b',\n  'oncoming_automobile':'\\ud83d\\ude98',\n  'oncoming_bus':'\\ud83d\\ude8d',\n  'oncoming_police_car':'\\ud83d\\ude94',\n  'oncoming_taxi':'\\ud83d\\ude96',\n  'open_file_folder':'\\ud83d\\udcc2',\n  'open_hands':'\\ud83d\\udc50',\n  'open_mouth':'\\ud83d\\ude2e',\n  'open_umbrella':'\\u2602\\ufe0f',\n  'ophiuchus':'\\u26ce',\n  'orange_book':'\\ud83d\\udcd9',\n  'orthodox_cross':'\\u2626\\ufe0f',\n  'outbox_tray':'\\ud83d\\udce4',\n  'owl':'\\ud83e\\udd89',\n  'ox':'\\ud83d\\udc02',\n  'package':'\\ud83d\\udce6',\n  'page_facing_up':'\\ud83d\\udcc4',\n  'page_with_curl':'\\ud83d\\udcc3',\n  'pager':'\\ud83d\\udcdf',\n  'paintbrush':'\\ud83d\\udd8c',\n  'palm_tree':'\\ud83c\\udf34',\n  'pancakes':'\\ud83e\\udd5e',\n  'panda_face':'\\ud83d\\udc3c',\n  'paperclip':'\\ud83d\\udcce',\n  'paperclips':'\\ud83d\\udd87',\n  'parasol_on_ground':'\\u26f1',\n  'parking':'\\ud83c\\udd7f\\ufe0f',\n  'part_alternation_mark':'\\u303d\\ufe0f',\n  'partly_sunny':'\\u26c5\\ufe0f',\n  'passenger_ship':'\\ud83d\\udef3',\n  'passport_control':'\\ud83d\\udec2',\n  'pause_button':'\\u23f8',\n  'peace_symbol':'\\u262e\\ufe0f',\n  'peach':'\\ud83c\\udf51',\n  'peanuts':'\\ud83e\\udd5c',\n  'pear':'\\ud83c\\udf50',\n  'pen':'\\ud83d\\udd8a',\n  'pencil2':'\\u270f\\ufe0f',\n  'penguin':'\\ud83d\\udc27',\n  'pensive':'\\ud83d\\ude14',\n  'performing_arts':'\\ud83c\\udfad',\n  'persevere':'\\ud83d\\ude23',\n  'person_fencing':'\\ud83e\\udd3a',\n  'pouting_woman':'\\ud83d\\ude4e',\n  'phone':'\\u260e\\ufe0f',\n  'pick':'\\u26cf',\n  'pig':'\\ud83d\\udc37',\n  'pig2':'\\ud83d\\udc16',\n  'pig_nose':'\\ud83d\\udc3d',\n  'pill':'\\ud83d\\udc8a',\n  'pineapple':'\\ud83c\\udf4d',\n  'ping_pong':'\\ud83c\\udfd3',\n  'pisces':'\\u2653\\ufe0f',\n  'pizza':'\\ud83c\\udf55',\n  'place_of_worship':'\\ud83d\\uded0',\n  'plate_with_cutlery':'\\ud83c\\udf7d',\n  'play_or_pause_button':'\\u23ef',\n  'point_down':'\\ud83d\\udc47',\n  'point_left':'\\ud83d\\udc48',\n  'point_right':'\\ud83d\\udc49',\n  'point_up':'\\u261d\\ufe0f',\n  'point_up_2':'\\ud83d\\udc46',\n  'police_car':'\\ud83d\\ude93',\n  'policewoman':'\\ud83d\\udc6e&zwj;\\u2640\\ufe0f',\n  'poodle':'\\ud83d\\udc29',\n  'popcorn':'\\ud83c\\udf7f',\n  'post_office':'\\ud83c\\udfe3',\n  'postal_horn':'\\ud83d\\udcef',\n  'postbox':'\\ud83d\\udcee',\n  'potable_water':'\\ud83d\\udeb0',\n  'potato':'\\ud83e\\udd54',\n  'pouch':'\\ud83d\\udc5d',\n  'poultry_leg':'\\ud83c\\udf57',\n  'pound':'\\ud83d\\udcb7',\n  'rage':'\\ud83d\\ude21',\n  'pouting_cat':'\\ud83d\\ude3e',\n  'pouting_man':'\\ud83d\\ude4e&zwj;\\u2642\\ufe0f',\n  'pray':'\\ud83d\\ude4f',\n  'prayer_beads':'\\ud83d\\udcff',\n  'pregnant_woman':'\\ud83e\\udd30',\n  'previous_track_button':'\\u23ee',\n  'prince':'\\ud83e\\udd34',\n  'princess':'\\ud83d\\udc78',\n  'printer':'\\ud83d\\udda8',\n  'purple_heart':'\\ud83d\\udc9c',\n  'purse':'\\ud83d\\udc5b',\n  'pushpin':'\\ud83d\\udccc',\n  'put_litter_in_its_place':'\\ud83d\\udeae',\n  'question':'\\u2753',\n  'rabbit':'\\ud83d\\udc30',\n  'rabbit2':'\\ud83d\\udc07',\n  'racehorse':'\\ud83d\\udc0e',\n  'racing_car':'\\ud83c\\udfce',\n  'radio':'\\ud83d\\udcfb',\n  'radio_button':'\\ud83d\\udd18',\n  'radioactive':'\\u2622\\ufe0f',\n  'railway_car':'\\ud83d\\ude83',\n  'railway_track':'\\ud83d\\udee4',\n  'rainbow':'\\ud83c\\udf08',\n  'rainbow_flag':'\\ud83c\\udff3\\ufe0f&zwj;\\ud83c\\udf08',\n  'raised_back_of_hand':'\\ud83e\\udd1a',\n  'raised_hand_with_fingers_splayed':'\\ud83d\\udd90',\n  'raised_hands':'\\ud83d\\ude4c',\n  'raising_hand_woman':'\\ud83d\\ude4b',\n  'raising_hand_man':'\\ud83d\\ude4b&zwj;\\u2642\\ufe0f',\n  'ram':'\\ud83d\\udc0f',\n  'ramen':'\\ud83c\\udf5c',\n  'rat':'\\ud83d\\udc00',\n  'record_button':'\\u23fa',\n  'recycle':'\\u267b\\ufe0f',\n  'red_circle':'\\ud83d\\udd34',\n  'registered':'\\u00ae\\ufe0f',\n  'relaxed':'\\u263a\\ufe0f',\n  'relieved':'\\ud83d\\ude0c',\n  'reminder_ribbon':'\\ud83c\\udf97',\n  'repeat':'\\ud83d\\udd01',\n  'repeat_one':'\\ud83d\\udd02',\n  'rescue_worker_helmet':'\\u26d1',\n  'restroom':'\\ud83d\\udebb',\n  'revolving_hearts':'\\ud83d\\udc9e',\n  'rewind':'\\u23ea',\n  'rhinoceros':'\\ud83e\\udd8f',\n  'ribbon':'\\ud83c\\udf80',\n  'rice':'\\ud83c\\udf5a',\n  'rice_ball':'\\ud83c\\udf59',\n  'rice_cracker':'\\ud83c\\udf58',\n  'rice_scene':'\\ud83c\\udf91',\n  'right_anger_bubble':'\\ud83d\\uddef',\n  'ring':'\\ud83d\\udc8d',\n  'robot':'\\ud83e\\udd16',\n  'rocket':'\\ud83d\\ude80',\n  'rofl':'\\ud83e\\udd23',\n  'roll_eyes':'\\ud83d\\ude44',\n  'roller_coaster':'\\ud83c\\udfa2',\n  'rooster':'\\ud83d\\udc13',\n  'rose':'\\ud83c\\udf39',\n  'rosette':'\\ud83c\\udff5',\n  'rotating_light':'\\ud83d\\udea8',\n  'round_pushpin':'\\ud83d\\udccd',\n  'rowing_man':'\\ud83d\\udea3',\n  'rowing_woman':'\\ud83d\\udea3&zwj;\\u2640\\ufe0f',\n  'rugby_football':'\\ud83c\\udfc9',\n  'running_man':'\\ud83c\\udfc3',\n  'running_shirt_with_sash':'\\ud83c\\udfbd',\n  'running_woman':'\\ud83c\\udfc3&zwj;\\u2640\\ufe0f',\n  'sa':'\\ud83c\\ude02\\ufe0f',\n  'sagittarius':'\\u2650\\ufe0f',\n  'sake':'\\ud83c\\udf76',\n  'sandal':'\\ud83d\\udc61',\n  'santa':'\\ud83c\\udf85',\n  'satellite':'\\ud83d\\udce1',\n  'saxophone':'\\ud83c\\udfb7',\n  'school':'\\ud83c\\udfeb',\n  'school_satchel':'\\ud83c\\udf92',\n  'scissors':'\\u2702\\ufe0f',\n  'scorpion':'\\ud83e\\udd82',\n  'scorpius':'\\u264f\\ufe0f',\n  'scream':'\\ud83d\\ude31',\n  'scream_cat':'\\ud83d\\ude40',\n  'scroll':'\\ud83d\\udcdc',\n  'seat':'\\ud83d\\udcba',\n  'secret':'\\u3299\\ufe0f',\n  'see_no_evil':'\\ud83d\\ude48',\n  'seedling':'\\ud83c\\udf31',\n  'selfie':'\\ud83e\\udd33',\n  'shallow_pan_of_food':'\\ud83e\\udd58',\n  'shamrock':'\\u2618\\ufe0f',\n  'shark':'\\ud83e\\udd88',\n  'shaved_ice':'\\ud83c\\udf67',\n  'sheep':'\\ud83d\\udc11',\n  'shell':'\\ud83d\\udc1a',\n  'shield':'\\ud83d\\udee1',\n  'shinto_shrine':'\\u26e9',\n  'ship':'\\ud83d\\udea2',\n  'shirt':'\\ud83d\\udc55',\n  'shopping':'\\ud83d\\udecd',\n  'shopping_cart':'\\ud83d\\uded2',\n  'shower':'\\ud83d\\udebf',\n  'shrimp':'\\ud83e\\udd90',\n  'signal_strength':'\\ud83d\\udcf6',\n  'six_pointed_star':'\\ud83d\\udd2f',\n  'ski':'\\ud83c\\udfbf',\n  'skier':'\\u26f7',\n  'skull':'\\ud83d\\udc80',\n  'skull_and_crossbones':'\\u2620\\ufe0f',\n  'sleeping':'\\ud83d\\ude34',\n  'sleeping_bed':'\\ud83d\\udecc',\n  'sleepy':'\\ud83d\\ude2a',\n  'slightly_frowning_face':'\\ud83d\\ude41',\n  'slightly_smiling_face':'\\ud83d\\ude42',\n  'slot_machine':'\\ud83c\\udfb0',\n  'small_airplane':'\\ud83d\\udee9',\n  'small_blue_diamond':'\\ud83d\\udd39',\n  'small_orange_diamond':'\\ud83d\\udd38',\n  'small_red_triangle':'\\ud83d\\udd3a',\n  'small_red_triangle_down':'\\ud83d\\udd3b',\n  'smile':'\\ud83d\\ude04',\n  'smile_cat':'\\ud83d\\ude38',\n  'smiley':'\\ud83d\\ude03',\n  'smiley_cat':'\\ud83d\\ude3a',\n  'smiling_imp':'\\ud83d\\ude08',\n  'smirk':'\\ud83d\\ude0f',\n  'smirk_cat':'\\ud83d\\ude3c',\n  'smoking':'\\ud83d\\udeac',\n  'snail':'\\ud83d\\udc0c',\n  'snake':'\\ud83d\\udc0d',\n  'sneezing_face':'\\ud83e\\udd27',\n  'snowboarder':'\\ud83c\\udfc2',\n  'snowflake':'\\u2744\\ufe0f',\n  'snowman':'\\u26c4\\ufe0f',\n  'snowman_with_snow':'\\u2603\\ufe0f',\n  'sob':'\\ud83d\\ude2d',\n  'soccer':'\\u26bd\\ufe0f',\n  'soon':'\\ud83d\\udd1c',\n  'sos':'\\ud83c\\udd98',\n  'sound':'\\ud83d\\udd09',\n  'space_invader':'\\ud83d\\udc7e',\n  'spades':'\\u2660\\ufe0f',\n  'spaghetti':'\\ud83c\\udf5d',\n  'sparkle':'\\u2747\\ufe0f',\n  'sparkler':'\\ud83c\\udf87',\n  'sparkles':'\\u2728',\n  'sparkling_heart':'\\ud83d\\udc96',\n  'speak_no_evil':'\\ud83d\\ude4a',\n  'speaker':'\\ud83d\\udd08',\n  'speaking_head':'\\ud83d\\udde3',\n  'speech_balloon':'\\ud83d\\udcac',\n  'speedboat':'\\ud83d\\udea4',\n  'spider':'\\ud83d\\udd77',\n  'spider_web':'\\ud83d\\udd78',\n  'spiral_calendar':'\\ud83d\\uddd3',\n  'spiral_notepad':'\\ud83d\\uddd2',\n  'spoon':'\\ud83e\\udd44',\n  'squid':'\\ud83e\\udd91',\n  'stadium':'\\ud83c\\udfdf',\n  'star':'\\u2b50\\ufe0f',\n  'star2':'\\ud83c\\udf1f',\n  'star_and_crescent':'\\u262a\\ufe0f',\n  'star_of_david':'\\u2721\\ufe0f',\n  'stars':'\\ud83c\\udf20',\n  'station':'\\ud83d\\ude89',\n  'statue_of_liberty':'\\ud83d\\uddfd',\n  'steam_locomotive':'\\ud83d\\ude82',\n  'stew':'\\ud83c\\udf72',\n  'stop_button':'\\u23f9',\n  'stop_sign':'\\ud83d\\uded1',\n  'stopwatch':'\\u23f1',\n  'straight_ruler':'\\ud83d\\udccf',\n  'strawberry':'\\ud83c\\udf53',\n  'stuck_out_tongue':'\\ud83d\\ude1b',\n  'stuck_out_tongue_closed_eyes':'\\ud83d\\ude1d',\n  'stuck_out_tongue_winking_eye':'\\ud83d\\ude1c',\n  'studio_microphone':'\\ud83c\\udf99',\n  'stuffed_flatbread':'\\ud83e\\udd59',\n  'sun_behind_large_cloud':'\\ud83c\\udf25',\n  'sun_behind_rain_cloud':'\\ud83c\\udf26',\n  'sun_behind_small_cloud':'\\ud83c\\udf24',\n  'sun_with_face':'\\ud83c\\udf1e',\n  'sunflower':'\\ud83c\\udf3b',\n  'sunglasses':'\\ud83d\\ude0e',\n  'sunny':'\\u2600\\ufe0f',\n  'sunrise':'\\ud83c\\udf05',\n  'sunrise_over_mountains':'\\ud83c\\udf04',\n  'surfing_man':'\\ud83c\\udfc4',\n  'surfing_woman':'\\ud83c\\udfc4&zwj;\\u2640\\ufe0f',\n  'sushi':'\\ud83c\\udf63',\n  'suspension_railway':'\\ud83d\\ude9f',\n  'sweat':'\\ud83d\\ude13',\n  'sweat_drops':'\\ud83d\\udca6',\n  'sweat_smile':'\\ud83d\\ude05',\n  'sweet_potato':'\\ud83c\\udf60',\n  'swimming_man':'\\ud83c\\udfca',\n  'swimming_woman':'\\ud83c\\udfca&zwj;\\u2640\\ufe0f',\n  'symbols':'\\ud83d\\udd23',\n  'synagogue':'\\ud83d\\udd4d',\n  'syringe':'\\ud83d\\udc89',\n  'taco':'\\ud83c\\udf2e',\n  'tada':'\\ud83c\\udf89',\n  'tanabata_tree':'\\ud83c\\udf8b',\n  'taurus':'\\u2649\\ufe0f',\n  'taxi':'\\ud83d\\ude95',\n  'tea':'\\ud83c\\udf75',\n  'telephone_receiver':'\\ud83d\\udcde',\n  'telescope':'\\ud83d\\udd2d',\n  'tennis':'\\ud83c\\udfbe',\n  'tent':'\\u26fa\\ufe0f',\n  'thermometer':'\\ud83c\\udf21',\n  'thinking':'\\ud83e\\udd14',\n  'thought_balloon':'\\ud83d\\udcad',\n  'ticket':'\\ud83c\\udfab',\n  'tickets':'\\ud83c\\udf9f',\n  'tiger':'\\ud83d\\udc2f',\n  'tiger2':'\\ud83d\\udc05',\n  'timer_clock':'\\u23f2',\n  'tipping_hand_man':'\\ud83d\\udc81&zwj;\\u2642\\ufe0f',\n  'tired_face':'\\ud83d\\ude2b',\n  'tm':'\\u2122\\ufe0f',\n  'toilet':'\\ud83d\\udebd',\n  'tokyo_tower':'\\ud83d\\uddfc',\n  'tomato':'\\ud83c\\udf45',\n  'tongue':'\\ud83d\\udc45',\n  'top':'\\ud83d\\udd1d',\n  'tophat':'\\ud83c\\udfa9',\n  'tornado':'\\ud83c\\udf2a',\n  'trackball':'\\ud83d\\uddb2',\n  'tractor':'\\ud83d\\ude9c',\n  'traffic_light':'\\ud83d\\udea5',\n  'train':'\\ud83d\\ude8b',\n  'train2':'\\ud83d\\ude86',\n  'tram':'\\ud83d\\ude8a',\n  'triangular_flag_on_post':'\\ud83d\\udea9',\n  'triangular_ruler':'\\ud83d\\udcd0',\n  'trident':'\\ud83d\\udd31',\n  'triumph':'\\ud83d\\ude24',\n  'trolleybus':'\\ud83d\\ude8e',\n  'trophy':'\\ud83c\\udfc6',\n  'tropical_drink':'\\ud83c\\udf79',\n  'tropical_fish':'\\ud83d\\udc20',\n  'truck':'\\ud83d\\ude9a',\n  'trumpet':'\\ud83c\\udfba',\n  'tulip':'\\ud83c\\udf37',\n  'tumbler_glass':'\\ud83e\\udd43',\n  'turkey':'\\ud83e\\udd83',\n  'turtle':'\\ud83d\\udc22',\n  'tv':'\\ud83d\\udcfa',\n  'twisted_rightwards_arrows':'\\ud83d\\udd00',\n  'two_hearts':'\\ud83d\\udc95',\n  'two_men_holding_hands':'\\ud83d\\udc6c',\n  'two_women_holding_hands':'\\ud83d\\udc6d',\n  'u5272':'\\ud83c\\ude39',\n  'u5408':'\\ud83c\\ude34',\n  'u55b6':'\\ud83c\\ude3a',\n  'u6307':'\\ud83c\\ude2f\\ufe0f',\n  'u6708':'\\ud83c\\ude37\\ufe0f',\n  'u6709':'\\ud83c\\ude36',\n  'u6e80':'\\ud83c\\ude35',\n  'u7121':'\\ud83c\\ude1a\\ufe0f',\n  'u7533':'\\ud83c\\ude38',\n  'u7981':'\\ud83c\\ude32',\n  'u7a7a':'\\ud83c\\ude33',\n  'umbrella':'\\u2614\\ufe0f',\n  'unamused':'\\ud83d\\ude12',\n  'underage':'\\ud83d\\udd1e',\n  'unicorn':'\\ud83e\\udd84',\n  'unlock':'\\ud83d\\udd13',\n  'up':'\\ud83c\\udd99',\n  'upside_down_face':'\\ud83d\\ude43',\n  'v':'\\u270c\\ufe0f',\n  'vertical_traffic_light':'\\ud83d\\udea6',\n  'vhs':'\\ud83d\\udcfc',\n  'vibration_mode':'\\ud83d\\udcf3',\n  'video_camera':'\\ud83d\\udcf9',\n  'video_game':'\\ud83c\\udfae',\n  'violin':'\\ud83c\\udfbb',\n  'virgo':'\\u264d\\ufe0f',\n  'volcano':'\\ud83c\\udf0b',\n  'volleyball':'\\ud83c\\udfd0',\n  'vs':'\\ud83c\\udd9a',\n  'vulcan_salute':'\\ud83d\\udd96',\n  'walking_man':'\\ud83d\\udeb6',\n  'walking_woman':'\\ud83d\\udeb6&zwj;\\u2640\\ufe0f',\n  'waning_crescent_moon':'\\ud83c\\udf18',\n  'waning_gibbous_moon':'\\ud83c\\udf16',\n  'warning':'\\u26a0\\ufe0f',\n  'wastebasket':'\\ud83d\\uddd1',\n  'watch':'\\u231a\\ufe0f',\n  'water_buffalo':'\\ud83d\\udc03',\n  'watermelon':'\\ud83c\\udf49',\n  'wave':'\\ud83d\\udc4b',\n  'wavy_dash':'\\u3030\\ufe0f',\n  'waxing_crescent_moon':'\\ud83c\\udf12',\n  'wc':'\\ud83d\\udebe',\n  'weary':'\\ud83d\\ude29',\n  'wedding':'\\ud83d\\udc92',\n  'weight_lifting_man':'\\ud83c\\udfcb\\ufe0f',\n  'weight_lifting_woman':'\\ud83c\\udfcb\\ufe0f&zwj;\\u2640\\ufe0f',\n  'whale':'\\ud83d\\udc33',\n  'whale2':'\\ud83d\\udc0b',\n  'wheel_of_dharma':'\\u2638\\ufe0f',\n  'wheelchair':'\\u267f\\ufe0f',\n  'white_check_mark':'\\u2705',\n  'white_circle':'\\u26aa\\ufe0f',\n  'white_flag':'\\ud83c\\udff3\\ufe0f',\n  'white_flower':'\\ud83d\\udcae',\n  'white_large_square':'\\u2b1c\\ufe0f',\n  'white_medium_small_square':'\\u25fd\\ufe0f',\n  'white_medium_square':'\\u25fb\\ufe0f',\n  'white_small_square':'\\u25ab\\ufe0f',\n  'white_square_button':'\\ud83d\\udd33',\n  'wilted_flower':'\\ud83e\\udd40',\n  'wind_chime':'\\ud83c\\udf90',\n  'wind_face':'\\ud83c\\udf2c',\n  'wine_glass':'\\ud83c\\udf77',\n  'wink':'\\ud83d\\ude09',\n  'wolf':'\\ud83d\\udc3a',\n  'woman':'\\ud83d\\udc69',\n  'woman_artist':'\\ud83d\\udc69&zwj;\\ud83c\\udfa8',\n  'woman_astronaut':'\\ud83d\\udc69&zwj;\\ud83d\\ude80',\n  'woman_cartwheeling':'\\ud83e\\udd38&zwj;\\u2640\\ufe0f',\n  'woman_cook':'\\ud83d\\udc69&zwj;\\ud83c\\udf73',\n  'woman_facepalming':'\\ud83e\\udd26&zwj;\\u2640\\ufe0f',\n  'woman_factory_worker':'\\ud83d\\udc69&zwj;\\ud83c\\udfed',\n  'woman_farmer':'\\ud83d\\udc69&zwj;\\ud83c\\udf3e',\n  'woman_firefighter':'\\ud83d\\udc69&zwj;\\ud83d\\ude92',\n  'woman_health_worker':'\\ud83d\\udc69&zwj;\\u2695\\ufe0f',\n  'woman_judge':'\\ud83d\\udc69&zwj;\\u2696\\ufe0f',\n  'woman_juggling':'\\ud83e\\udd39&zwj;\\u2640\\ufe0f',\n  'woman_mechanic':'\\ud83d\\udc69&zwj;\\ud83d\\udd27',\n  'woman_office_worker':'\\ud83d\\udc69&zwj;\\ud83d\\udcbc',\n  'woman_pilot':'\\ud83d\\udc69&zwj;\\u2708\\ufe0f',\n  'woman_playing_handball':'\\ud83e\\udd3e&zwj;\\u2640\\ufe0f',\n  'woman_playing_water_polo':'\\ud83e\\udd3d&zwj;\\u2640\\ufe0f',\n  'woman_scientist':'\\ud83d\\udc69&zwj;\\ud83d\\udd2c',\n  'woman_shrugging':'\\ud83e\\udd37&zwj;\\u2640\\ufe0f',\n  'woman_singer':'\\ud83d\\udc69&zwj;\\ud83c\\udfa4',\n  'woman_student':'\\ud83d\\udc69&zwj;\\ud83c\\udf93',\n  'woman_teacher':'\\ud83d\\udc69&zwj;\\ud83c\\udfeb',\n  'woman_technologist':'\\ud83d\\udc69&zwj;\\ud83d\\udcbb',\n  'woman_with_turban':'\\ud83d\\udc73&zwj;\\u2640\\ufe0f',\n  'womans_clothes':'\\ud83d\\udc5a',\n  'womans_hat':'\\ud83d\\udc52',\n  'women_wrestling':'\\ud83e\\udd3c&zwj;\\u2640\\ufe0f',\n  'womens':'\\ud83d\\udeba',\n  'world_map':'\\ud83d\\uddfa',\n  'worried':'\\ud83d\\ude1f',\n  'wrench':'\\ud83d\\udd27',\n  'writing_hand':'\\u270d\\ufe0f',\n  'x':'\\u274c',\n  'yellow_heart':'\\ud83d\\udc9b',\n  'yen':'\\ud83d\\udcb4',\n  'yin_yang':'\\u262f\\ufe0f',\n  'yum':'\\ud83d\\ude0b',\n  'zap':'\\u26a1\\ufe0f',\n  'zipper_mouth_face':'\\ud83e\\udd10',\n  'zzz':'\\ud83d\\udca4',\n\n  /* special emojis :P */\n  'octocat':  '<img alt=\":octocat:\" height=\"20\" width=\"20\" align=\"absmiddle\" src=\"https://assets-cdn.github.com/images/icons/emoji/octocat.png\">',\n  'showdown': '<span style=\"font-family: \\'Anonymous Pro\\', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>'\n};\n\r\n/**\n * Created by Estevao on 31-05-2015.\n */\n\n/**\n * Showdown Converter class\n * @class\n * @param {object} [converterOptions]\n * @returns {Converter}\n */\nshowdown.Converter = function (converterOptions) {\n  'use strict';\n\n  var\n      /**\n       * Options used by this converter\n       * @private\n       * @type {{}}\n       */\n      options = {},\n\n      /**\n       * Language extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      langExtensions = [],\n\n      /**\n       * Output modifiers extensions used by this converter\n       * @private\n       * @type {Array}\n       */\n      outputModifiers = [],\n\n      /**\n       * Event listeners\n       * @private\n       * @type {{}}\n       */\n      listeners = {},\n\n      /**\n       * The flavor set in this converter\n       */\n      setConvFlavor = setFlavor,\n\n      /**\n       * Metadata of the document\n       * @type {{parsed: {}, raw: string, format: string}}\n       */\n      metadata = {\n        parsed: {},\n        raw: '',\n        format: ''\n      };\n\n  _constructor();\n\n  /**\n   * Converter constructor\n   * @private\n   */\n  function _constructor () {\n    converterOptions = converterOptions || {};\n\n    for (var gOpt in globalOptions) {\n      if (globalOptions.hasOwnProperty(gOpt)) {\n        options[gOpt] = globalOptions[gOpt];\n      }\n    }\n\n    // Merge options\n    if (typeof converterOptions === 'object') {\n      for (var opt in converterOptions) {\n        if (converterOptions.hasOwnProperty(opt)) {\n          options[opt] = converterOptions[opt];\n        }\n      }\n    } else {\n      throw Error('Converter expects the passed parameter to be an object, but ' + typeof converterOptions +\n      ' was passed instead.');\n    }\n\n    if (options.extensions) {\n      showdown.helper.forEach(options.extensions, _parseExtension);\n    }\n  }\n\n  /**\n   * Parse extension\n   * @param {*} ext\n   * @param {string} [name='']\n   * @private\n   */\n  function _parseExtension (ext, name) {\n\n    name = name || null;\n    // If it's a string, the extension was previously loaded\n    if (showdown.helper.isString(ext)) {\n      ext = showdown.helper.stdExtName(ext);\n      name = ext;\n\n      // LEGACY_SUPPORT CODE\n      if (showdown.extensions[ext]) {\n        console.warn('DEPRECATION WARNING: ' + ext + ' is an old extension that uses a deprecated loading method.' +\n          'Please inform the developer that the extension should be updated!');\n        legacyExtensionLoading(showdown.extensions[ext], ext);\n        return;\n        // END LEGACY SUPPORT CODE\n\n      } else if (!showdown.helper.isUndefined(extensions[ext])) {\n        ext = extensions[ext];\n\n      } else {\n        throw Error('Extension \"' + ext + '\" could not be loaded. It was either not found or is not a valid extension.');\n      }\n    }\n\n    if (typeof ext === 'function') {\n      ext = ext();\n    }\n\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n\n    var validExt = validate(ext, name);\n    if (!validExt.valid) {\n      throw Error(validExt.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n      }\n      if (ext[i].hasOwnProperty('listeners')) {\n        for (var ln in ext[i].listeners) {\n          if (ext[i].listeners.hasOwnProperty(ln)) {\n            listen(ln, ext[i].listeners[ln]);\n          }\n        }\n      }\n    }\n\n  }\n\n  /**\n   * LEGACY_SUPPORT\n   * @param {*} ext\n   * @param {string} name\n   */\n  function legacyExtensionLoading (ext, name) {\n    if (typeof ext === 'function') {\n      ext = ext(new showdown.Converter());\n    }\n    if (!showdown.helper.isArray(ext)) {\n      ext = [ext];\n    }\n    var valid = validate(ext, name);\n\n    if (!valid.valid) {\n      throw Error(valid.error);\n    }\n\n    for (var i = 0; i < ext.length; ++i) {\n      switch (ext[i].type) {\n        case 'lang':\n          langExtensions.push(ext[i]);\n          break;\n        case 'output':\n          outputModifiers.push(ext[i]);\n          break;\n        default:// should never reach here\n          throw Error('Extension loader error: Type unrecognized!!!');\n      }\n    }\n  }\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   */\n  function listen (name, callback) {\n    if (!showdown.helper.isString(name)) {\n      throw Error('Invalid argument in converter.listen() method: name must be a string, but ' + typeof name + ' given');\n    }\n\n    if (typeof callback !== 'function') {\n      throw Error('Invalid argument in converter.listen() method: callback must be a function, but ' + typeof callback + ' given');\n    }\n\n    if (!listeners.hasOwnProperty(name)) {\n      listeners[name] = [];\n    }\n    listeners[name].push(callback);\n  }\n\n  function rTrimInputText (text) {\n    var rsp = text.match(/^\\s*/)[0].length,\n        rgx = new RegExp('^\\\\s{0,' + rsp + '}', 'gm');\n    return text.replace(rgx, '');\n  }\n\n  /**\n   * Dispatch an event\n   * @private\n   * @param {string} evtName Event name\n   * @param {string} text Text\n   * @param {{}} options Converter Options\n   * @param {{}} globals\n   * @returns {string}\n   */\n  this._dispatch = function dispatch (evtName, text, options, globals) {\n    if (listeners.hasOwnProperty(evtName)) {\n      for (var ei = 0; ei < listeners[evtName].length; ++ei) {\n        var nText = listeners[evtName][ei](evtName, text, this, options, globals);\n        if (nText && typeof nText !== 'undefined') {\n          text = nText;\n        }\n      }\n    }\n    return text;\n  };\n\n  /**\n   * Listen to an event\n   * @param {string} name\n   * @param {function} callback\n   * @returns {showdown.Converter}\n   */\n  this.listen = function (name, callback) {\n    listen(name, callback);\n    return this;\n  };\n\n  /**\n   * Converts a markdown string into HTML\n   * @param {string} text\n   * @returns {*}\n   */\n  this.makeHtml = function (text) {\n    //check if text is not falsy\n    if (!text) {\n      return text;\n    }\n\n    var globals = {\n      gHtmlBlocks:     [],\n      gHtmlMdBlocks:   [],\n      gHtmlSpans:      [],\n      gUrls:           {},\n      gTitles:         {},\n      gDimensions:     {},\n      gListLevel:      0,\n      hashLinkCounts:  {},\n      langExtensions:  langExtensions,\n      outputModifiers: outputModifiers,\n      converter:       this,\n      ghCodeBlocks:    [],\n      metadata: {\n        parsed: {},\n        raw: '',\n        format: ''\n      }\n    };\n\n    // This lets us use ¨ trema as an escape char to avoid md5 hashes\n    // The choice of character is arbitrary; anything that isn't\n    // magic in Markdown will work.\n    text = text.replace(/¨/g, '¨T');\n\n    // Replace $ with ¨D\n    // RegExp interprets $ as a special character\n    // when it's in a replacement string\n    text = text.replace(/\\$/g, '¨D');\n\n    // Standardize line endings\n    text = text.replace(/\\r\\n/g, '\\n'); // DOS to Unix\n    text = text.replace(/\\r/g, '\\n'); // Mac to Unix\n\n    // Stardardize line spaces\n    text = text.replace(/\\u00A0/g, '&nbsp;');\n\n    if (options.smartIndentationFix) {\n      text = rTrimInputText(text);\n    }\n\n    // Make sure text begins and ends with a couple of newlines:\n    text = '\\n\\n' + text + '\\n\\n';\n\n    // detab\n    text = showdown.subParser('detab')(text, options, globals);\n\n    /**\n     * Strip any lines consisting only of spaces and tabs.\n     * This makes subsequent regexs easier to write, because we can\n     * match consecutive blank lines with /\\n+/ instead of something\n     * contorted like /[ \\t]*\\n+/\n     */\n    text = text.replace(/^[ \\t]+$/mg, '');\n\n    //run languageExtensions\n    showdown.helper.forEach(langExtensions, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // run the sub parsers\n    text = showdown.subParser('metadata')(text, options, globals);\n    text = showdown.subParser('hashPreCodeTags')(text, options, globals);\n    text = showdown.subParser('githubCodeBlocks')(text, options, globals);\n    text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n    text = showdown.subParser('hashCodeTags')(text, options, globals);\n    text = showdown.subParser('stripLinkDefinitions')(text, options, globals);\n    text = showdown.subParser('blockGamut')(text, options, globals);\n    text = showdown.subParser('unhashHTMLSpans')(text, options, globals);\n    text = showdown.subParser('unescapeSpecialChars')(text, options, globals);\n\n    // attacklab: Restore dollar signs\n    text = text.replace(/¨D/g, '$$');\n\n    // attacklab: Restore tremas\n    text = text.replace(/¨T/g, '¨');\n\n    // render a complete html document instead of a partial if the option is enabled\n    text = showdown.subParser('completeHTMLDocument')(text, options, globals);\n\n    // Run output modifiers\n    showdown.helper.forEach(outputModifiers, function (ext) {\n      text = showdown.subParser('runExtension')(ext, text, options, globals);\n    });\n\n    // update metadata\n    metadata = globals.metadata;\n    return text;\n  };\n\n  /**\n   * Converts an HTML string into a markdown string\n   * @param src\n   * @param [HTMLParser] A WHATWG DOM and HTML parser, such as JSDOM. If none is supplied, window.document will be used.\n   * @returns {string}\n   */\n  this.makeMarkdown = this.makeMd = function (src, HTMLParser) {\n\n    // replace \\r\\n with \\n\n    src = src.replace(/\\r\\n/g, '\\n');\n    src = src.replace(/\\r/g, '\\n'); // old macs\n\n    // due to an edge case, we need to find this: > <\n    // to prevent removing of non silent white spaces\n    // ex: <em>this is</em> <strong>sparta</strong>\n    src = src.replace(/>[ \\t]+</, '>¨NBSP;<');\n\n    if (!HTMLParser) {\n      if (window && window.document) {\n        HTMLParser = window.document;\n      } else {\n        throw new Error('HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM');\n      }\n    }\n\n    var doc = HTMLParser.createElement('div');\n    doc.innerHTML = src;\n\n    var globals = {\n      preList: substitutePreCodeTags(doc)\n    };\n\n    // remove all newlines and collapse spaces\n    clean(doc);\n\n    // some stuff, like accidental reference links must now be escaped\n    // TODO\n    // doc.innerHTML = doc.innerHTML.replace(/\\[[\\S\\t ]]/);\n\n    var nodes = doc.childNodes,\n        mdDoc = '';\n\n    for (var i = 0; i < nodes.length; i++) {\n      mdDoc += showdown.subParser('makeMarkdown.node')(nodes[i], globals);\n    }\n\n    function clean (node) {\n      for (var n = 0; n < node.childNodes.length; ++n) {\n        var child = node.childNodes[n];\n        if (child.nodeType === 3) {\n          if (!/\\S/.test(child.nodeValue) && !/^[ ]+$/.test(child.nodeValue)) {\n            node.removeChild(child);\n            --n;\n          } else {\n            child.nodeValue = child.nodeValue.split('\\n').join(' ');\n            child.nodeValue = child.nodeValue.replace(/(\\s)+/g, '$1');\n          }\n        } else if (child.nodeType === 1) {\n          clean(child);\n        }\n      }\n    }\n\n    // find all pre tags and replace contents with placeholder\n    // we need this so that we can remove all indentation from html\n    // to ease up parsing\n    function substitutePreCodeTags (doc) {\n\n      var pres = doc.querySelectorAll('pre'),\n          presPH = [];\n\n      for (var i = 0; i < pres.length; ++i) {\n\n        if (pres[i].childElementCount === 1 && pres[i].firstChild.tagName.toLowerCase() === 'code') {\n          var content = pres[i].firstChild.innerHTML.trim(),\n              language = pres[i].firstChild.getAttribute('data-language') || '';\n\n          // if data-language attribute is not defined, then we look for class language-*\n          if (language === '') {\n            var classes = pres[i].firstChild.className.split(' ');\n            for (var c = 0; c < classes.length; ++c) {\n              var matches = classes[c].match(/^language-(.+)$/);\n              if (matches !== null) {\n                language = matches[1];\n                break;\n              }\n            }\n          }\n\n          // unescape html entities in content\n          content = showdown.helper.unescapeHTMLEntities(content);\n\n          presPH.push(content);\n          pres[i].outerHTML = '<precode language=\"' + language + '\" precodenum=\"' + i.toString() + '\"></precode>';\n        } else {\n          presPH.push(pres[i].innerHTML);\n          pres[i].innerHTML = '';\n          pres[i].setAttribute('prenum', i.toString());\n        }\n      }\n      return presPH;\n    }\n\n    return mdDoc;\n  };\n\n  /**\n   * Set an option of this Converter instance\n   * @param {string} key\n   * @param {*} value\n   */\n  this.setOption = function (key, value) {\n    options[key] = value;\n  };\n\n  /**\n   * Get the option of this Converter instance\n   * @param {string} key\n   * @returns {*}\n   */\n  this.getOption = function (key) {\n    return options[key];\n  };\n\n  /**\n   * Get the options of this Converter instance\n   * @returns {{}}\n   */\n  this.getOptions = function () {\n    return options;\n  };\n\n  /**\n   * Add extension to THIS converter\n   * @param {{}} extension\n   * @param {string} [name=null]\n   */\n  this.addExtension = function (extension, name) {\n    name = name || null;\n    _parseExtension(extension, name);\n  };\n\n  /**\n   * Use a global registered extension with THIS converter\n   * @param {string} extensionName Name of the previously registered extension\n   */\n  this.useExtension = function (extensionName) {\n    _parseExtension(extensionName);\n  };\n\n  /**\n   * Set the flavor THIS converter should use\n   * @param {string} name\n   */\n  this.setFlavor = function (name) {\n    if (!flavor.hasOwnProperty(name)) {\n      throw Error(name + ' flavor was not found');\n    }\n    var preset = flavor[name];\n    setConvFlavor = name;\n    for (var option in preset) {\n      if (preset.hasOwnProperty(option)) {\n        options[option] = preset[option];\n      }\n    }\n  };\n\n  /**\n   * Get the currently set flavor of this converter\n   * @returns {string}\n   */\n  this.getFlavor = function () {\n    return setConvFlavor;\n  };\n\n  /**\n   * Remove an extension from THIS converter.\n   * Note: This is a costly operation. It's better to initialize a new converter\n   * and specify the extensions you wish to use\n   * @param {Array} extension\n   */\n  this.removeExtension = function (extension) {\n    if (!showdown.helper.isArray(extension)) {\n      extension = [extension];\n    }\n    for (var a = 0; a < extension.length; ++a) {\n      var ext = extension[a];\n      for (var i = 0; i < langExtensions.length; ++i) {\n        if (langExtensions[i] === ext) {\n          langExtensions.splice(i, 1);\n        }\n      }\n      for (var ii = 0; ii < outputModifiers.length; ++ii) {\n        if (outputModifiers[ii] === ext) {\n          outputModifiers.splice(ii, 1);\n        }\n      }\n    }\n  };\n\n  /**\n   * Get all extension of THIS converter\n   * @returns {{language: Array, output: Array}}\n   */\n  this.getAllExtensions = function () {\n    return {\n      language: langExtensions,\n      output: outputModifiers\n    };\n  };\n\n  /**\n   * Get the metadata of the previously parsed document\n   * @param raw\n   * @returns {string|{}}\n   */\n  this.getMetadata = function (raw) {\n    if (raw) {\n      return metadata.raw;\n    } else {\n      return metadata.parsed;\n    }\n  };\n\n  /**\n   * Get the metadata format of the previously parsed document\n   * @returns {string}\n   */\n  this.getMetadataFormat = function () {\n    return metadata.format;\n  };\n\n  /**\n   * Private: set a single key, value metadata pair\n   * @param {string} key\n   * @param {string} value\n   */\n  this._setMetadataPair = function (key, value) {\n    metadata.parsed[key] = value;\n  };\n\n  /**\n   * Private: set metadata format\n   * @param {string} format\n   */\n  this._setMetadataFormat = function (format) {\n    metadata.format = format;\n  };\n\n  /**\n   * Private: set metadata raw text\n   * @param {string} raw\n   */\n  this._setMetadataRaw = function (raw) {\n    metadata.raw = raw;\n  };\n};\n\r\n/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('anchors', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('anchors.before', text, options, globals);\n\n  var writeAnchorTag = function (wholeMatch, linkText, linkId, url, m5, m6, title) {\n    if (showdown.helper.isUndefined(title)) {\n      title = '';\n    }\n    linkId = linkId.toLowerCase();\n\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n    } else if (!url) {\n      if (!linkId) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = linkText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(globals.gUrls[linkId])) {\n        url = globals.gUrls[linkId];\n        if (!showdown.helper.isUndefined(globals.gTitles[linkId])) {\n          title = globals.gTitles[linkId];\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    //url = showdown.helper.escapeCharacters(url, '*_', false); // replaced line to improve performance\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n\n    var result = '<a href=\"' + url + '\"';\n\n    if (title !== '' && title !== null) {\n      title = title.replace(/\"/g, '&quot;');\n      //title = showdown.helper.escapeCharacters(title, '*_', false); // replaced line to improve performance\n      title = title.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    // optionLinksInNewWindow only applies\n    // to external links. Hash links (#) open in same page\n    if (options.openLinksInNewWindow && !/^#/.test(url)) {\n      // escaped _\n      result += ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n    }\n\n    result += '>' + linkText + '</a>';\n\n    return result;\n  };\n\n  // First, handle reference-style links: [link text] [id]\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)] ?(?:\\n *)?\\[(.*?)]()()()()/g, writeAnchorTag);\n\n  // Next, inline-style links: [link text](url \"optional title\")\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<([^>]*)>(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n    writeAnchorTag);\n\n  // normal cases\n  text = text.replace(/\\[((?:\\[[^\\]]*]|[^\\[\\]])*)]()[ \\t]*\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?:[ \\t]*(([\"'])([^\"]*?)\\5))?[ \\t]?\\)/g,\n    writeAnchorTag);\n\n  // handle reference-style shortcuts: [link text]\n  // These must come last in case you've also got [link test][1]\n  // or [link test](/foo)\n  text = text.replace(/\\[([^\\[\\]]+)]()()()()()/g, writeAnchorTag);\n\n  // Lastly handle GithubMentions if option is enabled\n  if (options.ghMentions) {\n    text = text.replace(/(^|\\s)(\\\\)?(@([a-z\\d]+(?:[a-z\\d.-]+?[a-z\\d]+)*))/gmi, function (wm, st, escape, mentions, username) {\n      if (escape === '\\\\') {\n        return st + mentions;\n      }\n\n      //check if options.ghMentionsLink is a string\n      if (!showdown.helper.isString(options.ghMentionsLink)) {\n        throw new Error('ghMentionsLink option must be a string');\n      }\n      var lnk = options.ghMentionsLink.replace(/\\{u}/g, username),\n          target = '';\n      if (options.openLinksInNewWindow) {\n        target = ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n      }\n      return st + '<a href=\"' + lnk + '\"' + target + '>' + mentions + '</a>';\n    });\n  }\n\n  text = globals.converter._dispatch('anchors.after', text, options, globals);\n  return text;\n});\n\r\n// url allowed chars [a-z\\d_.~:/?#[]@!$&'()*+,;=-]\n\nvar simpleURLRegex  = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+?\\.[^'\">\\s]+?)()(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    simpleURLRegex2 = /([*~_]+|\\b)(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+\\.[^'\">\\s]+?)([.!?,()\\[\\]])?(\\1)?(?=\\s|$)(?![\"<>])/gi,\n    delimUrlRegex   = /()<(((https?|ftp|dict):\\/\\/|www\\.)[^'\">\\s]+)()>()/gi,\n    simpleMailRegex = /(^|\\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)(?=$|\\s)/gmi,\n    delimMailRegex  = /<()(?:mailto:)?([-.\\w]+@[-a-z0-9]+(\\.[-a-z0-9]+)*\\.[a-z]+)>/gi,\n\n    replaceLink = function (options) {\n      'use strict';\n      return function (wm, leadingMagicChars, link, m2, m3, trailingPunctuation, trailingMagicChars) {\n        link = link.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n        var lnkTxt = link,\n            append = '',\n            target = '',\n            lmc    = leadingMagicChars || '',\n            tmc    = trailingMagicChars || '';\n        if (/^www\\./i.test(link)) {\n          link = link.replace(/^www\\./i, 'http://www.');\n        }\n        if (options.excludeTrailingPunctuationFromURLs && trailingPunctuation) {\n          append = trailingPunctuation;\n        }\n        if (options.openLinksInNewWindow) {\n          target = ' rel=\"noopener noreferrer\" target=\"¨E95Eblank\"';\n        }\n        return lmc + '<a href=\"' + link + '\"' + target + '>' + lnkTxt + '</a>' + append + tmc;\n      };\n    },\n\n    replaceMail = function (options, globals) {\n      'use strict';\n      return function (wholeMatch, b, mail) {\n        var href = 'mailto:';\n        b = b || '';\n        mail = showdown.subParser('unescapeSpecialChars')(mail, options, globals);\n        if (options.encodeEmails) {\n          href = showdown.helper.encodeEmailAddress(href + mail);\n          mail = showdown.helper.encodeEmailAddress(mail);\n        } else {\n          href = href + mail;\n        }\n        return b + '<a href=\"' + href + '\">' + mail + '</a>';\n      };\n    };\n\nshowdown.subParser('autoLinks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('autoLinks.before', text, options, globals);\n\n  text = text.replace(delimUrlRegex, replaceLink(options));\n  text = text.replace(delimMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('autoLinks.after', text, options, globals);\n\n  return text;\n});\n\nshowdown.subParser('simplifiedAutoLinks', function (text, options, globals) {\n  'use strict';\n\n  if (!options.simplifiedAutoLink) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.before', text, options, globals);\n\n  if (options.excludeTrailingPunctuationFromURLs) {\n    text = text.replace(simpleURLRegex2, replaceLink(options));\n  } else {\n    text = text.replace(simpleURLRegex, replaceLink(options));\n  }\n  text = text.replace(simpleMailRegex, replaceMail(options, globals));\n\n  text = globals.converter._dispatch('simplifiedAutoLinks.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * These are all the transformations that form block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('blockGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockGamut.before', text, options, globals);\n\n  // we parse blockquotes first so that we can have headings and hrs\n  // inside blockquotes\n  text = showdown.subParser('blockQuotes')(text, options, globals);\n  text = showdown.subParser('headers')(text, options, globals);\n\n  // Do Horizontal Rules:\n  text = showdown.subParser('horizontalRule')(text, options, globals);\n\n  text = showdown.subParser('lists')(text, options, globals);\n  text = showdown.subParser('codeBlocks')(text, options, globals);\n  text = showdown.subParser('tables')(text, options, globals);\n\n  // We already ran _HashHTMLBlocks() before, in Markdown(), but that\n  // was to escape raw HTML in the original Markdown source. This time,\n  // we're escaping the markup we've just created, so that we don't wrap\n  // <p> tags around block-level tags.\n  text = showdown.subParser('hashHTMLBlocks')(text, options, globals);\n  text = showdown.subParser('paragraphs')(text, options, globals);\n\n  text = globals.converter._dispatch('blockGamut.after', text, options, globals);\n\n  return text;\n});\n\r\nshowdown.subParser('blockQuotes', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('blockQuotes.before', text, options, globals);\n\n  // add a couple extra lines after the text and endtext mark\n  text = text + '\\n\\n';\n\n  var rgx = /(^ {0,3}>[ \\t]?.+\\n(.+\\n)*\\n*)+/gm;\n\n  if (options.splitAdjacentBlockquotes) {\n    rgx = /^ {0,3}>[\\s\\S]*?(?:\\n\\n)/gm;\n  }\n\n  text = text.replace(rgx, function (bq) {\n    // attacklab: hack around Konqueror 3.5.4 bug:\n    // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n    bq = bq.replace(/^[ \\t]*>[ \\t]?/gm, ''); // trim one level of quoting\n\n    // attacklab: clean up hack\n    bq = bq.replace(/¨0/g, '');\n\n    bq = bq.replace(/^[ \\t]+$/gm, ''); // trim whitespace-only lines\n    bq = showdown.subParser('githubCodeBlocks')(bq, options, globals);\n    bq = showdown.subParser('blockGamut')(bq, options, globals); // recurse\n\n    bq = bq.replace(/(^|\\n)/g, '$1  ');\n    // These leading spaces screw with <pre> content, so we need to fix that:\n    bq = bq.replace(/(\\s*<pre>[^\\r]+?<\\/pre>)/gm, function (wholeMatch, m1) {\n      var pre = m1;\n      // attacklab: hack around Konqueror 3.5.4 bug:\n      pre = pre.replace(/^  /mg, '¨0');\n      pre = pre.replace(/¨0/g, '');\n      return pre;\n    });\n\n    return showdown.subParser('hashBlock')('<blockquote>\\n' + bq + '\\n</blockquote>', options, globals);\n  });\n\n  text = globals.converter._dispatch('blockQuotes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Process Markdown `<pre><code>` blocks.\n */\nshowdown.subParser('codeBlocks', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeBlocks.before', text, options, globals);\n\n  // sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '¨0';\n\n  var pattern = /(?:\\n\\n|^)((?:(?:[ ]{4}|\\t).*\\n+)+)(\\n*[ ]{0,3}[^ \\t\\n]|(?=¨0))/g;\n  text = text.replace(pattern, function (wholeMatch, m1, m2) {\n    var codeblock = m1,\n        nextChar = m2,\n        end = '\\n';\n\n    codeblock = showdown.subParser('outdent')(codeblock, options, globals);\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing newlines\n\n    if (options.omitExtraWLInCodeBlocks) {\n      end = '';\n    }\n\n    codeblock = '<pre><code>' + codeblock + end + '</code></pre>';\n\n    return showdown.subParser('hashBlock')(codeblock, options, globals) + nextChar;\n  });\n\n  // strip sentinel\n  text = text.replace(/¨0/, '');\n\n  text = globals.converter._dispatch('codeBlocks.after', text, options, globals);\n  return text;\n});\n\r\n/**\n *\n *   *  Backtick quotes are used for <code></code> spans.\n *\n *   *  You can use multiple backticks as the delimiters if you want to\n *     include literal backticks in the code span. So, this input:\n *\n *         Just type ``foo `bar` baz`` at the prompt.\n *\n *       Will translate to:\n *\n *         <p>Just type <code>foo `bar` baz</code> at the prompt.</p>\n *\n *    There's no arbitrary limit to the number of backticks you\n *    can use as delimters. If you need three consecutive backticks\n *    in your code, use four for delimiters, etc.\n *\n *  *  You can use spaces to get literal backticks at the edges:\n *\n *         ... type `` `bar` `` ...\n *\n *       Turns to:\n *\n *         ... type <code>`bar`</code> ...\n */\nshowdown.subParser('codeSpans', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('codeSpans.before', text, options, globals);\n\n  if (typeof (text) === 'undefined') {\n    text = '';\n  }\n  text = text.replace(/(^|[^\\\\])(`+)([^\\r]*?[^`])\\2(?!`)/gm,\n    function (wholeMatch, m1, m2, m3) {\n      var c = m3;\n      c = c.replace(/^([ \\t]*)/g, '');\t// leading whitespace\n      c = c.replace(/[ \\t]*$/g, '');\t// trailing whitespace\n      c = showdown.subParser('encodeCode')(c, options, globals);\n      c = m1 + '<code>' + c + '</code>';\n      c = showdown.subParser('hashHTMLSpans')(c, options, globals);\n      return c;\n    }\n  );\n\n  text = globals.converter._dispatch('codeSpans.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Create a full HTML document from the processed markdown\n */\nshowdown.subParser('completeHTMLDocument', function (text, options, globals) {\n  'use strict';\n\n  if (!options.completeHTMLDocument) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('completeHTMLDocument.before', text, options, globals);\n\n  var doctype = 'html',\n      doctypeParsed = '<!DOCTYPE HTML>\\n',\n      title = '',\n      charset = '<meta charset=\"utf-8\">\\n',\n      lang = '',\n      metadata = '';\n\n  if (typeof globals.metadata.parsed.doctype !== 'undefined') {\n    doctypeParsed = '<!DOCTYPE ' +  globals.metadata.parsed.doctype + '>\\n';\n    doctype = globals.metadata.parsed.doctype.toString().toLowerCase();\n    if (doctype === 'html' || doctype === 'html5') {\n      charset = '<meta charset=\"utf-8\">';\n    }\n  }\n\n  for (var meta in globals.metadata.parsed) {\n    if (globals.metadata.parsed.hasOwnProperty(meta)) {\n      switch (meta.toLowerCase()) {\n        case 'doctype':\n          break;\n\n        case 'title':\n          title = '<title>' +  globals.metadata.parsed.title + '</title>\\n';\n          break;\n\n        case 'charset':\n          if (doctype === 'html' || doctype === 'html5') {\n            charset = '<meta charset=\"' + globals.metadata.parsed.charset + '\">\\n';\n          } else {\n            charset = '<meta name=\"charset\" content=\"' + globals.metadata.parsed.charset + '\">\\n';\n          }\n          break;\n\n        case 'language':\n        case 'lang':\n          lang = ' lang=\"' + globals.metadata.parsed[meta] + '\"';\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n          break;\n\n        default:\n          metadata += '<meta name=\"' + meta + '\" content=\"' + globals.metadata.parsed[meta] + '\">\\n';\n      }\n    }\n  }\n\n  text = doctypeParsed + '<html' + lang + '>\\n<head>\\n' + title + charset + metadata + '</head>\\n<body>\\n' + text.trim() + '\\n</body>\\n</html>';\n\n  text = globals.converter._dispatch('completeHTMLDocument.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Convert all tabs to spaces\n */\nshowdown.subParser('detab', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('detab.before', text, options, globals);\n\n  // expand first n-1 tabs\n  text = text.replace(/\\t(?=\\t)/g, '    '); // g_tab_width\n\n  // replace the nth with two sentinels\n  text = text.replace(/\\t/g, '¨A¨B');\n\n  // use the sentinel to anchor our regex so it doesn't explode\n  text = text.replace(/¨B(.+?)¨A/g, function (wholeMatch, m1) {\n    var leadingText = m1,\n        numSpaces = 4 - leadingText.length % 4;  // g_tab_width\n\n    // there *must* be a better way to do this:\n    for (var i = 0; i < numSpaces; i++) {\n      leadingText += ' ';\n    }\n\n    return leadingText;\n  });\n\n  // clean up sentinels\n  text = text.replace(/¨A/g, '    ');  // g_tab_width\n  text = text.replace(/¨B/g, '');\n\n  text = globals.converter._dispatch('detab.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('ellipsis', function (text, options, globals) {\n  'use strict';\n\n  if (!options.ellipsis) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('ellipsis.before', text, options, globals);\n\n  text = text.replace(/\\.\\.\\./g, '…');\n\n  text = globals.converter._dispatch('ellipsis.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Turn emoji codes into emojis\n *\n * List of supported emojis: https://github.com/showdownjs/showdown/wiki/Emojis\n */\nshowdown.subParser('emoji', function (text, options, globals) {\n  'use strict';\n\n  if (!options.emoji) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('emoji.before', text, options, globals);\n\n  var emojiRgx = /:([\\S]+?):/g;\n\n  text = text.replace(emojiRgx, function (wm, emojiCode) {\n    if (showdown.helper.emojis.hasOwnProperty(emojiCode)) {\n      return showdown.helper.emojis[emojiCode];\n    }\n    return wm;\n  });\n\n  text = globals.converter._dispatch('emoji.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Smart processing for ampersands and angle brackets that need to be encoded.\n */\nshowdown.subParser('encodeAmpsAndAngles', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeAmpsAndAngles.before', text, options, globals);\n\n  // Ampersand-encoding based entirely on Nat Irons's Amputator MT plugin:\n  // http://bumppo.net/projects/amputator/\n  text = text.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\\w+);)/g, '&amp;');\n\n  // Encode naked <'s\n  text = text.replace(/<(?![a-z\\/?$!])/gi, '&lt;');\n\n  // Encode <\n  text = text.replace(/</g, '&lt;');\n\n  // Encode >\n  text = text.replace(/>/g, '&gt;');\n\n  text = globals.converter._dispatch('encodeAmpsAndAngles.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Returns the string, with after processing the following backslash escape sequences.\n *\n * attacklab: The polite way to do this is with the new escapeCharacters() function:\n *\n *    text = escapeCharacters(text,\"\\\\\",true);\n *    text = escapeCharacters(text,\"`*_{}[]()>#+-.!\",true);\n *\n * ...but we're sidestepping its use of the (slow) RegExp constructor\n * as an optimization for Firefox.  This function gets called a LOT.\n */\nshowdown.subParser('encodeBackslashEscapes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('encodeBackslashEscapes.before', text, options, globals);\n\n  text = text.replace(/\\\\(\\\\)/g, showdown.helper.escapeCharactersCallback);\n  text = text.replace(/\\\\([`*_{}\\[\\]()>#+.!~=|:-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeBackslashEscapes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Encode/escape certain characters inside Markdown code runs.\n * The point is that in code, these characters are literals,\n * and lose their special Markdown meanings.\n */\nshowdown.subParser('encodeCode', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('encodeCode.before', text, options, globals);\n\n  // Encode all ampersands; HTML entities are not\n  // entities within a Markdown code span.\n  text = text\n    .replace(/&/g, '&amp;')\n  // Do the angle bracket song and dance:\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n  // Now, escape characters that are magic in Markdown:\n    .replace(/([*_{}\\[\\]\\\\=~-])/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('encodeCode.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Within tags -- meaning between < and > -- encode [\\ ` * _ ~ =] so they\n * don't conflict with their use in Markdown for code, italics and strong.\n */\nshowdown.subParser('escapeSpecialCharsWithinTagAttributes', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.before', text, options, globals);\n\n  // Build a regex to find HTML tags.\n  var tags     = /<\\/?[a-z\\d_:-]+(?:[\\s]+[\\s\\S]+?)?>/gi,\n      comments = /<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;\n\n  text = text.replace(tags, function (wholeMatch) {\n    return wholeMatch\n      .replace(/(.)<\\/?code>(?=.)/g, '$1`')\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = text.replace(comments, function (wholeMatch) {\n    return wholeMatch\n      .replace(/([\\\\`*_~=|])/g, showdown.helper.escapeCharactersCallback);\n  });\n\n  text = globals.converter._dispatch('escapeSpecialCharsWithinTagAttributes.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Handle github codeblocks prior to running HashHTML so that\n * HTML contained within the codeblock gets escaped properly\n * Example:\n * ```ruby\n *     def hello_world(x)\n *       puts \"Hello, #{x}\"\n *     end\n * ```\n */\nshowdown.subParser('githubCodeBlocks', function (text, options, globals) {\n  'use strict';\n\n  // early exit if option is not enabled\n  if (!options.ghCodeBlocks) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('githubCodeBlocks.before', text, options, globals);\n\n  text += '¨0';\n\n  text = text.replace(/(?:^|\\n)(?: {0,3})(```+|~~~+)(?: *)([^\\s`~]*)\\n([\\s\\S]*?)\\n(?: {0,3})\\1/g, function (wholeMatch, delim, language, codeblock) {\n    var end = (options.omitExtraWLInCodeBlocks) ? '' : '\\n';\n\n    // First parse the github code block\n    codeblock = showdown.subParser('encodeCode')(codeblock, options, globals);\n    codeblock = showdown.subParser('detab')(codeblock, options, globals);\n    codeblock = codeblock.replace(/^\\n+/g, ''); // trim leading newlines\n    codeblock = codeblock.replace(/\\n+$/g, ''); // trim trailing whitespace\n\n    codeblock = '<pre><code' + (language ? ' class=\"' + language + ' language-' + language + '\"' : '') + '>' + codeblock + end + '</code></pre>';\n\n    codeblock = showdown.subParser('hashBlock')(codeblock, options, globals);\n\n    // Since GHCodeblocks can be false positives, we need to\n    // store the primitive text and the parsed text in a global var,\n    // and then return a token\n    return '\\n\\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  });\n\n  // attacklab: strip sentinel\n  text = text.replace(/¨0/, '');\n\n  return globals.converter._dispatch('githubCodeBlocks.after', text, options, globals);\n});\n\r\nshowdown.subParser('hashBlock', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashBlock.before', text, options, globals);\n  text = text.replace(/(^\\n+|\\n+$)/g, '');\n  text = '\\n\\n¨K' + (globals.gHtmlBlocks.push(text) - 1) + 'K\\n\\n';\n  text = globals.converter._dispatch('hashBlock.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash and escape <code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return '¨C' + (globals.gHtmlSpans.push(codeblock) - 1) + 'C';\n  };\n\n  // Hash naked <code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '<code\\\\b[^>]*>', '</code>', 'gim');\n\n  text = globals.converter._dispatch('hashCodeTags.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('hashElement', function (text, options, globals) {\n  'use strict';\n\n  return function (wholeMatch, m1) {\n    var blockText = m1;\n\n    // Undo double lines\n    blockText = blockText.replace(/\\n\\n/g, '\\n');\n    blockText = blockText.replace(/^\\n/, '');\n\n    // strip trailing blank lines\n    blockText = blockText.replace(/\\n+$/g, '');\n\n    // Replace the element text with a marker (\"¨KxK\" where x is its key)\n    blockText = '\\n\\n¨K' + (globals.gHtmlBlocks.push(blockText) - 1) + 'K\\n\\n';\n\n    return blockText;\n  };\n});\n\r\nshowdown.subParser('hashHTMLBlocks', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLBlocks.before', text, options, globals);\n\n  var blockTags = [\n        'pre',\n        'div',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6',\n        'blockquote',\n        'table',\n        'dl',\n        'ol',\n        'ul',\n        'script',\n        'noscript',\n        'form',\n        'fieldset',\n        'iframe',\n        'math',\n        'style',\n        'section',\n        'header',\n        'footer',\n        'nav',\n        'article',\n        'aside',\n        'address',\n        'audio',\n        'canvas',\n        'figure',\n        'hgroup',\n        'output',\n        'video',\n        'p'\n      ],\n      repFunc = function (wholeMatch, match, left, right) {\n        var txt = wholeMatch;\n        // check if this html element is marked as markdown\n        // if so, it's contents should be parsed as markdown\n        if (left.search(/\\bmarkdown\\b/) !== -1) {\n          txt = left + globals.converter.makeHtml(match) + right;\n        }\n        return '\\n\\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n      };\n\n  if (options.backslashEscapesHTMLTags) {\n    // encode backslash escaped HTML tags\n    text = text.replace(/\\\\<(\\/?[^>]+?)>/g, function (wm, inside) {\n      return '&lt;' + inside + '&gt;';\n    });\n  }\n\n  // hash HTML Blocks\n  for (var i = 0; i < blockTags.length; ++i) {\n\n    var opTagPos,\n        rgx1     = new RegExp('^ {0,3}(<' + blockTags[i] + '\\\\b[^>]*>)', 'im'),\n        patLeft  = '<' + blockTags[i] + '\\\\b[^>]*>',\n        patRight = '</' + blockTags[i] + '>';\n    // 1. Look for the first position of the first opening HTML tag in the text\n    while ((opTagPos = showdown.helper.regexIndexOf(text, rgx1)) !== -1) {\n\n      // if the HTML tag is \\ escaped, we need to escape it and break\n\n\n      //2. Split the text in that position\n      var subTexts = showdown.helper.splitAtIndex(text, opTagPos),\n          //3. Match recursively\n          newSubText1 = showdown.helper.replaceRecursiveRegExp(subTexts[1], repFunc, patLeft, patRight, 'im');\n\n      // prevent an infinite loop\n      if (newSubText1 === subTexts[1]) {\n        break;\n      }\n      text = subTexts[0].concat(newSubText1);\n    }\n  }\n  // HR SPECIAL CASE\n  text = text.replace(/(\\n {0,3}(<(hr)\\b([^<>])*?\\/?>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  // Special case for standalone HTML comments\n  text = showdown.helper.replaceRecursiveRegExp(text, function (txt) {\n    return '\\n\\n¨K' + (globals.gHtmlBlocks.push(txt) - 1) + 'K\\n\\n';\n  }, '^ {0,3}<!--', '-->', 'gm');\n\n  // PHP and ASP-style processor instructions (<?...?> and <%...%>)\n  text = text.replace(/(?:\\n\\n)( {0,3}(?:<([?%])[^\\r]*?\\2>)[ \\t]*(?=\\n{2,}))/g,\n    showdown.subParser('hashElement')(text, options, globals));\n\n  text = globals.converter._dispatch('hashHTMLBlocks.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash span elements that should not be parsed as markdown\n */\nshowdown.subParser('hashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashHTMLSpans.before', text, options, globals);\n\n  function hashHTMLSpan (html) {\n    return '¨C' + (globals.gHtmlSpans.push(html) - 1) + 'C';\n  }\n\n  // Hash Self Closing tags\n  text = text.replace(/<[^>]+?\\/>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags without properties\n  text = text.replace(/<([^>]+?)>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash tags with properties\n  text = text.replace(/<([^>]+?)\\s[^>]+?>[\\s\\S]*?<\\/\\1>/g, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  // Hash self closing tags without />\n  text = text.replace(/<[^>]+?>/gi, function (wm) {\n    return hashHTMLSpan(wm);\n  });\n\n  /*showdown.helper.matchRecursiveRegExp(text, '<code\\\\b[^>]*>', '</code>', 'gi');*/\n\n  text = globals.converter._dispatch('hashHTMLSpans.after', text, options, globals);\n  return text;\n});\n\n/**\n * Unhash HTML spans\n */\nshowdown.subParser('unhashHTMLSpans', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unhashHTMLSpans.before', text, options, globals);\n\n  for (var i = 0; i < globals.gHtmlSpans.length; ++i) {\n    var repText = globals.gHtmlSpans[i],\n        // limiter to prevent infinite loop (assume 10 as limit for recurse)\n        limit = 0;\n\n    while (/¨C(\\d+)C/.test(repText)) {\n      var num = RegExp.$1;\n      repText = repText.replace('¨C' + num + 'C', globals.gHtmlSpans[num]);\n      if (limit === 10) {\n        console.error('maximum nesting of 10 spans reached!!!');\n        break;\n      }\n      ++limit;\n    }\n    text = text.replace('¨C' + i + 'C', repText);\n  }\n\n  text = globals.converter._dispatch('unhashHTMLSpans.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Hash and escape <pre><code> elements that should not be parsed as markdown\n */\nshowdown.subParser('hashPreCodeTags', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('hashPreCodeTags.before', text, options, globals);\n\n  var repFunc = function (wholeMatch, match, left, right) {\n    // encode html entities\n    var codeblock = left + showdown.subParser('encodeCode')(match, options, globals) + right;\n    return '\\n\\n¨G' + (globals.ghCodeBlocks.push({text: wholeMatch, codeblock: codeblock}) - 1) + 'G\\n\\n';\n  };\n\n  // Hash <pre><code>\n  text = showdown.helper.replaceRecursiveRegExp(text, repFunc, '^ {0,3}<pre\\\\b[^>]*>\\\\s*<code\\\\b[^>]*>', '^ {0,3}</code>\\\\s*</pre>', 'gim');\n\n  text = globals.converter._dispatch('hashPreCodeTags.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('headers', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('headers.before', text, options, globals);\n\n  var headerLevelStart = (isNaN(parseInt(options.headerLevelStart))) ? 1 : parseInt(options.headerLevelStart),\n\n      // Set text-style headers:\n      //\tHeader 1\n      //\t========\n      //\n      //\tHeader 2\n      //\t--------\n      //\n      setextRegexH1 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n={2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n=+[ \\t]*\\n+/gm,\n      setextRegexH2 = (options.smoothLivePreview) ? /^(.+)[ \\t]*\\n-{2,}[ \\t]*\\n+/gm : /^(.+)[ \\t]*\\n-+[ \\t]*\\n+/gm;\n\n  text = text.replace(setextRegexH1, function (wholeMatch, m1) {\n\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  text = text.replace(setextRegexH2, function (matchFound, m1) {\n    var spanGamut = showdown.subParser('spanGamut')(m1, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m1) + '\"',\n        hLevel = headerLevelStart + 1,\n        hashBlock = '<h' + hLevel + hID + '>' + spanGamut + '</h' + hLevel + '>';\n    return showdown.subParser('hashBlock')(hashBlock, options, globals);\n  });\n\n  // atx-style headers:\n  //  # Header 1\n  //  ## Header 2\n  //  ## Header 2 with closing hashes ##\n  //  ...\n  //  ###### Header 6\n  //\n  var atxStyle = (options.requireSpaceBeforeHeadingText) ? /^(#{1,6})[ \\t]+(.+?)[ \\t]*#*\\n+/gm : /^(#{1,6})[ \\t]*(.+?)[ \\t]*#*\\n+/gm;\n\n  text = text.replace(atxStyle, function (wholeMatch, m1, m2) {\n    var hText = m2;\n    if (options.customizedHeaderId) {\n      hText = m2.replace(/\\s?\\{([^{]+?)}\\s*$/, '');\n    }\n\n    var span = showdown.subParser('spanGamut')(hText, options, globals),\n        hID = (options.noHeaderId) ? '' : ' id=\"' + headerId(m2) + '\"',\n        hLevel = headerLevelStart - 1 + m1.length,\n        header = '<h' + hLevel + hID + '>' + span + '</h' + hLevel + '>';\n\n    return showdown.subParser('hashBlock')(header, options, globals);\n  });\n\n  function headerId (m) {\n    var title,\n        prefix;\n\n    // It is separate from other options to allow combining prefix and customized\n    if (options.customizedHeaderId) {\n      var match = m.match(/\\{([^{]+?)}\\s*$/);\n      if (match && match[1]) {\n        m = match[1];\n      }\n    }\n\n    title = m;\n\n    // Prefix id to prevent causing inadvertent pre-existing style matches.\n    if (showdown.helper.isString(options.prefixHeaderId)) {\n      prefix = options.prefixHeaderId;\n    } else if (options.prefixHeaderId === true) {\n      prefix = 'section-';\n    } else {\n      prefix = '';\n    }\n\n    if (!options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (options.ghCompatibleHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&, ¨ and $)\n        .replace(/&amp;/g, '')\n        .replace(/¨T/g, '')\n        .replace(/¨D/g, '')\n        // replace rest of the chars (&~$ are repeated as they might have been escaped)\n        // borrowed from github's redcarpet (some they should produce similar results)\n        .replace(/[&+$,\\/:;=?@\"#{}|^¨~\\[\\]`\\\\*)(%.!'<>]/g, '')\n        .toLowerCase();\n    } else if (options.rawHeaderId) {\n      title = title\n        .replace(/ /g, '-')\n        // replace previously escaped chars (&, ¨ and $)\n        .replace(/&amp;/g, '&')\n        .replace(/¨T/g, '¨')\n        .replace(/¨D/g, '$')\n        // replace \" and '\n        .replace(/[\"']/g, '-')\n        .toLowerCase();\n    } else {\n      title = title\n        .replace(/[^\\w]/g, '')\n        .toLowerCase();\n    }\n\n    if (options.rawPrefixHeaderId) {\n      title = prefix + title;\n    }\n\n    if (globals.hashLinkCounts[title]) {\n      title = title + '-' + (globals.hashLinkCounts[title]++);\n    } else {\n      globals.hashLinkCounts[title] = 1;\n    }\n    return title;\n  }\n\n  text = globals.converter._dispatch('headers.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Turn Markdown link shortcuts into XHTML <a> tags.\n */\nshowdown.subParser('horizontalRule', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('horizontalRule.before', text, options, globals);\n\n  var key = showdown.subParser('hashBlock')('<hr />', options, globals);\n  text = text.replace(/^ {0,2}( ?-){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?\\*){3,}[ \\t]*$/gm, key);\n  text = text.replace(/^ {0,2}( ?_){3,}[ \\t]*$/gm, key);\n\n  text = globals.converter._dispatch('horizontalRule.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Turn Markdown image shortcuts into <img> tags.\n */\nshowdown.subParser('images', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('images.before', text, options, globals);\n\n  var inlineRegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?([\\S]+?(?:\\([\\S]*?\\)[\\S]*?)?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      crazyRegExp       = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<([^>]*)>(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:(?:([\"'])([^\"]*?)\\6))?[ \\t]?\\)/g,\n      base64RegExp      = /!\\[([^\\]]*?)][ \\t]*()\\([ \\t]?<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*(?:([\"'])([^\"]*?)\\6)?[ \\t]?\\)/g,\n      referenceRegExp   = /!\\[([^\\]]*?)] ?(?:\\n *)?\\[([\\s\\S]*?)]()()()()()/g,\n      refShortcutRegExp = /!\\[([^\\[\\]]+)]()()()()()/g;\n\n  function writeImageTagBase64 (wholeMatch, altText, linkId, url, width, height, m5, title) {\n    url = url.replace(/\\s/g, '');\n    return writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title);\n  }\n\n  function writeImageTag (wholeMatch, altText, linkId, url, width, height, m5, title) {\n\n    var gUrls   = globals.gUrls,\n        gTitles = globals.gTitles,\n        gDims   = globals.gDimensions;\n\n    linkId = linkId.toLowerCase();\n\n    if (!title) {\n      title = '';\n    }\n    // Special case for explicit empty url\n    if (wholeMatch.search(/\\(<?\\s*>? ?(['\"].*['\"])?\\)$/m) > -1) {\n      url = '';\n\n    } else if (url === '' || url === null) {\n      if (linkId === '' || linkId === null) {\n        // lower-case and turn embedded newlines into spaces\n        linkId = altText.toLowerCase().replace(/ ?\\n/g, ' ');\n      }\n      url = '#' + linkId;\n\n      if (!showdown.helper.isUndefined(gUrls[linkId])) {\n        url = gUrls[linkId];\n        if (!showdown.helper.isUndefined(gTitles[linkId])) {\n          title = gTitles[linkId];\n        }\n        if (!showdown.helper.isUndefined(gDims[linkId])) {\n          width = gDims[linkId].width;\n          height = gDims[linkId].height;\n        }\n      } else {\n        return wholeMatch;\n      }\n    }\n\n    altText = altText\n      .replace(/\"/g, '&quot;')\n    //altText = showdown.helper.escapeCharacters(altText, '*_', false);\n      .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    //url = showdown.helper.escapeCharacters(url, '*_', false);\n    url = url.replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n    var result = '<img src=\"' + url + '\" alt=\"' + altText + '\"';\n\n    if (title && showdown.helper.isString(title)) {\n      title = title\n        .replace(/\"/g, '&quot;')\n      //title = showdown.helper.escapeCharacters(title, '*_', false);\n        .replace(showdown.helper.regexes.asteriskDashAndColon, showdown.helper.escapeCharactersCallback);\n      result += ' title=\"' + title + '\"';\n    }\n\n    if (width && height) {\n      width  = (width === '*') ? 'auto' : width;\n      height = (height === '*') ? 'auto' : height;\n\n      result += ' width=\"' + width + '\"';\n      result += ' height=\"' + height + '\"';\n    }\n\n    result += ' />';\n\n    return result;\n  }\n\n  // First, handle reference-style labeled images: ![alt text][id]\n  text = text.replace(referenceRegExp, writeImageTag);\n\n  // Next, handle inline images:  ![alt text](url =<width>x<height> \"optional title\")\n\n  // base64 encoded images\n  text = text.replace(base64RegExp, writeImageTagBase64);\n\n  // cases with crazy urls like ./image/cat1).png\n  text = text.replace(crazyRegExp, writeImageTag);\n\n  // normal cases\n  text = text.replace(inlineRegExp, writeImageTag);\n\n  // handle reference-style shortcuts: ![img text]\n  text = text.replace(refShortcutRegExp, writeImageTag);\n\n  text = globals.converter._dispatch('images.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('italicsAndBold', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('italicsAndBold.before', text, options, globals);\n\n  // it's faster to have 3 separate regexes for each case than have just one\n  // because of backtracing, in some cases, it could lead to an exponential effect\n  // called \"catastrophic backtrace\". Ominous!\n\n  function parseInside (txt, left, right) {\n    /*\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    */\n    return left + txt + right;\n  }\n\n  // Parse underscores\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return parseInside (txt, '<strong>', '</strong>');\n    });\n    text = text.replace(/\\b_(\\S[\\s\\S]*?)_\\b/g, function (wm, txt) {\n      return parseInside (txt, '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/_([^\\s_][\\s\\S]*?)_/g, function (wm, m) {\n      // !/^_[^_]/.test(m) - test if it doesn't start with __ (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n  // Now parse asterisks\n  if (options.literalMidWordAsterisks) {\n    text = text.replace(/([^*]|^)\\B\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong><em>', '</em></strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*\\*(\\S[\\s\\S]*?)\\*\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<strong>', '</strong>');\n    });\n    text = text.replace(/([^*]|^)\\B\\*(\\S[\\s\\S]*?)\\*\\B(?!\\*)/g, function (wm, lead, txt) {\n      return parseInside (txt, lead + '<em>', '</em>');\n    });\n  } else {\n    text = text.replace(/\\*\\*\\*(\\S[\\s\\S]*?)\\*\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong><em>', '</em></strong>') : wm;\n    });\n    text = text.replace(/\\*\\*(\\S[\\s\\S]*?)\\*\\*/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? parseInside (m, '<strong>', '</strong>') : wm;\n    });\n    text = text.replace(/\\*([^\\s*][\\s\\S]*?)\\*/g, function (wm, m) {\n      // !/^\\*[^*]/.test(m) - test if it doesn't start with ** (since it seems redundant, we removed it)\n      return (/\\S$/.test(m)) ? parseInside (m, '<em>', '</em>') : wm;\n    });\n  }\n\n\n  text = globals.converter._dispatch('italicsAndBold.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Form HTML ordered (numbered) and unordered (bulleted) lists.\n */\nshowdown.subParser('lists', function (text, options, globals) {\n  'use strict';\n\n  /**\n   * Process the contents of a single ordered or unordered list, splitting it\n   * into individual list items.\n   * @param {string} listStr\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function processListItems (listStr, trimTrailing) {\n    // The $g_list_level global keeps track of when we're inside a list.\n    // Each time we enter a list, we increment it; when we leave a list,\n    // we decrement. If it's zero, we're not in a list anymore.\n    //\n    // We do this because when we're not inside a list, we want to treat\n    // something like this:\n    //\n    //    I recommend upgrading to version\n    //    8. Oops, now this line is treated\n    //    as a sub-list.\n    //\n    // As a single paragraph, despite the fact that the second line starts\n    // with a digit-period-space sequence.\n    //\n    // Whereas when we're inside a list (or sub-list), that line will be\n    // treated as the start of a sub-list. What a kludge, huh? This is\n    // an aspect of Markdown's syntax that's hard to parse perfectly\n    // without resorting to mind-reading. Perhaps the solution is to\n    // change the syntax rules such that sub-lists must start with a\n    // starting cardinal number; e.g. \"1.\" or \"a.\".\n    globals.gListLevel++;\n\n    // trim trailing blank lines:\n    listStr = listStr.replace(/\\n{2,}$/, '\\n');\n\n    // attacklab: add sentinel to emulate \\z\n    listStr += '¨0';\n\n    var rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(¨0| {0,3}([*+-]|\\d+[.])[ \\t]+))/gm,\n        isParagraphed = (/\\n[ \\t]*\\n(?!¨0)/.test(listStr));\n\n    // Since version 1.5, nesting sublists requires 4 spaces (or 1 tab) indentation,\n    // which is a syntax breaking change\n    // activating this option reverts to old behavior\n    if (options.disableForced4SpacesIndentedSublists) {\n      rgx = /(\\n)?(^ {0,3})([*+-]|\\d+[.])[ \\t]+((\\[(x|X| )?])?[ \\t]*[^\\r]+?(\\n{1,2}))(?=\\n*(¨0|\\2([*+-]|\\d+[.])[ \\t]+))/gm;\n    }\n\n    listStr = listStr.replace(rgx, function (wholeMatch, m1, m2, m3, m4, taskbtn, checked) {\n      checked = (checked && checked.trim() !== '');\n\n      var item = showdown.subParser('outdent')(m4, options, globals),\n          bulletStyle = '';\n\n      // Support for github tasklists\n      if (taskbtn && options.tasklists) {\n        bulletStyle = ' class=\"task-list-item\" style=\"list-style-type: none;\"';\n        item = item.replace(/^[ \\t]*\\[(x|X| )?]/m, function () {\n          var otp = '<input type=\"checkbox\" disabled style=\"margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;\"';\n          if (checked) {\n            otp += ' checked';\n          }\n          otp += '>';\n          return otp;\n        });\n      }\n\n      // ISSUE #312\n      // This input: - - - a\n      // causes trouble to the parser, since it interprets it as:\n      // <ul><li><li><li>a</li></li></li></ul>\n      // instead of:\n      // <ul><li>- - a</li></ul>\n      // So, to prevent it, we will put a marker (¨A)in the beginning of the line\n      // Kind of hackish/monkey patching, but seems more effective than overcomplicating the list parser\n      item = item.replace(/^([-*+]|\\d\\.)[ \\t]+[\\S\\n ]*/g, function (wm2) {\n        return '¨A' + wm2;\n      });\n\n      // m1 - Leading line or\n      // Has a double return (multi paragraph) or\n      // Has sublist\n      if (m1 || (item.search(/\\n{2,}/) > -1)) {\n        item = showdown.subParser('githubCodeBlocks')(item, options, globals);\n        item = showdown.subParser('blockGamut')(item, options, globals);\n      } else {\n        // Recursion for sub-lists:\n        item = showdown.subParser('lists')(item, options, globals);\n        item = item.replace(/\\n$/, ''); // chomp(item)\n        item = showdown.subParser('hashHTMLBlocks')(item, options, globals);\n\n        // Colapse double linebreaks\n        item = item.replace(/\\n\\n+/g, '\\n\\n');\n        if (isParagraphed) {\n          item = showdown.subParser('paragraphs')(item, options, globals);\n        } else {\n          item = showdown.subParser('spanGamut')(item, options, globals);\n        }\n      }\n\n      // now we need to remove the marker (¨A)\n      item = item.replace('¨A', '');\n      // we can finally wrap the line in list item tags\n      item =  '<li' + bulletStyle + '>' + item + '</li>\\n';\n\n      return item;\n    });\n\n    // attacklab: strip sentinel\n    listStr = listStr.replace(/¨0/g, '');\n\n    globals.gListLevel--;\n\n    if (trimTrailing) {\n      listStr = listStr.replace(/\\s+$/, '');\n    }\n\n    return listStr;\n  }\n\n  function styleStartNumber (list, listType) {\n    // check if ol and starts by a number different than 1\n    if (listType === 'ol') {\n      var res = list.match(/^ *(\\d+)\\./);\n      if (res && res[1] !== '1') {\n        return ' start=\"' + res[1] + '\"';\n      }\n    }\n    return '';\n  }\n\n  /**\n   * Check and parse consecutive lists (better fix for issue #142)\n   * @param {string} list\n   * @param {string} listType\n   * @param {boolean} trimTrailing\n   * @returns {string}\n   */\n  function parseConsecutiveLists (list, listType, trimTrailing) {\n    // check if we caught 2 or more consecutive lists by mistake\n    // we use the counterRgx, meaning if listType is UL we look for OL and vice versa\n    var olRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?\\d+\\.[ \\t]/gm : /^ {0,3}\\d+\\.[ \\t]/gm,\n        ulRgx = (options.disableForced4SpacesIndentedSublists) ? /^ ?[*+-][ \\t]/gm : /^ {0,3}[*+-][ \\t]/gm,\n        counterRxg = (listType === 'ul') ? olRgx : ulRgx,\n        result = '';\n\n    if (list.search(counterRxg) !== -1) {\n      (function parseCL (txt) {\n        var pos = txt.search(counterRxg),\n            style = styleStartNumber(list, listType);\n        if (pos !== -1) {\n          // slice\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt.slice(0, pos), !!trimTrailing) + '</' + listType + '>\\n';\n\n          // invert counterType and listType\n          listType = (listType === 'ul') ? 'ol' : 'ul';\n          counterRxg = (listType === 'ul') ? olRgx : ulRgx;\n\n          //recurse\n          parseCL(txt.slice(pos));\n        } else {\n          result += '\\n\\n<' + listType + style + '>\\n' + processListItems(txt, !!trimTrailing) + '</' + listType + '>\\n';\n        }\n      })(list);\n    } else {\n      var style = styleStartNumber(list, listType);\n      result = '\\n\\n<' + listType + style + '>\\n' + processListItems(list, !!trimTrailing) + '</' + listType + '>\\n';\n    }\n\n    return result;\n  }\n\n  /** Start of list parsing **/\n  text = globals.converter._dispatch('lists.before', text, options, globals);\n  // add sentinel to hack around khtml/safari bug:\n  // http://bugs.webkit.org/show_bug.cgi?id=11231\n  text += '¨0';\n\n  if (globals.gListLevel) {\n    text = text.replace(/^(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(¨0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, list, m2) {\n        var listType = (m2.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, true);\n      }\n    );\n  } else {\n    text = text.replace(/(\\n\\n|^\\n?)(( {0,3}([*+-]|\\d+[.])[ \\t]+)[^\\r]+?(¨0|\\n{2,}(?=\\S)(?![ \\t]*(?:[*+-]|\\d+[.])[ \\t]+)))/gm,\n      function (wholeMatch, m1, list, m3) {\n        var listType = (m3.search(/[*+-]/g) > -1) ? 'ul' : 'ol';\n        return parseConsecutiveLists(list, listType, false);\n      }\n    );\n  }\n\n  // strip sentinel\n  text = text.replace(/¨0/, '');\n  text = globals.converter._dispatch('lists.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Parse metadata at the top of the document\n */\nshowdown.subParser('metadata', function (text, options, globals) {\n  'use strict';\n\n  if (!options.metadata) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('metadata.before', text, options, globals);\n\n  function parseMetadataContents (content) {\n    // raw is raw so it's not changed in any way\n    globals.metadata.raw = content;\n\n    // escape chars forbidden in html attributes\n    // double quotes\n    content = content\n      // ampersand first\n      .replace(/&/g, '&amp;')\n      // double quotes\n      .replace(/\"/g, '&quot;');\n\n    content = content.replace(/\\n {4}/g, ' ');\n    content.replace(/^([\\S ]+): +([\\s\\S]+?)$/gm, function (wm, key, value) {\n      globals.metadata.parsed[key] = value;\n      return '';\n    });\n  }\n\n  text = text.replace(/^\\s*«««+(\\S*?)\\n([\\s\\S]+?)\\n»»»+\\n/, function (wholematch, format, content) {\n    parseMetadataContents(content);\n    return '¨M';\n  });\n\n  text = text.replace(/^\\s*---+(\\S*?)\\n([\\s\\S]+?)\\n---+\\n/, function (wholematch, format, content) {\n    if (format) {\n      globals.metadata.format = format;\n    }\n    parseMetadataContents(content);\n    return '¨M';\n  });\n\n  text = text.replace(/¨M/g, '');\n\n  text = globals.converter._dispatch('metadata.after', text, options, globals);\n  return text;\n});\n\r\n/**\n * Remove one level of line-leading tabs or spaces\n */\nshowdown.subParser('outdent', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('outdent.before', text, options, globals);\n\n  // attacklab: hack around Konqueror 3.5.4 bug:\n  // \"----------bug\".replace(/^-/g,\"\") == \"bug\"\n  text = text.replace(/^(\\t|[ ]{1,4})/gm, '¨0'); // attacklab: g_tab_width\n\n  // attacklab: clean up hack\n  text = text.replace(/¨0/g, '');\n\n  text = globals.converter._dispatch('outdent.after', text, options, globals);\n  return text;\n});\n\r\n/**\n *\n */\nshowdown.subParser('paragraphs', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('paragraphs.before', text, options, globals);\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n\n  var grafs = text.split(/\\n{2,}/g),\n      grafsOut = [],\n      end = grafs.length; // Wrap <p> tags\n\n  for (var i = 0; i < end; i++) {\n    var str = grafs[i];\n    // if this is an HTML marker, copy it\n    if (str.search(/¨(K|G)(\\d+)\\1/g) >= 0) {\n      grafsOut.push(str);\n\n    // test for presence of characters to prevent empty lines being parsed\n    // as paragraphs (resulting in undesired extra empty paragraphs)\n    } else if (str.search(/\\S/) >= 0) {\n      str = showdown.subParser('spanGamut')(str, options, globals);\n      str = str.replace(/^([ \\t]*)/g, '<p>');\n      str += '</p>';\n      grafsOut.push(str);\n    }\n  }\n\n  /** Unhashify HTML blocks */\n  end = grafsOut.length;\n  for (i = 0; i < end; i++) {\n    var blockText = '',\n        grafsOutIt = grafsOut[i],\n        codeFlag = false;\n    // if this is a marker for an html block...\n    // use RegExp.test instead of string.search because of QML bug\n    while (/¨(K|G)(\\d+)\\1/.test(grafsOutIt)) {\n      var delim = RegExp.$1,\n          num   = RegExp.$2;\n\n      if (delim === 'K') {\n        blockText = globals.gHtmlBlocks[num];\n      } else {\n        // we need to check if ghBlock is a false positive\n        if (codeFlag) {\n          // use encoded version of all text\n          blockText = showdown.subParser('encodeCode')(globals.ghCodeBlocks[num].text, options, globals);\n        } else {\n          blockText = globals.ghCodeBlocks[num].codeblock;\n        }\n      }\n      blockText = blockText.replace(/\\$/g, '$$$$'); // Escape any dollar signs\n\n      grafsOutIt = grafsOutIt.replace(/(\\n\\n)?¨(K|G)\\d+\\2(\\n\\n)?/, blockText);\n      // Check if grafsOutIt is a pre->code\n      if (/^<pre\\b[^>]*>\\s*<code\\b[^>]*>/.test(grafsOutIt)) {\n        codeFlag = true;\n      }\n    }\n    grafsOut[i] = grafsOutIt;\n  }\n  text = grafsOut.join('\\n');\n  // Strip leading and trailing lines:\n  text = text.replace(/^\\n+/g, '');\n  text = text.replace(/\\n+$/g, '');\n  return globals.converter._dispatch('paragraphs.after', text, options, globals);\n});\n\r\n/**\n * Run extension\n */\nshowdown.subParser('runExtension', function (ext, text, options, globals) {\n  'use strict';\n\n  if (ext.filter) {\n    text = ext.filter(text, globals.converter, options);\n\n  } else if (ext.regex) {\n    // TODO remove this when old extension loading mechanism is deprecated\n    var re = ext.regex;\n    if (!(re instanceof RegExp)) {\n      re = new RegExp(re, 'g');\n    }\n    text = text.replace(re, ext.replace);\n  }\n\n  return text;\n});\n\r\n/**\n * These are all the transformations that occur *within* block-level\n * tags like paragraphs, headers, and list items.\n */\nshowdown.subParser('spanGamut', function (text, options, globals) {\n  'use strict';\n\n  text = globals.converter._dispatch('spanGamut.before', text, options, globals);\n  text = showdown.subParser('codeSpans')(text, options, globals);\n  text = showdown.subParser('escapeSpecialCharsWithinTagAttributes')(text, options, globals);\n  text = showdown.subParser('encodeBackslashEscapes')(text, options, globals);\n\n  // Process anchor and image tags. Images must come first,\n  // because ![foo][f] looks like an anchor.\n  text = showdown.subParser('images')(text, options, globals);\n  text = showdown.subParser('anchors')(text, options, globals);\n\n  // Make links out of things like `<http://example.com/>`\n  // Must come after anchors, because you can use < and >\n  // delimiters in inline links like [this](<url>).\n  text = showdown.subParser('autoLinks')(text, options, globals);\n  text = showdown.subParser('simplifiedAutoLinks')(text, options, globals);\n  text = showdown.subParser('emoji')(text, options, globals);\n  text = showdown.subParser('underline')(text, options, globals);\n  text = showdown.subParser('italicsAndBold')(text, options, globals);\n  text = showdown.subParser('strikethrough')(text, options, globals);\n  text = showdown.subParser('ellipsis')(text, options, globals);\n\n  // we need to hash HTML tags inside spans\n  text = showdown.subParser('hashHTMLSpans')(text, options, globals);\n\n  // now we encode amps and angles\n  text = showdown.subParser('encodeAmpsAndAngles')(text, options, globals);\n\n  // Do hard breaks\n  if (options.simpleLineBreaks) {\n    // GFM style hard breaks\n    // only add line breaks if the text does not contain a block (special case for lists)\n    if (!/\\n\\n¨K/.test(text)) {\n      text = text.replace(/\\n+/g, '<br />\\n');\n    }\n  } else {\n    // Vanilla hard breaks\n    text = text.replace(/  +\\n/g, '<br />\\n');\n  }\n\n  text = globals.converter._dispatch('spanGamut.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('strikethrough', function (text, options, globals) {\n  'use strict';\n\n  function parseInside (txt) {\n    if (options.simplifiedAutoLink) {\n      txt = showdown.subParser('simplifiedAutoLinks')(txt, options, globals);\n    }\n    return '<del>' + txt + '</del>';\n  }\n\n  if (options.strikethrough) {\n    text = globals.converter._dispatch('strikethrough.before', text, options, globals);\n    text = text.replace(/(?:~){2}([\\s\\S]+?)(?:~){2}/g, function (wm, txt) { return parseInside(txt); });\n    text = globals.converter._dispatch('strikethrough.after', text, options, globals);\n  }\n\n  return text;\n});\n\r\n/**\n * Strips link definitions from text, stores the URLs and titles in\n * hash references.\n * Link defs are in the form: ^[id]: url \"optional title\"\n */\nshowdown.subParser('stripLinkDefinitions', function (text, options, globals) {\n  'use strict';\n\n  var regex       = /^ {0,3}\\[([^\\]]+)]:[ \\t]*\\n?[ \\t]*<?([^>\\s]+)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n+|(?=¨0))/gm,\n      base64Regex = /^ {0,3}\\[([^\\]]+)]:[ \\t]*\\n?[ \\t]*<?(data:.+?\\/.+?;base64,[A-Za-z0-9+/=\\n]+?)>?(?: =([*\\d]+[A-Za-z%]{0,4})x([*\\d]+[A-Za-z%]{0,4}))?[ \\t]*\\n?[ \\t]*(?:(\\n*)[\"|'(](.+?)[\"|')][ \\t]*)?(?:\\n\\n|(?=¨0)|(?=\\n\\[))/gm;\n\n  // attacklab: sentinel workarounds for lack of \\A and \\Z, safari\\khtml bug\n  text += '¨0';\n\n  var replaceFunc = function (wholeMatch, linkId, url, width, height, blankLines, title) {\n\n    // if there aren't two instances of linkId it must not be a reference link so back out\n    linkId = linkId.toLowerCase();\n    if (text.toLowerCase().split(linkId).length - 1 < 2) {\n      return wholeMatch;\n    }\n    if (url.match(/^data:.+?\\/.+?;base64,/)) {\n      // remove newlines\n      globals.gUrls[linkId] = url.replace(/\\s/g, '');\n    } else {\n      globals.gUrls[linkId] = showdown.subParser('encodeAmpsAndAngles')(url, options, globals);  // Link IDs are case-insensitive\n    }\n\n    if (blankLines) {\n      // Oops, found blank lines, so it's not a title.\n      // Put back the parenthetical statement we stole.\n      return blankLines + title;\n\n    } else {\n      if (title) {\n        globals.gTitles[linkId] = title.replace(/\"|'/g, '&quot;');\n      }\n      if (options.parseImgDimensions && width && height) {\n        globals.gDimensions[linkId] = {\n          width:  width,\n          height: height\n        };\n      }\n    }\n    // Completely remove the definition from the text\n    return '';\n  };\n\n  // first we try to find base64 link references\n  text = text.replace(base64Regex, replaceFunc);\n\n  text = text.replace(regex, replaceFunc);\n\n  // attacklab: strip sentinel\n  text = text.replace(/¨0/, '');\n\n  return text;\n});\n\r\nshowdown.subParser('tables', function (text, options, globals) {\n  'use strict';\n\n  if (!options.tables) {\n    return text;\n  }\n\n  var tableRgx       = /^ {0,3}\\|?.+\\|.+\\n {0,3}\\|?[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[\\s\\S]+?(?:\\n\\n|¨0)/gm,\n      //singeColTblRgx = /^ {0,3}\\|.+\\|\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n(?: {0,3}\\|.+\\|\\n)+(?:\\n\\n|¨0)/gm;\n      singeColTblRgx = /^ {0,3}\\|.+\\|[ \\t]*\\n {0,3}\\|[ \\t]*:?[ \\t]*(?:[-=]){2,}[ \\t]*:?[ \\t]*\\|[ \\t]*\\n( {0,3}\\|.+\\|[ \\t]*\\n)*(?:\\n|¨0)/gm;\n\n  function parseStyles (sLine) {\n    if (/^:[ \\t]*--*$/.test(sLine)) {\n      return ' style=\"text-align:left;\"';\n    } else if (/^--*[ \\t]*:[ \\t]*$/.test(sLine)) {\n      return ' style=\"text-align:right;\"';\n    } else if (/^:[ \\t]*--*[ \\t]*:$/.test(sLine)) {\n      return ' style=\"text-align:center;\"';\n    } else {\n      return '';\n    }\n  }\n\n  function parseHeaders (header, style) {\n    var id = '';\n    header = header.trim();\n    // support both tablesHeaderId and tableHeaderId due to error in documentation so we don't break backwards compatibility\n    if (options.tablesHeaderId || options.tableHeaderId) {\n      id = ' id=\"' + header.replace(/ /g, '_').toLowerCase() + '\"';\n    }\n    header = showdown.subParser('spanGamut')(header, options, globals);\n\n    return '<th' + id + style + '>' + header + '</th>\\n';\n  }\n\n  function parseCells (cell, style) {\n    var subText = showdown.subParser('spanGamut')(cell, options, globals);\n    return '<td' + style + '>' + subText + '</td>\\n';\n  }\n\n  function buildTable (headers, cells) {\n    var tb = '<table>\\n<thead>\\n<tr>\\n',\n        tblLgn = headers.length;\n\n    for (var i = 0; i < tblLgn; ++i) {\n      tb += headers[i];\n    }\n    tb += '</tr>\\n</thead>\\n<tbody>\\n';\n\n    for (i = 0; i < cells.length; ++i) {\n      tb += '<tr>\\n';\n      for (var ii = 0; ii < tblLgn; ++ii) {\n        tb += cells[i][ii];\n      }\n      tb += '</tr>\\n';\n    }\n    tb += '</tbody>\\n</table>\\n';\n    return tb;\n  }\n\n  function parseTable (rawTable) {\n    var i, tableLines = rawTable.split('\\n');\n\n    for (i = 0; i < tableLines.length; ++i) {\n      // strip wrong first and last column if wrapped tables are used\n      if (/^ {0,3}\\|/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/^ {0,3}\\|/, '');\n      }\n      if (/\\|[ \\t]*$/.test(tableLines[i])) {\n        tableLines[i] = tableLines[i].replace(/\\|[ \\t]*$/, '');\n      }\n      // parse code spans first, but we only support one line code spans\n      tableLines[i] = showdown.subParser('codeSpans')(tableLines[i], options, globals);\n    }\n\n    var rawHeaders = tableLines[0].split('|').map(function (s) { return s.trim();}),\n        rawStyles = tableLines[1].split('|').map(function (s) { return s.trim();}),\n        rawCells = [],\n        headers = [],\n        styles = [],\n        cells = [];\n\n    tableLines.shift();\n    tableLines.shift();\n\n    for (i = 0; i < tableLines.length; ++i) {\n      if (tableLines[i].trim() === '') {\n        continue;\n      }\n      rawCells.push(\n        tableLines[i]\n          .split('|')\n          .map(function (s) {\n            return s.trim();\n          })\n      );\n    }\n\n    if (rawHeaders.length < rawStyles.length) {\n      return rawTable;\n    }\n\n    for (i = 0; i < rawStyles.length; ++i) {\n      styles.push(parseStyles(rawStyles[i]));\n    }\n\n    for (i = 0; i < rawHeaders.length; ++i) {\n      if (showdown.helper.isUndefined(styles[i])) {\n        styles[i] = '';\n      }\n      headers.push(parseHeaders(rawHeaders[i], styles[i]));\n    }\n\n    for (i = 0; i < rawCells.length; ++i) {\n      var row = [];\n      for (var ii = 0; ii < headers.length; ++ii) {\n        if (showdown.helper.isUndefined(rawCells[i][ii])) {\n\n        }\n        row.push(parseCells(rawCells[i][ii], styles[ii]));\n      }\n      cells.push(row);\n    }\n\n    return buildTable(headers, cells);\n  }\n\n  text = globals.converter._dispatch('tables.before', text, options, globals);\n\n  // find escaped pipe characters\n  text = text.replace(/\\\\(\\|)/g, showdown.helper.escapeCharactersCallback);\n\n  // parse multi column tables\n  text = text.replace(tableRgx, parseTable);\n\n  // parse one column tables\n  text = text.replace(singeColTblRgx, parseTable);\n\n  text = globals.converter._dispatch('tables.after', text, options, globals);\n\n  return text;\n});\n\r\nshowdown.subParser('underline', function (text, options, globals) {\n  'use strict';\n\n  if (!options.underline) {\n    return text;\n  }\n\n  text = globals.converter._dispatch('underline.before', text, options, globals);\n\n  if (options.literalMidWordUnderscores) {\n    text = text.replace(/\\b___(\\S[\\s\\S]*?)___\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n    text = text.replace(/\\b__(\\S[\\s\\S]*?)__\\b/g, function (wm, txt) {\n      return '<u>' + txt + '</u>';\n    });\n  } else {\n    text = text.replace(/___(\\S[\\s\\S]*?)___/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n    text = text.replace(/__(\\S[\\s\\S]*?)__/g, function (wm, m) {\n      return (/\\S$/.test(m)) ? '<u>' + m + '</u>' : wm;\n    });\n  }\n\n  // escape remaining underscores to prevent them being parsed by italic and bold\n  text = text.replace(/(_)/g, showdown.helper.escapeCharactersCallback);\n\n  text = globals.converter._dispatch('underline.after', text, options, globals);\n\n  return text;\n});\n\r\n/**\n * Swap back in all the special characters we've hidden.\n */\nshowdown.subParser('unescapeSpecialChars', function (text, options, globals) {\n  'use strict';\n  text = globals.converter._dispatch('unescapeSpecialChars.before', text, options, globals);\n\n  text = text.replace(/¨E(\\d+)E/g, function (wholeMatch, m1) {\n    var charCodeToReplace = parseInt(m1);\n    return String.fromCharCode(charCodeToReplace);\n  });\n\n  text = globals.converter._dispatch('unescapeSpecialChars.after', text, options, globals);\n  return text;\n});\n\r\nshowdown.subParser('makeMarkdown.blockquote', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      var innerTxt = showdown.subParser('makeMarkdown.node')(children[i], globals);\n\n      if (innerTxt === '') {\n        continue;\n      }\n      txt += innerTxt;\n    }\n  }\n  // cleanup\n  txt = txt.trim();\n  txt = '> ' + txt.split('\\n').join('\\n> ');\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.codeBlock', function (node, globals) {\n  'use strict';\n\n  var lang = node.getAttribute('language'),\n      num  = node.getAttribute('precodenum');\n  return '```' + lang + '\\n' + globals.preList[num] + '\\n```';\n});\n\r\nshowdown.subParser('makeMarkdown.codeSpan', function (node) {\n  'use strict';\n\n  return '`' + node.innerHTML + '`';\n});\n\r\nshowdown.subParser('makeMarkdown.emphasis', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '*';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '*';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.header', function (node, globals, headerLevel) {\n  'use strict';\n\n  var headerMark = new Array(headerLevel + 1).join('#'),\n      txt = '';\n\n  if (node.hasChildNodes()) {\n    txt = headerMark + ' ';\n    var children = node.childNodes,\n        childrenLength = children.length;\n\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.hr', function () {\n  'use strict';\n\n  return '---';\n});\n\r\nshowdown.subParser('makeMarkdown.image', function (node) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasAttribute('src')) {\n    txt += '![' + node.getAttribute('alt') + '](';\n    txt += '<' + node.getAttribute('src') + '>';\n    if (node.hasAttribute('width') && node.hasAttribute('height')) {\n      txt += ' =' + node.getAttribute('width') + 'x' + node.getAttribute('height');\n    }\n\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.links', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes() && node.hasAttribute('href')) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    txt = '[';\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '](';\n    txt += '<' + node.getAttribute('href') + '>';\n    if (node.hasAttribute('title')) {\n      txt += ' \"' + node.getAttribute('title') + '\"';\n    }\n    txt += ')';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.list', function (node, globals, type) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var listItems       = node.childNodes,\n      listItemsLenght = listItems.length,\n      listNum = node.getAttribute('start') || 1;\n\n  for (var i = 0; i < listItemsLenght; ++i) {\n    if (typeof listItems[i].tagName === 'undefined' || listItems[i].tagName.toLowerCase() !== 'li') {\n      continue;\n    }\n\n    // define the bullet to use in list\n    var bullet = '';\n    if (type === 'ol') {\n      bullet = listNum.toString() + '. ';\n    } else {\n      bullet = '- ';\n    }\n\n    // parse list item\n    txt += bullet + showdown.subParser('makeMarkdown.listItem')(listItems[i], globals);\n    ++listNum;\n  }\n\n  // add comment at the end to prevent consecutive lists to be parsed as one\n  txt += '\\n<!-- -->\\n';\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.listItem', function (node, globals) {\n  'use strict';\n\n  var listItemTxt = '';\n\n  var children = node.childNodes,\n      childrenLenght = children.length;\n\n  for (var i = 0; i < childrenLenght; ++i) {\n    listItemTxt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n  }\n  // if it's only one liner, we need to add a newline at the end\n  if (!/\\n$/.test(listItemTxt)) {\n    listItemTxt += '\\n';\n  } else {\n    // it's multiparagraph, so we need to indent\n    listItemTxt = listItemTxt\n      .split('\\n')\n      .join('\\n    ')\n      .replace(/^ {4}$/gm, '')\n      .replace(/\\n\\n+/g, '\\n\\n');\n  }\n\n  return listItemTxt;\n});\n\r\n\n\nshowdown.subParser('makeMarkdown.node', function (node, globals, spansOnly) {\n  'use strict';\n\n  spansOnly = spansOnly || false;\n\n  var txt = '';\n\n  // edge case of text without wrapper paragraph\n  if (node.nodeType === 3) {\n    return showdown.subParser('makeMarkdown.txt')(node, globals);\n  }\n\n  // HTML comment\n  if (node.nodeType === 8) {\n    return '<!--' + node.data + '-->\\n\\n';\n  }\n\n  // process only node elements\n  if (node.nodeType !== 1) {\n    return '';\n  }\n\n  var tagName = node.tagName.toLowerCase();\n\n  switch (tagName) {\n\n    //\n    // BLOCKS\n    //\n    case 'h1':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 1) + '\\n\\n'; }\n      break;\n    case 'h2':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 2) + '\\n\\n'; }\n      break;\n    case 'h3':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 3) + '\\n\\n'; }\n      break;\n    case 'h4':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 4) + '\\n\\n'; }\n      break;\n    case 'h5':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 5) + '\\n\\n'; }\n      break;\n    case 'h6':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.header')(node, globals, 6) + '\\n\\n'; }\n      break;\n\n    case 'p':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.paragraph')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'blockquote':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.blockquote')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'hr':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.hr')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'ol':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ol') + '\\n\\n'; }\n      break;\n\n    case 'ul':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.list')(node, globals, 'ul') + '\\n\\n'; }\n      break;\n\n    case 'precode':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.codeBlock')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'pre':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.pre')(node, globals) + '\\n\\n'; }\n      break;\n\n    case 'table':\n      if (!spansOnly) { txt = showdown.subParser('makeMarkdown.table')(node, globals) + '\\n\\n'; }\n      break;\n\n    //\n    // SPANS\n    //\n    case 'code':\n      txt = showdown.subParser('makeMarkdown.codeSpan')(node, globals);\n      break;\n\n    case 'em':\n    case 'i':\n      txt = showdown.subParser('makeMarkdown.emphasis')(node, globals);\n      break;\n\n    case 'strong':\n    case 'b':\n      txt = showdown.subParser('makeMarkdown.strong')(node, globals);\n      break;\n\n    case 'del':\n      txt = showdown.subParser('makeMarkdown.strikethrough')(node, globals);\n      break;\n\n    case 'a':\n      txt = showdown.subParser('makeMarkdown.links')(node, globals);\n      break;\n\n    case 'img':\n      txt = showdown.subParser('makeMarkdown.image')(node, globals);\n      break;\n\n    default:\n      txt = node.outerHTML + '\\n\\n';\n  }\n\n  // common normalization\n  // TODO eventually\n\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.paragraph', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n  }\n\n  // some text normalization\n  txt = txt.trim();\n\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.pre', function (node, globals) {\n  'use strict';\n\n  var num  = node.getAttribute('prenum');\n  return '<pre>' + globals.preList[num] + '</pre>';\n});\n\r\nshowdown.subParser('makeMarkdown.strikethrough', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '~~';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '~~';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.strong', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (node.hasChildNodes()) {\n    txt += '**';\n    var children = node.childNodes,\n        childrenLength = children.length;\n    for (var i = 0; i < childrenLength; ++i) {\n      txt += showdown.subParser('makeMarkdown.node')(children[i], globals);\n    }\n    txt += '**';\n  }\n  return txt;\n});\n\r\nshowdown.subParser('makeMarkdown.table', function (node, globals) {\n  'use strict';\n\n  var txt = '',\n      tableArray = [[], []],\n      headings   = node.querySelectorAll('thead>tr>th'),\n      rows       = node.querySelectorAll('tbody>tr'),\n      i, ii;\n  for (i = 0; i < headings.length; ++i) {\n    var headContent = showdown.subParser('makeMarkdown.tableCell')(headings[i], globals),\n        allign = '---';\n\n    if (headings[i].hasAttribute('style')) {\n      var style = headings[i].getAttribute('style').toLowerCase().replace(/\\s/g, '');\n      switch (style) {\n        case 'text-align:left;':\n          allign = ':---';\n          break;\n        case 'text-align:right;':\n          allign = '---:';\n          break;\n        case 'text-align:center;':\n          allign = ':---:';\n          break;\n      }\n    }\n    tableArray[0][i] = headContent.trim();\n    tableArray[1][i] = allign;\n  }\n\n  for (i = 0; i < rows.length; ++i) {\n    var r = tableArray.push([]) - 1,\n        cols = rows[i].getElementsByTagName('td');\n\n    for (ii = 0; ii < headings.length; ++ii) {\n      var cellContent = ' ';\n      if (typeof cols[ii] !== 'undefined') {\n        cellContent = showdown.subParser('makeMarkdown.tableCell')(cols[ii], globals);\n      }\n      tableArray[r].push(cellContent);\n    }\n  }\n\n  var cellSpacesCount = 3;\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      var strLen = tableArray[i][ii].length;\n      if (strLen > cellSpacesCount) {\n        cellSpacesCount = strLen;\n      }\n    }\n  }\n\n  for (i = 0; i < tableArray.length; ++i) {\n    for (ii = 0; ii < tableArray[i].length; ++ii) {\n      if (i === 1) {\n        if (tableArray[i][ii].slice(-1) === ':') {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii].slice(-1), cellSpacesCount - 1, '-') + ':';\n        } else {\n          tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount, '-');\n        }\n      } else {\n        tableArray[i][ii] = showdown.helper.padEnd(tableArray[i][ii], cellSpacesCount);\n      }\n    }\n    txt += '| ' + tableArray[i].join(' | ') + ' |\\n';\n  }\n\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.tableCell', function (node, globals) {\n  'use strict';\n\n  var txt = '';\n  if (!node.hasChildNodes()) {\n    return '';\n  }\n  var children = node.childNodes,\n      childrenLength = children.length;\n\n  for (var i = 0; i < childrenLength; ++i) {\n    txt += showdown.subParser('makeMarkdown.node')(children[i], globals, true);\n  }\n  return txt.trim();\n});\n\r\nshowdown.subParser('makeMarkdown.txt', function (node) {\n  'use strict';\n\n  var txt = node.nodeValue;\n\n  // multiple spaces are collapsed\n  txt = txt.replace(/ +/g, ' ');\n\n  // replace the custom ¨NBSP; with a space\n  txt = txt.replace(/¨NBSP;/g, ' ');\n\n  // \", <, > and & should replace escaped html entities\n  txt = showdown.helper.unescapeHTMLEntities(txt);\n\n  // escape markdown magic characters\n  // emphasis, strong and strikethrough - can appear everywhere\n  // we also escape pipe (|) because of tables\n  // and escape ` because of code blocks and spans\n  txt = txt.replace(/([*_~|`])/g, '\\\\$1');\n\n  // escape > because of blockquotes\n  txt = txt.replace(/^(\\s*)>/g, '\\\\$1>');\n\n  // hash character, only troublesome at the beginning of a line because of headers\n  txt = txt.replace(/^#/gm, '\\\\#');\n\n  // horizontal rules\n  txt = txt.replace(/^(\\s*)([-=]{3,})(\\s*)$/, '$1\\\\$2$3');\n\n  // dot, because of ordered lists, only troublesome at the beginning of a line when preceded by an integer\n  txt = txt.replace(/^( {0,3}\\d+)\\./gm, '$1\\\\.');\n\n  // +, * and -, at the beginning of a line becomes a list, so we need to escape them also (asterisk was already escaped)\n  txt = txt.replace(/^( {0,3})([+-])/gm, '$1\\\\$2');\n\n  // images and links, ] followed by ( is problematic, so we escape it\n  txt = txt.replace(/]([\\s]*)\\(/g, '\\\\]$1\\\\(');\n\n  // reference URIs must also be escaped\n  txt = txt.replace(/^ {0,3}\\[([\\S \\t]*?)]:/gm, '\\\\[$1]:');\n\n  return txt;\n});\n\r\nvar root = this;\n\n// AMD Loader\nif (typeof define === 'function' && define.amd) {\n  define(function () {\n    'use strict';\n    return showdown;\n  });\n\n// CommonJS/nodeJS Loader\n} else if (typeof module !== 'undefined' && module.exports) {\n  module.exports = showdown;\n\n// Regular Browser loader\n} else {\n  root.showdown = showdown;\n}\n}).call(this);\r\n\n//# sourceMappingURL=showdown.js.map\r\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!./linters.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!./linters.css\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","\"use strict\";\nimport {LanguageProvider} from \"../language-provider\";\nvar event = require(\"ace-code/src/lib/event\");\nvar {Tooltip} = require(\"ace-code/src/tooltip\");\n\nexport class DescriptionTooltip extends Tooltip {\n    private provider: LanguageProvider;\n\n    $timer: NodeJS.Timeout;\n    row?: number;\n    column?: number;\n\n    constructor(provider: LanguageProvider) {\n        super();\n        this.provider = provider;\n        Tooltip.call(this, provider.editor.container);\n\n        this.onMouseMove = this.onMouseMove.bind(this);\n        this.onMouseOut = this.onMouseOut.bind(this);\n        this.$hide = this.$hide.bind(this);\n        this.onTooltipMouseOut = this.onTooltipMouseOut.bind(this);\n\n        event.addListener(this.provider.editor.renderer.scroller, \"mousemove\", this.onMouseMove);\n        event.addListener(this.provider.editor.renderer.scroller, \"mouseout\", this.onMouseOut);\n        event.addListener(this.provider.editor.renderer.scroller, \"mousedown\", this.$hide);\n        event.addListener(this.getElement(), \"mouseout\", this.onTooltipMouseOut);\n        this.provider.editor.on(\"change\", this.$hide);\n        this.provider.editor.on(\"mousewheel\", this.$hide);\n\n        this.getElement().style.pointerEvents = \"auto\";\n        this.getElement().style.whiteSpace = \"pre-wrap\";\n    }\n\n    update () {\n        var renderer = this.provider.editor.renderer;\n        var screenPos = renderer.pixelToScreenCoordinates(this.x, this.y);\n\n        this.provider.doHover(screenPos, (hover) => {\n            clearTimeout(this.$timer);\n\n            let description = this.provider.getTooltipText(hover);\n            if (!description || !description.text) {\n                this.hide();\n                return;\n            }\n            var descriptionText = description.text;\n\n            var session = this.provider.editor.session;\n            var docPos = session.screenToDocumentPosition(screenPos.row, screenPos.column);\n            var token = session.getTokenAt(docPos.row, docPos.column + 1);\n\n            var row = description.range?.start.row ?? docPos.row;\n            var column = description.range?.start.column ?? token.start;\n\n            if (this.descriptionText != descriptionText) {\n                this.hide();\n                this.setHtml(descriptionText);\n                this.descriptionText = descriptionText;\n            } else if (this.row == row && this.column == column && this.isOpen) {\n                return;\n            }\n\n            this.row = row;\n            this.column = column;\n\n            this.$timer = setTimeout(() => {\n                var position = renderer.textToScreenCoordinates(row, column);\n\n                var cursorPos = this.provider.editor.getCursorPosition();\n\n                this.show(null, position.pageX, position.pageY);\n\n                var labelHeight = this.getElement().getBoundingClientRect().height;\n                let rect = renderer.scroller.getBoundingClientRect();\n\n                var isTopdown = true;\n                if (row > cursorPos.row)\n                    // don't obscure cursor\n                    isTopdown = true;\n                else if (row < cursorPos.row)\n                    // don't obscure cursor\n                    isTopdown = false;\n                if (position.pageY - labelHeight + renderer.lineHeight < rect.top)\n                    // not enough space above us\n                    isTopdown = true;\n                else if (position.pageY + labelHeight > rect.bottom)\n                    isTopdown = false;\n\n                if (!isTopdown)\n                    position.pageY -= labelHeight;\n                else\n                    position.pageY += renderer.lineHeight;\n\n                this.getElement().style.maxWidth = rect.width - (position.pageX - rect.left) + \"px\";\n                this.show(null, position.pageX, position.pageY);\n            }, 500);\n        });\n    };\n\n    onMouseMove (e: MouseEvent) {\n        this.x = e.clientX;\n        this.y = e.clientY;\n        this.update();\n    };\n\n    onMouseOut (e: MouseEvent) {\n        if (e && e.relatedTarget == this.getElement())\n            return;\n        this.$hide();\n    };\n\n    onTooltipMouseOut(e: MouseEvent) {\n        //@ts-ignore\n        if (e && e.currentTarget.contains(e.relatedTarget))\n            return;\n        this.onMouseMove(e);\n    }\n\n    $hide() {\n        clearTimeout(this.$timer);\n        this.hide();\n    }\n\n    destroy() {\n        this.$hide();\n        event.removeListener(this.provider.editor.renderer.scroller, \"mousemove\", this.onMouseMove);\n        event.removeListener(this.provider.editor.renderer.scroller, \"mouseout\", this.onMouseOut);\n        event.removeListener(this.provider.editor.renderer.scroller, \"mousedown\", this.$hide);\n        event.removeListener(this.getElement(), \"mouseout\", this.onTooltipMouseOut);\n        this.provider.editor.off(\"change\", this.$hide);\n        this.provider.editor.off(\"mousewheel\", this.$hide);\n    };\n\n}","import {MessageController} from \"./message-controller\";\nimport {AceLinters} from \"./services/language-service\";\nimport ServiceOptionsMap = AceLinters.ServiceOptionsMap;\nimport * as lintersCSS from \"./css/linters.css\";\nimport * as dom from \"ace-code/src/lib/dom\";\n\nexport function setLanguageGlobalOptions<T extends keyof ServiceOptionsMap>(serviceName: T, options: ServiceOptionsMap[T], merge = false) {\n    MessageController.instance.setGlobalOptions(serviceName, options, merge);\n}\n\nexport function registerStyles() {\n    dom.importCssString(lintersCSS, \"linters.css\");\n}\n\nexport {LanguageProvider} from \"./language-provider\";","import {Ace, Range as AceRange} from \"ace-code\";\nimport {MessageController} from \"./message-controller\";\nimport {DescriptionTooltip} from \"./components/description-tooltip\";\nimport {AceLinters} from \"./services/language-service\";\nimport Tooltip = AceLinters.Tooltip;\nimport TextEdit = AceLinters.TextEdit;\nimport {FormattingOptions} from \"vscode-languageserver-types\";\nimport {MarkDownConverter} from \"./type-converters/converters\";\nimport {CommonConverter} from \"./type-converters/common-converters\";\n\nlet showdown = require('showdown');\n\nexport class LanguageProvider<OptionsType = AceLinters.ServiceOptions> {\n    editor: Ace.Editor;\n    private $descriptionTooltip;\n    private readonly $markdownConverter: MarkDownConverter;\n    private $message: MessageController;\n    private $options: OptionsType;\n    private readonly $fileName;\n    deltaQueue: Ace.Delta[];\n\n    private static extensions = {\n        \"typescript\": \"ts\",\n        \"javascript\": \"js\"\n    }\n\n    constructor(editor: Ace.Editor, options: OptionsType, markdownConverter?: MarkDownConverter) {\n        this.editor = editor;\n        this.$options = options;\n        this.$markdownConverter = markdownConverter ?? new showdown.Converter();\n        this.$fileName = this.editor.session[\"id\"] + \".\" + LanguageProvider.getExtension(this.$mode);\n    }\n\n    private static getExtension(mode: string) {\n        mode = mode.replace(\"ace/mode/\", \"\");\n        return this.extensions[mode] ?? mode;\n    }\n\n    set options(options: OptionsType) {\n        this.$options = options;\n        this.$changeOptions();\n    }\n\n    setOption<T extends keyof OptionsType>(optionName: T, optionValue: OptionsType[T]) {\n        this.$options[optionName] = optionValue;\n        this.$changeOptions();\n    }\n\n    private $changeListener(delta) {\n        if (!this.deltaQueue) {\n            this.deltaQueue = [];\n            setTimeout(this.$sendDeltaQueue, 0);\n        }\n        if (delta.action == \"insert\")\n            this.deltaQueue.push(delta.start, delta.lines);\n        else this.deltaQueue.push(delta.start, delta.end);\n    }\n\n    private $sendDeltaQueue = () => {\n        let deltas = this.deltaQueue;\n        if (!deltas) return;\n        this.deltaQueue = null;\n        this.$message.change(this.$fileName, deltas, this.editor.session.getValue(), this.editor.session.doc.getLength(), this.validate);\n    };\n\n    private get $editorOptions() {\n        return this.editor.getOptions();\n    }\n\n    private get $mode() {\n        return this.$editorOptions.mode;\n    }\n\n    private get $format(): FormattingOptions {\n        let editorOptions = this.$editorOptions;\n        return {\n            tabSize: editorOptions.tabSize,\n            insertSpaces: editorOptions.useSoftTabs\n        }\n    }\n\n    async init() {\n        this.$message = MessageController.instance;\n        await new Promise(\n            (resolve) => {\n                this.$message.init(this.$fileName, this.editor.getValue(), this.$mode, this.$options, () => {\n                    this.$descriptionTooltip = new DescriptionTooltip(this);\n\n                    this.editor.session.doc.on(\"change\", this.$changeListener.bind(this), true);\n\n                    this.$onInit();\n\n                    // @ts-ignore\n                    this.editor.on(\"changeMode\", () => {\n                        this.$message.changeMode(this.$fileName, this.editor.getValue(), this.$mode, this.$options, this.$onInit);\n                    });\n                    resolve(true);\n                });\n            });\n    }\n\n    private $changeOptions = () => {\n        this.$message.changeOptions(this.$fileName, this.$options, this.$onInit);\n    }\n\n    private $onInit = () => {\n        this.validate();\n        this.registerCompleters();\n    }\n\n    validate = () => {\n        this.$message.doValidation(this.$fileName, (annotations: Ace.Annotation[]) => {\n            this.editor.session.clearAnnotations();\n            if (annotations && annotations.length > 0) {\n                this.editor.session.setAnnotations(annotations);\n            }\n        });\n    }\n\n    doHover(position: Ace.Point, callback?: (hover: Tooltip) => void) {\n        this.$message.doHover(this.$fileName, position, callback);\n    }\n\n    getTooltipText(hover: Tooltip) {\n        if (!hover)\n            return;\n        let text = hover.content.type === CommonConverter.TooltipType.markdown ? CommonConverter.cleanHtml(this.$markdownConverter.makeHtml(hover.content.text)) : hover.content.text;\n        return {text: text, range: hover.range}\n    }\n\n    format = () => {\n        let selectionRanges = this.editor.getSelection().getAllRanges();\n        let $format = this.$format;\n        if (!selectionRanges || selectionRanges[0].isEmpty()) {\n            let row = this.editor.session.getLength();\n            let column = this.editor.session.getLine(row).length - 1;\n            selectionRanges = [new AceRange(0, 0, row, column)];\n        }\n        for (let range of selectionRanges) {\n            this.$message.format(this.$fileName, range, $format, this.$applyFormat);\n        }\n    }\n\n    private $applyFormat = (edits: TextEdit[]) => {\n        for (let edit of edits) {\n            this.editor.session.doc.replace(CommonConverter.toRange(edit.range), edit.newText); //we need this to\n            // mirror Range\n        }\n    }\n\n    doComplete(callback?: (CompletionList) => void) {\n        let cursor = this.editor.getCursorPosition();\n        this.$message.doComplete(this.$fileName, cursor, callback);\n    }\n\n    registerCompleters() {\n        this.editor.completers = [\n            {\n                getCompletions: async (editor, session, pos, prefix, callback) => {\n                    this.doComplete((completions) => {\n                        callback(null, CommonConverter.normalizeRanges(completions));\n                    });\n                },\n                getDocTooltip: (item) => {\n                    if (!item[\"isResolved\"]) {\n                        this.$message.doResolve(this.$fileName, item, (completion) => {\n                            item[\"isResolved\"]  = true;\n                            item.docText = completion.docText;\n                            if (completion.docHTML) {\n                                item.docHTML = completion.docHTML;\n                            } else if (completion[\"docMarkdown\"]) {\n                                item.docHTML = CommonConverter.cleanHtml(this.$markdownConverter.makeHtml(completion[\"docMarkdown\"]));\n                            }\n                            this.editor[\"completer\"].updateDocTooltip();\n                        })\n                    }\n                    return item;\n                }\n            }\n        ];\n    }\n\n    dispose() {\n        this.$message.dispose(this.$fileName);\n    }\n}","import {Ace} from \"ace-code\";\nimport {\n    BaseMessage,\n    ChangeMessage,\n    ChangeModeMessage, ChangeOptionsMessage,\n    CompleteMessage,\n    DeltasMessage, DisposeMessage,\n    FormatMessage, GlobalOptionsMessage,\n    HoverMessage,\n    InitMessage,\n    ResolveCompletionMessage,\n    ValidateMessage\n} from \"./message-types\";\nimport * as oop from \"ace-code/src/lib/oop\";\nimport {EventEmitter} from \"ace-code/src/lib/event_emitter\";\nimport {FormattingOptions} from \"vscode-languageserver-types\";\nimport ServiceOptionsMap = AceLinters.ServiceOptionsMap;\nimport {AceLinters} from \"./services/language-service\";\nimport MyWorker from \"./web.worker.ts\";\n\nexport class MessageController {\n    private static _instance: MessageController;\n\n    static get instance() {\n        if (!MessageController._instance) {\n            MessageController._instance = new MessageController();\n        }\n        return MessageController._instance;\n    }\n\n    private $worker: Worker;\n\n    constructor() {\n        this.$worker = new MyWorker();\n\n        this.$worker.onmessage = (e) => {\n            let message = e.data;\n\n            this[\"_signal\"](message.type + \"-\" + message.sessionId, message.value);\n        };\n    }\n\n    init(sessionId: string, value: string, mode: string, options: AceLinters.ServiceOptions, callback?: () => void) {\n        this.postMessage(new InitMessage(sessionId, value, mode, options), callback);\n    }\n\n    doValidation(sessionId: string, callback?: (annotations: Ace.Annotation[]) => void) {\n        this.postMessage(new ValidateMessage(sessionId), callback);\n    }\n\n    doComplete(sessionId: string, position: Ace.Point, callback?: (completionList: Ace.Completion[]) => void) {\n        this.postMessage(new CompleteMessage(sessionId, position), callback);\n    }\n\n    doResolve(sessionId: string, completion: Ace.Completion, callback?: (completion: Ace.Completion) => void) {\n        this.postMessage(new ResolveCompletionMessage(sessionId, completion), callback);\n    }\n\n    format(sessionId: string, range: Ace.Range, format: FormattingOptions, callback?: (edits: AceLinters.TextEdit[]) => void) {\n        this.postMessage(new FormatMessage(sessionId, range, format), callback);\n    }\n\n    doHover(sessionId: string, position: Ace.Point, callback?: (hover: AceLinters.Tooltip) => void) {\n        this.postMessage(new HoverMessage(sessionId, position), callback)\n    }\n\n    change(sessionId: string, deltas: Ace.Delta[], value: string, docLength: number, callback?: () => void) {\n        let message: BaseMessage;\n        if (deltas.length > 50 && deltas.length > docLength >> 1) {\n            message = new ChangeMessage(sessionId, value);\n        } else {\n            message = new DeltasMessage(sessionId, deltas);\n        }\n\n        this.postMessage(message, callback)\n    }\n\n    changeMode(sessionId: string, value: string, mode: string, options: AceLinters.ServiceOptions, callback?: () => void) {\n        this.postMessage(new ChangeModeMessage(sessionId, value, mode, options), callback);\n    }\n\n    changeOptions(sessionId: string, options: AceLinters.ServiceOptions, callback?: () => void) {\n        this.postMessage(new ChangeOptionsMessage(sessionId, options), callback);\n    }\n\n    dispose(sessionId: string, callback?: () => void) {\n        this.postMessage(new DisposeMessage(sessionId), callback);\n    }\n\n    setGlobalOptions<T extends keyof ServiceOptionsMap>(serviceName: T, options: ServiceOptionsMap[T], merge = false) {\n        this.$worker.postMessage(new GlobalOptionsMessage(serviceName, options, merge));\n    }\n\n    postMessage(message: BaseMessage, callback?: (any) => void) {\n        if (callback) {\n            let eventName = message.type.toString() + \"-\" + message.sessionId;\n            let callbackFunction = (data) => {\n                this[\"off\"](eventName, callbackFunction);\n                callback(data);\n            }\n            this[\"on\"](eventName, callbackFunction);\n        }\n        this.$worker.postMessage(message);\n    }\n}\n\noop.implement(MessageController.prototype, EventEmitter);","import {Ace} from \"ace-code\";\nimport {FormattingOptions} from \"vscode-languageserver-types\";\nimport {AceLinters} from \"./services/language-service\";\nimport ServiceOptions = AceLinters.ServiceOptions;\n\nexport abstract class BaseMessage {\n    abstract type: MessageType;\n    sessionId: string;\n\n    protected constructor(sessionId) {\n        this.sessionId = sessionId;\n    }\n}\n\nexport class InitMessage extends BaseMessage {\n    type: MessageType = MessageType.init;\n    mode: string;\n    options: { [key: string]: any };\n    value: string;\n\n    constructor(sessionId: string, value: string, mode: string, options: { [p: string]: any }) {\n        super(sessionId);\n        this.options = options;\n        this.mode = mode;\n        this.value = value;\n    }\n}\n\nexport class FormatMessage extends BaseMessage {\n    type: MessageType = MessageType.format;\n    value: Ace.Range;\n    format: FormattingOptions;\n\n    constructor(sessionId: string, value: Ace.Range, format) {\n        super(sessionId);\n        this.value = value;\n        this.format = format;\n    }\n}\n\nexport class CompleteMessage extends BaseMessage {\n    type: MessageType = MessageType.complete;\n    value: Ace.Point;\n\n    constructor(sessionId: string, value: Ace.Point) {\n        super(sessionId);\n        this.value = value;\n    }\n}\n\nexport class ResolveCompletionMessage extends BaseMessage {\n    type: MessageType = MessageType.resolveCompletion;\n    value: Ace.Completion;\n\n    constructor(sessionId: string, value: Ace.Completion) {\n        super(sessionId);\n        this.value = value;\n    }\n}\n\nexport class HoverMessage extends BaseMessage {\n    type: MessageType = MessageType.hover;\n    value: Ace.Point;\n\n    constructor(sessionId: string, value: Ace.Point) {\n        super(sessionId);\n        this.value = value;\n    }\n}\n\nexport class ValidateMessage extends BaseMessage {\n    type: MessageType = MessageType.validate;\n\n    constructor(sessionId: string) {\n        super(sessionId);\n    }\n}\n\nexport class ChangeMessage extends BaseMessage {\n    type: MessageType = MessageType.change;\n    value: string;\n\n    constructor(sessionId: string, value: string) {\n        super(sessionId);\n        this.value = value;\n    }\n}\n\nexport class DeltasMessage extends BaseMessage {\n    type: MessageType = MessageType.applyDelta;\n    value: Ace.Delta[];\n\n    constructor(sessionId: string, value: Ace.Delta[]) {\n        super(sessionId);\n        this.value = value;\n    }\n}\n\nexport class ChangeModeMessage extends BaseMessage {\n    type: MessageType = MessageType.changeMode;\n    mode: string;\n    options: ServiceOptions;\n    value: string;\n\n    constructor(sessionId: string, value: string, mode: string, options: ServiceOptions) {\n        super(sessionId);\n        this.value = value;\n        this.mode = mode;\n        this.options = options;\n    }\n}\n\nexport class ChangeOptionsMessage extends BaseMessage {\n    type: MessageType = MessageType.changeOptions;\n    options: ServiceOptions;\n\n    constructor(sessionId: string, options: ServiceOptions) {\n        super(sessionId);\n        this.options = options;\n    }\n}\n\nexport class DisposeMessage extends BaseMessage {\n    type: MessageType = MessageType.dispose;\n\n    constructor(sessionId: string) {\n        super(sessionId);\n    }\n}\n\nexport class GlobalOptionsMessage {\n    type: MessageType = MessageType.globalOptions;\n    serviceName: string\n    options: ServiceOptions;\n    merge: boolean\n\n    constructor(serviceName: string, options: ServiceOptions, merge: boolean) {\n        this.serviceName = serviceName;\n        this.options = options;\n        this.merge = merge;\n    }\n}\n\nexport enum MessageType {\n    init, format, complete, resolveCompletion, change, hover, validate, applyDelta, changeMode, changeOptions, dispose, globalOptions\n}","import {Ace, Range as AceRange} from \"ace-code\";\n\nexport namespace CommonConverter {\n    export function normalizeRanges(completions: Ace.Completion[]): Ace.Completion[] {\n        return completions && completions.map((el) => {\n            if (el[\"range\"]) {\n                el[\"range\"] = toRange(el[\"range\"]);\n            }\n            return el;\n        })\n    }\n\n    export function cleanHtml(html: string) {//TODO: improve this\n        return html.replace(/<a\\s/, \"<a target='_blank' \");\n    }\n\n    export function toRange(range: { start, end }): Ace.Range | undefined {\n        if (!range || !range.start || !range.end) {\n            return;\n        }\n        return AceRange.fromPoints(range.start, range.end);\n    }\n\n    export enum TooltipType {\n        plainText,\n        markdown\n    }\n}\n","import {\n    CompletionEntryDetails,\n    CompletionInfo,\n    Diagnostic,\n    JSDocTagInfo,\n    QuickInfo,\n    TextChange,\n    TextSpan\n} from \"../services/typescript/lib/typescriptServices\";\nimport {Ace, Range as AceRange} from \"ace-code\";\nimport * as ts from \"../services/typescript/lib/typescriptServices\";\nimport {CommonConverter} from \"./common-converters\";\nimport Tooltip = AceLinters.Tooltip;\nimport {AceLinters} from \"../services/language-service\";\n\nexport function fromTsDiagnostics(diagnostics: Diagnostic[], doc: Ace.Document): Ace.Annotation[] {\n    return diagnostics && diagnostics.map((el) => {\n        let start = el.start ?? 0;\n        let length = el.length ?? 1; //TODO:\n        let pos = doc.indexToPosition(start, 0);\n        return {\n            row: pos.row,\n            column: pos.column,\n            text: parseMessageText(el.messageText),\n            type: fromTsCategory(el.category)\n        };\n    });\n}\n\nexport function toTsOffset(range: Ace.Range, doc: Ace.Document) {\n    return {\n        start: toIndex(range.start, doc),\n        end: toIndex(range.end, doc)\n    }\n}\n\nexport function toIndex(point: Ace.Point, doc: Ace.Document) {\n    return doc.positionToIndex(point);\n}\n\nexport function parseMessageText(\n    diagnosticsText: string | ts.DiagnosticMessageChain | undefined,\n): string {\n    if (typeof diagnosticsText === 'string') {\n        return diagnosticsText;\n    } else if (diagnosticsText === undefined) {\n        return '';\n    }\n    let result = '';\n    result += diagnosticsText.messageText;\n    if (diagnosticsText.next) {\n        for (let next of diagnosticsText.next) {\n            result += parseMessageText(next);\n        }\n    }\n    return result;\n}\n\nexport function fromTsCategory(category: ts.DiagnosticCategory) {\n    switch (category as DiagnosticCategory) {\n        case DiagnosticCategory.Error:\n            return \"error\";\n        case DiagnosticCategory.Suggestion:\n        case DiagnosticCategory.Message:\n            return \"info\";\n        case DiagnosticCategory.Warning:\n            return \"warning\";\n    }\n    return \"info\";\n}\n\nexport function toAceTextEdits(textEdits: TextChange[], doc: Ace.Document): AceLinters.TextEdit[] {\n    return textEdits && textEdits.reverse().map((el) => {\n        return {\n            range: toRange(el.span, doc),\n            newText: el.newText\n        };\n    })\n}\n\nexport function toRange(textSpan: TextSpan, doc: Ace.Document): Ace.Range | undefined {\n    if (!textSpan) {\n        return;\n    }\n    let start = doc.indexToPosition(textSpan.start, 0);\n    let end = doc.indexToPosition(textSpan.start + textSpan.length, 0);\n    return AceRange.fromPoints(start, end);\n}\n\nexport function toPoint(index: number, doc: Ace.Document): Ace.Point {\n    return doc.indexToPosition(index, 0);\n}\n\nexport function toTooltip(hover: QuickInfo, doc: Ace.Document): Tooltip {\n    if (!hover) {\n        return;\n    }\n    let documentation = hover.documentation ? hover.documentation.map((displayPart) => displayPart.text).join('') : \"\";\n    let tags = hover.tags ? hover.tags.map((tag) => tagToString(tag)).join('  \\n') : \"\";\n    let displayParts = hover.displayParts ? hover.displayParts.map((displayPart) => displayPart.text).join('') : \"\";\n    let contents = ['```typescript\\n' + displayParts + '```\\n',\n        (documentation + (tags ? '\\n' + tags : '')).replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")];\n    return {content: {type: CommonConverter.TooltipType.markdown, text: contents.join(\"\\n\")}, range: toRange(hover.textSpan, doc)};\n}\n\nfunction tagToString(tag: JSDocTagInfo): string {\n    let tagLabel = `*@${tag.name}*`;\n    if (tag.name === 'param' && tag.text) {\n        const [paramName, ...rest] = tag.text;\n        tagLabel += `\\`${paramName.text}\\``;\n        if (rest.length > 0) tagLabel += ` — ${rest.map((r) => r.text).join(' ')}`;\n    } else if (Array.isArray(tag.text)) {\n        tagLabel += ` — ${tag.text.map((r) => r.text).join(' ')}`;\n    } else if (tag.text) {\n        tagLabel += ` — ${tag.text}`;\n    }\n    return tagLabel;\n}\n\nexport function toCompletions(completionInfo: CompletionInfo, doc: Ace.Document, fileName: string, position: number): Ace.Completion[] {\n    return completionInfo && completionInfo.entries.map((entry) => {\n        let completion = {\n            meta: entry.kind,\n            caption: entry.name,\n            value: \"\",\n            snippet: entry.name,\n            score: parseInt(entry.sortText),\n            position: position,\n            entry: entry.name\n        };\n\n        if (entry.replacementSpan) {\n            const p1 = toPoint(entry.replacementSpan.start, doc);\n            const p2 = toPoint(entry.replacementSpan.start + entry.replacementSpan.length, doc);\n            completion[\"range\"] = CommonConverter.toRange({start: p1, end: p2});\n        }\n\n        return  completion;\n    });\n}\n\nexport function toResolvedCompletion(entry: CompletionEntryDetails): Ace.Completion {\n    return {\n        meta: entry.kind,\n        caption: entry.name,\n        value: \"\",\n        snippet: entry.name,\n        docHTML: entry.displayParts.map((displayPart) => displayPart.text).join('')\n    };\n}\n\nexport enum ScriptKind {\n    Unknown = 0,\n    JS = 1,\n    JSX = 2,\n    TS = 3,\n    TSX = 4,\n    External = 5,\n    JSON = 6,\n    /**\n     * Used on extensions that doesn't define the ScriptKind but the content defines it.\n     * Deferred extensions are going to be included in all project contexts.\n     */\n    Deferred = 7\n}\n\nexport enum ScriptTarget {\n    ES3 = 0,\n    ES5 = 1,\n    ES2015 = 2,\n    ES2016 = 3,\n    ES2017 = 4,\n    ES2018 = 5,\n    ES2019 = 6,\n    ES2020 = 7,\n    ES2021 = 8,\n    ESNext = 99,\n    JSON = 100,\n    Latest = 99\n}\n\nexport enum DiagnosticCategory {\n    Warning = 0,\n    Error = 1,\n    Suggestion = 2,\n    Message = 3\n}\n\nexport enum JsxEmit {\n    None = 0,\n    Preserve = 1,\n    React = 2,\n    ReactNative = 3,\n    ReactJSX = 4,\n    ReactJSXDev = 5\n}","import \"ace-code/src/ext/language_tools\";\nimport {htmlContent} from \"./docs-example/html-example\";\n\nlet event = require(\"ace-code/src/lib/event\");\nlet {HashHandler} = require(\"ace-code/src/keyboard/hash_handler\");\nlet keyUtil = require(\"ace-code/src/lib/keys\");\nimport {Mode as HTMLMode} from \"ace-code/src/mode/html\";\nimport {Mode as CSSMode} from \"ace-code/src/mode/css\";\nimport {Mode as LessMode} from \"ace-code/src/mode/less\";\nimport {Mode as SCSSMode} from \"ace-code/src/mode/scss\";\nimport {Mode as JsonMode} from \"ace-code/src/mode/json\";\nimport {Mode as Json5Mode} from \"ace-code/src/mode/json5\";\nimport {Mode as TypescriptMode} from \"ace-code/src/mode/typescript\";\nimport {Mode as JavascriptMode} from \"ace-code/src/mode/javascript\";\nimport {Mode as TSXMode} from \"ace-code/src/mode/tsx\";\nimport {Mode as LuaMode} from \"ace-code/src/mode/lua\";\n\nlet theme = require(\"ace-code/src/theme/textmate\");\nimport * as ace from \"ace-code\";\nimport {cssContent} from \"./docs-example/css-example\";\nimport {lessContent} from \"./docs-example/less-example\";\nimport {scssContent} from \"./docs-example/scss-example\";\nimport {typescriptContent, typescriptContent1} from \"./docs-example/typescript-example\";\nimport {jsonSchema, jsonContent, jsonSchema2} from \"./docs-example/json-example\";\nimport {jsContent} from \"./docs-example/javascript-example\";\n\nimport {tsxContent} from \"./docs-example/tsx-example\";\nimport {jsxContent} from \"./docs-example/jsx-example\";\nimport {json5Content, json5Schema} from \"./docs-example/json5-example\";\n\nimport {registerStyles, LanguageProvider, setLanguageGlobalOptions, AceLinters} from \"ace-linters\";\nimport {ScriptTarget, JsxEmit} from \"ace-linters/type-converters/typescript-converters\";\nimport {luaContent} from \"./docs-example/lua-example\";\n\nregisterStyles();\nsetLanguageGlobalOptions(\"typescript\", {\n    compilerOptions: {\n        allowJs: true,\n        target: ScriptTarget.ESNext,\n        jsx: JsxEmit.Preserve\n    }\n});\n\nsetLanguageGlobalOptions(\"json\", {\n    jsonSchemas: [\n        {\n            uri: \"common-form.schema.json\",\n            schema: jsonSchema2\n        }\n    ]\n});\n\nsetLanguageGlobalOptions(\"json5\", {\n    jsonSchemas: [\n        {\n            uri: \"json5Schema\",\n            schema: json5Schema\n        }\n    ]\n});\n\nlet modes = [\n    {name: \"json\", mode: JsonMode, content: jsonContent, options: {jsonSchemaUri: \"common-form.schema.json\"}},\n    {name: \"json5\", mode: Json5Mode, content: json5Content, options: {jsonSchemaUri: \"json5Schema\"}},\n    {name: \"html\", mode: HTMLMode, content: htmlContent},\n    {name: \"css\", mode: CSSMode, content: cssContent},\n    {name: \"less\", mode: LessMode, content: lessContent},\n    {name: \"scss\", mode: SCSSMode, content: scssContent},\n    {name: \"typescript\", mode: TypescriptMode, content: typescriptContent},\n    {name: \"typescript\", mode: TypescriptMode, content: typescriptContent1},\n    {name: \"javascript\", mode: JavascriptMode, content: jsContent},\n    {name: \"tsx\", mode: TSXMode, content: tsxContent},\n    {name: \"jsx\", mode: JavascriptMode, content: jsxContent, options: {jsx: true}}, //TODO:\n    {name: \"lua\", mode: LuaMode, content: luaContent}\n\n]\nlet i = 0;\nlet activeProvider: LanguageProvider;\nfor (let mode of modes) {\n    let el = document.createElement(\"div\");\n    let modeName = createModeNameText(el, mode.name);\n    let closeButton = createCloseButton(el);\n    let editorContainer = document.createElement(\"div\");\n    editorContainer.setAttribute(\"id\", \"container\" + i);\n    editorContainer.style.height = \"300px\";\n    el.appendChild(editorContainer);\n    el.style.width = \"49%\";\n    el.style.float = \"left\";\n    document.body.appendChild(el);\n\n    let editor = ace.edit(\"container\" + i);\n    editor.setOptions({\n        enableBasicAutocompletion: true,\n        enableLiveAutocompletion: true\n    });\n    editor.setTheme(theme);\n    editor.setOptions({\"customScrollbar\": true})\n    editor.session.setValue(mode.content);\n    editor.session.setMode(new mode.mode());\n    let options = mode.options ?? {};\n    let provider = new LanguageProvider(editor, options);\n    provider.init();\n    activeProvider ??= provider;\n    editor.on(\"focus\", () => {\n        activeProvider = provider;\n    });\n\n    closeButton.onclick = () => {\n        provider.dispose();\n        provider = null;\n        editor.destroy();\n        editor.container.remove();\n        modeName.remove();\n        closeButton.remove();\n    }\n    i++;\n}\n\nsetLanguageGlobalOptions(\"json\", {\n    jsonSchemas: [{\n        uri: \"colors.schema.json\",\n        schema: jsonSchema\n    },]\n}, true);\n\nfunction createCloseButton(el) {\n    let closeButton = document.createElement(\"span\");\n    closeButton.innerText = \"X\";\n    closeButton.style.cursor = \"pointer\";\n    el.appendChild(closeButton);\n    return closeButton;\n}\n\nfunction createModeNameText(el, name) {\n    let modeName = document.createElement(\"p\");\n    modeName.innerText = name;\n    modeName.style.margin = \"0\";\n    modeName.style.paddingRight = \"10px\";\n    modeName.style.float = \"left\";\n    el.appendChild(modeName);\n    return modeName;\n}\n\nlet menuKb = new HashHandler([\n    {\n        bindKey: \"Ctrl-`\",\n        name: \"format\",\n        exec: function () {\n            activeProvider.format();\n        }\n    }\n]);\n\nevent.addCommandKeyListener(window, function (e, hashId, keyCode) {\n\n    let keyString = keyUtil.keyCodeToString(keyCode);\n    let command = menuKb.findKeyCommand(hashId, keyString);\n    if (command) {\n        command.exec();\n    }\n});","export var cssContent = `.text-layer {\n    font: 12px Monaco, \"Courier New\", monospace;\n    font-size: 3vmin;\n    cursor: text;\n}\n\n.blinker {\n    animation: blink 1s linear infinite alternate;\n}\n\n@keyframes blink {\n    0%, 40% {\n        opacity: 0; /*\n        */\n        opacity: 1\n    }\n\n    40.5%, 100% {\n        opacity: 1\n    }\n}\n\n@document url(http://c9.io/), url-prefix(http://ace.c9.io/build/),\ndomain(c9.io), regexp(\"https:.*\") /**/\n{\n    /**/\n    img[title]:before\n    {\n        content: attr(title) \"\\AImage \\\n            retrieved from\"\n        attr(src); /*\n            */\n        white-space: pre;\n        display: block;\n        background: url(asdasd); \"err\n    }\n}\n\n@viewport {\n    min-zoom: 1;\nmax-zoom: 200%;\nuser-zoom: fixed;\n}\n`","export var htmlContent = `\n    <!DOCTYPE html>\n<html>\n    <head>\n\n    <style type=\"text/css\">\n        .text-layer {\n            font-family: Monaco, \"Courier New\", monospace;\n            font-size: 12px;\n            cursor: text;\n        }\n    </style>\n\n    </head>\n    <body>\n        <h1 style=\"color:red\">Juhu Kinners</h1>\n    </body>\n</html>\n    `;","export var jsContent = `\nclass Point {\n  x;\n  y;\n \n  // Normal signature with defaults\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n}\n`","export var jsonContent =  `{\n       \"name\": 12\n       \"country\": \"Ireland\"\n    }`;\n\nexport var jsonSchema = `{\n  \"definitions\": {\n    \"color\": {\n      \"type\": \"string\",\n      \"enum\": [\"red\", \"orange\", \"yellow\", \"green\", \"blue\", \"purple\", \"pink\"]\n    }\n  }\n}\n`;\n\nexport var jsonSchema2 = `  {\"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"type\": \"string\",\n      \"minLength\": 3,\n      \"maxLength\": 50\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"maximum\": 120\n    },\n    \"email\": {\n      \"type\": \"string\",\n      \"format\": \"email\"\n    },\n    \"favoriteColor\": {\n      \"$ref\": \"colors.schema.json#/definitions/color\"\n    }\n  },\n  \"required\": [\"name\", \"age\", \"email\", \"favoriteColor\"],\n  \"additionalProperties\": false\n  }\n`","export var json5Content =  `{\n       \"name\": 12,\n       \"country\": \"Ireland\", //trailing comma + comment\n    }`;\n\nexport var json5Schema = `{\n    \"type\": \"object\",\n    \"description\": \"a very special object\",\n    \"properties\": {\n        \"name\": {\n            \"type\": \"string\",\n            \"description\": \"Some name\"\n        },\n        \"country\": {\n            \"type\": \"string\",\n            \"enum\": [\"Ireland\", \"Iceland\"],\n            \"description\": \"Country name\"\n        },\n        \"age\": {\n            \"type\": \"number\",\n            \"description\": \"Age of object\"\n        }\n    }\n}`;","export var jsxContent = `\nvar mode = <div> \n    Javascript + <b> JSX </b> \n</div>;\n\nfunction test () {\n    return <Component/>\n}\n\nclass Component extends HTMLFrameElement {\n    \n}\n`","export var lessContent = `/* styles.less */\n\n@base: #f938ab;\n\n.box-shadow(@style, @c) when (iscolor(@c)) {\n    box-shadow:         @style @c;\n    -webkit-box-shadow: @style @c;\n    -moz-box-shadow:    @style @c;\n}\n.box-shadow(@style, @alpha: 50%) when (isnumber(@alpha)) {\n    .box-shadow(@style, rgba(0, 0, 0, @alpha));\n}\n\n// Box styles\n.box { \n    color: saturate(@base, 5%);\n    border-color: lighten(@base, 30%);\n    \n    div { .box-shadow(0 0 5px, 30%) }\n  \n    a {\n        color: @base;\n        \n        &:hover {\n            color: lighten(@base, 50%);\n        }\n    }\n}\n\n`","export var luaContent = `--[[--\nnum_args takes in 5.1 byte code and extracts the number of arguments\nfrom its function header.\n--]]--\n\nfunction int(t)\n\\treturn t:byte(1)+t:byte(2)*0x100+t:byte(3)*0x10000+t:byte(4)*0x1000000\nend\n\nfunction num_args(func)\n\\tlocal dump = string.dump(func)\n\\tlocal offset, cursor = int(dump:sub(13)), offset + 26\n\\t--Get the params and var flag (whether there's a ... in the param)\n\\treturn dump:sub(cursor):byte(), dump:sub(cursor+1):byte()\nend\n\n-- Usage:\nnum_args(function(a,b,c,d, ...) end) -- return 4, 7\n\n-- Python styled string format operator\nlocal gm = debug.getmetatable(\"\")\n\ngm.__mod=function(self, other)\n    if type(other) ~= \"table\" then other = {other} end\n    for i,v in ipairs(other) do other[i] = tostring(v) end\n    return self:format(unpack(other))\nend\n\nprint([===[\n    blah blah %s, (%d %d)\n]===]%{\"blah\", num_args(int)})\n\n--[=[--\ntable.maxn is deprecated, use # instead.\n--]=]--\nprint(table.maxn{1,2,[4]=4,[8]=8) -- outputs 8 instead of 2\n\nprint(5 --[[ blah ]])\n`","export var scssContent = `/* style.scss */\n\n#navbar {\n    $navbar-width: 800px;\n    $items: 5;\n    $navbar-color: #ce4dd6;\n\n    width: $navbar-width;\n    border-bottom: 2px solid $navbar-color;\n\n    li {\n        float: left;\n        width: $navbar-width/$items - 10px;\n\n          background-color: lighten($navbar-color, 20%);\n        &:hover {\n            background-color: lighten($navbar-color, 10%);\n        }\n    }\n}\n`","export var tsxContent = `\nvar mode: HTMLElement = <div> \n    Typescript + <b> JSX </b> \n</div>;\n\nfunction test () {\n    return <Component/>\n}\n\nclass Component extends HTMLFrameElement {\n    \n}\n`","export var typescriptContent = `\nclass Greeter {\n  readonly name: string = \"world\";\n  doc: HTMLDocument;\n  someTest: SomeTestClassName;\n \n  constructor(otherName?: string) {\n    if (otherName !== undefined) {\n      this.name = otherName;\n    }\n  }\n \n  err() {\n    this.name = \"not ok\";\n  }\n}\nconst g = new Greeter();\ng.name = \"also not ok\";\n`\n\nexport var typescriptContent1 = `\n//This created only to show that docs are dependent on each other\nclass SomeTestClassName {\n\n}\n`","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"bundle.web.worker.worker.js\");\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(2991);\n"],"names":["dom","event","Range","Editor","EditSession","UndoManager","Renderer","exports","config","edit","el","options","_id","document","getElementById","Error","env","editor","value","test","tagName","oldNode","createElement","parentNode","replaceChild","textContent","innerHTML","doc","createEditSession","onResize","resize","bind","textarea","addListener","window","on","removeListener","container","text","mode","setUndoManager","VirtualRenderer","version","oop","EventEmitter","Anchor","row","column","this","$onChange","onChange","attach","setPosition","$pointsInOrder","point1","point2","equalPointsInOrder","bColIsAfter","implement","getPosition","$clipPositionToDocument","getDocument","$insertRight","delta","start","end","point","moveIfEqual","deltaIsInsert","action","deltaRowShift","deltaColShift","deltaStart","deltaEnd","$getTransformedPoint","noClip","pos","old","_signal","detach","off","getLength","Math","max","getLine","length","min","call","prototype","docLines","doNotValidate","startColumn","line","lines","substring","args","concat","splice","apply","endColumn","endRow","HashHandler","AcePopup","util","lang","snippetManager","Autocomplete","autoInsert","autoSelect","exactMatch","gatherCompletionsId","keyboardHandler","bindKeys","commands","blurListener","changeListener","mousedownListener","mousewheelListener","changeTimer","delayedCall","updateCompletions","tooltipTimer","updateDocTooltip","$init","popup","body","documentElement","e","insertMatch","stop","focus","getPopup","openPopup","prefix","keepPopupPosition","setData","completions","filtered","filterText","keyBinding","addKeyboardHandler","renderer","setRow","setTheme","getTheme","setFontSize","getFontSize","lineHeight","layerConfig","$cursorLayer","getPixelPosition","base","left","getTextLeftOffset","rect","getBoundingClientRect","top","offset","scrollLeft","gutterWidth","show","cancel","removeKeyboardHandler","hideDocTooltip","isOpen","hide","activated","cursor","selection","lead","schedule","activeElement","textInput","getElement","fromTooltip","relatedTarget","tooltipNode","contains","goTo","where","data","getData","getRow","startOperation","command","name","completer","range","ranges","getAllRanges","i","session","remove","snippet","insertSnippet","$insertString","execCommand","endOperation","inVirtualSelectionMode","replace","forEachSelection","getSelectionRange","compareRange","insert","keepOrder","deleteSuffix","result","tabstopManager","gotoPageUp","gotoPageDown","gatherCompletions","callback","getSession","getCursorPosition","getCompletionPrefix","createAnchor","matches","total","completers","forEach","getCompletions","err","results","finished","showPopup","getTextRange","setFilter","FilteredList","detachIfFinished","processResults","isImmediate","immediateResults","indexOf","cancelContextMenu","$mouseHandler","all","selected","getHoveredRow","some","getDocTooltip","completerId","id","docText","docHTML","showDocTooltip","item","className","style","margin","pointerEvents","tabIndex","onblur","onclick","onTooltipClick","appendChild","bottom","display","innerWidth","right","isTopdown","offsetTop","offsetHeight","isFocused","removeChild","a","target","nodeName","href","rel","destroy","for","get","$shared","$sharedInstance","once","startCommand","exec","bindKey","array","str","lastIndexOf","filterCompletions","sort","b","$score","caption","localeCompare","prev","filter","items","needle","upper","toUpperCase","lower","toLowerCase","loop","index","distance","lastIndex","matchMask","penalty","substr","fullMatchIndex","j","i1","i2","score","push","$singleLineEditor","$maxLines","setHighlightActiveLine","setShowPrintMargin","setShowGutter","setHighlightGutterLine","$focusTimeout","$highlightTagPending","importCssString","content","setStyle","setOption","lastMouseEvent","noop","$isFocused","restartTimer","element","opacity","$keepTextAreaAtCursor","highlight","$searchHighlight","clazz","getDocumentPosition","moveToPosition","selectionMarker","hoverMarker","Infinity","addMarker","setSelectOnHover","val","removeMarker","x","y","scrollTop","setHoverMarker","$pos","t","$textLayer","childNodes","firstRow","selectedNode","removeCssClass","addCssClass","hideHoverMarker","suppressRedraw","_emit","bgTokenizer","$tokenizeRow","tokens","addToken","type","lastI","sub","slice","meta","message","$updateOnChange","$computeWidth","screenWidth","list","setValue","stringRepeat","clearSelection","moveCursorTo","scrollCursorIntoView","topdownOnly","screenHeight","innerHeight","maxH","$borderSize","$maxPixelHeight","offsetWidth","$padding","$imageSize","splitRegex","wordScore","prefixPos","fromPoints","split","getWordIndex","words","getValue","wordScores","Object","create","currentWord","word","idx","abs","wordDistance","keys","map","parForEach","fn","completed","arLength","ID_REGEX","retrievePrecedingIdentifier","regex","buf","reverse","join","retrieveFollowingIdentifier","identifierRegexps","identifierRegex","BackgroundTokenizer","tokenizer","running","states","currentLine","self","$worker","workerStart","Date","endLine","startLine","len","processedLines","setTimeout","fireUpdateEvent","setTokenizer","setDocument","lastRow","first","last","startRow","scheduleStart","Array","unshift","clearTimeout","getTokens","getState","state","getLineTokens","cleanup","removeAllListeners","bidiUtil","bidiRE","BidiHandler","bidiMap","currentRow","charWidths","EOL","showInvisibles","isRtlDir","$isRtl","wrapIndent","EOF","RLE","contentWidth","fontMetrics","rtlLineOffset","wrapOffset","isMoveLeftOperation","seenBidi","isBidiRow","screenRow","docRow","splitIndex","updateRowLine","updateBidiMap","bidiLevels","getDocumentRow","rowCache","$screenRowCache","$getRowCacheIndex","$docRowCache","getSplitIndex","currentIndex","prevIndex","undefined","endOfLine","charAt","$useWrapMode","splits","$wrapData","indent","L","DOT","size","shift","ch","isFullWidth","charCodeAt","getScreenTabSize","$main","width","textCharTypes","hasBidiCharacters","doBidiReorder","markAsDirty","updateCharacterWidths","characterWidth","$characterSize","bidiCharWidth","$measureCharWidth","EN","ON_R","R","AN","R_H","B","setShowInvisibles","setEolChar","eolChar","setContentWidth","isRtlLine","setRtlDirection","getSelectionAnchor","$bidiHandler","removeInLine","getPosLeft","col","leftBoundary","logicalIdx","getOverwrite","visualIdx","getVisualFromLogicalIdx","levels","getSelections","startCol","endCol","level","selections","selColMin","selColMax","isSelected","isSelectedPrev","selectionStart","logIdx","visIdx","logicalFromVisual","offsetToCol","posX","charWidth","$cancelT","module","lineMode","pasteCancelled","now","MultiHashHandler","CommandManager","platform","byName","setDefaultHandler","inherits","isArray","$readOnly","readOnly","$checkCommandState","isAvailable","returnValue","toggleRecording","$inReplay","recording","macro","pop","$addCommandToMacro","oldMacro","replay","trimMacro","m","win","mac","description","loadModule","init","showSettingsMenu","showErrorMarker","scrollIntoView","selectAll","centerSelection","isNaN","gotoLine","prompt","$type","toggleFold","multiSelectAction","toggleFoldWidget","foldAll","foldAllComments","unfold","findNext","findPrevious","isEmpty","selectWord","Search","toggleOverwrite","getSelection","selectFileStart","aceCommandGroup","navigateFileStart","selectUp","navigateUp","times","selectFileEnd","navigateFileEnd","selectDown","navigateDown","selectWordLeft","navigateWordLeft","selectLineStart","navigateLineStart","selectLeft","navigateLeft","selectWordRight","navigateWordRight","selectLineEnd","navigateLineEnd","selectRight","navigateRight","selectPageDown","scrollPageDown","selectPageUp","scrollPageUp","scrollBy","jumpToMatching","passEvent","$copyWithEmptySelection","getLineRange","getRange","$handlePaste","removeLines","duplicateSelection","sortLines","toggleCommentLines","toggleBlockComment","modifyNumber","undo","redo","copyLinesUp","moveLinesUp","copyLinesDown","moveLinesDown","removeToLineStart","removeToLineEnd","Number","MAX_VALUE","removeWordLeft","removeWordRight","blockOutdent","blockIndent","splitLine","transposeLetters","transposeSelections","autoIndent","setRange","openLink","isBackwards","getSelectionLead","selectionEnd","firstLineEndCol","selectedCount","insertLine","curLine","stringTrimLeft","stringTrimRight","getNewLineCharacter","selectTo","rangeList","newRanges","exitMultiSelectMode","addRange","moveTo","foldToLevel","defaultCommands","selectMoreLines","selectMore","multiSelect","rangeCount","joinSelections","splitIntoLines","alignCursors","findAll","multiSelectCommands","inMultiSelectMode","net","AppConfig","packaged","workerPath","modePath","themePath","basePath","suffix","$moduleUrls","loadWorkerFromBlob","sharedPopups","useStrictCSP","key","hasOwnProperty","set","setDefaultValue","copyObject","$modes","moduleUrl","component","parts","sep","re","RegExp","path","setModuleUrl","subst","loader","moduleName","cb","console","error","setLoader","$loading","onLoad","moduleType","afterLoad","listeners","loadScript","reportErrorIfPathIsNotConfigured","applyDelta","Document","textOrLines","$lines","insertMergedLines","getAllLines","$split","$detectNewLine","match","$autoNewLine","$newLineMode","setNewLineMode","newLineMode","getNewLineMode","isNewLine","getLines","getLinesForRange","l","insertLines","warn","insertFullLines","removeFullLines","insertNewLine","position","insertInLine","clippedPos","clonePos","$clipPosition","deleteFirstNewLine","deleteLastNewLine","deletedLines","removeNewLine","applyDeltas","deltas","revertDeltas","revertDelta","isInsert","comparePoints","$splitAndapplyLargeDelta","$safeApplyDelta","docLength","MAX","from","to","chunk","indexToPosition","newlineLength","positionToIndex","Selection","TextMode","SearchHighlight","$breakpoints","$decorations","$frontMarkers","$backMarkers","$markerId","$undoSelect","$foldData","$uid","toString","getTokenizer","_self","onChangeFold","resetOptions","setMode","destroyed","resetCaches","$resetRowCache","cacheArray","low","hi","mid","c","$modified","$rowLengthCache","fold","removedFolds","$updateInternalDataOnChange","$fromUndo","$undoManager","add","folds","mergeUndoDeltas","$informUndoManager","getUndoManager","reset","getTokenAt","token","undoManager","addSession","$syncInformUndoManager","markUndoGroup","$defaultUndoManager","hasUndo","hasRedo","addSelection","startNewGroup","getTabString","getUseSoftTabs","getTabSize","setUseSoftTabs","$useSoftTabs","$mode","$indentWithTabs","setTabSize","tabSize","$tabSize","isTabStop","setNavigateWithinSoftTabs","navigateWithinSoftTabs","getNavigateWithinSoftTabs","$navigateWithinSoftTabs","$overwrite","setOverwrite","overwrite","addGutterDecoration","removeGutterDecoration","getBreakpoints","setBreakpoints","rows","clearBreakpoints","setBreakpoint","clearBreakpoint","inFront","marker","addDynamicMarker","update","markerId","getMarkers","setRegexp","highlightLines","setAnnotations","annotations","$annotations","getAnnotations","clearAnnotations","getWordRange","inToken","tokenRe","nonTokenRe","getAWordRange","wordRange","setUseWorker","useWorker","getUseWorker","$useWorker","onReloadTokenizer","$modeId","$onChangeMode","Mode","$id","$isPlaceholder","oldMode","$stopWorker","$startWorker","attachToSession","$options","wrapMethod","$wrapMethod","$setFolding","foldingRules","terminate","createWorker","getMode","$scrollTop","setScrollTop","getScrollTop","$scrollLeft","setScrollLeft","getScrollLeft","getScreenWidth","lineWidgets","getLineWidgetMaxWidth","lineWidgetsWidth","w","lineWidgetWidth","force","$wrapLimit","cache","longestScreenLine","foldIndex","foldLine","foldStart","$getStringScreenWidth","undoChanges","dontSelect","addFolds","selectionBefore","fromJSON","$getUndoSelection","redoChanges","selectionAfter","setUndoSelect","enable","isUndo","compare","setStart","setEnd","moveText","fromRange","toPosition","copy","getFoldsInRange","toRange","rowDiff","collDiff","oldStart","newStart","clone","indentRows","indentString","outdentRows","rowRange","collapseRows","deleteRange","$moveLines","dir","getRowFoldStart","getRowFoldEnd","diff","$clipRowToDocument","duplicateLines","$clipColumnToRow","$clipRangeToDocument","$wrapLimitRange","setUseWrapMode","useWrapMode","$updateWrapData","getUseWrapMode","setWrapLimitRange","adjustWrapLimit","desiredLimit","$printMargin","limits","wrapLimit","$constrainWrapLimit","getWrapLimit","setWrapLimit","limit","getWrapLimitRange","$updating","foldLines","removeFolds","getFoldLine","addRemoveChars","shiftRow","foldLineBefore","merge","arr","cmp","compareInside","$updateRowLengthCache","wrapData","walk","placeholder","lastColumn","walkTokens","$getDisplayTokens","PLACEHOLDER_START","PLACEHOLDER_BODY","$computeWrapSplits","displayLength","lastSplit","lastDocSplit","isCode","$wrapAsCode","indentedSoftWrap","$indentedSoftWrap","maxIndent","floor","addSplit","screenPos","indentation","getWrapIndent","minSplit","n","maxScreenColumn","screenColumn","getRowLength","h","rowCount","getRowLineCount","getRowWrapIndent","screenToDocumentPosition","getScreenLastRowColumn","documentToScreenColumn","getDocumentLastRowColumn","docColumn","documentToScreenRow","getDocumentLastRowColumnPosition","getRowSplitData","screenToDocumentRow","screenToDocumentColumn","offsetX","rowLength","doCache","maxRow","getNextFoldLine","getFoldDisplayLine","idxToPosition","documentToScreenPosition","foldStartRow","getFoldAt","rowEnd","textLine","wrapRow","screenRowOffset","rowsAbove","getScreenLength","screenRows","foldData","$getWidgetScreenLength","$setFontMetrics","fm","$enableVarChar","getCharacterWidth","defineOptions","wrap","parseInt","$wrap","handlesSet","initialValue","firstLineNumber","useSoftTabs","foldStyle","setFoldStyle","TokenIterator","findMatchingBracket","chr","charBeforeCursor","$findClosingBracket","$findOpeningBracket","getBracketRange","before","bracketPos","getMatchingBracketRanges","bracketsRegExp","startRange","$brackets","bracket","typeRe","openBracket","depth","iterator","getCurrentToken","stepForward","valueIndex","getCurrentTokenColumn","getCurrentTokenRow","stepBackward","closingBracket","valueLength","getMatchingTags","$findTagName","$findClosingTag","$findOpeningTag","found","backward","prevToken","currentTag","tag","openTagStart","openTagName","foundOpenTagEnd","openTagEnd","closeTagStart","closeTagName","closeTagEnd","openTag","closeTag","stepCount","tmpToken","RangeList","Fold","sameRow","subFolds","consumePoint","anchor","restorePoint","setFoldLine","subFold","collapseChildren","addSubFold","isEqual","afterStart","firstConsumed","containsRange","consumedFolds","k","restoreRange","FoldLine","addFold","compareEnd","compareStart","containsRow","lastEnd","isNewRow","getNextFoldTo","kind","ret","log","foldBefore","newFoldLine","foldLineNext","lastFoldEndColumn","side","isEnd","isStart","foundFolds","getFoldsInRangeList","getAllFolds","getFoldStringAt","trim","lastFold","startFoldLine","getFoldedRowCount","$addFoldLine","added","startFold","endFold","removeFold","cloneFolds","expandFold","expandFolds","location","expandInner","outermostFolds","isRowFolded","startFoldRow","getDisplayLine","$cloneFoldData","fd","tryToUnfold","comparePoint","getCommentFoldRange","isMultiLine","$row","foldWidgets","getFoldWidget","getFoldWidgetRange","$foldStyles","$foldStyle","$foldMode","foldMode","$updateFoldWidgets","$tokenizerUpdateFoldWidgets","updateFoldWidgets","tokenizerUpdateFoldWidgets","getParentFoldRangeData","ignoreCurrent","fw","firstRange","onFoldWidgetClick","children","domEvent","shiftKey","ctrlKey","metaKey","siblings","altKey","$toggleFoldWidget","srcElement","toggleParent","getCursor","useragent","TextInput","MouseHandler","FoldHandler","KeyBinding","clipboard","$toDestroy","getContainerElement","isMac","getTextAreaContainer","$search","$historyTracker","$initOperationListeners","_$emitInputEvent","_","setSession","setOptions","$opResetTimer","curOp","$lastSel","docChanged","selectionChanged","prevOp","commandEvent","previousCommand","toJSON","scrollSelectionIntoView","animateScrolling","sel","$mergeableCommands","$mergeUndoDeltas","mergeableCommands","shouldMerge","mergeNextCommand","sequenceStartTime","setKeyboardHandler","$keybindingId","handler","getKeyboardHandler","oldSession","$onDocumentChange","$onTokenizerUpdate","$onChangeTabSize","$onChangeWrapLimit","$onChangeWrapMode","$onChangeFold","$onChangeFrontMarker","$onChangeBackMarker","$onChangeBreakpoint","$onChangeAnnotation","$onCursorChange","$onScrollTopChange","$onScrollLeftChange","$onSelectionChange","onDocumentChange","onChangeMode","onTokenizerUpdate","onChangeTabSize","onChangeWrapLimit","onChangeWrapMode","onChangeFrontMarker","onChangeBackMarker","onChangeBreakpoint","onChangeAnnotation","onCursorChange","onScrollTopChange","onScrollLeftChange","onSelectionChange","updateFull","oldEditor","cursorPos","theme","unsetStyle","getOption","computedStyle","fontSize","$highlightBrackets","$highlightPending","$bracketHighlight","markerIds","$getDirectionForHighlight","tagNamesRanges","getMatching","markerType","getHighlightIndentGuides","$highlightIndentGuide","blur","onFocus","showCursor","visualizeFocus","onBlur","hideCursor","visualizeBlur","$cursorChange","updateCursor","$updateHighlightActiveLine","updateLines","scrollToY","scrollToX","$highlightActiveLine","$selectionStyle","$selectionColorConflict","$minLines","$highlightLineMarker","$selectionMarker","getSelectionStyle","$highlightSelectedWord","$getSelectionHighLightRegexp","$assembleRegExp","wholeWord","caseSensitive","wordWithBoundary","updateFrontMarkers","updateBackMarkers","updateBreakpoints","updateText","getSelectedText","getCopyText","nl","copyLine","onCopy","onCut","onPaste","isFullLine","pasted","getBehavioursEnabled","transform","transformAction","search","d","lineState","shouldOutdent","checkOutdent","setSelectionRange","$enableAutoIndent","lineIndent","getNextLineIndent","autoOutdent","selectedRange","currIndent","prevLineState","prevLine","tab","$getIndent","onTextInput","composition","applyComposition","r","extendLeft","extendRight","restoreStart","restoreEnd","onCommandKey","hashId","keyCode","setScrollSpeed","speed","getScrollSpeed","setDragDelay","dragDelay","getDragDelay","setSelectionStyle","shouldHighlight","getHighlightActiveLine","getHighlightGutterLine","setHighlightSelectedWord","getHighlightSelectedWord","setAnimatedScroll","shouldAnimate","getAnimatedScroll","getShowInvisibles","setDisplayIndentGuides","getDisplayIndentGuides","setHighlightIndentGuides","showPrintMargin","getShowPrintMargin","setPrintMarginColumn","getPrintMarginColumn","setReadOnly","getReadOnly","setBehavioursEnabled","enabled","setWrapBehavioursEnabled","getWrapBehavioursEnabled","setShowFoldWidgets","getShowFoldWidgets","setFadeFoldWidgets","fade","getFadeFoldWidgets","new_range","moveCursorToPosition","swap","originalRange","$getSelectedRows","count","getNumberAt","_numberRx","s","amount","charRange","parseFloat","isFinite","nr","fp","decimals","pow","nnr","toFixed","replaceRange","toggleWord","$toggleWordPairs","currentState","currWordStart","wordParts","curLength","itLength","that","reg","wordPairs","negate","firstCondition","escapeRegExp","res","findLinkAt","columnPosition","previousPosition","currentPosition","url","open","endPoint","moved","toOrientedRange","moveBy","fromOrientedRange","totalDiff","rangeIndex","subRows","onCompositionStart","compositionState","showComposition","onCompositionUpdate","setCompositionText","onCompositionEnd","hideComposition","getFirstVisibleRow","getLastVisibleRow","isRowVisible","isRowFullyVisible","getFirstFullyVisibleRow","getLastFullyVisibleRow","$getVisibleRowCount","getScrollBottomRow","getScrollTopRow","$moveByPage","select","height","$moveSelection","moveCursorBy","scrollToRow","scrollToLine","center","animate","alignCursor","getCursorPositionScreen","expand","tokenCount","matchType","bracketType","brackets","tagsRanges","lineNumber","navigateTo","moveCursorLeft","moveCursorRight","moveCursorLineStart","moveCursorLineEnd","moveCursorFileEnd","moveCursorFileStart","moveCursorWordRight","moveCursorWordLeft","replacement","find","replaced","$tryReplace","replaceAll","input","getLastSearchOptions","getOptions","mixin","newRange","preventScroll","revealRange","backwards","skipCurrent","setAutoScrollEditorIntoView","shouldScroll","$scrollAnchor","scrollAnchor","cssText","insertBefore","firstChild","onChangeSelection","onBeforeRender","onAfterRender","searchBox","$pixelPos","$resetCursorStyle","$cursorStyle","cursorLayer","setSmoothBlinking","isBlinking","setCssClass","selectionStyle","highlightActiveLine","highlightSelectedWord","copyWithEmptySelection","setCopyWithEmptySelection","cursorStyle","values","behavioursEnabled","wrapBehavioursEnabled","enableAutoIndent","autoScrollEditorIntoView","hidden","showLineNumbers","$gutterLayer","setShowLineNumbers","$loop","CHANGE_GUTTER","$relativeLineNumbers","relativeNumberRenderer","relativeLineNumbers","$showLineNumbers","$updatePlaceholder","$composition","placeholderNode","$placeholder","customScrollbar","hScrollBarAlwaysVisible","vScrollBarAlwaysVisible","highlightGutterLine","animatedScroll","printMarginColumn","printMargin","fadeFoldWidgets","showFoldWidgets","displayIndentGuides","highlightIndentGuides","showGutter","fontFamily","maxLines","minLines","scrollPastEnd","fixedWidthGutter","hasCssTransforms","maxPixelHeight","useTextareaForIME","scrollSpeed","dragEnabled","focusTimeout","tooltipFollowsMouse","getText","getWidth","lastLineNumber","$renderer","LineWidgets","widgetManager","oldWidget","getWidgetsAtRow","gutterAnno","comparator","binarySearch","annotation","matched","findAnnotations","sc","fixedWidth","coverGutter","arrow","kb","keyString","isMousePressed","removeLineWidget","addLineWidget","onmousedown","textCompleter","keyWordCompleter","snippetCompleter","scopes","getActiveScopes","snippetMap","scope","snippets","tabTrigger","record","escapeHTML","p1","p2","p3","setCompleters","addCompleter","expandSnippet","expandWithTab","loadSnippetsForMode","files","loadSnippetFile","snippetFileId","modes","snippetFilePath","snippetText","parseSnippetFile","register","includeScopes","doLiveAutocomplete","hasCompleter","enableBasicAutocompletion","addCommand","removeCommand","enableLiveAutocompletion","enableSnippets","keyUtil","KEY_MODS","commandKeyBinding","addCommands","$singleCommand","isDefault","_buildKeyHash","keepCommand","ckb","keyId","cmdGroup","keyPart","chain","binding","parseKeys","_addCommandToBinding","removeCommands","keyList","FUNCTION_KEYS","modifier","findKeyCommand","handleKeyboard","$keyChain","getStatusText","$editor","$data","$handlers","$defaultHandler","Boolean","$callKeyboardHandlers","toExecute","success","stopEvent","keyCodeToString","BROKEN_SETDATA","isChrome","USE_IE_MIME_TYPE","isIE","HAS_FOCUS_ARGS","MAX_LINE_LENGTH","KEYS","MODS","isIOS","valueResetRegex","isMobile","host","setAttribute","copied","inComposition","sendingText","tempStyle","commandMode","ignoreFocusEvents","lastValue","lastSelectionStart","lastSelectionEnd","lastRestoreEnd","isEdge","hasFocus","resetSelection","$focusScroll","isTransformed","ancestors","parentElement","nodeType","getRootNode","p","removeAttribute","commandName","isUserAction","newValue","afterContextMenu","nextLine","inputHandler","setInputHandler","getInputHandler","sendText","fromInput","inserted","endIndex","shouldReset","isAndroid","onInput","inputType","handleClipboardData","forceIEMime","clipboardData","mime","doCopy","isCut","preventDefault","addCommandKeyListener","isAllSelected","cancelComposition","markerRange","context","compositionStartOffset","closeTimeout","syncComposition","onContextMenuClose","$isMousePressed","$moveTextAreaToCursor","msGetInputContext","getInputContext","setCommandMode","onContextMenu","moveToMouse","bringToFront","borderTopWidth","borderLeftWidth","maxTop","clientHeight","move","translate","clientX","clientY","isWin","capture","scroller","typingResetTimeout","typing","addEventListener","detectArrowKeys","up","home","option","down","removeEventListener","addIosSelectionHandler","Cursor","parentEl","isVisible","blinkInterval","smoothBlinking","cursors","addCursor","$updateCursors","$updateOpacity","$startCssAnimation","animationDuration","$isAnimating","$stopCssAnimation","setPadding","padding","setBlinking","blinking","setBlinkInterval","removeCursor","clearInterval","intervalId","timeoutId","$isSmoothBlinking","HAS_CSS_ANIMATION","blink","setInterval","onScreen","firstRowScreen","isCursorInView","pixelPos","maxHeight","$selectionMarkers","cursorIndex","drawCursor","round","$setOverwrite","C","Decorator","parent","canvas","pixelRatio","canvasHeight","scrollHeight","heightRatio","canvasWidth","minDecorationHeight","halfMinDecorationHeight","zIndex","colors","dark","light","$updateDecorators","isDark","ctx","getContext","clearRect","priorities","priority","compensateFold","compensateFoldRows","currentY","y1","y2","yCenter","fillStyle","fillRect","USE_OBSERVER","ResizeObserver","FontMetrics","charCount","$setMeasureNodeStyles","$measureNode","$addObserver","checkForSizeChanges","isRoot","visibility","whiteSpace","font","overflow","$measureSizes","fontWeight","boldSize","charSizes","allowBoldFonts","$observer","observe","$pollSizeChanges","$pollSizeChangesTimer","onIdle","setPolling","node","charSize","disconnect","$getZoom","getZoom","getComputedStyle","zoom","$initTransformMeasureNodes","els","buildDom","transformCoordinates","clientPos","elPos","solve","l1","l2","det","mul","m1","m2","ut","u","f","Lines","Gutter","$showFoldWidgets","$updateAnnotations","$offsetCoefficient","onCreateCell","textNode","createTextNode","foldWidget","rowInfo","annoText","html","gutterOffset","oldLastRow","moveContainer","$updateCursorRow","cell","createCell","$renderCell","$updateGutterWidth","gutterRenderer","$firstLineNumber","lastLineText","$fixedWidth","$computePadding","ceil","$highlightGutterLine","$cursorRow","updateLineHighlight","$cursorCell","cells","scrollLines","oldConfig","pageChanged","$renderLines","fragment","breakpoints","decorations","foldHeight","computeLineHeight","computeLineTop","getShowLineNumbers","paddingLeft","borderRightWidth","paddingRight","getRegion","cellCache","newConfig","screenTop","screenPage","$cacheCell","createFragment","insertAdjacentElement","initElement","Marker","setMarkers","markers","elt","css","clipRows","toScreenRange","$getTop","drawFullLineMarker","drawScreenLineMarker","drawTextMarker","drawMultiLineMarker","drawSingleLineMarker","childElementCount","lastChild","stringBuilder","extraStyle","curr","next","lineRange","range1","drawBidiSingleLineMarker","radiusClass","extraLength","Text","$updateEolChar","EOF_CHAR","EOL_CHAR_LF","EOL_CHAR_CRLF","EOL_CHAR","TAB_CHAR","SPACE_CHAR","MAX_CHUNK_LENGTH","getLineHeight","$fontMetrics","measure","$computeTabString","showSpaces","showTabs","showEOL","$highlightIndentGuides","$tabStrings","tabStr","span","$indentGuideRe","spaceClass","spaceContent","tabClass","tabContent","lineElements","lineElementsIdx","heightChanged","lineElement","removeChildren","$renderLine","$renderLinesFragment","lineEl","$useLineGroups","$textToken","$renderTokenInChunks","newScreenColumn","valueChunk","tokenChunk","$renderToken","valueFragment","simpleSpace","controlCharacter","cjkSpace","cjk","cloneNode","com","classes","renderIndentGuide","cols","$highlightIndentGuideMarker","indentLevel","initialIndent","elementIndentLevel","currentIndent","$renderHighlightIndentGuide","$clearActiveIndentGuide","classList","$setIndentGuideActive","$createLineElement","$renderWrappedLine","chars","splitChars","$renderOverflowMessage","$renderSimpleLine","overflowEl","$getFoldLineTokens","lastLineEl","invisibleEl","renderTokens","addTokens","optionsProvider","optList","optionNames","opt","forwardTo","arguments","reportError","msg","$defaultOptions","obj","opts","setDefaultValues","optionHash","hiLevel","lastArabic","hasUBAT_B","hasUBAT_S","impTab_LTR","impTab_RTL","ET","BN","UnicodeTBL00","UnicodeTBL20","_invertLevel","lev","_array","lo","tmp","_getCharClass","types","ix","wType","nType","cType","rtlCandidate","_getCharacterType","uc","isRtl","charTypes","impTab","prevState","newClass","newLevel","newState","condPos","_computeLevels","rowMap","strictCSP","refs","txt","childIndex","getDocumentHead","head","getElementsByTagName","ns","createElementNS","ownerDocument","createDocumentFragment","hasCssClass","toggleCssClass","include","hasCssString","sheets","querySelectorAll","removeElementById","cssCache","insertPendingStyles","importCssStylsheet","uri","scrollbarWidth","inner","minWidth","outer","noScrollbar","withScrollbar","clientWidth","styles","property","HAS_CSS_TRANSFORMS","HI_DPI","devicePixelRatio","isChromeOS","div","animationName","tx","ty","activeListenerOptions","pressedKeys","ts","getListenerOptions","createComment","passive","detectListenerOptionsSupport","EventListener","elem","destroyer","stopPropagation","getButton","button","eventHandler","releaseCaptureHandler","onMouseUp","addMouseWheelListener","deltaX","deltaY","deltaMode","DOM_DELTA_PIXEL","wheelX","wheelY","DOM_DELTA_LINE","DOM_DELTA_PAGE","addMultiMouseDownListener","elements","timeouts","callbackName","startX","startY","timer","clicks","eventNames","onMousedown","detail","isNewClick","_clicks","getModifierHash","normalizeCommandKeys","getModifierState","altGr","keyLocation","timeStamp","MODIFIER_KEYS","defaultPrevented","PRINTABLE_KEYS","resetPressedKeys","getModifierString","isOldGecko","isOpera","lastKeyDownKeyCode","lastDefaultPrevented","postMessage","isOldIE","postMessageId","nextTick","messageName","listener","$idleBlocked","timeout","$idleBlockId","blockIdle","delay","nextFrame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","oRequestAnimationFrame","propagationStopped","_dispatchEvent","eventName","_eventRegistry","_defaultHandlers","defaultHandler","newCallback","Promise","resolve","handlers","_disabled_","disabled","removeDefaultHandler","capturing","Keys","enter","escape","esc","del","mods","String","fromCharCode","stringReverse","string","trimBeginRegexp","trimEndRegexp","copyArray","deepCopy","arrayToMap","createMap","props","arrayRemove","getMatchOffsets","regExp","deferredCall","fcn","deferred","isPending","defaultTimeout","xhr","XMLHttpRequest","onreadystatechange","readyState","responseText","send","src","onload","isAbort","qualifyURL","ctor","superCtor","super_","constructor","enumerable","writable","configurable","proto","OS","LINUX","MAC","WINDOWS","getOS","isLinux","_navigator","navigator","os","ua","userAgent","appName","isGecko","isMozilla","opera","isWebKit","isAIR","MSStream","updateOnChange","renderWidgets","measureWidgets","_changedWidgets","$onChangeEditor","updateOnFold","_inDocument","removed","$updateRows","noWidgets","$oldWidget","$registerLineWidget","pixelHeight","$fold","onWidgetChanged","w1","changedWidgets","coverLine","fullWidth","scrollBar","Behaviour","$behaviours","addBehaviours","behaviours","inherit","getBehaviours","CstyleBehaviour","CssBehaviour","SAFE_INSERT_IN_TOKENS","SAFE_INSERT_BEFORE_TOKENS","contextCache","defaultQuotes","initContext","autoInsertedBrackets","autoInsertedRow","autoInsertedLineEnd","maybeInsertedBrackets","maybeInsertedRow","maybeInsertedLineStart","maybeInsertedLineEnd","getWrapped","opening","closing","isSaneInsertion","braces","recordAutoInsert","recordMaybeInsert","isAutoInsertedClosing","popAutoInsertedClosing","isMaybeInsertedClosing","clearMaybeInsertedClosing","openBracePos","next_indent","quotes","$quotes","lineCommentStart","quote","leftChar","rightChar","rightToken","pair","stringBefore","stringAfter","wordRe","isWordBefore","isWordAfter","charBefore","$matchTokenType","iterator2","is","XmlBehaviour","rightSpace","tokenEndColumn","nextToken","tokenRow","tokenColumn","voidElements","nextIndent","CssHighlightRules","MatchingBraceOutdent","WorkerClient","CssCompletions","CStyleFoldMode","HighlightRules","$outdent","$behaviour","$completer","blockComment","worker","attachToDocument","propertyMap","completionsDefined","defineCompletions","inParens","getPropertyValueCompletions","getPropertyCompletions","skipSemicolon","TextHighlightRules","supportType","supportFunction","supportConstant","supportConstantColor","supportConstantFonts","numRe","pseudoElements","pseudoClasses","keywordMapper","createKeywordMapper","$rules","caseInsensitive","defaultToken","strings","consumeLineEnd","escapes","normalizeRules","DocCommentHighlightRules","getTagRule","getStartRule","getEndRule","BaseFoldMode","FoldMode","commentRegex","foldingStartMarker","source","foldingStopMarker","singleLineBlockCommentRe","tripleStarBlockCommentRe","startRegionRe","_getFoldWidgetBase","forceMultiline","getCommentRegionBlock","openingBracketBlock","getSectionRange","closingBracketBlock","startIndent","subRange","indentationBlock","startLevel","MixedFoldMode","XmlFoldMode","optionalTags","luaBlock","tokenRange","stream","indentKeywords","stack","step","getCurrentTokenRange","defaultMode","subModes","$getMode","$tryMode","optionalEndTags","Tag","selfClosing","_getFirstTagInLine","_findEndTagInLine","getCommentFoldWidget","tags","JavaScriptMode","CssMode","HtmlHighlightRules","HtmlFoldMode","HtmlCompletions","fragmentContext","createModeDelegates","globalAttributes","attributeMap","findTagName","getTagCompletions","getAttributeCompletions","getAttributeValueCompletions","getHTMLEntityCompletions","attributes","attribute","attributeName","findAttributeName","JavaScriptHighlightRules","XmlHighlightRules","tagMap","form","img","label","script","table","tbody","td","tfoot","th","tr","addRules","group","tag_stuff","embedTagRules","jsx","getRules","tokenizedLine","endState","identifierRe","escapedRe","comments","noES6","no_regex","onMatch","nextState","JSX","embedRules","tagRegex","jsxTag","jsxJsRule","jsxAttributes","stateName","reference","JsonHighlightRules","Json5HighlightRules","startRules","LessHighlightRules","keywordList","keywords","properties","second","LuaHighlightRules","LuaFoldMode","$defaultBehaviour","outdentKeywords","getNetIndentLevel","startToken","integer","ScssHighlightRules","functions","constants","Tokenizer","unicode","wordChars","$tokenizer","$highlightRules","$highlightRuleConfig","ignoreBlankLines","shouldRemove","minIndent","insertAtTabStop","regexpStart","uncomment","shouldInsertSpace","commentWithSpace","comment","testRemove","after","spaces","lineCommentEnd","regexpEnd","iter","fun","minEmptyLength","colDiff","initialRange","endRange","mapping","$embeds","delegations","functionName","$delegator","method","language","param","getKeywords","append","completionKeywords","rules","rule","ruleItr","aLength","$keywordList","$createKeywordList","escapeRules","getEmbeds","pushState","popState","processState","processed","toInsert","includeName","noEscape","keywordMap","ignoreCase","splitChar","$keywords","tsMode","jsMode","TypeScriptHighlightRules","JSRules","normalize","processing_instruction","doctype","int_subset","cdata","attr_reference","tag_whitespace","whitespace","attribute_value","Tooltip","GutterTooltip","windowWidth","windowHeight","getHeight","mouseHandler","tooltipTimeout","mouseEvent","tooltipAnnotation","gutter","tooltip","hideTooltip","moveTooltip","getShiftKey","$clickSelection","setState","captureMouse","$tooltipFollowsMouse","pixelToScreenCoordinates","setHtml","annotationClassName","setClassName","showTooltip","$gutter","DefaultHandlers","onMouseDown","onDoubleClick","onTripleClick","onQuadClick","onMouseWheel","selectByLines","extendSelectionBy","selectByWords","calcRangeOrientation","ev","inSelection","mousedownEvent","time","startSelect","waitForClickSelection","screenToTextCoordinates","selectToPosition","setCapture","orientedRange","setSelectionAnchor","unitName","cmpStart","cmpEnd","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","releaseCapture","focusWait","ax","ay","bx","by","sqrt","getAccelKey","$lastScroll","vx","vy","allowed","prevScroll","dt","direction","canScroll","isScrollableBy","DragdropHandler","dragImage","dragSelectionMarker","timerId","dragCursor","dragOperation","isInternal","autoScrollStartTime","cursorMovedTime","cursorPointOnCaretMoved","mouseTarget","counter","onDragInterval","prevCursor","vMovement","hMovement","calcDistance","editorRect","offsets","nearestXOffset","nearestYOffset","scrollCursor","vScroll","hScroll","autoScroll","addDragMarker","onMouseMove","clearDragMarker","onDragStart","cancelDrag","draggable","dataTransfer","effectAllowed","setDragImage","clearData","onDragEnd","dropEffect","setCursorStyle","onDragEnter","canAccept","getDropEffect","onDragOver","onMouseMoveTimer","onDragLeave","onDrop","dropData","copyAllowed","copyModifierState","dragWait","startDrag","dragWaitEnd","dragReadyEnd","onMouseDrag","dragDrop","$dragEnabled","eventTarget","unselectable","MouseEvent","$inSelection","selectionRange","DefaultGutterHandler","addTouchListeners","focusEditor","getMouseEventTarget","onMouseEvent","scrollBarV","scrollBarH","gutterEl","$dragDelay","character","insideStart","mousemove","$scrollSpeed","mouseMoveHandler","which","releaseMouse","$mouseMoved","onCaptureEnd","onOperationEnd","onCaptureInterval","$onCaptureMouseMove","isSamePoint","alt","ctrl","accel","selectionMode","isMultiSelect","mouseX","mouseY","screenAnchor","screenCursor","$enableJumpToDef","$blockSelectEnabled","addSelectionMarker","oldRange","rangeAtPoint","removeSelectionMarker","tmpSel","substractPoint","rectSel","blockSelect","newCursor","removeSelectionMarkers","rectangularRangeBlock","updateSelectionMarkers","toSingleRange","onSelectionInterval","touchStartT","lastT","longTouchTimer","animationTimer","pressed","contextMenu","animationSteps","clickCount","vX","vY","showContextMenu","handleClick","getAttribute","class","readText","then","writeText","ontouchstart","ontouchend","pagePos","textToScreenCoordinates","leftOffset","pageX","pageY","hideContextMenu","handleLongTap","touches","touchObj","switchToSelectionMode","anchorPos","offsetLeft","weightedDistance","diff1","diff2","oldScrollTop","getSelectionMarkers","$blockChangeEvents","removeAll","$onAddRange","$onRemoveRange","mergeOverlappingRanges","lastRange","$initRangeList","toggleBlockSelection","includeEmptyLines","xBackwards","startOffsetX","endOffsetX","docEnd","yBackwards","MultiSelect","$multiselectOnSessionChange","$onMultiSelect","$onSingleSelect","onSessionChange","$checkMultiselectChange","altCursor","altDown","setMouseCursor","addAltCursorListeners","selectionMarkerCount","markerList","$onMultiSelectExec","inVirtualMode","cmd","$byLines","cmdResult","anim","$scrollAnimation","additive","skip","screenLead","$desiredColumn","desiredColumn","toRemove","stopAtFirst","sameRowRanges","maxCol","minSpace","spaceOffsets","spaceOffset","fr","lr","guessRange","$reAlignText","forceLeft","startW","textW","endW","isLeftAligned","isRightAligned","alignLeft","enableMultiselect","enableBlockSelect","PlaceHolder","others","mainClass","othersClass","$onUpdate","onUpdate","$others","undoStack","$undoStack","$undostack","$undoStackDepth","setup","other","showOtherMarkers","othersActive","hideOtherMarkers","updateAnchors","lengthDiff","inMainRange","distanceFromStart","newPos","otherPos","updateMarkers","updateMarker","undosRequired","intersects","inside","insideEnd","extend","screenPosStart","screenPosEnd","$bias","pointIndex","excludeEdges","startIndex","addList","containsPoint","clipped","lineDif","RenderLoop","onRender","pending","changes","$recursionLimit","_flush","change","clear","MAX_SCROLL_H","ScrollBar","classSuffix","setVisible","skipEvent","onScroll","coeff","VScrollBar","$scrollbarWidth","$minWidth","setHeight","setInnerHeight","setScrollHeight","HScrollBar","setWidth","setInnerWidth","setScrollWidth","VScrollWidth","HScrollHeight","eType","mousePageY","startTop","thumbTop","scrollTopFromThumbTop","thumbHeight","pageHeight","viewHeight","slideHeight","scrollWidth","mousePageX","startLeft","thumbLeft","scrollLeftFromThumbLeft","thumbWidth","pageWidth","viewWidth","slideWidth","$matchIterator","sr","er","ec","$isMultiLine","prevRange","preserveCase","$disableFakeMultiline","wordBoundary","addWordBoundary","$assembleMultilineRegExp","forEachInLine","MAX_RANGES","markerLayer","renderedMarkerRanges","rangeToAddMarkerTo","rangeAsString","$silent","$cursorChanged","$isEmpty","$keepDesiredColumnOnChange","$anchorChanged","getAnchor","$setSelection","anchorRow","anchorColumn","cursorRow","cursorColumn","wasEmpty","wasMultiselect","mover","moveCursorUp","moveCursorDown","selectAWord","excludeLastChar","rowStart","selectLine","wouldMoveIntoSoftTab","firstColumnPosition","leadingSpace","$useEmacsStyleLineStart","lineEnd","textEnd","moveCursorLongWordRight","rightOfCursor","moveCursorLongWordLeft","leftOfCursor","$shortWordEndIndex","whitespaceRe","moveCursorShortWordRight","moveCursorShortWordLeft","$selectLongWords","widget","docPos","keepDesiredColumn","moveCursorToScreen","getRangeOfMovements","func","r1","VARIABLES","CURRENT_WORD","SELECTION","CURRENT_LINE","PREV_LINE","LINE_INDEX","LINE_NUMBER","SOFT_TABS","TAB_SIZE","CLIPBOARD","FILENAME","FILEPATH","FILENAME_BASE","DIRECTORY","WORKSPACE_NAME","FULLNAME","BLOCK_COMMENT_START","BLOCK_COMMENT_END","LINE_COMMENT","CURRENT_YEAR","date","year","CURRENT_YEAR_SHORT","CURRENT_MONTH","month","CURRENT_MONTH_NAME","CURRENT_MONTH_NAME_SHORT","CURRENT_DATE","day","CURRENT_DAY_NAME","weekday","CURRENT_DAY_NAME_SHORT","CURRENT_HOUR","hour","hour12","CURRENT_MINUTE","minute","CURRENT_SECOND","dateFormat","toLocaleString","SELECTED_TEXT","SnippetManager","snippetNameMap","createTokenizer","TabstopToken","tabstopId","formatMatcher","fmtString","guard","flag","snippetVar","choices","operator","formatString","expectElse","ifEnd","elseEnd","changeCase","local","formatStringVar","formatFunction","tokenizeTmSnippet","startState","getVariableValue","variables","__","tmStrFormat","fmt","fmtTokens","formatted","oldArgs","fmtParts","resolveVariables","gChangeCase","tmFormatFunction","afterNewLine","gotoNext","insertSnippetForSelection","tabString","tabstops","parents","expanding","copyValue","parentId","TabstopManager","selectionId","addTabstops","tabNext","$getScope","inlinePhp","expandSnippetForSelection","findMatchingSnippet","dryRun","replaceBefore","replaceAfter","M__","matchBefore","T__","matchAfter","snippetList","startRe","endRe","triggerRe","endTriggerRe","wrapRegexp","guardedRegexp","addSnippet","unregister","trigger","endTrigger","endGuard","removeSnippet","nameMap","JSON","parse","guardRe","getSnippetByName","$onChangeSelection","$onChangeSession","onChangeSession","$onAfterExec","onAfterExec","$openTabstops","selectedTabstop","removeTabstopMarkers","isRemove","active","parentActive","removeRange","$inChange","updateLinkedFields","hasLinkedRanges","firstNonLinked","linked","original","containsLead","containsAnchor","selectTabstop","addTabstopMarkers","useLink","moveRelative","arg","dest","movePoint","tabstop","cssClass","initialRow","initialColumn","$session","$rowTokens","$tokenIndex","rowTokens","tokenIndex","getCurrentTokenPosition","MAX_TOKEN_COUNT","regExps","matchMappings","ruleRegExps","matchTotal","splitterRurles","adjustedregex","matchcount","groupCount","tokenArray","$arrayTokens","$applyToken","digit","removeCapturingGroups","createSplitterRegexp","$setMaxTokenCount","inChClass","lastCapture","parenOpen","parenClose","square","matchAttempts","skipped","CLASSNAME","$element","$parentNode","setText","$maxRev","$undoDepth","allowMerge","$lastDelta","$keepRedoStack","$redoStack","lastDeltas","undoStackLength","$rev","rev","markIgnored","ignore","getRevision","getDeltas","getChangedRanges","getChangedLines","deltaSet","swapped","swapGroups","rearrangeUndoStack","$redoStackBaseRev","undoSelectionRange","$syncRev","redoStack","deltaSets","moveDeltasByOne","rebaseRedoStack","redoSelectionRange","nextDelta","mark","canUndo","canRedo","bookmark","isAtBookmark","isClean","markClean","$prettyPrint","stringifyDelta","stringifyRange","d1","d2","ds1","ds2","xform","c1","splitDelta","shiftPos","rowsBefore","otherLines","cloneDelta","xformed","code","GutterLayer","MarkerLayer","TextLayer","CursorLayer","HScrollBarCustom","VScrollBarCustom","editorCss","HIDE_TEXTAREA","onGutterResize","$markerBack","textLayer","$markerFront","$horizScroll","$vScroll","scrollMargin","updateCharacterSize","$size","scrollerHeight","scrollerWidth","$dirty","minHeight","v","$renderChanges","defaultView","CHANGE_FULL","CHANGE_CURSOR","CHANGE_MARKER","CHANGE_SCROLL","CHANGE_LINES","CHANGE_TEXT","CHANGE_SIZE","CHANGE_MARKER_BACK","CHANGE_MARKER_FRONT","CHANGE_H_SCROLL","$allowBoldFonts","$updatePrintMargin","onChangeNewLineMode","$changedLines","updateFontSize","$changes","$updateSizeAsync","resizing","$updateCachedSize","$customScrollbar","$updateCustomScrollbar","$extraHeight","oldSize","$showGutter","$computeLayerConfig","availableWidth","$showPrintMargin","$printMarginColumn","$animatedScroll","getShowGutter","$printMarginEl","containerEl","posTop","posLeft","setScrollMargin","sm","setMargin","getHScrollBarAlwaysVisible","$hScrollBarAlwaysVisible","setHScrollBarAlwaysVisible","alwaysVisible","getVScrollBarAlwaysVisible","$vScrollBarAlwaysVisible","setVScrollBarAlwaysVisible","$updateScrollBarV","$scrollPastEnd","$updateScrollBarH","$frozen","freeze","unfreeze","st","$scrollDecorator","$updateLines","$autosize","desiredHeight","$gutterWidth","hideScrollbars","longestLine","$getLongestLine","horizScroll","hScrollChanged","vScrollBefore","vScrollChanged","firstRowHeight","lineCount","$viewMargin","topMargin","bottomMargin","$stopAnimation","alignment","STEPS","$calcSteps","fromValue","toValue","x_min","steps","initialScroll","oldSteps","$timer","endAnimation","scrollTo","canvasPos","$hasCssTransforms","$blockCursor","$useTextareaForIME","removeExtraToken","newToken","$themeId","$theme","attachToShadowRoot","webpackEmptyContext","req","___CSS_LOADER_EXPORT___","cssWithMappingToString","needLayer","modules","media","dedupe","supports","layer","alreadyImportedModules","_k","cssMapping","btoa","base64","unescape","encodeURIComponent","stringify","sourceMapping","sourceURLs","sources","sourceRoot","getDefaultOpts","simple","defaultOptions","omitExtraWLInCodeBlocks","defaultValue","describe","noHeaderId","prefixHeaderId","rawPrefixHeaderId","ghCompatibleHeaderId","rawHeaderId","headerLevelStart","parseImgDimensions","simplifiedAutoLink","excludeTrailingPunctuationFromURLs","literalMidWordUnderscores","literalMidWordAsterisks","strikethrough","tables","tablesHeaderId","ghCodeBlocks","tasklists","smoothLivePreview","smartIndentationFix","disableForced4SpacesIndentedSublists","simpleLineBreaks","requireSpaceBeforeHeadingText","ghMentions","ghMentionsLink","encodeEmails","openLinksInNewWindow","backslashEscapesHTMLTags","emoji","underline","ellipsis","completeHTMLDocument","metadata","splitAdjacentBlockquotes","showdown","parsers","extensions","globalOptions","setFlavor","flavor","github","ghost","vanilla","allOn","allOptionsOn","validate","extension","errMsg","valid","helper","baseMsg","ext","isString","isUndefined","ln","escapeCharactersCallback","wholeMatch","preset","getFlavor","getFlavorOptions","getDefaultOptions","subParser","stdExtName","validExtension","getAllExtensions","removeExtension","resetExtensions","validateExtension","isFunction","prop","escapeCharacters","charsToEscape","afterBackslash","regexString","unescapeHTMLEntities","rgxFindMatchPos","flags","g","matchRecursiveRegExp","matchPos","replaceRecursiveRegExp","repStr","finalStr","lng","bits","regexIndexOf","fromIndex","splitAtIndex","encodeEmailAddress","mail","encode","random","padEnd","targetLength","padString","repeat","alert","regexes","asteriskDashAndColon","emojis","Converter","converterOptions","langExtensions","outputModifiers","setConvFlavor","parsed","raw","format","_parseExtension","legacyExtensionLoading","validExt","listen","gOpt","_constructor","_dispatch","evtName","globals","ei","nText","makeHtml","gHtmlBlocks","gHtmlMdBlocks","gHtmlSpans","gUrls","gTitles","gDimensions","gListLevel","hashLinkCounts","converter","rsp","rgx","rTrimInputText","makeMarkdown","makeMd","HTMLParser","preList","pres","presPH","outerHTML","substitutePreCodeTags","clean","child","nodeValue","nodes","mdDoc","addExtension","useExtension","extensionName","ii","output","getMetadata","getMetadataFormat","_setMetadataPair","_setMetadataFormat","_setMetadataRaw","writeAnchorTag","linkText","linkId","m5","m6","title","wm","mentions","username","lnk","simpleURLRegex","simpleURLRegex2","delimUrlRegex","simpleMailRegex","delimMailRegex","replaceLink","leadingMagicChars","link","m3","trailingPunctuation","trailingMagicChars","lnkTxt","lmc","tmc","replaceMail","bq","pre","codeblock","nextChar","doctypeParsed","charset","leadingText","numSpaces","emojiCode","delim","blockText","blockTags","repFunc","opTagPos","rgx1","patLeft","patRight","subTexts","newSubText1","hashHTMLSpan","repText","num","$1","setextRegexH1","setextRegexH2","spanGamut","hID","headerId","hashBlock","matchFound","hLevel","atxStyle","customizedHeaderId","hText","header","writeImageTag","altText","gDims","parseInside","processListItems","listStr","trimTrailing","isParagraphed","m4","taskbtn","checked","bulletStyle","otp","wm2","styleStartNumber","listType","parseConsecutiveLists","olRgx","ulRgx","counterRxg","parseCL","parseMetadataContents","wholematch","grafs","grafsOut","grafsOutIt","codeFlag","$2","replaceFunc","blankLines","parseCells","parseTable","rawTable","tableLines","sLine","rawHeaders","rawStyles","rawCells","headers","tableHeaderId","tb","tblLgn","buildTable","charCodeToReplace","hasChildNodes","childrenLength","innerTxt","headerLevel","headerMark","hasAttribute","listItems","listItemsLenght","listNum","listItemTxt","childrenLenght","spansOnly","tableArray","headings","headContent","allign","cellContent","cellSpacesCount","strLen","styleTagTransform","setAttributes","domAPI","insertStyleElement","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","lastIdentifiers","newList","newLastIdentifiers","_i","_index","memo","styleTarget","querySelector","HTMLIFrameElement","contentDocument","getTarget","styleElement","nonce","removeStyleElement","styleSheet","provider","onMouseOut","$hide","onTooltipMouseOut","doHover","hover","getTooltipText","descriptionText","labelHeight","maxWidth","currentTarget","DescriptionTooltip","serviceName","MessageController","instance","setGlobalOptions","lintersCSS","LanguageProvider","markdownConverter","$sendDeltaQueue","deltaQueue","$message","$fileName","$changeOptions","changeOptions","$onInit","registerCompleters","doValidation","selectionRanges","$format","$applyFormat","edits","CommonConverter","newText","$markdownConverter","getExtension","optionName","optionValue","$changeListener","$editorOptions","editorOptions","insertSpaces","$descriptionTooltip","changeMode","TooltipType","markdown","cleanHtml","doComplete","normalizeRanges","doResolve","completion","dispose","onmessage","sessionId","_instance","InitMessage","ValidateMessage","CompleteMessage","ResolveCompletionMessage","FormatMessage","HoverMessage","ChangeMessage","DeltasMessage","ChangeModeMessage","ChangeOptionsMessage","DisposeMessage","GlobalOptionsMessage","BaseMessage","MessageType","complete","resolveCompletion","DiagnosticCategory","JsxEmit","ScriptTarget","ScriptKind","toIndex","parseMessageText","diagnosticsText","messageText","fromTsCategory","category","Suggestion","Message","Warning","textSpan","toPoint","diagnostics","textEdits","documentation","displayPart","tagLabel","paramName","rest","tagToString","contents","displayParts","completionInfo","fileName","entries","entry","sortText","replacementSpan","registerStyles","setLanguageGlobalOptions","compilerOptions","allowJs","ESNext","Preserve","jsonSchemas","schema","jsonSchema2","json5Schema","activeProvider","jsonContent","jsonSchemaUri","json5Content","htmlContent","cssContent","lessContent","scssContent","typescriptContent","typescriptContent1","jsContent","tsxContent","jsxContent","luaContent","modeName","innerText","float","createModeNameText","closeButton","createCloseButton","editorContainer","ace","jsonSchema","menuKb","Worker_fn","Worker","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","definition","o","defineProperty","globalThis","Function","Symbol","toStringTag","scriptUrl","importScripts","currentScript","scripts","nc"],"sourceRoot":""}